import{d as Zo}from"./chunk-H2MP374E.js";import{c as K,d as G}from"./chunk-2CQDB45Y.js";import{b as jo}from"./chunk-TCY2QN26.js";import{a as j}from"./chunk-SWNKITDG.js";import{a as Bo}from"./chunk-RQ4URFJV.js";import{E as zo,N as Wo,S as Yo,b as $,d as Lo,e as Do,f as N,g as Ro,h as ko,i as Po,j as vo,l as wo,m as Mo,n as Oo,o as Uo,p as Vo,r as Ho,s as J,u as $o,v as Go,y as qo}from"./chunk-QAD7XKBR.js";import{d as _o}from"./chunk-T6BAWHSV.js";import{d as bo,e as So}from"./chunk-KWEOQTFQ.js";import{h as No}from"./chunk-ILYGYWTN.js";import{r as Ao}from"./chunk-MJYAUOKI.js";import{a as g,d as Y,o as Eo,q as xo,s as Io}from"./chunk-FCCCJLF6.js";import{a as go,f as H,ma as ho,na as yo}from"./chunk-4Z4GXCHB.js";import{qb as Fo,y as I}from"./chunk-FK3ETA6I.js";import{fa as A}from"./chunk-QZDHFNHK.js";import{a as v}from"./chunk-EJQOS3F4.js";import{a as To}from"./chunk-4X6ZAX3L.js";import{Db as lo,Eb as po,Ib as Co,Kb as x,ib as E,jb as fo,lb as V,m as co,ob as _,pb as Z}from"./chunk-QG673PNL.js";import{G as ao}from"./chunk-6MTHEPGF.js";import{I as he,w as mo}from"./chunk-ZQQ7HNWV.js";import{a as S}from"./chunk-ADZWCU3Q.js";import{f as m,m as t,o as s}from"./chunk-REC7XVZY.js";t();s();var ce=m(I());he();t();s();var l=m(I());x();t();s();var z=m(co()),Xo=m(v());t();s();var q=m(S());x();var ye=(0,q.createContext)({coinId:null,fromAddress:""});function Jo(){return(0,q.useContext)(ye)}function Ko(){let{coinId:o}=Jo();return o}function B(){let{fromAddress:o}=Jo();return o}function h(){return(o,e,r)=>{if(!o)return o;let n;return r?n=po(o,e.orderDecimalNum):n=lo(o,e.orderDecimalNum),Co(n)}}function Qo(){return(o,e,r)=>{if(!o)return o;typeof r=="boolean"&&(r={isFee:r});let{isFee:n,useApproximate:i=!0,...u}=r||{};return _o(o,{fixed:e.orderDecimalNum,isFixedUp:n,useApproximate:i,...u})}}var Q={vdecimalNum:0,decimals:0,symbol:""};function y(){let{coinId:o}=(0,Xo.useParams)(),e=Ko();return Number(e)||Number(o)}var a=()=>{let o=y(),{coin:e,baseCoin:r}=j(o,!0),n=(0,z.isEmpty)(e)?Q:e,i=(0,z.isEmpty)(r)?Q:r;return{coin:n,baseCoin:i}},F=()=>{let o=oe(),{coin:e}=j(o,!1);return(0,z.isEmpty)(e)?Q:e};var ee=()=>(0,l.useSelector)($),ir=()=>(0,l.useSelector)(N),C=()=>{let o=h(),e=(0,l.useSelector)(Po),{coin:r}=a();return o(e,r,!1)},re=()=>(0,l.useSelector)(vo),ur=()=>{let o=C(),{coin:e}=a();return E(o,10**e.decimals)},ne=()=>(0,l.useSelector)(Vo),X=()=>(0,l.useSelector)(Mo),oo=()=>{let o=h(),e=X(),r=F();return o(fo(e,10**r.decimals),r,!0)},te=()=>(0,l.useSelector)(Uo),eo=()=>(0,l.useSelector)(Oo),se=()=>{let o=(0,l.useSelector)(Fo),e=(0,l.useSelector)(Ho);return e===-1?o.currencyId:e},oe=()=>{let o=(0,l.useSelector)(wo),{baseCoin:e}=a();return o===-1?e.coinId:o},ro=()=>(0,l.useSelector)($o),ie=()=>(0,l.useSelector)(Go);t();s();var W=m(I()),ue=m(v());var me=()=>{let o=(0,ue.useHistory)(),e=(0,W.useSelector)($),r=(0,W.useSelector)(ko),n=(0,W.useSelector)(N),{coin:i}=a();return async()=>{await Zo(i.localType,{name:r?.name,type:r?.type,address:n}),o.push(e)}};var Te="DontShowError";function Sr(){let o=(0,ce.useSelector)(J),e=te(),r=eo();return(!!o.key||!!o.text)&&o.type!==A.COMMON_TIP||e||r}function _r(o){let[e,{setTrue:r,setFalse:n}]=Eo(),i=me();return{loading:e,onClick:async(...u)=>{r();try{if(!await jo()){n();return}if(o){let p=await o(...u),{pause:d}=p||{};d||await i()}}catch(f){if(f?.message===To||f?.message===Te)n();else{let d=f?.data?.msg||f?.msg||f?.data?.originalError?.msg||mo("wallet_home_toast_network_error");ao.error({title:d})}}n()}}}t();s();t();s();var w=m(S());var L=Symbol("UNSET_INPUT");function be(){let[o,e]=(0,w.useState)(L),r=Y(o);return(0,w.useEffect)(()=>{qo(o!==L)},[o]),{latestRequestInputRef:r,setLatestRequestInput:e}}function Se({domainInputValue:o,coinId:e},r,n=!1){let{latestRequestInputRef:i,setLatestRequestInput:u}=be(),f=Y(o),{run:p,cancel:d}=xo(P=>{No({coinId:e,domain:P}).then(({data:T})=>{P===f.current&&T?.address&&r({address:T?.address,domain:P})}).catch(T=>{console.log(T)}).finally(()=>{i.current===P&&u(L)})},{wait:800});return(0,w.useEffect)(()=>(o.indexOf(".")!==-1&&!n?(u(o),p(o)):u(L),()=>{d&&d()}),[o,n]),{loading:i.current!==L,abort:()=>{d&&d(),u(L)}}}var _e=Se;t();s();var ae=m(v());function Ne(){let o=(0,ae.useHistory)(),e=ee();return()=>{o.push(e||go)}}var Be=Ne;t();s();var zr=()=>{let o=B(),{baseCoin:e}=a(),r=Bo(e.localType);return e.localType?o||r:""};t();s();var M=m(I());var fe=m(v());function on(){return(0,M.useSelector)(Lo)}function en(){let o=(0,M.useSelector)(Do),e=(0,M.useSelector)(N),r=(0,M.useSelector)(Ro);return!e||o||!!r.key}function rn(){let o=y(),e=(0,fe.useHistory)(),r=B();return g(()=>{let n={pathname:`${H}/${o}${ho}`};r&&(n.search=`?from=${r}`),e.push(n)})}t();s();t();s();var D=m(S());function Le(o,e){let[r,n]=(0,D.useState)(0),i=(0,D.useRef)(0);Array.isArray(e)&&(e={override:!1,fns:e});let u=e?.override?e?.fns||[]:[...o||[],...e?.fns||[]],f=(0,D.useCallback)((p,d)=>{(async()=>{let T=++i.current;n(b=>b+1);try{let b={key:"",args:{}};for(let ge of u){let uo=await ge(p);if(uo){b=uo;break}}T===i.current&&d(b)}finally{n(b=>b-1)}})()},u);return{isCheckingError:r>0,runErrorFns:f}}function cn(o,e,r){let n=C();Io(()=>{(async()=>{r||o(n,e)})()},[o,n,r],{wait:100})}var O=Le;t();s();function De(){return g(o=>o?null:{key:"wallet_transfer_errortip_receive_address_empty",args:{}})}function Re(){let{baseCoin:o}=a();return g(async e=>await Yo(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}})}function An(){let o=De(),e=Re();return[o,e]}t();s();x();t();s();var le=m(S());x();var ke=o=>{let e=bo(o),r=So();return(0,le.useCallback)((n,i,u)=>{let{useApproximate:f=!0}=u||{},p=r?.[n]?.coinToUSDRate;return Ao(E(i,E(p,e.usdToThisRate)),{useApproximate:f,symbol:e.symbol})},[r,e.symbol,e.usdToThisRate])},pe=ke;var R=m(S()),de=m(I());function Pe(){let{coin:o}=a(),e=io();return(0,R.useCallback)(()=>o.baseCoinId===0&&_(e,0)?{key:"wallet_extension_transaction_input_error_insufficient_gas_fee",args:{chainSymbol:o.symbol},type:A.FEE_BALANCE_INSUFFICIENT}:null,[e])}function no(){let o=so();return(0,R.useCallback)(e=>Z(e,o)?{key:"wallet_transfer_errortip_insufficient_balance",args:{},type:A.BALANCE_INSUFFICIENT}:null,[o])}function to(){let o=se(),e=Qo(),r=pe(o),{coin:n}=a(),i=io();return(0,R.useCallback)(u=>{if(Z(u,i)){let f=r(n.coinId,i,{useApproximate:!1}),p=`${e(i,n,{useApproximate:!1})} ${n.symbol}`;return{key:"wallet_extension_send_text_max_price",args:{fiatamount:f,cryptoamount:p},type:A.BALANCE_INSUFFICIENT}}return null},[i])}var kn=o=>{let e=(0,de.useDispatch)(),r=Pe(),n=no(),i=to(),u=[r,n,i],{runErrorFns:f}=O(u,o),p=C();(0,R.useEffect)(()=>{f(p,d=>{e(zo(d))})},[f,p])};t();s();var k=m(S()),Ce=m(I());x();t();s();var U={AMOUNT:"amount",FEE:"fee"};function ve(){let o=F(),e=Ae();return(0,k.useCallback)(()=>_(e,0)?{key:"wallet_extension_popup_insufficient_network_fee",args:{token:o.symbol},type:A.FEE_BALANCE_INSUFFICIENT,highlight:U.FEE}:null,[e,o.symbol])}function we(){let o=no();return(0,k.useCallback)(e=>{let r=o(e);return r?{...r,highlight:U.AMOUNT}:null},[o])}function Me(){let o=to();return(0,k.useCallback)(e=>{let r=o(e);return r?{...r,highlight:U.AMOUNT}:null},[o])}function Oe(){let o=ve(),e=we(),r=Me();return[o,e,r]}function Wn(o){let e=(0,Ce.useDispatch)(),r=Oe(),{runErrorFns:n}=O(r,o),i=C();(0,k.useEffect)(()=>{n(i,u=>{e(Wo(u))})},[n,i])}t();s();var Fe=m(v());x();var Ee=m(co());function at(){let o=re(),e=C();return!!o.key&&o.type!==A.COMMON_TIP||(0,Ee.isNil)(e)||e===""||_(e,0)}function ft(){let o=y(),e=(0,Fe.useHistory)(),r=B();return g(()=>{let n={pathname:`${H}/${o}${yo}`};r&&(n.search=`?from=${r}`),e.push(n)})}t();s();x();var xe=()=>{let o=y();return K(o)},It=()=>{let o=h(),e=xe(),{coin:r}=a();return o(G(e,r.decimals),r,!1)},Ie=()=>{let o=xe(),e=ro();return e===null?o:e},so=()=>{let o=h(),e=Ie(),{coin:r}=a();return o(G(e,r.decimals),r,!1)},Ue=()=>{let{coin:o}=a(),e=F(),r=X(),n=Ie();return o.coinId===e.coinId?V(n,r):n},io=()=>{let{coin:o}=a(),e=F(),r=oo(),n=so();return o.coinId===e.coinId?V(n,r):n},Ve=()=>{let o=F();return K(o.coinId)},He=()=>{let{coin:o}=a(),e=F(),r=Ve(),n=ie(),i=ro();return n!==null?n:o.coinId===e.coinId&&i!==null?i:r},$e=()=>{let o=h(),e=He(),r=F();return o(G(e,r.decimals),r,!1)},Ae=()=>{let o=$e(),e=oo();return V(o,e)},gt=()=>{let{coin:o}=a(),e=ne(),r=C(),n=Ue();return e?n:E(r,10**o.decimals)};t();s();t();s();var Ge=m(I());export{_e as a,ye as b,B as c,Qo as d,y as e,a as f,F as g,ir as h,C as i,re as j,ur as k,ne as l,X as m,oo as n,te as o,eo as p,se as q,oe as r,ro as s,ie as t,Be as u,zr as v,me as w,on as x,en as y,rn as z,cn as A,O as B,De as C,Re as D,An as E,Pe as F,no as G,kn as H,U as I,ve as J,we as K,Oe as L,Wn as M,at as N,ft as O,xe as P,It as Q,Ie as R,so as S,io as T,Ve as U,He as V,Ae as W,gt as X,Te as Y,Sr as Z,_r as _};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-7GRBMPLB.js.map
