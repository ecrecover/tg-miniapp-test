import{a as w,b as N}from"./chunk-E7VELZFV.js";import{a as P,b as x}from"./chunk-VCB5OJ3D.js";import"./chunk-4VLUHY4K.js";import"./chunk-GZRBUDXF.js";import{p as S}from"./chunk-DDO6HXRN.js";import"./chunk-KZ2PCELG.js";import"./chunk-C7ZG4INB.js";import"./chunk-J5ANWCEO.js";import"./chunk-VMO2INN3.js";import"./chunk-J4TF3RT7.js";import{B as T,a as g,o as F}from"./chunk-6FOZGMAL.js";import{a as C}from"./chunk-2MV3WEYP.js";import"./chunk-HPXM6RSK.js";import"./chunk-IUIJ46C3.js";import"./chunk-KZ3ZU675.js";import"./chunk-NJ5CWPUY.js";import"./chunk-UMJMJOW4.js";import"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import"./chunk-O5JCC6KG.js";import{d as y,f as M}from"./chunk-MAIAJ7GD.js";import"./chunk-MGLVPWSV.js";import"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import"./chunk-JXCCIV3J.js";import"./chunk-AOA7NX2Y.js";import"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import{C as t,G as b,p as o}from"./chunk-SOHTSUTI.js";import{I as V,w as r}from"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-E24EBHFY.js";import{Y as i}from"./chunk-V4F2JFTP.js";import{a as U}from"./chunk-6DDC4Y2S.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-YUXYCITH.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{f as L,m as _,o as u}from"./chunk-EQYVU4XP.js";_();u();var s=L(U());V();M();_();u();var B={root:"_root_1r48s_1"};var ts=({history:v})=>{let l=t.useForm(),[e,z]=s.default.useState({}),[Z,h]=s.default.useState(null),[A,{setTrue:O,setFalse:I}]=F(!1),f=(0,s.useRef)(),E=g(()=>{f.current=S(e.oldPassword).then(()=>(h(null),l.cleanErrors("oldPassword"),!0)).catch(()=>{let a=r("wallet_set_password_errortip_password_wrong");return h(a),l.setErrors({oldPassword:a}),!1})});T(()=>{!e.oldPassword||E()},[e.oldPassword],{wait:500});let c=!!Z||!e.oldPassword||!e.password||!e.confirm||e.password?.length<P||e.confirm?.length<P,k=g(async()=>{let{password:a,confirm:m}=e;if(c)return;if(a!==m){l.setErrors({confirm:r("wallet_settings_reset_passord_errortip_input_error")});return}if(O(),f.current||E(),!await f.current){I();return}await y().modifyPassword(m)&&(b.success(r("wallet_edit_wallet_toast_renamed_success")),v.push(C)),I()},[c,e]);return s.default.createElement(N,{className:B.root,title:r("wallet_settings_reset_passord_maintitle_reset_password"),desc:r("wallet_extension_subtitle_password_unlock")},({formClass:a,formErrorClass:m,itemClass:p})=>s.default.createElement(t,{form:l,size:o.SIZE.lg,validateTrigger:["onChange","onBlur"],className:a,errorClassName:m,onSubmit:k,onValuesChange:(n,d)=>{z(d)}},s.default.createElement(t.Item,{name:"oldPassword",style:{marginBottom:0},label:r("wallet_settings_reset_passord_subtitle_old_password"),className:p},s.default.createElement(o.Password,{autoFocus:!0,autoComplete:"off",size:o.SIZE.xl,inputClassName:w.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_old_password")})),s.default.createElement(t.Item,{name:"password",style:{marginBottom:0,marginTop:"32px"},className:p,label:r("wallet_settings_reset_passord_subtitle_new_password")},s.default.createElement(o.Password,{autoComplete:"off",size:o.SIZE.xl,inputClassName:w.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_desc")})),s.default.createElement(t.Item,{noStyle:!0,shouldUpdate:(n,d)=>n.password!==d.password},({getFieldValue:n})=>{let d=n("password");return s.default.createElement(x,{password:d})}),s.default.createElement(t.Item,{name:"confirm",className:p,label:r("wallet_settings_reset_passord_subtitle_password_confirmation"),style:{flex:1,marginTop:"32px"}},s.default.createElement(o.Password,{autoComplete:"off",size:o.SIZE.xl,inputClassName:w.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_password_confirmation"),onChange:()=>{l.cleanErrors("confirm")}})),s.default.createElement(t.Item,{noStyle:!0},s.default.createElement(i,{block:!0,htmlType:"submit",loading:A,disabled:c,category:i.CATEGORY.fill,type:i.TYPE.highlight,size:i.SIZE.lg},r("wallet_set_password_btn_confirm")))))};export{ts as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=ResetPassword-PBEOKCPL.js.map
