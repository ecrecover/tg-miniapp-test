import{a as qt}from"./chunk-WQ5TWFR7.js";import{a as jt}from"./chunk-A7BL4T7A.js";import{a as Jt}from"./chunk-M7H3BUKN.js";import{a as h,f as Qt}from"./chunk-2PVY7Q74.js";import{a as Zt}from"./chunk-JXXKPVB7.js";import{a as Xt}from"./chunk-IF7RTFSM.js";import{a as Kt}from"./chunk-AGNEMUCC.js";import{c as Re}from"./chunk-JFCE4WMN.js";import{e as zt,h as Yt,k as at}from"./chunk-Z7MVEL6Q.js";import{a as ei}from"./chunk-3OA7XW3I.js";import{a as ot}from"./chunk-HP4KI3UG.js";import{b as Vt}from"./chunk-RSZRDNEQ.js";import{f as Rt,i as $t}from"./chunk-ILYGYWTN.js";import{s as st}from"./chunk-MJYAUOKI.js";import{s as Ht}from"./chunk-FCCCJLF6.js";import{q as Ut}from"./chunk-FK3ETA6I.js";import{X as t,_ as rt,aa as Ge,ca as Me}from"./chunk-QZDHFNHK.js";import{b as Pe}from"./chunk-T2OWRX3Y.js";import{Cb as He,Db as Bt,Kb as Ve,a as Wt,b as Ri,ib as P,kb as y,lb as X,m as $i,mb as te,nb as V,ob as re,pb as w,qb as bt,rb as ce,tb as Ue,vb as R,xb as Le,yb as it}from"./chunk-QG673PNL.js";import{c as tt,p as W}from"./chunk-6MTHEPGF.js";import{I as vt,m as se,w as T}from"./chunk-ZQQ7HNWV.js";import{a as kt,g as zi}from"./chunk-ADZWCU3Q.js";import{f as Be,m as U,o as H}from"./chunk-REC7XVZY.js";U();H();var a=Be(kt()),ci=Be($i()),g=Be(zi());vt();Ve();U();H();var z=Be(kt());Ri();U();H();vt();Ve();var ti=({gasLimit:r,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,baseFeePerGas:n,supportEip1559:u,extFee:c}={})=>{let m="",o="";if(!u)m=P(r,e),o=e;else{let l=y(n,i);o=Math.min(l,s),m=P(r,o)}return{minGasFee:y(m,c),minGasPrice:o}},ii=({gasLimit:r,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,supportEip1559:n,extFee:u,gasPriceInfo:c={},gasLimitInfo:m={},gasType:o})=>{let{baseFee:l}=c,{originGasLimit:M}=m;if(o!==t.CUSTOM)return ti({gasLimit:M,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,baseFeePerGas:l,supportEip1559:n,extFee:u});let d=X(s,i),C=Math.min(d,l),F=Math.min(r,M);return ti({gasLimit:F,gasPrice:e,maxPriorityFeePerGas:i,maxFeePerGas:s,baseFeePerGas:C,supportEip1559:n,extFee:u})};function es(r,e){let{isNetworkFeeLoading:i,gasLimit:s,gasPrice:n,maxFeePerGas:u,maxPriorityFeePerGas:c,supportEip1559:m,gasLimitInfo:o}=r;return!i&&(re(s,0)||m&&(re(u,0)||V(c,0))||!m&&re(n,0)||o?.queryGasLimitErrorUseDefault&&e!==ei.DEPLOY_CONTRACT)}async function ts(r,e){let{from:i,to:s,data:n,value:u="0"}=e,c={checkTypes:[Ge.VERIFY_GAS_LIMIT],coinId:r,from:i,to:s,amount:u,inputData:n,tokenAddress:s},{data:m=[]}=await Rt(c),o=m?.find((l={})=>l.checkType===Ge.VERIFY_GAS_LIMIT);return o&&o?.result===!1&&o?.resultCode!=="306001"?o.msg||T("wallet_extension_toast_text_unknown_error"):!1}Ve();var ri=()=>e=>Bt(e,0),ai=({gasPrice:r,gasLimit:e,extFee:i,baseCoin:s={},currencyId:n})=>{let u=y(P(r,e),i),c=it(u),m=st(c,{symbol:s?.symbol}),o=at(s?.coinId,u,{currencyId:n,useApproximate:!0});return{gasFeeDisplay:`${m}${o}`,gasFee:c}},$e=({gasPrice:r,gasLimit:e,maxPriorityFeePerGas:i,maxFeePerGas:s,supportEip1559:n,extFee:u,gasPriceInfo:c,gasLimitInfo:m,gasType:o,baseCoin:l={},currencyId:M})=>{let{minGasFee:d,minGasPrice:C}=ii({gasLimit:e,gasPrice:r,maxPriorityFeePerGas:i,maxFeePerGas:s,supportEip1559:n,extFee:u,gasPriceInfo:c,gasLimitInfo:m,gasType:o}),F=it(d),_=st(F,{symbol:l?.symbol}),p=at(l?.coinId,d,{currencyId:M,useApproximate:!0});return{minGasPrice:C,minGasFee:F,minGasFeeDisplay:`${_}${p}`}},si=(r={},e={wait:200,disabled:!1,fetchOnce:!1})=>{let{wait:i,disabled:s,fetchOnce:n,signInfo:u={}}=e,{coinId:c,supportEip1559:m,tx:o,needExtFee:l=!1}=r,[M,d]=(0,z.useState)(null),[C,F]=(0,z.useState)({data:"",loading:!1,error:""});(0,z.useEffect)(()=>{!l||s||F(p=>({...p,loading:!0,error:""}))},[o,l,s]);let _=()=>{try{if(!c){let p=u;Wt.captureEvent({message:`coinId is ${c}`,contexts:{report:{info:JSON.stringify({href:window?.location?.href,rawData:p})}},exception:{values:[{type:"EXTFEE_COINID_ERROR",value:`coinId is ${c}`}]},tags:{},level:"info"})}}catch{}};return Ht(()=>{if(!l||s){F(f=>({...f,loading:!1,error:""}));return}if(n===M&&n!==null){F(f=>({...f,loading:!1,error:""}));return}let p=w(o.gasPrice,"0")&&w(o.gasLimit,"0"),E=w(o.maxFeePerGas,"0")&&w(o.maxPriorityFeePerGas,"0")&&w(o.gasLimit,"0");if(!(m?E:p)){F(f=>({...f,loading:!1,error:""}));return}(async()=>{try{let f={...o,value:Pe(o.value),gasLimit:Pe(o.gasLimit)},x=m?{...f,maxFeePerGas:Pe(o.maxFeePerGas),maxPriorityFeePerGas:Pe(o.maxPriorityFeePerGas)}:{...f,gasPrice:Pe(o.gasPrice)},Y=Ut(x),K=Qt(Y);_();let A=await $t({coinId:c},{inputData:K});F(ee=>({...ee,data:A,loading:!1,error:""}))}catch(f){F(x=>({...x,loading:!1,error:f.error_message||"Network error"}))}finally{n&&d(n)}})()},[c,o,n,l],{wait:i}),C},Yi=({commonTx:r,gasPrice:e,priorityFee:i,supportEip1559:s})=>(0,z.useMemo)(()=>s?{...r,maxFeePerGas:e,maxPriorityFeePerGas:i}:{...r,gasPrice:e},[r,e,i,s]),oi=({coinId:r,from:e,to:i,value:s,inputData:n,gasLimit:u,supportEip1559:c,needExtFee:m,fastGasPrice:o,fastPriorityFee:l,customGasPrice:M,customMaxBaseFee:d,customMaxPriorityFee:C,customGasLimit:F,estimatedL1FeeOptions:_})=>{let p=(0,z.useMemo)(()=>({from:e,to:i,value:s,data:n}),[e,i,s,n]),E=(0,z.useMemo)(()=>({...p,gasLimit:u}),[p,u]),S=Yi({commonTx:E,gasPrice:o,priorityFee:l,supportEip1559:c}),k=(0,z.useMemo)(()=>c?{...p,maxFeePerGas:R(y(d,C)),maxPriorityFeePerGas:R(C),gasLimit:F}:{...p,gasPrice:R(M),gasLimit:F},[p,c,M,d,C,F]),f=si({coinId:r,tx:S,type:"fast",supportEip1559:c,needExtFee:m},_),x=si({coinId:r,tx:k,type:"custom",supportEip1559:c,needExtFee:m},_);return(0,z.useMemo)(()=>{let Y=f.loading||x.loading,K=f.error||x.error,A={[t.SLOW]:f.data,[t.STANDARD]:f.data,[t.FAST]:f.data,[t.CUSTOM]:x.data};return{loading:Y,error:K,data:A}},[f,x])};U();H();var Q={customInput:"_customInput_y9e7y_1",maxBaseFeeWarning:"_maxBaseFeeWarning_y9e7y_4",customGWei:"_customGWei_y9e7y_10",customInputSubTitle:"_customInputSubTitle_y9e7y_17",customGasFeeWarning:"_customGasFeeWarning_y9e7y_21",customGasFeeWarningFold:"_customGasFeeWarningFold_y9e7y_24",gweiText:"_gweiText_y9e7y_27"};var me=r=>(0,ci.isNil)(r)||re(r,0);function ni({className:r}){return a.default.createElement(tt,{className:r,desc:T("wallet_extension_transfer_text_higher_than_necessary"),type:tt.TYPE.warn,closable:!1})}var Ki=({isSignInfoLoading:r,signInfo:e,initialGasLimitInfo:i,isGasLimitLoading:s,visible:n,address:u,inputData:c,tokenAddress:m,coinId:o,value:l,initialGasData:M,estimatedL1FeeOptions:d,onBack:C,onClose:F,onGasChange:_,currencyId:p,minimumGasLimit:E,gasReturn:S,onServerDataChange:k,onGasTypeManualChange:f,isMev:x,mevInfo:Y})=>{let K=(0,a.useRef)(!1),[,A]=Yt(o,{withPrice:!0}),ee=qt(),ue=ri(),{initialGasType:xe=t.STANDARD,initialCustomMaxBaseFee:Se,initialCustomMaxPriorityFee:ae,initialCustomGasPrice:ye,initialCustomGasLimit:le}=M||{},ge=me(Se)?void 0:Le(Se),De=me(ae)?void 0:Le(ae),Ee=me(ye)?void 0:Le(ye),ze=me(le)?void 0:le,[Ie,Ye]=(0,a.useState)(),[Te,Ke]=(0,a.useState)(),[ct,mi]=(0,a.useState)(),[mt,ut]=(0,a.useState)(),[Ne,lt]=(0,a.useState)(xe),[I,he]=(0,a.useState)(xe),ui=G=>{let{priorityRate:L}=Y||{},B=et=>P(et,L),O=(et,Hi)=>{let Vi=te([0,P(Hi,X(L,1))]);return y(et,Vi)},{supportEip1559:$,max:Fe,min:Qe,normal:ht,fastPriorityFee:be,proposePriorityFee:At,safePriorityFee:Ot}=G,ne={};return $&&L&&(ne.fastPriorityFee=B(be),ne.safePriorityFee=B(Ot),ne.proposePriorityFee=B(At),ne.max=O(Fe,be),ne.normal=O(ht,At),ne.min=O(Qe,Ot)),{...G,...ne}},v=(0,a.useMemo)(()=>x?e?.gasPrice?ui(e?.gasPrice):Re:e?.gasPrice||Re,[e?.gasPrice,x]),li=e?.needExtFee,{min:fi,normal:pi,max:Fi,minGasPrice:Gi,supportEip1559:b,suggestBaseFee:Pi,safePriorityFee:de,proposePriorityFee:_e,fastPriorityFee:Ce}=v,Z=ue(fi),j=ue(pi),q=ue(Fi),N=(0,a.useMemo)(()=>{let G=bt(i?.minGasLimit,E)?i?.minGasLimit:E,L={...i,minGasLimit:G};return V(L?.gasLimit,L?.minGasLimit)&&(L.gasLimit=L?.minGasLimit),L},[i,E]),ft=`${N?.gasLimit||0}`,J=ze||ft,pt=`${N?.minGasLimit||ft}`,Ft=`${N?.maxGasLimit||1500*1e4}`,xi=h(Z),Gt=h(j),yi=h(q),Pt=Le(Gi),Ze=h(Pi),gi=h(X(Z,de)),xt=h(X(j,_e)),Ti=h(X(q,Ce)),di=h(de),yt=h(_e),_i=h(Ce),Ae=(0,a.useRef)(),Oe=(0,a.useRef)(),We=(0,a.useRef)(),je=(0,a.useRef)(),gt={[t.SLOW]:xi,[t.STANDARD]:Gt,[t.FAST]:yi,[t.CUSTOM]:me(Ae.current)?Gt:Ae.current},Tt={[t.SLOW]:gi,[t.STANDARD]:xt,[t.FAST]:Ti,[t.CUSTOM]:me(Oe.current)?xt:Oe.current},dt={[t.SLOW]:di,[t.STANDARD]:yt,[t.FAST]:_i,[t.CUSTOM]:me(We.current)?yt:We.current},fe=typeof ct=="string"?ct:Ee||gt[I],oe=typeof Ie=="string"?Ie:ge||Tt[I],pe=typeof Te=="string"?Te:De||dt[I],ie=typeof mt=="string"?mt:J,D=oi({coinId:o,from:u,to:m,value:l,inputData:c,gasLimit:J,supportEip1559:b,needExtFee:li,slowGasPrice:Z,safePriorityFee:de,standardGasPrice:j,proposePriorityFee:_e,fastGasPrice:q,fastPriorityFee:Ce,customGasPrice:fe,customMaxBaseFee:oe,customMaxPriorityFee:pe,customGasLimit:ie,estimatedL1FeeOptions:{wait:200,...d,signInfo:e}}),ke=r||s||D.loading,{minGasFeeDisplay:Ci,minGasFee:Li,minGasPrice:Mi}=$e({gasPrice:Z,gasLimit:J,maxPriorityFeePerGas:de,maxFeePerGas:Z,supportEip1559:b,extFee:D?.data?.[t.SLOW],gasPriceInfo:v,gasLimitInfo:N,gasType:Ne,baseCoin:A,currencyId:p}),wi=h(Mi),{minGasFeeDisplay:Si,minGasFee:Di,minGasPrice:Ei}=$e({gasPrice:j,gasLimit:J,maxPriorityFeePerGas:_e,maxFeePerGas:j,supportEip1559:b,extFee:D?.data?.[t.STANDARD],gasPriceInfo:v,gasLimitInfo:N,gasType:Ne,baseCoin:A,currencyId:p}),Ii=h(Ei),{minGasFeeDisplay:Ni,minGasFee:hi,minGasPrice:Ai}=$e({gasPrice:q,gasLimit:J,maxPriorityFeePerGas:Ce,maxFeePerGas:q,supportEip1559:b,extFee:D?.data?.[t.FAST],gasPriceInfo:v,gasLimitInfo:N,gasType:Ne,baseCoin:A,currencyId:p}),Oi=h(Ai),_t=re(oe,0)?T("extension_wallet_transaction_errortip_basefeelimit"):"",Ct=V(oe,Ze)&&w(oe,0)?T("extension_wallet_transaction_errortip_notsuccess",{baseFee:Ze}):"",Lt=re(pe,0)?T("extension_wallet_transaction_errortip_priorityfeelimit"):"",Mt=V(fe,Pt)?T("wallet_extension_transaction_customize_error_gasprice_mustbe",{minGasPriceGWei:Pt}):"",wt=V(ie,pt)||w(ie,Ft)?T("wallet_extension_transaction_customize_error_gas_restriction",{minGasLimit:ot(pt,0),maxGasLimit:ot(Ft)}):"",St=!wt&&(!b&&!Mt||b&&!_t&&!Lt),Dt=y(oe,pe),ve=R(Ue((b?Dt:fe)||0)),Wi=h(ve),{gasFeeDisplay:Et}=ai({gasPrice:Ue(ve),gasLimit:Ue(ie),extFee:D?.data?.[t.CUSTOM],baseCoin:A,currencyId:p}),ki=y(P(Z,J),D?.data?.[t.SLOW]),vi=y(P(j,J),D?.data?.[t.STANDARD]),It=y(P(q,J),D?.data?.[t.FAST]),Nt=y(P(ve,ie),D?.data?.[t.CUSTOM]),qe=w(Nt,P(It,2)),Je=[{typeKey:t.SLOW,gasFee:Li,unitPrice:`${se.ceilShort(wi,2)} ${T("extension_wallet_transaction_input_gwei")}`,totalPrice:Ci,estimatedTime:ee(v,Z),onClick:()=>(f?.(),he(t.SLOW))},{typeKey:t.STANDARD,gasFee:Di,unitPrice:`${se.ceilShort(Ii,2)} ${T("extension_wallet_transaction_input_gwei")}`,totalPrice:Si,estimatedTime:ee(v,j),onClick:()=>(f?.(),he(t.STANDARD))},{typeKey:t.FAST,gasFee:hi,unitPrice:`${se.ceilShort(Oi,2)} ${T("extension_wallet_transaction_input_gwei")}`,totalPrice:Ni,estimatedTime:ee(v,q),onClick:()=>(f?.(),he(t.FAST))}],bi=(0,a.useMemo)(()=>S&&S?.status!==Kt.empty&&(!S?.tip?.error||S?.tip?.key===Vt.exceedGasLimit)?Je?.map(G=>G?.typeKey!==t.CUSTOM&&se.lte(se.mul(G?.gasFee,A?.usdPrice),S?.activity?.gas)?{supportGasReturn:!0,...G}:G):Je,[S,Je,A?.usdPrice]),Bi=ee(v,ve,!St),Ui={unitPricePrefix:se.ceilShort(Wi,2),unitPriceSuffix:T("extension_wallet_transaction_input_gwei"),totalPrice:Et?a.default.createElement(Xt,{style:{color:qe?"var(--okd-color-semantic-notice)":null},text:Et,maxWidth:"120px"}):"",renderWarning:G=>!G&&qe?a.default.createElement(ni,{className:Q.customGasFeeWarningFold}):null,estimatedTime:Bi,onClick:()=>{lt(t.CUSTOM)},canConfirm:St,onConfirm:()=>{he(t.CUSTOM),f?.();let G=R(fe),L=R(Dt),B=R(pe),O=ie,$=D?.data?.[t.CUSTOM];K.current=!0,_({gasType:t.CUSTOM,maxFeePerGas:L,maxPriorityFeePerGas:B,gasPrice:G,gasLimit:O,isGasLimitLoading:s,isNetworkFeeLoading:ke,networkFee:Nt,supportEip1559:b,gasLimitInfo:N,gasPriceInfo:v,extFee:$,customConfirmed:K.current}),Ae.current=fe,Oe.current=oe,We.current=pe,je.current=ie}};if((0,a.useEffect)(()=>{lt(I)},[n]),(0,a.useEffect)(()=>{if(I===t.CUSTOM)return;let G,L,B,O,$,Fe=J;I===t.SLOW?(B=Z,G=Z,L=de,$=ki,O=D?.data?.[t.SLOW]):I===t.STANDARD?(B=j,G=j,L=_e,$=vi,O=D?.data?.[t.STANDARD]):I===t.FAST&&(B=q,G=q,L=Ce,$=It,O=D?.data?.[t.FAST]),_({gasType:I,maxFeePerGas:G,maxPriorityFeePerGas:L,gasPrice:B,gasLimit:Fe,isGasLimitLoading:s,isNetworkFeeLoading:ke,networkFee:$,supportEip1559:b,gasLimitInfo:N,gasPriceInfo:v,extFee:O})},[I,Z,j,q,N,s,ke,_]),(0,a.useEffect)(()=>{if(I===t.CUSTOM&&!n){let G=je.current;typeof G=="string"&&V(G,N?.minGasLimit)&&(G=N?.minGasLimit,ut(N?.minGasLimit),je.current=N?.minGasLimit);let L=R(Ae.current||Ee||gt[I]),B=R(Oe.current||ge||Tt[I]),O=R(We.current||De||dt[I]),$=y(B,O),Fe=typeof G=="string"?G:J,Qe=D?.data?.[t.CUSTOM],be=y(P((b?$:L)||0,Fe),D?.data?.[t.CUSTOM]);_({gasType:I,maxFeePerGas:$,maxPriorityFeePerGas:O,gasPrice:L,gasLimit:Fe,isGasLimitLoading:s,isNetworkFeeLoading:ke,networkFee:be,supportEip1559:b,gasLimitInfo:N,gasPriceInfo:v,extFee:Qe,customConfirmed:K.current})}},[N,v,D]),(0,a.useEffect)(()=>{typeof k=="function"&&k({signInfo:e})},[e]),!n)return null;let Xe=()=>a.default.createElement("span",{className:Q.customGWei},T("extension_wallet_transaction_input_gwei"));return a.default.createElement(jt,{feeType:Ne,feeDataList:bi,onBack:C,onClose:F,custom:{...Ui,components:()=>a.default.createElement(a.default.Fragment,null,b?a.default.createElement(a.default.Fragment,null,a.default.createElement(W.Number,{className:Q.customInput,size:W.SIZE.sm,title:a.default.createElement("div",{className:"network-fee--refresh-animation"},T("extension_wallet_transaction_text_maxbase_fee"),a.default.createElement("span",{className:Q.customInputSubTitle},T("extension_wallet_transaction_text_current",{number:se.ceilShort(Ze,2)}))),value:oe,error:_t,errorType:W.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Ye,max:1e7,tips:Ct&&a.default.createElement("div",{className:Q.maxBaseFeeWarning},Ct),suffix:Xe()}),a.default.createElement(W.Number,{className:Q.customInput,size:W.SIZE.sm,title:T("extension_wallet_transaction_text_priority_fee"),value:pe,error:Lt,errorType:W.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:Ke,max:1e7,suffix:Xe()})):a.default.createElement(W.Number,{className:Q.customInput,size:W.SIZE.sm,title:a.default.createElement(a.default.Fragment,null,T("wallet_transfer_gasfee_subtitle_gas_price"),a.default.createElement("span",{className:Q.customInputSubTitle},T("extension_wallet_transaction_input_gwei"))),value:fe,error:Mt,errorType:W.TIP_TYPE.always,precision:9,enableMinus:!1,onChange:mi,max:1e7,suffix:Xe()}),a.default.createElement(W.Number,{size:W.SIZE.sm,title:T("wallet_transfer_gasfee_subtitle_custom_gas_limit"),value:ie,error:wt,errorType:W.TIP_TYPE.always,enableMinus:!1,onChange:ut,max:15e6,min:0,precision:0}),qe&&a.default.createElement(ni,{className:Q.customGasFeeWarning}))}})};function nt(r){let{coinId:e,address:i,inputData:s,tokenAddress:n,value:u,gasLimitOptions:c,initialGasData:m,onDappGasIllegal:o}=r,l=zt(e)||{},[M,d]=(0,a.useState)(m),[C,F]=(0,a.useState)(m?.initialGasType!==t.CUSTOM),[_,p]=Zt({coinId:e,address:i,chainId:l?.chainId}),[E,S,k]=Jt({address:i,inputData:s,tokenAddress:n,coinId:e,value:u},{wait:200,...c}),f=_||k;return(0,a.useEffect)(()=>{if(f)return;let x={...m||{}},{initialGasType:Y,initialCustomMaxBaseFee:K,initialCustomMaxPriorityFee:A,initialCustomGasPrice:ee,initialCustomGasLimit:ue}=x,{min:xe,safePriorityFee:Se,supportEip1559:ae,max:ye}=p?.gasPrice||Re,{gasLimit:le}=E||{};if(Y===t.CUSTOM){let ge=V(ue,le);ge&&(x.initialCustomGasLimit=le);let De=ae&&(V(A,Se)||V(y(K,A),xe)),Ee=!ae&&V(ee,xe),ze=w(ue,P(le,1.2)),Ie=!ae&&w(ee,P(ye,1.2)),Ye=ae&&w(y(K,A),P(ye,1.2)),Te=ge||De||Ee,Ke=ze||Ie||Ye;Te&&(x.initialCustomMaxPriorityFee=null,x.initialCustomMaxBaseFee=null,x.initialCustomGasPrice=null,x.initialGasType=t.STANDARD,o?.(rt[t.SLOW])),!Te&&Ke&&o?.(rt[t.FAST]),d(x)}F(!0)},[f]),C?a.default.createElement(Ki,{...r,initialGasData:M,isSignInfoLoading:_,signInfo:p,initialGasLimitInfo:E,isGasLimitLoading:S,onGasTypeManualChange:()=>{o?.("")}}):null}nt.propTypes={visible:g.default.bool,address:g.default.string,inputData:g.default.string,tokenAddress:g.default.string,coinId:g.default.oneOfType([g.default.string,g.default.number]),value:g.default.string,initialGasData:g.default.shape({initialGasType:g.default.string,initialCustomMaxBaseFee:g.default.string,initialCustomMaxPriorityFee:g.default.string,initialCustomGasPrice:g.default.string,initialCustomGasLimit:g.default.string}),gasLimitOptions:g.default.object,estimatedL1FeeOptions:g.default.object,onBack:g.default.func,onClose:g.default.func,onGasChange:g.default.func,onServerDataChange:g.default.func,minimumGasLimit:g.default.string};nt.defaultProps={visible:!1,address:"",inputData:"",tokenAddress:"",coinId:"",value:"0",initialGasData:{initialGasType:t.STANDARD,initialCustomMaxBaseFee:"0",initialCustomMaxPriorityFee:void 0,initialCustomGasPrice:"0",initialCustomGasLimit:"0"},gasLimitOptions:{},estimatedL1FeeOptions:{},onBack:()=>{},onClose:()=>{},onGasChange:()=>{},onServerDataChange:()=>{},minimumGasLimit:"0"};var zs=(0,a.memo)(nt);U();H();Ve();var Js=(r,e)=>{let i=r.find(s=>s?.checkType===e);return i?!i?.result:!1},Xs=(r,e,i)=>{let s=r.find(n=>n?.checkType===Ge.OVERWRITTEN)||{};return s.toastType===Me.FAILED?e():s.toastType===Me.PENDING?i():r},Qs=(r=[])=>{let e={hasFailedTx:!1,hasPendingTx:!1,nonce:0,newNonce:0,originGasPrice:"0",originPriorityFee:"0"},i=r.find(s=>s?.checkType===Ge.OVERWRITTEN)||{};return e.nonce=i.nonce,e.newNonce=i.newNonce,e.originGasPrice=P(i?.gasPrice,1.1),e.originPriorityFee=P(i?.originPriorityFee,1.1),i.toastType===Me.FAILED?e.hasFailedTx=!0:i.toastType===Me.PENDING&&(e.hasPendingTx=!0),e},er=(r,e,i)=>{let{userGasInfo:s,serverGasInfo:n,originTxGasInfo:u}=e,{originGasPrice:c,originPriorityFee:m}=u,{supportEip1559:o}=s;if(o){let C=!1,{maxFeePerGas:F,maxPriorityFeePerGas:_}=s,{normal:p,proposePriorityFee:E}=n,S=c,k=m,f=te([F,p,S]);ce(f,F)||(C=!0);let x=te([_,E,k]),Y="0";return ce(x,_)||(Y=X(x,_),C=!0),C?i({maxFeePerGas:y(f,Y),maxPriorityFeePerGas:x}):r}let{gasPrice:l}=s,{normal:M}=n,d=te([l,M,c]);return ce(d,l)?r:i({gasPrice:d})},tr=({userGasInfo:r,serverGasInfo:e,originTxGasInfo:i})=>{let{originGasPrice:s,originPriorityFee:n}=i,{supportEip1559:u}=r;if(u){let l=!1,{maxFeePerGas:M,maxPriorityFeePerGas:d}=r,{normal:C,proposePriorityFee:F}=e,_=s,p=n,E=te([M,C,_]);ce(E,M)||(l=!0);let S=te([d,F,p]),k="0";if(ce(S,d)||(k=X(S,d),l=!0),l)return{maxFeePerGas:He(y(E,k),0),maxPriorityFeePerGas:He(S,0)}}let{gasPrice:c}=r,{normal:m}=e,o=te([c,m,s]);return ce(o,c)?{}:{gasPrice:He(o,0)}},ir=(r,e,i)=>{let{userGasInfo:s,updateGasInfo:n,baseCoinAmountAvailable:u}=e,{supportEip1559:c,gasLimit:m}=s;if(c){let{maxFeePerGas:l}=n;return w(P(l,m),u)?i():r}let{gasPrice:o}=n;return w(P(o,m),u)?i():r},sr=({userGasInfo:r,updateGasInfo:e,baseCoinAmountAvailable:i,L1FEE:s})=>{let{supportEip1559:n,gasLimit:u}=r;if(n){let{maxFeePerGas:m}=e;return!!w(y(P(m,u),s),i)}let{gasPrice:c}=e;return!!w(y(P(c,u),s),i)};U();H();var nr={ON_CHAIN:0,NEW:1},cr="UserReject";export{ii as a,es as b,ts as c,zs as d,Js as e,Xs as f,Qs as g,er as h,tr as i,ir as j,sr as k,nr as l,cr as m};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-JWIDJEDW.js.map
