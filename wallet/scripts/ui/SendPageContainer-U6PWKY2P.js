import{a as pu,b as lu,c as wr,d as xt}from"./chunk-IA7DYI4W.js";import{a as gu}from"./chunk-XTO3LHA3.js";import{a as ts,b as es,c as kr,d as cu,e as uu,f as q,g as Do,h as ns,i as Cu,m as Su,n as Iu}from"./chunk-W4ZU5OVY.js";import{a as du,b as fu}from"./chunk-OBBTCULP.js";import{a as Au}from"./chunk-VUWJ3UDJ.js";import{a as rs}from"./chunk-DHITNRDQ.js";import"./chunk-IKTFX5VA.js";import{a as Nt}from"./chunk-5DJMMPGG.js";import{a as $t,b as Lc}from"./chunk-UPRMHU7N.js";import{a as Bc,b as vc}from"./chunk-AEQXVQW6.js";import{a as Dc}from"./chunk-66GXWB2E.js";import{a as Nc}from"./chunk-SEESE2GK.js";import"./chunk-PXOMNFEE.js";import{b as Pc,k as bc}from"./chunk-BY7EJ2OB.js";import{a as hc,c as _c}from"./chunk-YEYYFHLH.js";import"./chunk-7H2LDC2I.js";import"./chunk-NHHEXXPU.js";import"./chunk-RZ42FYW3.js";import{a as yc,b as On}from"./chunk-B4ATV3GC.js";import"./chunk-WUFX5FIX.js";import"./chunk-5WLVDQXN.js";import"./chunk-Q7EMQCH4.js";import"./chunk-TAIMVZA3.js";import"./chunk-XHGDRCKN.js";import"./chunk-MJY6W4GC.js";import"./chunk-5KKHZTOM.js";import{a as xc}from"./chunk-EKXTRWYR.js";import{a as Fc,b as Ec}from"./chunk-W22RY77F.js";import{b as wc}from"./chunk-CP4V5WQH.js";import{b as kt,c as Dn,e as dc,g as fc,h as pc,i as lc,j as ui,l as Mn,p as Rn,r as gc}from"./chunk-HTDEED7X.js";import{a as Pm,d as bm,m as Tc}from"./chunk-JWIDJEDW.js";import"./chunk-WQ5TWFR7.js";import"./chunk-A7BL4T7A.js";import"./chunk-M7H3BUKN.js";import"./chunk-2PVY7Q74.js";import{c as uo}from"./chunk-AQEDLRCW.js";import{a as yn}from"./chunk-JXXKPVB7.js";import{a as Ht,c as Ct,d as Fm,e as Em}from"./chunk-3LOAATWV.js";import{a as xm,c as ym,d as _m}from"./chunk-OR3IMHNP.js";import"./chunk-G2LUKHAZ.js";import"./chunk-BITK2ZRS.js";import{b as Ac,d as Cc,e as Sc}from"./chunk-GUYSHF5X.js";import{a as Xe}from"./chunk-IPY7DOYN.js";import"./chunk-ITKK42YQ.js";import{a as ci}from"./chunk-IF7RTFSM.js";import"./chunk-NWBT27VI.js";import{a as Lo}from"./chunk-ERRJFVON.js";import{b as Sm}from"./chunk-AGNEMUCC.js";import{a as Fr,b as Ic,d as go,e as di,f as $e,g as fi}from"./chunk-SFY37WOS.js";import{A as vn,B as Je,C as Tt,D as jm,E as Qm,F as oc,G as tc,H as Q,I as Ae,J as ec,K as rc,L as nc,M as oo,O as sc,P as Ye,R as ac,T as ht,U as Ze,V as qe,W as mc,X as ao,Y as Ln,Z as cc,_ as uc,a as Vm,d as kn,e as It,f as S,g as Jt,h as w,i as Ke,j as Hm,k as W,l as Yt,m as j,n as Km,o as Jm,p as wn,q as tt,r as Zt,s as Ym,t as Nn,u as Zm,v as _,w as qm,x as zm,y as Bn,z as qt}from"./chunk-7GRBMPLB.js";import"./chunk-H2MP374E.js";import{a as xo,d as xn,e as vo}from"./chunk-JFCE4WMN.js";import{a as fo}from"./chunk-AXMRDO2L.js";import{f as ic}from"./chunk-2CQDB45Y.js";import{b as ze}from"./chunk-TCY2QN26.js";import"./chunk-TAMFXRQS.js";import{a as Tn}from"./chunk-SWNKITDG.js";import{a as Im}from"./chunk-PCT6WF3F.js";import"./chunk-7G3IOU2S.js";import{e as hn}from"./chunk-FSSAJWUE.js";import"./chunk-EYUJFPID.js";import"./chunk-QXSGLFJ4.js";import"./chunk-LTVFH3JK.js";import{b as hm}from"./chunk-UX45LV4J.js";import"./chunk-S2L2SUZT.js";import"./chunk-WAOH7NV4.js";import{a as GA,e as Gt,g as Ge,h as In,k as Cm}from"./chunk-Z7MVEL6Q.js";import{a as lm}from"./chunk-EQQ4TY26.js";import{a as Sn}from"./chunk-BSJ5U7SB.js";import{c as Tm}from"./chunk-RQ4URFJV.js";import"./chunk-A7QDOMG2.js";import"./chunk-PCN4TJH3.js";import"./chunk-UV4CBWDM.js";import{a as VA,f as gm,h as jo,i as An,l as Cn}from"./chunk-JZYFGUUR.js";import{a as Vt}from"./chunk-55MBPFME.js";import"./chunk-ITV6J4J2.js";import"./chunk-E4R5GU2A.js";import{$ as li,B as tr,C as Zn,D as qn,E as er,F as rr,G as nt,H as Yc,I as nr,J as Zc,K as qc,L as st,M as zc,N as $c,O as Xc,P as pi,Q as jc,R as Qc,S as ou,T as Pr,U as tu,V as eu,W as ru,X as br,Y as zn,Z as $n,_ as Xn,aa as nu,b as Mc,ba as su,c as je,ca as ut,d as Rc,e as Oc,ea as jn,f as Uc,fa as iu,g as Wn,ga as Qn,h as Gn,ha as au,i as Qe,ia as os,j as or,ja as wt,k as Wc,ka as gi,l as et,la as Ai,m as Gc,ma as mu,n as Vn,o as Hn,p as Kn,q as Xt,r as Jn,s as jt,t as Er,u as Vc,v as Hc,w as Kc,x as rt,y as Jc,z as Yn}from"./chunk-PAA53NMF.js";import{m as ro}from"./chunk-PSXFVNX7.js";import{a as kc,b as Un}from"./chunk-JXKIZEPI.js";import"./chunk-RDUIYFM4.js";import{c as Ve}from"./chunk-3OA7XW3I.js";import"./chunk-MVELXHVO.js";import"./chunk-YFG3KJV4.js";import"./chunk-HP4KI3UG.js";import{A as Om,B as Pn,C as _r,D as Um,E as Wm,H as Kt,I as H,J as L,K as yo,N as Gm,P as Oo,Q as He,R as bn,S as zt,W as $m,X as Xm,b as Qo,c as km,f as eo,g as _n,h as Fn,k as wm,l as Nm,m as ot,n as Bm,o as vm,p as St,q as Lm,s as Dm,w as Mm,x as En,z as Rm}from"./chunk-QAD7XKBR.js";import"./chunk-FSHQROIB.js";import{d as Wa,e as Ga}from"./chunk-RSZRDNEQ.js";import"./chunk-LWWOGE47.js";import{d as Xa,e as ja}from"./chunk-PNKC4I7V.js";import"./chunk-OBDMMZ5P.js";import"./chunk-AWV3UGPG.js";import"./chunk-ZFY6KTVJ.js";import"./chunk-LQ6EG3M7.js";import"./chunk-EFXUUWZM.js";import"./chunk-SXT2HSEA.js";import"./chunk-X6MJ7FAJ.js";import"./chunk-4QGZMEGU.js";import"./chunk-JGVOOQUI.js";import"./chunk-OL5PZGTP.js";import"./chunk-T6BAWHSV.js";import"./chunk-NZFRZUU7.js";import"./chunk-GKPU7ZYD.js";import"./chunk-IY5XPXLD.js";import"./chunk-N6T7YZKN.js";import"./chunk-CE2I3GSK.js";import"./chunk-SPMBQ3GG.js";import{d as mi}from"./chunk-W3BHXSAD.js";import"./chunk-KWEOQTFQ.js";import"./chunk-MYLTZKPJ.js";import{a as Xo,b as om,j as tm}from"./chunk-RAK5MQVM.js";import{B as um,C as dm,P as pm,c as We,d as Wt,e as gn,n as rm,o as nm,r as sm,s as im,t as am,u as mm,w as cm}from"./chunk-ILYGYWTN.js";import{a as fm}from"./chunk-HOK5U34D.js";import"./chunk-XPB5VA3I.js";import"./chunk-XSNWL3NI.js";import"./chunk-IOMWHGY3.js";import"./chunk-EDYYUNM2.js";import"./chunk-FOI3TQUA.js";import"./chunk-Y3W2FGGC.js";import"./chunk-6SKAHEOE.js";import"./chunk-QYGNKIL6.js";import{c as Am}from"./chunk-WWF4GAYE.js";import"./chunk-YITM3H6Z.js";import"./chunk-IQFXZKFW.js";import"./chunk-7BFUGHAL.js";import"./chunk-JVN7YJ6W.js";import"./chunk-VSX7BSN7.js";import{a as em}from"./chunk-V4V6C6NY.js";import{b as Me}from"./chunk-ZQ5A3KPQ.js";import{a as Qa}from"./chunk-BGUY7SH3.js";import{s as pe,t as xr,w as M}from"./chunk-MJYAUOKI.js";import"./chunk-LI3NFLG3.js";import{A as Ra,B as Oa,a as so,c as Re,d as va,j as gt,n as La,o as ho,q as zo,r as Ot,s as Da,t as ge,x as Ut,y as Ma}from"./chunk-FCCCJLF6.js";import{Za as Ua,a as dn,f as $o,la as fn,ma as pn,na as Oe}from"./chunk-4Z4GXCHB.js";import{Pa as an,db as qo,h as ya,n as ii,q as rn,s as fe,y as E}from"./chunk-FK3ETA6I.js";import{X as bt,_ as ka,aa as le,b as lt,ba as wa,d as Pa,ea as Zo,fa as to,ia as Na,ja as Ba,m as ba,n as ai,r as mn,s as Rt,t as cn,u as Le,v as De,w as un}from"./chunk-QZDHFNHK.js";import"./chunk-24PQFN5C.js";import{a as _a}from"./chunk-6KPQELH2.js";import{a as bo}from"./chunk-EJQOS3F4.js";import"./chunk-F2C2DYTN.js";import"./chunk-LHHZ5TAA.js";import"./chunk-PI6QLVMS.js";import"./chunk-QY4HIIR3.js";import"./chunk-XFWUEPSK.js";import{d as Y,f as Po}from"./chunk-MNNY2ODL.js";import{c as Va,f as Ha}from"./chunk-VCAWL4NW.js";import{a as WA}from"./chunk-HRB2XUO3.js";import"./chunk-XVIU24G2.js";import"./chunk-Q277JDUA.js";import{a as ln}from"./chunk-2LDYLNUY.js";import{b as ct}from"./chunk-KCITCUTL.js";import{c as Ka,e as Ja,f as Ya,g as Za,h as qa,i as za,m as $a}from"./chunk-YZ3HCB4K.js";import"./chunk-EZ7VUFME.js";import{a as Ue,b as At}from"./chunk-T2OWRX3Y.js";import{f as nn}from"./chunk-C3FJ2D4V.js";import{c as UA}from"./chunk-C5ZJZEPI.js";import"./chunk-LGHM3MOC.js";import"./chunk-2FULUWWG.js";import"./chunk-SLEUZTBQ.js";import"./chunk-4X6ZAX3L.js";import{c as Z}from"./chunk-4QSQKIBZ.js";import{b as Jo,c as ve}from"./chunk-OXVQDEZW.js";import{g as Sa,j as pt,m as Ne}from"./chunk-X3G52GGX.js";import"./chunk-WUKT6J7S.js";import"./chunk-FTJCOLFJ.js";import{C as ta,Ca as la,D as ea,E as ra,Eb as en,Fa as ga,Ga as si,Hc as Ea,Jc as Yo,Kb as co,M as na,Na as Aa,S as on,Tc as D,Vc as yr,Xa as Ca,Yc as sn,ac as Ia,cb as tn,fc as Ta,hb as we,ia as sa,ib as No,ja as ia,jb as Co,jc as OA,kb as no,la as aa,lb as Pt,lc as ha,m as mt,ma,mc as hr,na as ca,nb as Bo,oa as ua,ob as Tr,pa as da,pb as Ko,q as jr,qa as fa,qc as xa,ra as pa,rb as Be,u as Qr,v as oa,xc as Fa,za as To}from"./chunk-QG673PNL.js";import"./chunk-ZUFARSFM.js";import{D as Xr,G as be,L as ke,c as Xi,f as $r,n as de,p as Et,q as ji,r as Qi}from"./chunk-6MTHEPGF.js";import{I as J,m as V,v as Ee,w as F}from"./chunk-ZQQ7HNWV.js";import"./chunk-Y62GSKHT.js";import"./chunk-2BXFMFMK.js";import{M as $i,S as Pe,Y as Io,c as Mt}from"./chunk-ZOQTSYT4.js";import{a as x}from"./chunk-ADZWCU3Q.js";import"./chunk-AXQY4CD5.js";import"./chunk-ZPRPROG4.js";import"./chunk-FDI7TLXH.js";import"./chunk-L4HTIIR6.js";import"./chunk-733NI6T7.js";import"./chunk-5TB3ZTAO.js";import"./chunk-KLGATC6G.js";import"./chunk-EYWGNJVY.js";import"./chunk-PIGJQYQ3.js";import"./chunk-KNDZEUJE.js";import"./chunk-BDEVQ2S7.js";import"./chunk-EWYZZSY3.js";import"./chunk-7K7BCLRD.js";import"./chunk-WELSRPTB.js";import"./chunk-7TSJ7C24.js";import"./chunk-DW2DZMT3.js";import"./chunk-C672KFBI.js";import"./chunk-YSXN7JDZ.js";import{a as RA}from"./chunk-TBVIGR5T.js";import"./chunk-FHQVMQUK.js";import"./chunk-XNS2NFYY.js";import{f as u,m as n,n as p,o as s}from"./chunk-REC7XVZY.js";n();s();var at=u(x()),ue=u(bo()),LA=u(mt());n();s();var sr=u(x()),ss=u(E()),Tu=u(bo());var HA=()=>{let o=(0,Tu.useHistory)(),t=(0,ss.useDispatch)(),e=(0,ss.useSelector)(km),r=(0,sr.useRef)(e);return r.current=e,(0,sr.useEffect)(()=>{let{fromPage:i}=o.location?.state||{};return i&&t(Mm(i)),t(En(!0)),()=>{r.current&&(t(bn()),t(os()))}},[]),null},hu=(0,sr.memo)(HA);n();s();n();s();n();s();var bu=u(x());n();s();var oe=u(x());J();n();s();var xu=u(x());J();Po();var KA=()=>{let o=Xo(),[t,e]=(0,xu.useState)(!1);return[so(async i=>{try{e(!0);let a=await Y().getRequestHeaders({currency:"usd",walletId:o,needSign:!0}),{data:m}=await pm(i,{txSource:1},{headers:a}),c="";if(m?.canRecharge||(c=m.rechargeMsg),m?.canWithdraw||(c=m.withdrawMsg),c){let d=de.warn({text:c,confirmText:F("commonall_text_btn_ok_passive"),alignBottom:!1,onConfirm:()=>{d.destroy()}});return!1}return!0}catch{return be.error(F("wallet_home_toast_network_error")),!1}finally{e(!1)}}),t]},yu=KA;n();s();n();s();var Qt=u(x());J();function JA({loading:o,tag:t,customRender:e,focus:r,noMargin:i,noPadding:a,onChange:m,onRef:c,...d}){let A=(0,Qt.useRef)(null);(0,Qt.useLayoutEffect)(()=>{r&&A.current?.focus()},[]);let l=F("wallet_extension_transaction_placeholder_input_address");return Qt.default.createElement(Nt.Row,{noMargin:i,noPadding:a},Qt.default.createElement(Et.TextArea,{placeholder:l,errorType:Et.TIP_TYPE.always,size:Et.SIZE.xl,autoResize:!0,...d,onRef:f=>{A.current=f,c&&c(f)},onChange:f=>{m&&m(f.target.value)},customRender:({inputComponent:f})=>{let g=Qt.default.createElement(Nt.InputCustomRender,{inputComponent:f,loading:o,tag:t});return e?e({inputComponent:f,customInputComponent:g}):g}}))}var Ci=JA;n();s();var _o=u(x()),Ce=u(E()),Nr=u(mt()),Fu=u(Mt());J();n();s();var _u={selected:"_selected_1fq8b_1"};function YA({value:o,network:t}){let e=(0,Ce.useDispatch)(),r=(0,Ce.useSelector)(Qo),[i,a]=(0,_o.useState)(!1),[m,c]=(0,_o.useState)({}),[d,A]=(0,_o.useState)(""),l=Sc(()=>{A(rs.TYPE.ADD),c({address:o,network:t}),a(!0)}),f=(C={})=>{a(!1),c({}),A(""),C.name&&e(_r({name:C.name,type:ai.ADDRESS_BOOK}))},g=C=>{a(!1),setTimeout(()=>{A(rs.TYPE.EDIT),c({...C,network:t}),a(!0)})};return _o.default.createElement(_o.default.Fragment,null,_o.default.createElement(Nt.InputBottomBar,{title:F("wallet_extension_send_errortip_not_in_address_book"),buttonTitle:F("wallet_extension_send_anchor_add_now"),buttonClick:l}),i&&_o.default.createElement(rs,{type:d,data:m,onClose:f,onChangeToEdit:g,onBackToHome:()=>r}))}function ZA({visible:o,options:t,onSelect:e,onChange:r}){let i=(0,Ce.useDispatch)();if(!o)return null;let a=({walletId:m,address:c,name:d,type:A,group:l,addressType:f})=>{if(e(),r(c),d){let g=l?`${l} - ${d}`:d;i(_r({name:g,type:A,extra:{walletId:m,group:l,name:d,addressType:f}}))}};return _o.default.createElement(Nt.SelectAddress,{options:t,onSelect:a})}function qA(o,t,e){let r=e?.matchAddress||((i,a)=>(0,Nr.toLower)(a.address).includes((0,Nr.toLower)(i))||a.name&&(0,Nr.toLower)(a.name).includes((0,Nr.toLower)(i)));return(0,_o.useMemo)(()=>{if(!o?.length)return[];if(!t)return o;let i=[];return o.forEach(({group:a,list:m})=>{let c=[];m.forEach(d=>{r(t,d)&&c.push(d)}),c.length&&i.push({group:a,list:c})}),i},[o,t])}function zA({value:o,error:t,onChange:e,isCheckingError:r,extraProps:i,onBlur:a,onFocus:m,...c}){let d=(0,Ce.useDispatch)(),A=It(),{coin:l}=S(),{localType:f}=l,g=(0,Ce.useSelector)(Fn),C=_(),{filterAddress:T,disableRequestDomain:I}=i||{},h=!o,y=!!o&&!t&&!g?.name&&!r,P=Cc(f,C),N=(0,_o.useMemo)(()=>T?T(P):P,[P,T]),[k,v]=(0,_o.useState)((!o||!!t)&&!y&&N?.length>0),b=qA(N,o,i),R=Ac(f),O=G=>{e(G);let io=R(G),lo=Boolean(G&&io);d(_r(lo?io:null))},{loading:B,abort:U}=Vm({domainInputValue:o,coinId:A},({address:G,domain:io})=>{d(Pn({key:"",args:{}})),e(G),d(_r({name:io,type:ai.ENS}))},I),K=Ot(!!B||!!c.loading||!!r,{wait:200});return Oa(()=>{r||(!!o&&!t&&b.length===0?v(!1):!!t&&b?.length>0&&v(!0))},[o,t,r,b?.length],{wait:100}),_o.default.createElement("div",{className:(0,Fu.default)({[_u.selected]:k})},_o.default.createElement(Nt.Row,{noMargin:k},_o.default.createElement(Ci,{...c,noMargin:!0,noPadding:!0,loading:K,tag:g?.name,focus:h,value:o,error:!K&&t,onChange:O,onBlur:G=>{o&&!t&&setTimeout(()=>{v(!1)},100),a&&a(G)},onFocus:G=>{b?.length>0&&v(!0),m&&m(G)}}),y&&_o.default.createElement(YA,{network:f,value:o})),_o.default.createElement(ZA,{visible:k,extraProps:i,value:o,options:b,onSelect:()=>{U(),v(!1)},onChange:e}))}var Si=zA;n();s();var is=u(x()),Br=u(E());J();function $A({Component:o=Si,loading:t=!1,extraProps:e,errorFns:r={fns:[],override:!1}}){let i=(0,Br.useDispatch)(),a=(0,Br.useSelector)(eo),m=(0,Br.useSelector)(_n),c=Qm(),{isCheckingError:d,runErrorFns:A}=Je(c,r),l=g=>{A(g,C=>{i(Pn(C))})},f=g=>{l(g),i(Om(g))};return(0,is.useEffect)(()=>{i(Rm(d))},[d]),is.default.createElement(o,{value:a,onChange:f,loading:t,isCheckingError:d,error:m?.key?F(m?.key,m?.args):null,extraProps:e||{}})}var Ii=$A;n();s();var Eu={content:"_content_12kl2_1"};function XA({headerProps:o={},addressProps:t={},confirmButtonProps:e={}}){let r=It(),i=Bn(),a=zm(),m=qt(),[c,d]=yu(),A=(0,oe.useMemo)(()=>{let{disabled:l,loading:f,onClick:g,...C}=e||{},T=l||i,I=async()=>{let h=g||m;await c(r)&&await h()};return[{disabled:T,btnText:F("wallet_extension_send_btn_next_step"),actionType:vo.ACTION_TYPE.CONFIRM,loading:!T&&(f||a||d),onClick:I,...C}]},[e,i,a,m,c,d,r]);return oe.default.createElement(ts,{slot:{header:oe.default.createElement(es,{...o,title:F("wallet_extension_send_title_recipient_address")}),footer:oe.default.createElement(vo,{buttonGroup:A})}},oe.default.createElement("div",{className:Eu.content},oe.default.createElement(Ii,{...t})))}var z=XA;n();s();var jA=()=>{let{coin:o}=S();return so(async t=>{try{if(!o||o.baseCoinId===0)return null;let{register:e}=await fm({address:t,contractAddress:o.address,chainIndex:o?.chainId});return e?null:{key:"wallet_extension_note_address_not_register",args:{token:o.symbol}}}catch{return null}})},Pu=()=>[jA()];var QA=()=>{let o=Pu();return bu.default.createElement(z,{addressProps:{errorFns:o}})},ku=QA;n();s();var vu=u(x());n();s();var wu=u(x()),Nu=u(E());var oC=()=>{let[o,{setFalse:t}]=ho(!0),{coin:e}=S(),r=_(),i=(0,Nu.useDispatch)(),{chainId:a,coinId:m}=e;return(0,wu.useEffect)(()=>{a&&r&&(async()=>{try{let d={coinId:m,chainId:a,address:r},A={fromAddr:r},{maxGasAmount:l,gasUnitPrice:f,fee:g}=await cm(d,A);i(H(g)),i(Zc({maxGasAmount:l,gasUnitPrice:f})),i(L(!1))}catch{i(L(!0))}finally{t()}})()},[a,r]),o},Bu=oC;function tC(){let o=Bu();return Q(),vu.default.createElement(q,{confirmButtonProps:{loading:o}})}var Lu=tC;n();s();var Ju=u(x());n();s();var Eo=u(x()),vr=u(E()),Hu=u(mt());J();n();s();var Du=u(x()),Mu=u(E());co();function Ru(){let o=(0,Mu.useDispatch)(),t=Yt(),e=ht();(0,Du.useEffect)(()=>{if(t){let r=e;Bo(r,0)&&(r="0"),o(Um(r))}},[t,e])}n();s();var Ou=u(bo()),eC=({disabled:o,onSubmit:t,feeLoading:e,loading:r,onClick:i,networkFee:a,renderActions:m,...c},d)=>{let A=(0,Ou.useHistory)(),l=Jt(),{coin:f}=S(),g=_(),{loading:C,onClick:T}=uc(t),I=cc();return Re(()=>{if(m&&typeof m=="function"){let y=m(d);if(y)return y}if([to.BALANCE_INSUFFICIENT,to.FEE_BALANCE_INSUFFICIENT].includes(d)){let y=d===to.BALANCE_INSUFFICIENT?f?.coinId:l?.coinId;return[{actionType:vo.ACTION_TYPE.CANCEL,onClick:()=>{A.goBack()}},{coinId:y,address:g,actionType:vo.ACTION_TYPE.FILL_UP}]}let h={};return[Zo.DEFRAUD,Zo.SIMILAR].includes(d)&&(h={type:Io.TYPE.red}),[{loading:r||C,disabled:o||I||e,actionType:vo.ACTION_TYPE.CONFIRM,onClick:i||T,...h,...c}]},[e,r,f?.coinId,I,T,o,d,l?.coinId,g,C,i,c])},Uu=eC;n();s();var Wu=u(x());var rC=({loading:o,chainName:t,feeLevel:e,onClick:r,...i},a)=>{let m=j(),c=Zt(),d=tt(),A=Jm(),l=wn(),f=$t(),g=r?()=>{r(),a({trade:"send",network:t,all_confirmation:"network_fee"})}:void 0,C=(0,Wu.useMemo)(()=>e!==void 0?e:bt?.STANDARD,[e]);return{gasReturn:f,currencyId:d,networkFee:A&&m==="0"?void 0:m,loading:o||A,level:C,coinId:c,estimateFailed:!!l,onClick:g,...i}},Gu=rC;n();s();var Ti=u(E()),nC=()=>{let o=Yt(),t=S(),e=(0,Ti.useSelector)(Lm),r=tt(),i=t?.coin?.coinId,a=W(),m=Cm(i,a,{currencyId:r,formatted:!1}),c=(0,Ti.useSelector)(wm);return Re(()=>{let d=0,A=0;return e===hm?o?(A=m,d=a):(d=void 0,A=c):(d=a,A=void 0),[{currencyId:r,coinAmount:d,currencyAmount:A,coinId:i}]},[e,r,i,o,m,c,a])},Vu=nC;n();s();var hi={};function sC({loading:o,headerProps:t={},networkFeeProps:e={},confirmButtonProps:r={},containerProps:i={},tipMessageProps:a={},slot:m={},checkEmpty:c=!0,addressType:d,renderMessage:A,defaultMessage:l,canTransferAmount:f,blockAddressInfo:g={}}){let C=(0,vr.useSelector)(eo),T=(0,vr.useSelector)(Fn),I=Xo(),h=xc(I),y=(0,vr.useSelector)(Dm),P=(0,vr.useSelector)(Rc),N=_(),k=Vu(),{coin:v,baseCoin:b}=S(),R=Gu({...e,chainName:v?.chainName},h),{loading:O,estimateFailed:B}=R,K=R?.gasReturn?.activity?.errorCode,{bottom:G,footer:io,top:lo}=m,X=Eo.default.createElement(go,null,Eo.default.createElement(Lo,{...R}));G&&((0,Hu.isFunction)(G)?X=G(R):X=G),cu(c),Ru(),(0,Eo.useEffect)(()=>{K===0&&Am({wallet_address:N,chain_id:b.chainId,transaction_type:"transfer"})},[K]);let po=Uu({...r,feeLoading:O},y?.type||P);return Eo.default.createElement(ts,{...i,loading:o,className:hi.root,slot:{top:lo,header:Eo.default.createElement(es,{...t,title:F("wallet_extension_send_title_send")}),footer:io||Eo.default.createElement(Eo.default.Fragment,null,Eo.default.createElement(fi,{...a,address:C,coinId:v?.coinId,type:y?.type||P||B&&fi.TIP_TYPE.FEE_ERROR||Xi.TYPE.warn,renderMessage:A,message:y?.text||!!y?.key&&F(y.key,y?.args)||!B&&l,blockAddressInfo:g}),Eo.default.createElement(vo,{buttonGroup:po}))}},Eo.default.createElement("div",{className:hi.content},Eo.default.createElement(go,null,Eo.default.createElement(Ic,{summaryList:k,title:F("wallet_extension_send_colored_send")})),Eo.default.createElement(go,null,Eo.default.createElement(di,{address:N,addressType:d,title:F("extension_send_mid_text_from"),walletId:I,onCopyCallback:()=>{h({trade:"send",network:v?.chainName,all_confirmation:"wallet_used_address"})}},!!f&&Eo.default.createElement(Bc,{coinBalance:f,coinId:b.coinId})),Eo.default.createElement(di,{tags:T?.name?[T?.name]:null,address:C,title:F("extension_send_mid_text_to"),onCopyCallback:()=>{h({trade:"send",all_confirmation:"to_address",network:v?.chainName})}})),X))}var $=sC;n();s();var xi=u(E());we();co();Po();var Ku=()=>{let o=fo(),{coin:t}=S(),e=_(),r=ao(),i=(0,xi.useSelector)(eo),a=(0,xi.useSelector)(Mc),{gasUnitPrice:m,maxGasAmount:c}=a;return uo(async()=>await Wt({address:e,coinId:t.coinId},{fromAddr:e,toAddr:i}),async(C={})=>{let{info:T={}}=C,{sequenceNumber:I,chainId:h,expirationTimestampSecs:y,tyArg:P}=T,N={sequenceNumber:I,chainId:h,maxGasAmount:c,gasUnitPrice:m,expirationTimestampSecs:y},k={recipientAddress:i,amount:r},v={base:{...N}};t.baseCoinId===0&&(v.type=cn.TRANSFER,v.data={...k}),t?.baseCoinId!==0&&t?.protocolType===yr.APTOS_FUNGIBLE_TOKEN&&(v.type=cn.FUNGIBLE_ASSET_TRANSFER,v.data={...k,fungibleAssetMetadataAddress:t?.address}),t?.baseCoinId!==0&&t?.protocolType===yr.APTOS_TOKEN&&(v.type=cn.TOKEN_TRANSFER,v.data={...k,tyArg:P});let b=await Y().signTransaction(v,e,Aa);return{signInfo:C,signedTx:b}},async({signInfo:C,signedTx:T})=>{let{info:I={}}=C,{sequenceNumber:h}=I,y={nonce:h},P=await xo(t.localType,T),N={signedTx:T,coinAmount:r,coinId:t.coinId,fromAdr:e,toAdr:i,serviceCharge:No(m,c),extJson:JSON.stringify(y),txHash:P};return await o(N)},C=>(ro({tx_id:C}),C))};function iC(){let o=Ku(),t=async()=>{await o()};return oo(),Ju.default.createElement($,{confirmButtonProps:{onSubmit:t}})}var Yu=iC;var aC={match:o=>Za(o),pages:{AddressPage:ku,AmountPage:Lu,ConfirmPage:Yu}},Zu=aC;n();s();n();s();var $u=u(x());n();s();var mC=()=>{let{initialType:o}=om();return async t=>{let{isValid:e}=await $m(t);return e&&Va(o)?{key:"wallet_extensions_hardware_alert_taproot_unsupported",args:{}}:null}},cC=()=>[mC()],qu=cC;n();s();var Lr=u(x()),zu=u(bo());To();var uC=()=>{let{coinId:o}=(0,zu.useParams)(),e=Gt(o)?.protocolId,r=Object.values(D),i=gm(),a=i.filter(({keyringIdentityType:f})=>Ha(f)),m=i.filter(({keyringIdentityType:f})=>f===Ea.MPC),c=(f,g)=>!f.some(({walletIdentities:C})=>C.some(({addressType:T={}})=>{let I=T[jr];return I?I.some(({address:h})=>g.address===h):!1})),d=(0,Lr.useCallback)(f=>r.includes(e)?c(a,f):!0,[a,e,r]),A=(0,Lr.useCallback)(f=>[D.BRC_20,D.FRACTAL_BRC20,D.BRC_20S].includes(e)?!0:r.includes(e)?c(m,f):!0,[m,e,r]),l=(0,Lr.useCallback)((f=[])=>f.filter(g=>d(g)&&A(g)),[d,A]);return(0,Lr.useCallback)(f=>f.map(g=>({...g,list:l(g?.list)})).filter(g=>g?.list?.length),[l])},as=uC;var dC=()=>{let o=qu(),t=as();return $u.default.createElement(z,{addressProps:{errorFns:o,extraProps:{filterAddress:t}}})},Xu=dC;n();s();var re=u(x());J();n();s();function fC(){let o=_(),{coin:t}=S();return pu(t,o)}var te=fC;n();s();var Mo=u(x()),ee=u(E()),td=u(mt());J();n();s();n();s();co();Po();Ne();ve();var ms=async({walletId:o,signedTx:t,coinId:e,coinAmount:r,fromAdr:i,toAdr:a,serviceCharge:m,txHash:c,walletType:d,txType:A,extJson:l})=>{let f=Jo.postTx,g=await Y().getRequestHeaders({walletId:o,needSign:!0,currency:"usd"}),C={};e==1&&(C.btcSpeedUpInfo=JSON.stringify({sequence:1}));let{data:T}=await pt(f,{signedTx:t,coinId:e,coinAmount:r,fromAdr:i,toAdr:a,serviceCharge:m,txSource:Yo.NORMAL,txHash:c,accountId:o,walletType:d,...C,extJson:l,txType:A},{headers:g});return T};var ju=(o,t)=>!o||!o.length?"0":o.reduce((r,i)=>{let m=(i.nftLocaltionVOs||[]).reduce((c,d)=>d.nftId===t?no(c,d.value):c,"0");return no(r,m)},"0"),yi=({address:o,amount:t="0",satAmount:e="0",tokenType:r="FT",atomicalId:i},a=546)=>(e=Ko(e,0)?e:t,{address:o,amount:Tr(e,a)?a:Number(e),data:[{atomicalId:i,type:r,amount:Number(t)}]}),Qu=(o,t=546)=>!o||o.length===0?!1:o.some(e=>{let r=e?.data?.[0]?.amount;return r===void 0?!1:Bo(r,t)}),od=(o,t=546)=>!o||o.length===0?!1:o.every(e=>{let r=e?.data?.[0]?.amount;return r===void 0?!1:Bo(r,t)});var lC=()=>{let o=(0,ee.useDispatch)(),t=(0,ee.useSelector)(Wn),e=(0,Mo.useCallback)(r=>{o(Xc({selectedNetworkFeeLevel:r}))},[]);return[t?.selectedNetworkFeeLevel,e]},gC=({fromAddr:o,toAddr:t,protocolId:e,minOutput:r,sendAmountInt:i,transferInputs:a})=>{let m=(0,ee.useDispatch)();return(0,Mo.useMemo)(()=>{if(D.ARC_20!==e)return null;if(!a||a.length===0||V.eq(i,0))return m(pi([])),null;let c=a[0]?.nftLocaltionVOs[0]?.tokenType,d=a[0]?.nftLocaltionVOs[0]?.nftId,A=yi({address:t,amount:i,tokenType:c,atomicalId:d},r),l=ju(a,d),f=V.sub(l,i),g=yi({address:o,amount:f,tokenType:c,atomicalId:d},r),C=[];return V.lte(f,0)?C.push(A):V.lt(f,r)?C.push(A,g):V.gte(f,r)&&C.push(g,A),m(pi(C)),C},[e,a,i,t,r,o,m])},AC=({fromAddr:o,toAddr:t,coinTick:e,transferInputs:r,minOutput:i,isXrc20Token:a,protocolId:m,sendAmountInt:c})=>{let d=gC({fromAddr:o,minOutput:i,protocolId:m,sendAmountInt:c,toAddr:t,transferInputs:r});return(0,Mo.useMemo)(()=>!a||D.SRC_20===m||!r?.length?null:D.ARC_20===m&&d?d:D.RUNES===m?[{address:t,amount:i,data:{id:e,amount:c}}]:D.RUNEMAIN===m||D.FRACTAL_RUNES?[{address:t,amount:i,data:{id:e,amount:c}}]:[{address:t,amount:Number(c),...dc(r[0],m)}],[e,a,i,m,c,t,r,d])},CC=({coin:o,coinId:t,walletId:e,protocolId:r,tick:i,address:a,coinAmount:m,isXrc20Token:c})=>{let[,d]=lc({coinId:t,walletId:e,protocolId:r,tick:i,address:a,coinAmount:m,utxoType:kt.BRC20_CONVERTIBLE},{ready:o&&c&&r!==D.SRC_20});return[null,d]},SC=({coinId:o,isXrc20Token:t,sendAmountInt:e,protocolId:r,inscriptionOutput:i})=>(0,Mo.useMemo)(()=>o===22?546:t?r===D.SRC_20?i||790:"0":e,[o,t,e,r,i]),IC=({coin:o,isXrc20Token:t,protocolId:e,satBytes:r,transferInputs:i})=>(0,Mo.useMemo)(()=>!o||!r?!1:!(e&&t&&e!==D.SRC_20&&!i?.length),[o,t,e,r,i?.length]),TC=({coin:o,protocolId:t})=>(0,Mo.useMemo)(()=>{if(o?.address&&[D.RUNES,D.ARC_20,D.RUNEMAIN,D.FRACTAL_RUNES].includes(t))return(0,td.last)(o?.address?.split("-"))},[o?.address,t]),hC=({coin:o,isXrc20Token:t,protocolId:e,sendAmount:r})=>(0,Mo.useMemo)(()=>{if(t&&e===D.SRC_20)return{body:JSON.stringify({p:"src-20",op:"transfer",tick:o?.name,amt:r})}},[o?.name,t,e,r]),xC=({coinId:o,walletId:t,satBytes:e,address:r,isXrc20Token:i,coinBalance:a})=>{let m=(0,ee.useDispatch)(),[c,d]=ui({coinId:o,walletId:t,satBytes:e,address:r},{onSuccess:A=>{m(o!==22&&!i?Oo(A):Oo(a?.coinAmountInt)),m(He(A))}});return[c,d]},yC=({coinId:o,walletId:t,protocolId:e,tick:r,address:i})=>{let a=(0,ee.useDispatch)(),[m,c]=ui({coinId:o,walletId:t,protocolId:e,tick:r,address:i,coinAmount:"0",utxoType:kt.BRC20_CONVERTIBLE},{ready:[D.RUNES,D.ARC_20,D.RUNEMAIN,D.FRACTAL_RUNES].includes(e),onSuccess:d=>{a(Oo(d))}});return[m,c]},_C=({coinId:o,toAddr:t,walletId:e,fromAddr:r,satBytes:i,inputs:a,outputs:m,networkFee:c,revealOutValue:d,coinAmount:A,utxoParams:l,inscriptionData:f,isXrc20Token:g,availableFeeCoinAmountInt:C,availableSendCoinAmountInt:T,sendAmountInt:I},{ready:h,networkFeeInt:y})=>{let P=(0,ee.useDispatch)(),[N,k,v]=Rn({coinId:o,toAddr:t,walletId:e,fromAddr:r,satBytes:i,inputs:a,outputs:m,networkFee:c,revealOutValue:d,coinAmount:A,utxoParams:l,inscriptionData:f,canTransferAmount:o===22||g?C:T,...o===22?{omni:{coinType:31,amount:I}}:{}},{ready:h,onSuccess:b=>{Math.abs(Number(V.sub(b,y)))!==parseInt(i,10)&&(P(H(b)),P(L(!1)))},onError:b=>{P(L(b))}});return[N,k,v]},FC=()=>{let o=It(),t=_(),e=w(),r=jo(),i=Gt(o),a=i?.protocolId,m=fc(a),c=i?.baseCoinId||o,d=hn(t,r,i?.localType),A=Ke(),l=j(),f=W(),g=Nn(),C=ht(),T=Ym(),[,I]=yn({protocolId:a,coinId:o,address:t,chainId:i?.chainId}),{inscriptionOutput:h,minOutput:y}=I||{},[P,N]=lC(),k=P?.satBytes;(0,Mo.useEffect)(()=>{if(!k&&I?.normal&&N({level:bt.STANDARD,satBytes:I?.normal}),k&&P?.level!==bt.CUSTOM){let Fe=I[Fc[P?.level]?.satBytes];N({...P,satBytes:Fe})}},[I]);let v=Ge(o,void 0,{addressType:d}),b=SC({coinId:o,isXrc20Token:m,sendAmountInt:f,protocolId:a,inscriptionOutput:h}),R=TC({coin:i,protocolId:a}),[,O]=CC({coin:i,coinId:o,walletId:r,protocolId:a,tick:R,address:t,coinAmount:f,isXrc20Token:m}),B=AC({fromAddr:t,toAddr:e,coinTick:R,transferInputs:O,minOutput:y,isXrc20Token:m,protocolId:a,sendAmountInt:f}),U=(0,Mo.useMemo)(()=>{if(O?.length)return O.map(({txHash:Fe,vout:zr})=>`${Fe}-${zr}`)},[O]),K=IC({coin:i,isXrc20Token:m,protocolId:a,satBytes:k,transferInputs:O}),G=hC({coin:i,isXrc20Token:m,protocolId:a,sendAmount:A}),io=(0,Mo.useMemo)(()=>a===D.SRC_20?{protocolId:a,utxoType:kt.BRC20_CONVERTIBLE}:{utxoType:kt.TRANSFER,needFilteredUtxo:[D.RUNES,D.ARC_20,D.RUNEMAIN,D.FRACTAL_RUNES].includes(a)?U:void 0},[U,a]),[lo,X]=xC({coinId:o,walletId:r,satBytes:k,address:t,isXrc20Token:m,coinBalance:v}),[po,Ro]=yC({coinId:o,walletId:r,protocolId:a,tick:R,address:t}),[_e,,ri]=_C({coinId:o,toAddr:e,walletId:r,fromAddr:t,satBytes:k,inputs:O,outputs:B,networkFee:l,revealOutValue:h,coinAmount:b,utxoParams:io,inscriptionData:G,isXrc20Token:m,availableFeeCoinAmountInt:g,availableSendCoinAmountInt:T,sendAmountInt:f},{ready:K,networkFeeInt:l}),ni=(0,Mo.useMemo)(()=>[D.RUNES,D.ARC_20,D.RUNEMAIN,D.FRACTAL_RUNES].includes(a)?X===void 0||Ro===void 0:X===void 0,[X,a,Ro]);return{coin:i,toAddr:e,coinId:o,walletId:r,signInfo:I,feeError:ri,fromAddr:t,protocolId:a,baseCoinId:c,feeLoading:_e,addressType:d,sendAmountInt:f,networkFeeInt:l,transferInputs:O,transferOutputs:B,isXrc20Token:m,utxoParams:io,initLoading:ni,mergedCoinAmount:b,src20InscriptionData:G,sendCoinAvailableAmount:C,availableSendCoinAmountInt:T,availableFeeCoinAmountInt:g,selectedNetworkFeeLevel:P,setSelectedNetworkFeeLevel:N,loading:lo||_e||po}},cs=FC;n();s();var id=u(x());J();n();s();var nd=u(x());J();n();s();n();s();var ed=u(E());var rd=()=>(0,ed.useSelector)(Wn).transferOutputs;var sd=({isArc20Token:o,sendCoinBalance:t,doubleMinOutput:e,minOutput:r,coin:i})=>{let a=rd();return(0,nd.useCallback)(m=>o?V.lte(t,e)&&m!==t?{key:"wallet_extension_error_dust_limit_full_amount",args:{amount:t,token:i?.symbol},type:to.COMMON_ERROR}:od(a,r)?{key:"wallet_extension_error_dust_limit_transaction",type:to.COMMON_ERROR}:Qu(a,r)?{key:"wallet_extension_error_dust_asset_continue",type:to.COMMON_TIP}:null:null,[o,t,e,r,i,a])};var ad=o=>{let t=It(),e=Gt(t),r=e?.baseCoinId===0,a=e?.protocolId===D.ARC_20,m=V.div(o,10**e?.decimals),c=ht(),d=V.mul(m,2),A=sd({isArc20Token:a,sendCoinBalance:c,doubleMinOutput:d,minOutputFloat:m,minOutput:o,coin:e});return(0,id.useCallback)(l=>{if(!o)return null;let f=A(l);return f||(r&&V.lt(l,m)?{key:"wallet_extension_send_transfer_at_least",args:{amount:`${m} ${e?.symbol}`},type:to.COMMON_ERROR}:null)},[o,A,r,m,e?.symbol])},md=o=>{let t=ad(o);Q([t])},cd=o=>{let t=ad(o);oo([t])};n();s();var mo=u(x());var ar=u(Mt());J();n();s();var ir={container:"_container_17byu_1",link:"_link_17byu_6","pending-assets":"_pending-assets_17byu_11",pendingAssets:"_pending-assets_17byu_11"};var EC=({lockedAmount:o,lockedAmountDisplay:t,pendingXrc:e,pendingXrcDisplay:r,availableWithoutSpending:i,availableWithoutSpendingDisplay:a,availableReceiving:m,availableReceivingDisplay:c,goToInscribe:d,addressType:A,coinId:l})=>{let{handleClick:f}=lu(A,l);return mo.default.createElement(mo.default.Fragment,null,mo.default.createElement(Z.Box,{className:(0,ar.default)(ir.container)},Number(o)>0&&mo.default.createElement(Z.FlexBox,{justify:"space-between"},mo.default.createElement(Z.Box,null,mo.default.createElement(M.Text,{type:M.TYPE.secondary,size:M.SIZE.xs},F("extension_wallet_btc_in_use"))),mo.default.createElement(Z.Box,null,mo.default.createElement(M.Text,{type:M.TYPE.secondary,size:M.SIZE.xs},t),mo.default.createElement(M.Text,{size:M.SIZE.xs,className:(0,ar.default)(ir.link),onClick:f},F("extension_wallet_btc_btn_unlock_use")))),Number(e)>0&&mo.default.createElement(Z.FlexBox,{justify:"space-between",className:(0,ar.default)(ir.pendingAssets)},mo.default.createElement(Z.Box,null,mo.default.createElement(M.Text,{type:M.TYPE.secondary,size:M.SIZE.xs},F("extension_wallet_btc_select_receiving"))),mo.default.createElement(Z.Box,null,mo.default.createElement(M.Text,{type:M.TYPE.secondary,size:M.SIZE.xs},r))),Number(i)>0&&mo.default.createElement(Z.FlexBox,{justify:"space-between"},mo.default.createElement(Z.Box,null,mo.default.createElement(M.Text,{type:M.TYPE.secondary,size:M.SIZE.xs},F("extension_wallet_btc_to_be_inscribed"))),mo.default.createElement(Z.Box,null,mo.default.createElement(M.Text,{type:M.TYPE.secondary,size:M.SIZE.xs},a),mo.default.createElement(M.Text,{size:M.SIZE.xs,className:(0,ar.default)(ir.link),onClick:d},F("extension_wallet_btc_btn_inscribe")))),Number(m)>0&&mo.default.createElement(Z.FlexBox,{justify:"space-between",className:(0,ar.default)(ir.pendingAssets)},mo.default.createElement(Z.Box,null,mo.default.createElement(M.Text,{type:M.TYPE.secondary,size:M.SIZE.xs},F("extension_wallet_btc_select_receiving"))),mo.default.createElement(Z.Box,null,mo.default.createElement(M.Text,{type:M.TYPE.secondary,size:M.SIZE.xs},c)))))},us=EC;n();s();var Uo=u(x());J();var PC=()=>{let o=Jt(),{coin:t}=S();return(0,Uo.useCallback)(r=>{let i="";return r.key&&(i=F(r?.key,r?.args)),r?.type===to.BALANCE_INSUFFICIENT?Uo.default.createElement(Uo.default.Fragment,null,Uo.default.createElement(Z.Box,{className:wr.wrap},i),Uo.default.createElement(Z.Box,{className:wr.wrap},Uo.default.createElement(kr,{coin:t,receiveOnly:!0}))):r?.type===to.FEE_BALANCE_INSUFFICIENT?Uo.default.createElement(Uo.default.Fragment,null,Uo.default.createElement(Z.Box,{className:wr.wrap},i),Uo.default.createElement(Z.Box,{className:wr.wrap},Uo.default.createElement(kr,{coin:o}))):i},[t,o])},ud=PC;n();s();var dd={"amount-page__available_balance__icon":"_amount-page__available_balance__icon_69wv8_1",amountPageAvailableBalanceIcon:"_amount-page__available_balance__icon_69wv8_1"};function bC(){let{coin:o,coinId:t,signInfo:e,initLoading:r,addressType:i,fromAddr:a}=cs(),{receivedPendingBalance:m,receivedPendingBalanceDisplay:c}=te(),{lockedAmount:d}=fu(a,o),A=pe(d,{decimals:o.decimals});md(e?.minOutput);let l=ud(),f=(0,re.useMemo)(()=>fe({coinId:t})?F("extension_defi_bot_popuptext_current_balance_coverage_icu",{chainName:o?.symbol}):o?.protocolId===D.SRC_20?F("extension_defi_tooltip_text_balance_udpate"):o?.protocolId===D.ARC_20?F("extension_defi_tooltip_text_utxo_exclude"):o?.protocolId===D.RUNEMAIN||o?.protocolId===D.FRACTAL_RUNES?F("extension_defi_hover_text_avail_balance"):null,[o?.protocolId,o?.symbol,t]);return re.default.createElement(q,{isGlobalLoading:r,renderError:l,totalAmountProps:{type:"amount",title:re.default.createElement(re.default.Fragment,null,F("extension_defi_text_available_balance"),!!f&&re.default.createElement(Me,{size:Me.SIZE.xxs,tooltip:f,icon:"okx-wallet-plugin-information-circle",className:dd["amount-page__available_balance__icon"]})),slot:{bottom:Number(d)>0||Number(m)>0?re.default.createElement(us,{lockedAmount:d,lockedAmountDisplay:A,pendingXrc:m,pendingXrcDisplay:c,addressType:i,coinId:t}):void 0}}})}var fd=bC;n();s();var Wo=u(x()),Td=u(E()),hd=u(bo());n();s();var pd=u(x()),ld=u(bo()),gd=u(VA());var Ad=u(E());J();var kC=({addressType:o,showManageUTXO:t,loading:e,baseCoinId:r})=>{let i=(0,ld.useHistory)(),a=(0,Ad.useDispatch)();return(0,pd.useCallback)(m=>t&&(m===$e.BALANCE_INSUFFICIENT||m===$e.FEE_BALANCE_INSUFFICIENT)?[{actionType:vo.ACTION_TYPE.CANCEL,onClick:()=>{i.goBack()}},{onClick:async()=>{await a(En(!1));let c=gd.default.stringify({addressType:o,coinId:r},{skipEmptyString:!0,skipNull:!0}),d=c?`?${c}`:"";i.push(Ua+d)},actionType:vo.ACTION_TYPE.CONFIRM,btnText:F("wallet_extension_mid_textbtn_manage_utxo")}]:null,[o,a,i,e,t])},Cd=kC;n();s();var mr=u(x());J();n();s();var Sd={"fillup-enter":"_fillup-enter_117qj_1",fillupEnter:"_fillup-enter_117qj_1"};var wC=(o,t,e)=>{let[r,i]=In(o),a=r?.baseCoinId===0;return(0,mr.useCallback)(m=>{if(!t)return null;let c=null;return m===$e.BALANCE_INSUFFICIENT&&(c=F("wallet_transfer_errortip_insufficient_balance",{chainSymbol:r?.symbol})),m===$e.FEE_BALANCE_INSUFFICIENT&&(c=F(a?"wallet_extension_popup_adjust_add":"wallet_extension_popup_insufficient_network_fee",{token:i?.symbol,symbol:i?.symbol})),c?mr.default.createElement(mr.default.Fragment,null,c,mr.default.createElement(M.Text,{inherit:!0,className:Sd["fillup-enter"],onClick:e},F("wallet_extension_placeorder_textbtn_replenish",{token:i.symbol}))):null},[i?.symbol,r?.symbol,a,e,t])},Id=wC;var NC=546;function BC(){let o=(0,hd.useHistory)(),[t,{toggle:e}]=ho(!1),{coin:r,coinId:i,toAddr:a,loading:m,walletId:c,fromAddr:d,signInfo:A,utxoParams:l,protocolId:f,baseCoinId:g,feeLoading:C,addressType:T,isXrc20Token:I,networkFeeInt:h,sendAmountInt:y,transferInputs:P,transferOutputs:N,mergedCoinAmount:k,availableSendCoinAmountInt:v,selectedNetworkFeeLevel:b,setSelectedNetworkFeeLevel:R,src20InscriptionData:O}=cs(),B=tt(),U=(0,Td.useSelector)(Qo),K=Fa[r?.localType]?.[T],{showManageUTXO:G}=du(r,K,!0),[io,{toggle:lo}]=ho(!1);cd(A?.minOutput,i);let X=Cn(c),[po,Ro]=(0,Wo.useState)(!1),_e=so(()=>{lo()},[]),ri=Id(i,G,_e),ni=Cd({addressType:K,showManageUTXO:G,loading:m,baseCoinId:g}),Fe=pc({coinId:i,walletId:c,address:d,utxoType:kt.TRANSFER,satBytes:b?.satBytes,...l}),zr=gc({coinId:i,toAddr:a,walletId:c,fromAddr:d,protocolId:f,networkFee:h,localType:r?.localType,outputs:N,inscriptionData:O,dustSize:I?void 0:A?.minOutput,satBytes:b?.satBytes,coinAmount:i===22?NC:y,...i===22?{omni:{coinType:31,amount:y}}:{},extraPublishParams:{coinAmount:y,txType:I?lt.BRC20_SEND:lt.TRANS_OUT}}),qi=Mn({coinId:i,currencyId:B,txType:I?lt.BRC20_SEND:lt.TRANS_OUT,protocolId:f,address:d}),DA=(0,Wo.useCallback)(async()=>{if(await ze()){let Ir=[];Ir=await Fe(k,h),Ir=[...P||[],...Ir],await qi(Ir,()=>{o.goBack()}),Ro(!0);let zi=await zr({utxoList:Ir});return o.push(U),ro({tx_id:zi}),zi}return Ro(!1),Promise.reject()},[Fe,k,h,P,qi,zr,o,U]),MA=(0,Wo.useMemo)(()=>[D.RUNES,D.ARC_20,D.RUNEMAIN,D.FRACTAL_RUNES].includes(f)&&!P?.length?!0:m,[m,f,P?.length]);return Wo.default.createElement(Wo.default.Fragment,null,Wo.default.createElement($,{addressType:T,confirmButtonProps:{disabled:MA,renderActions:ni,onSubmit:DA},networkFeeProps:{onClick:e,loading:C,feeLevel:b?.level},renderMessage:ri,defaultMessage:fe({coinId:g})&&A?.transferReminder,canTransferAmount:fe({coinId:g})&&v}),Wo.default.createElement(xn,{walletId:c,address:d,visible:io,closeCallback:lo,coinId:g,receiveOnly:!0}),Wo.default.createElement(Ec,{visible:t,coinId:g,signInfo:A,currencyId:B,estimatedFee:h,value:b,onChange:R,onToggleVisible:e}),Wo.default.createElement(vc,{visible:X&&po}))}var xd=BC;n();s();var yd=u(x());function vC({children:o}){let e=Vt().get("from");return yd.default.createElement(Do,{fromAddress:e},o)}var _d=vC;var LC={match:o=>Ja(o),Container:_d,pages:{AddressPage:Xu,AmountPage:fd,ConfirmPage:xd}},Fd=LC;n();s();n();s();var bd=u(x());n();s();var Ed=u(mt());To();var DC=()=>{let o=Tt(),t=qa(),e=Sn({factionType:on});return[o,async r=>(await Promise.all(t.map(m=>{let c=an(e,m);return zt(r,m,c)}))).some(Ed.identity)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}]},Pd=DC;var MC=()=>{let o=Pd();return bd.default.createElement(z,{addressProps:{errorFns:{fns:o,override:!0}}})},kd=MC;n();s();var Bd=u(x());n();s();var wd=u(E());co();Po();n();s();var ds=u(x());To();function _i(){let{baseCoin:o}=S(),t=w(),[e,r]=(0,ds.useState)(!1),i=Sn({factionType:on});return(0,ds.useEffect)(()=>{(async()=>{let m=an(i,o.coinId),c=await zt(t,o?.coinId,m);r(!c)})()},[o,t]),e}var RC=async({memo:o,fromAddress:t,toAddress:e,amountInt:r,isIBCTransfer:i,baseCoin:a,signInfo:m})=>{let{chainId:c,sequence:d,accountNumber:A,feeDemon:l,demon:f,sourceChannel:g,normal:C,gasLimit:T}=m,I={chainId:c,sequence:d,accountNumber:A,feeDemon:l,feeAmount:No(C,T),gasLimit:T,memo:o,fake:!0},h={fromAddress:t,toAddress:e,demon:f,amount:r},y={};if(i){let N=no(Math.round(Date.now()/1e3),300);y={...I,type:Le.IBC_TRANSFER,data:{...h,sourcePort:"transfer",sourceChannel:g,ibcTimeoutTimestamp:N}}}else y={...I,type:Le.TRANSFER,data:{...h}};return await Y().signTransaction(y,t,a.localType)},OC=()=>{let o=(0,wd.useDispatch)(),[t,{setFalse:e}]=ho(!0),{coin:r}=S(),{coinId:i}=r,a=_(),m=w(),c=ao(),d=_i();return Da(()=>{i&&m&&c!=="0"&&(async()=>{try{let l=await um({coinId:i,from:a,to:m}),f=await RC({memo:"",fromAddress:a,toAddress:m,amountInt:c,isIBCTransfer:d,baseCoin:r,signInfo:l}),g=await dm({coinId:i,from:a,inputData:f}),C=Math.ceil(No(l.normal,g));o(H(C)),o(Qn({inputData:f,signInfo:l,gasLimit:g,isIBCTransfer:d})),o(L(!1))}catch{o(L(!0))}finally{e()}})()},[i,a,m,c,d]),t},Nd=OC;function UC(){let o=Nd();return Q(),Bd.default.createElement(q,{confirmButtonProps:{loading:o}})}var vd=UC;n();s();var Go=u(x());var ps=u(E());n();s();var ne=u(x()),Ld=u(Mt());J();n();s();var cr={"memo-input":"_memo-input_sef3p_1",memoInput:"_memo-input_sef3p_1","memo-input-box":"_memo-input-box_sef3p_1",memoInputBox:"_memo-input-box_sef3p_1","memo-input-core":"_memo-input-core_sef3p_4",memoInputCore:"_memo-input-core_sef3p_4","memo-title__link":"_memo-title__link_sef3p_7",memoTitleLink:"_memo-title__link_sef3p_7","memo-title__link__dashed":"_memo-title__link__dashed_sef3p_11",memoTitleLinkDashed:"_memo-title__link__dashed_sef3p_11"};var WC=({value:o,onChange:t,placeholder:e,title:r=F("wallet_extension_title_memo_optional"),dashed:i=!0,error:a,errorType:m,maxLength:c=256})=>{let d=Im();return ne.default.createElement(go,{bordered:!1},ne.default.createElement(Fr,{title:ne.default.createElement(_a,{href:d?.sendMemoInput,className:(0,Ld.default)(cr["memo-title__link"],{[cr["memo-title__link__dashed"]]:i})},ne.default.createElement(M.Text,{inherit:!0},r))},ne.default.createElement(Et.TextArea,{placeholder:e||F("wallet_extension_input_memoinfro"),size:Et.SIZE.xl,autoResize:!0,value:o,onChange:t,maxLength:c,error:a,errorType:m,className:cr["memo-input"],inputClassName:cr["memo-input-core"],innerClassName:cr["memo-input-box"]})))},se=(0,ne.memo)(WC);n();s();var fs=u(E());co();Po();var GC=o=>{let{coin:t,baseCoin:e}=S(),r=_(),i=ao(),a=(0,fs.useSelector)(eo),m=(0,fs.useSelector)(ot),{gasLimit:c,signInfo:d,isIBCTransfer:A,gasPrice:l}=(0,fs.useSelector)(qn),f=fo();return uo(async()=>{if(!await ze())throw new Error("mpc error")},async()=>{let{chainId:h,sequence:y,accountNumber:P,feeDemon:N,demon:k,sourceChannel:v}=d,b={chainId:h,sequence:y,accountNumber:P,feeDemon:N,feeAmount:m,gasLimit:c,memo:o},R={fromAddress:r,toAddress:a,demon:k,amount:i},O={};if(A){let U=no(Math.round(Date.now()/1e3),300);O={...b,type:Le.IBC_TRANSFER,data:{...R,sourcePort:"transfer",sourceChannel:v,ibcTimeoutTimestamp:U}}}else O={...b,type:Le.TRANSFER,data:{...R}};return await Y().signTransaction(O,r,e.localType)},async h=>{let y={memo:o,gasPrice:l,gasLimit:c},P=await xo(t.localType,h),N={signedTx:h,coinAmount:i,coinId:t.coinId,fromAdr:r,toAdr:a,serviceCharge:m,extJson:JSON.stringify(y),txHash:P};return await f(N)},h=>(ro({tx_id:h}),h))},Dd=GC;n();s();function Fi({coinId:o,feeInfo:t,callback:e}){let r=wn();return{coinId:o,level:t.gasType,loading:!r&&t.initLoading,networkFee:!r&&t.initLoading?void 0:t.gasFee,estimateFailed:r||t.error,onClick:()=>{e()}}}function VC(){let o=(0,ps.useDispatch)(),[t,e]=(0,Go.useState)({}),[r,{toggle:i}]=La(!1),{coin:a}=S(),{coinId:m}=a,c=_(),d=w(),A=ao(),l=(0,ps.useSelector)(qn),f=Fi({coinId:m,feeInfo:t,callback:i}),[g,C]=(0,Go.useState)(""),T=Dd(g),I=async()=>{await T()},h=P=>{C(P.target.value)},y=P=>{e(P),o(H(P.gasFee)),o(L(f.estimateFailed)),o(Qn({...l,gasLimit:P.gasAmount,gasPrice:P.gasPriceStep}))};return oo(),Go.default.createElement(Go.default.Fragment,null,Go.default.createElement($,{confirmButtonProps:{onSubmit:I},slot:{bottom:P=>Go.default.createElement(Go.default.Fragment,null,Go.default.createElement(go,null,Go.default.createElement(Lo,{...P})),Go.default.createElement(se,{value:g,onChange:h}),Go.default.createElement(gu,{visible:r,coinId:String(m),address:c,inputData:l.inputData,to:d,value:A,onBack:i,onClose:i,onChange:y}))},networkFeeProps:f}))}var Md=VC;var HC={match:o=>Ya(o),pages:{AddressPage:kd,AmountPage:vd,ConfirmPage:Md}},Rd=HC;n();s();n();s();var Kd=u(x());n();s();var KC=()=>{let{baseCoin:o}=S();return so(async t=>{let e=ct(t,o.localType);return await zt(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},JC=()=>{let o=Tt(),t=KC();return[o,t]},Od=JC;n();s();var Vd=u(E());n();s();To();var YC=()=>{let o=xm(),t=_m(),e=ym();return async({coinId:i,from:a,to:m,amount:c,inputData:d,localType:A})=>{let l=[le.SAFE_ADDRESS,le.CONTRACT_ADDRESS];A===oa&&l.push(le.TRON_PERMISSTION);let f=await o({checkTypes:l,coinId:i,from:a,to:m,amount:c,txType:wa.TRANSFER,inputData:d||"0x"}),{result:g,msg:C}=f[le.TRON_PERMISSTION]||{},T=f[le.SAFE_ADDRESS],I={...T,...f[le.CONTRACT_ADDRESS],tronPermission:{msg:C,wrongPermission:!g},address:m};return await e({...T,...T?.blackAddressWarning}),await t(I),I}},ur=YC;n();s();var Wd=u(x()),Gd=u(E());n();s();var Ud=({contractAddress:o,toAddress:t,amount:e})=>{try{let r=`data:application/vnd.facet.tx+json;rule=esip6,{"op":"call","data":{"to":"${o}","function":"transfer","args":{"to":"${t}","amount":"${e}"}}}`;return p.Buffer.from(r).toString("hex")}catch{return""}};var ZC=()=>{let{coin:o}=S(),t=ct(w(),o.localType),e=ao(),r=(0,Gd.useSelector)(Qe),{isFacet:i,facetContractAddress:a}=r||{};return(0,Wd.useMemo)(()=>!o.address||!Xm(t)?"":i?Ud({contractAddress:a,toAddress:t,amount:e}):Xe(t,e),[o,t,e,i,a])},dr=ZC;var qC=()=>{let o=(0,Vd.useDispatch)(),[t,{setTrue:e,setFalse:r}]=ho(!1),{coin:i}=S(),a=_(),m=w(),c=W(),d=dr(),{coinId:A}=i,l=qt(),f=ur();return{onClick:async()=>{try{e();let C=await f({coinId:A,from:a,to:m,amount:c,inputData:d}),{isDefraud:T,isSimilar:I,blackAddressWarning:h}=C;T?(o(st(Zo.DEFRAUD)),o(wt(h))):I?(o(st(Zo.SIMILAR)),o(wt(h))):o(st("")),o(eu(C.isContract)),l()}catch(C){console.log(C)}finally{r()}},loading:t}},Hd=qC;var zC=()=>{let o=Od(),{onClick:t,loading:e}=Hd();return Kd.default.createElement(z,{addressProps:{errorFns:{fns:o,override:!0}},confirmButtonProps:{onClick:t,loading:e}})},Jd=zC;n();s();var Ei=u(x()),zd=u(mt());n();s();var Yd=u(x()),Zd=u(E());function $C(){let o=(0,Zd.useDispatch)(),{coin:t}=S();(0,Yd.useEffect)(()=>{t.systemToken&&o(Kt(t.coinId))},[t.coinId])}var qd=$C;var XC=()=>{let o=Ke(),e=!!Hm().key||(0,zd.isNil)(o)||o==="",r=sc(),i=uu({disabled:e,onClick:r});return Q(),qd(),Ei.default.createElement(q,{slot:{footer:Ei.default.createElement(vo,{buttonGroup:i})}})},$d=XC;n();s();var Bt=u(x()),Cs=u(E());n();s();var Xd=u(x()),Pi=u(E()),jd=u(bo());function jC(){let o=(0,jd.useHistory)(),{baseCoin:t}=S(),e=Xo(),r=_(),i=w(),a=W(),m=(0,Pi.useSelector)(et),c=(0,Pi.useSelector)(Qo),d=qm(),A=rn({from:r,to:i,value:At(a),data:m}),l=()=>{o.push(c)};return Xd.default.createElement(_c,{needMev:!0,chainId:t.chainId,walletId:e,txParams:A,showDappInfo:!1,coinId:t.coinId,onConfirm:d,onCancel:l})}var Qd=jC;n();s();var bi=u(x()),ls=u(E());n();s();var fr={wrapper:"_wrapper_17089_1",root:"_root_17089_4",titleClass:"_titleClass_17089_7",headerClassName:"_headerClassName_17089_10",contentClassName:"_contentClassName_17089_13"};function QC({errorMsg:o}){let t=(0,ls.useDispatch)(),{coin:e}=S(),r=(0,ls.useSelector)(et),i=a=>{t(tu(a))};return e.baseCoinId!==0?null:bi.default.createElement(go,{className:fr.wrapper},bi.default.createElement(yc,{className:fr.root,titleClass:fr.titleClass,headerClassName:fr.headerClassName,contentClassName:fr.contentClassName,value:r,onChange:i,error:o,autoResize:!0}))}var of=QC;n();s();var Dr=u(E());J();function oS(){let o=(0,Dr.useDispatch)(),{coin:t}=S(),e=(0,Dr.useSelector)(Gc),r=(0,Dr.useSelector)(et);return()=>{if(t.baseCoinId===0&&e&&r){let i=de.prompt({alignBottom:!1,hideCloseBtn:!0,infoType:de.Prompt.INFO_TYPE.warn,confirmBtnProps:{type:Io.TYPE.highlight,size:Io.SIZE.lg},cancelBtnProps:{category:Io.CATEGORY.outline,size:Io.SIZE.lg},title:F("wallet_extension_transaction_dialog_title_change_type"),confirmText:F("wallet_extension_transaction_dialog_btn_change_type"),cancelText:F("commonall_text_btn_cancel"),text:F("wallet_extension_transaction_dialog_desc_change_type"),onConfirm:()=>{i.destroy(),o(ru(!0))},onCancel:()=>{i.destroy()}});return!0}return!1}}var tf=oS;n();s();var ef=u(E());var tS=()=>{let o=(0,ef.useSelector)(or),{coin:t}=S(),e=ao(),r=_(),i=w();return{fetchParams:{coinId:t.coinId,from:r,to:i,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:t.baseCoinId===0?e:"0"}},rf=tS;n();s();var Mr=u(E());Po();we();co();OA();n();s();var nf=u(x());var eS=()=>(0,nf.useCallback)(o=>{try{typeof o=="string"&&!!o&&ro({tx_id:o})}catch(t){console.log(t)}},[]),gs=eS;var rS=()=>{let o=(0,Mr.useDispatch)(),{coin:t}=S(),e=ac(),r=qe(),i=W(),a=Yt(),m=_(),c=w(),d=ct(m,t.localType),A=ct(c,t.localType),l=Xo(),{activityId:f,activity:g,status:C,tip:T}=$t(),I=dr(),h=(0,Mr.useSelector)(et),y=(0,Mr.useSelector)(Qe),P=gs(),N=(B,U)=>{let{userGasInfo:K}=U,{updateGasInfo:G}=B;return G?{...G,gasLimit:K.gasLimit,supportEip1559:K.supportEip1559,networkFee:K.networkFee}:{...K}},k=B=>{let U=B.supportEip1559?B.maxFeePerGas:B.gasPrice,K=B?.networkFee||No(U,B.gasLimit),G=Pt(r,K);if(Bo(G,0))return[!1,i];if(t.baseCoinId===0)return a?[Ko(G,0),G]:[Tr(i,G),i];let io=e;t.systemToken&&(io=Pt(io,K));let lo=a?io:i;return[Tr(lo,io),lo]},v=({updateData:B,finallyGasInfo:U,publishAmountInt:K})=>{let{nonce:G}=B,io=K,lo=Ca(t.localType)?.realChainIdHex,X={from:d,gasLimit:At(U.gasLimit),nonce:At(G),chainId:lo};return U.supportEip1559?(X.maxFeePerGas=At(U.maxFeePerGas),X.maxPriorityFeePerGas=At(U.maxPriorityFeePerGas),X.type=ba.FEE_MARKET):X.gasPrice=At(U.gasPrice),y?.isFacet?(X.value="0",X.to=y?.facetBlackHoleAddress,X.data=I):t.address?(X.value="0",X.to=ct(t.address,t.localType),X.data=I):(X.value=At(io),X.to=A,h&&(X.data=h)),rn(X)},b=({txParams:B,publishAmountInt:U})=>{let K={...B};return t.systemToken&&(K.value=Ia(At(U))),K.walletId=l,K},R=({txParams:B,publishAmountInt:U,dataForCheck:K={}})=>{let{userGasInfo:G={}}=K,io=Ue(B.value),lo=Ue(B.gasLimit),X=Ue(G.supportEip1559?B.maxFeePerGas:B.gasPrice),po={...B,value:io,from:m,to:c,gas:lo,gasPrice:X,priorityFee:Ue(G.supportEip1559?B.maxPriorityFeePerGas:0),nonce:Ue(B.nonce),repeatTxType:Pa.CONFIRMING,oldTxHash:"",gasType:G?.gasType};return{coinId:t.coinId,coinAmount:U,fromAdr:m,toAdr:c,serviceCharge:No(lo,X),extJson:JSON.stringify(po),txSource:Yo.NORMAL,inputData:B.data?B.data:"",activityId:f}};return async(B,U={})=>{let K=N(B,U),[G,io]=k(K);if(!G)throw new Error("balance check error");let lo=v({updateData:B,finallyGasInfo:K,publishAmountInt:io}),X=b({txParams:lo,publishAmountInt:io}),po=R({txParams:lo,publishAmountInt:io,dataForCheck:U});Ta({activityId:f,activity:g,status:C,tip:T,walletId:l,address:d}),await o(Xa({txParams:X,walletId:l}));let Ro=await Y().signAndPublishTransferTransaction({signParams:X,from:lo.from,baseChain:la,publishParams:po});P(Ro)}},sf=rS;n();s();var As=u(E());var nS=()=>{let o=(0,As.useDispatch)(),t=j(),e=(0,As.useSelector)(or),{gasLimit:r,gasPrice:i,maxPriorityFeePerGas:a,maxFeePerGas:m,supportEip1559:c,extFee:d,gasPriceInfo:A,gasLimitInfo:l,gasType:f}=e,{minGasFee:g}=Pm({gasLimit:r,gasPrice:i,maxPriorityFeePerGas:a,maxFeePerGas:m,supportEip1559:c,extFee:d,gasPriceInfo:A,gasLimitInfo:l,gasType:f});return{feeLevel:f,networkFee:g,maxNetworkFee:t,onClick:()=>{o(Pr(!0))}}},af=nS;var sS=()=>{let o=af(),t=rf(),e=Zm(),r=hc(),i=sf(),a=tf(),{clear:m}=$t(),c=(0,Cs.useSelector)(et),d=On(c),A=async()=>{try{if(a())return{pause:!0};let g=await r({...t.fetchParams,userGasInfo:t.userGasInfo,baseCoinAmountUse:t.baseCoinAmountUse,whetherCheckRepeat:!0,onRepeatCancel:e});return await i(g,t),null}catch(f){if(f?.message===Tc)throw new Error(Ln);{let g=f?.data?.originalError;throw Ga(g?.code)&&m?(m(),g):f}}},l=(0,Cs.useSelector)(rr);return oo(),Bt.default.createElement($,{slot:{bottom:f=>Bt.default.createElement(Bt.default.Fragment,null,Bt.default.createElement(of,{errorMsg:d}),Bt.default.createElement(go,null,Bt.default.createElement(Lo,{...f})))},networkFeeProps:o,confirmButtonProps:{disabled:!!d,onSubmit:A},blockAddressInfo:l})};function iS(o){return(0,Cs.useSelector)(Vn)?Bt.default.createElement(Qd,null):Bt.default.createElement(sS,{...o||{}})}var mf=iS;n();s();var it=u(x()),vt=u(E()),df=u(bo());n();s();var cf=u(E());function aS(){let{coin:o}=S(),t=_(),e=Km(),r=(0,cf.useSelector)(or);return Sm({txType:Wa.transfer,coinId:o.coinId,fromAddress:t,unavailable:r.gasType===bt.CUSTOM,fee:e})}var uf=aS;var mS=(0,it.memo)(()=>{let o=(0,vt.useDispatch)(),t=(0,df.useHistory)(),e=(0,it.useRef)(!1),r=(0,it.useRef)(!1),i=(0,vt.useSelector)(St),a=(0,vt.useSelector)(Wc),m=(0,vt.useSelector)(Qo),{coin:c}=S(),d=_(),A=w(),l=ct(d,c.localType),f=ct(A,c.localType),g=dr(),C=(0,vt.useSelector)(et),T=c.baseCoinId===0?C:g,I=W(),h=tt(),y=Bn(),P=(0,vt.useSelector)(Qe),{isFacet:N,facetBlackHoleAddress:k}=P||{},{disabled:v,fetchOnce:b}=(0,it.useMemo)(()=>{let po=null,Ro=c.baseCoinId===0&&On(C);return i&&(c.baseCoinId!==0||!Ro)&&(po=+new Date),{disabled:Ro||y,fetchOnce:po}},[c.baseCoinId,C,y,i]),R=$t(),O=(0,it.useMemo)(()=>N?k:c.baseCoinId===0?f:c.address,[c.baseCoinId,c.address,f,N,k]),B=()=>{e.current||r.current?o(L(!0)):o(L(!1))},U=so(po=>{o(Qc(po?.signInfo||{}))}),K=so(po=>{o(ou(po)),o(yo(po?.isNetworkFeeLoading));let Ro=po.supportEip1559?po.maxFeePerGas:po.gasPrice,_e=po.networkFee;Ro==="0"?r.current=!0:r.current=!1,po?.gasLimitInfo?.queryGasLimitErrorUseDefault?e.current=!0:e.current=!1,o(H(_e)),B()}),G=()=>{o(Pr(!1))},io=()=>{o(Pr(!1)),t.push(m||dn)},lo=()=>{e.current=!1},X=()=>{e.current=!0};return it.default.createElement(bm,{currencyId:h,visible:a,coinId:c.coinId,address:l,inputData:T,tokenAddress:O,value:c.address?"0":I,gasLimitOptions:{fetchOnce:b,disabled:v,onFetchSuccess:lo,onFetchError:X},estimatedL1FeeOptions:{fetchOnce:b,disabled:v},onBack:G,onClose:io,onServerDataChange:U,onGasChange:K,gasReturn:R})}),cS=({children:o})=>{let t=uf(),e=(0,vt.useSelector)(Vn);return it.default.createElement(Lc,{gasReturn:t},o,!e&&it.default.createElement(mS,null))},ff=cS;var uS={match:o=>Ka(o),Container:ff,pages:{AddressPage:Jd,AmountPage:$d,ConfirmPage:mf}},pf=uS;n();s();n();s();var Sf=u(x()),If=u(E());J();n();s();var Rr=u(x()),Ss=u(E());co();var lf=()=>{let{toRent:o}=(0,Ss.useSelector)(Er),{coin:t}=S(),e=ht();return(0,Rr.useCallback)(r=>{if(t.baseCoinId!==0)return null;let i=Co(o,10**t.decimals);return Bo(r,i)?{key:"walletextension_toast_text_minimum_rent_fee",args:{number:i},type:to.COMMON_ERROR}:null},[e,o])},gf=()=>{let{selfRent:o,toRent:t}=(0,Ss.useSelector)(Er),{coin:e,baseCoin:r}=S(),i=(0,Ss.useSelector)(ot),a=qe();return(0,Rr.useCallback)(()=>{if(e.baseCoinId===0)return null;let m=no(i,o);return Bo(a,m)?{key:"walletextension_toast_text_insufficient_balance_initiate_transaction",args:{token:r.symbol,number:Co(m,10**r.decimals)},type:to.COMMON_ERROR}:Bo(a,no(m,t))?{key:"walletextension_toast_text_reserve_rent_exempt",args:{number:Co(no(m,t),10**r.decimals)},type:to.COMMON_ERROR}:null},[a,i,o])},Af=()=>{let o=lf(),t=gf();Q([o,t])},dS=()=>{let o=lf();return(0,Rr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:Ae.AMOUNT}:null},[o])},fS=()=>{let o=gf();return(0,Rr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:Ae.AMOUNT}:null},[o])},Cf=()=>{let o=dS(),t=fS();oo([o,t])};function pS(){let o=(0,If.useSelector)(Hn);return Af(),Sf.default.createElement(q,{totalAmountProps:{title:F("extension_wallet_send_text_transfer_available"),type:"amount"},confirmButtonProps:{loading:o}})}var Tf=pS;n();s();var ie=u(x()),Ni=u(E());n();s();J();we();var Vo={JITO:"jito",PRIORITY_FEE:"priorityFee"},ki="speedUpMode";function hf(o){let t=Ee.get(ki);return t?typeof t=="string"&&(t={[ga]:t}):t={},t[o]||Vo.PRIORITY_FEE}function xf(o,t){let e=Ee.get(ki);Ee.set(ki,{...e||{},[o]:t})}var yf="jitoGuide";function _f(){return!!Ee.get(yf)}function Ff(){Ee.set(yf,"1")}n();s();var Fo=u(x()),dt=u(E());J();n();s();var Or={title:"_title_1eu6y_1",tip:"_tip_1eu6y_4",tipDetail:"_tipDetail_1eu6y_11"};var lS=Fo.default.memo(({jitoGuide:o})=>{let t=(0,dt.useDispatch)(),e=(0,dt.useSelector)(Xt),r=i=>{t($n(i))};return Fo.default.createElement(Qi,{mask:!0,show:!o,title:F("wallet_extension_transfer_tooltips_title_express_mode"),description:F("wallet_extension_transfer_tooltips_tips_express_mode"),autoEdgeSpacing:16},Fo.default.createElement(ke.Segmented,{className:Or.modeSwitch,color:ke.COLOR.grey,size:ke.SIZE.xs,average:!0,hideContent:!0,activeId:e,onChange:r},Fo.default.createElement(ke.TabPane,{tab:F("wallet_extension_transfer_tab_standard"),id:Vo.PRIORITY_FEE}),Fo.default.createElement(ke.TabPane,{tab:F("wallet_extension_transfer_tab_express"),id:Vo.JITO})))}),gS=()=>{let{baseCoin:o}=S(),t=(0,dt.useSelector)(jt),e=(0,dt.useSelector)(Kn),{fee:r="0"}=t||{},{priorityFee:i}=e,a=xr(r,{decimals:o.decimals,type:M.CRYPTO}),m=xr(i||"0",{decimals:o.decimals,type:M.CRYPTO});return Fo.default.createElement(Fo.default.Fragment,null,F("wallet_extension_gas_base_priority_fee",{gas:a,gasfee:m}))},AS=()=>{let{baseCoin:o}=S(),t=(0,dt.useSelector)(jt),e=(0,dt.useSelector)(Jn),{fee:r}=t||{},{totalJitoFee:i}=e||{},a=xr(r||"0",{decimals:o.decimals,type:M.CRYPTO}),m=xr(i||"0",{decimals:o.decimals,type:M.CRYPTO});return Fo.default.createElement(Fo.default.Fragment,null,F("wallet_extension_transfer_tooltips_desc_plus",{amount:a,num:m}),Fo.default.createElement("div",{className:Or.tipDetail},F("wallet_extension_transfer_tooltips_desc_express_mode")))},CS=Fo.default.memo(()=>{let o=(0,dt.useSelector)(Xt);return Fo.default.createElement("div",{className:Or.tip},o===Vo.JITO?Fo.default.createElement(AS,null):Fo.default.createElement(gS,null))});function SS({jitoGuide:o,...t}){let e=(0,dt.useSelector)(Xt),r=(0,dt.useSelector)(jt),i=e===Vo.JITO?F("wallet_extension_transfer_express_mode"):F("wallet_extension_transfer_standard_mode");return Fo.default.createElement(go,null,Fo.default.createElement(Lo,{...t,titleClassName:Or.title,titleAction:r?.supportJito&&Fo.default.createElement(lS,{jitoGuide:o}),level:i},Fo.default.createElement(CS,null)))}var Ef=SS;n();s();var Se=u(E());To();var IS=()=>{let o=fo(),{coin:t}=S(),e=_(),r=(0,Se.useSelector)(qo),i=(0,Se.useSelector)(eo),a=ao(),m=(0,Se.useSelector)(ot),{computeUnitPrice:c,computeUnitLimit:d}=(0,Se.useSelector)(Kn),A=(0,Se.useSelector)(Xt),l=(0,Se.useSelector)(Jn),f=Ct({fromAddr:e,localType:Qr,walletId:r}),{coinId:g}=t,C=async()=>await rm({coinId:g,address:e},{fromAddr:e,toAddr:i}),T=async()=>{if(t.baseCoinId===0||!i)return{haveTokenAccountAddress:!1,tokenAccountAddress:""};let b={coinId:g,address:i},{data:R={}}=await nm(b),{legal:O,tokenAccountAddress:B}=R;return{haveTokenAccountAddress:O,tokenAccountAddress:B}},I=async()=>{let[b,{haveTokenAccountAddress:R,tokenAccountAddress:O}]=await Promise.all([C(),T()]);return{recentBlockHash:b,haveTokenAccountAddress:R,tokenAccountAddress:O}},h=async b=>{let{recentBlockHash:R,haveTokenAccountAddress:O}=b,B={from:e,to:i,amount:a,blockHash:R,payer:e};A===Vo.PRIORITY_FEE&&(B={...B,computeUnitPrice:c,computeUnitLimit:d});let U;return t.baseCoinId===0?U={...B,type:mn.TRANSFER}:U={...B,type:mn.TOKEN_TRANSFER,createAssociatedAddress:!O,mint:t.address},t.protocolType===yr.SPL_TOKEN_2022&&(U.token2022=!0,U.decimal=t.decimals),await f({params:U})},y=async b=>{if(A!==Vo.JITO||!l)return null;let{recentBlockHash:R}=b,{tipAccountAddress:O,clientGasPrice:B}=l,U={from:e,to:O,amount:B,blockHash:R,payer:e,type:mn.TRANSFER};return await f({params:U})};return uo(I,async(b={})=>{let R=await h(b),O=await y(b);return{rawSignedTx:R,jitoSignedTx:O}},async({rawSignedTx:b,jitoSignedTx:R})=>{let O=await xo(Qr,b),B=b,U;A===Vo.JITO&&R&&(B=JSON.stringify([b,R]),U=JSON.stringify({mev:"Jito",jitoHash:await xo(Qr,R)}));let K={signedTx:B,coinAmount:a,coinId:t.coinId,fromAdr:e,toAdr:i,serviceCharge:m,txHash:O,extJson:U},G=await o(K);return xf(t.localType,A),G},b=>(ro({tx_id:b}),b))},Pf=IS;n();s();var wi={root:"_root_6mjwc_1",contentJitoGuide:"_contentJitoGuide_6mjwc_4"};function TS(){let o=(0,Ni.useSelector)(Hn),t=Ot(o,{wait:200}),e=(0,Ni.useSelector)(jt),[r,i]=(0,ie.useState)(!0),a=Pf(),m=async()=>{o||await a()};return Cf(),(0,ie.useEffect)(()=>{if(e?.supportJito){let c=_f();i(c),c||Ff()}},[e?.supportJito]),ie.default.createElement("div",{className:wi.root,onClick:()=>{i(!0)}},ie.default.createElement($,{tipMessageProps:{hidden:o},containerProps:{contentClassName:r?"":wi.contentJitoGuide},slot:{bottom:c=>ie.default.createElement(Ef,{...c,jitoGuide:r})},confirmButtonProps:{disabled:t,onSubmit:m}}))}var bf=TS;n();s();n();s();var kf=u(E());function hS(){let o=(0,kf.useDispatch)(),{coin:t}=S();gt(()=>{o($n(hf(t.localType)))})}var wf=hS;n();s();var Df=u(x());co();var Mf=u(E());n();s();var Lt=u(x()),ae=u(E());var Nf=u(GA());co();function xS(){let o=(0,ae.useDispatch)(),t=_(),{baseCoin:e}=S(),r=(0,Lt.useRef)(null),i=(0,Lt.useRef)(!1),[a,m]=(0,Lt.useState)("0"),c=async l=>{if(!i.current){try{let f=await sm({from:t,chainId:e.chainId}),{clientGasPrice:g}=f||{},C=no(g||"0",l?.fee||"0");m(C),o(Xn({...f,totalJitoFee:C})),o(L(!1))}catch{m("0"),o(Xn(null)),o(L(!0))}finally{o(br(!1))}r.current=setTimeout(()=>{c(l)},7e3)}};return[a,l=>{i.current=!1,c(l)},()=>{clearTimeout(r.current),i.current=!0,r.current=null,m("0"),o(Xn(null))}]}function yS(){let o=(0,ae.useDispatch)(),t=Dc(),e=_(),{coin:r,baseCoin:i}=S(),{coinId:a}=r,[m,c]=(0,Lt.useState)("0"),d=()=>{c("0"),o(zn({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""})),o(L(!0))};return[m,async f=>{try{let{firstUnitLimit:g}=await t({coinId:a,from:e,chainId:i.chainId});if((0,Nf.default)(g)){d();return}let{computeUnitPrice:C,feelimit:T}=f,{priorityFee:I,priorityGasPrice:h,priorityGasLimit:y}=wc(T,C,g);c(I),o(zn({priorityFee:I,computeUnitPrice:h||"",computeUnitLimit:y||""})),o(L(!1))}catch{d()}finally{o(br(!1))}},()=>{c("0"),o(zn({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""}))}]}function _S(){let o=(0,ae.useDispatch)(),t=(0,ae.useSelector)(Xt),e=(0,ae.useSelector)(jt),r=(0,ae.useSelector)(Bm),i=va(r),[a,m,c]=xS(),[d,A,l]=yS();return(0,Lt.useEffect)(()=>{i.current?o(br(!1)):o(br(!0))},[t]),(0,Lt.useEffect)(()=>(!e||!t||(t===Vo.PRIORITY_FEE?A(e):m(e)),()=>{c(),l()}),[e,t]),{speedUpFee:t===Vo.PRIORITY_FEE?d:a}}var Bf=_S;n();s();var Is=u(x()),vf=u(E());function FS(){let o=(0,vf.useDispatch)(),[t,e]=(0,Is.useState)(null),{coin:r}=S(),i=_(),a=w(),{coinId:m}=r;return(0,Is.useEffect)(()=>{m&&i&&a&&(async()=>{try{let{data:d}=await We({coinId:m,address:i},{fromAddr:i,toAddr:a}),{info:A}=d||{},{fee:l}=A||{};o(L(!l)),o(li(A)),e(A)}catch{o(L(!0)),o(li(null)),e(null)}})()},[m,i,a]),{baseFee:t?.fee||"0"}}var Lf=FS;function ES(){let o=(0,Mf.useDispatch)(),{baseFee:t}=Lf(),{speedUpFee:e}=Bf();(0,Df.useEffect)(()=>{o(H(no(t,e)))},[t,e])}var Rf=ES;n();s();var Ts=u(E());var Of=u(x());co();function PS(){let o=(0,Ts.useDispatch)(),{coin:t}=S(),{selfRent:e}=(0,Ts.useSelector)(Er),r=Ye();(0,Of.useEffect)(()=>{(()=>{if(!!t)if(t.baseCoinId===0){let i=Pt(r||"0",e||"0");o(Oo(Ko(i,"0")?i:"0"))}else o(Oo(null))})()},[t,e,r])}var Uf=PS;function bS({children:o}){return wf(),Rf(),Uf(),o}var Wf=bS;var kS={match:o=>$a(o),Container:Wf,pages:{AddressPage:z,AmountPage:Tf,ConfirmPage:bf}},Gf=kS;n();s();we();n();s();var zf=u(x());n();s();var Vf=u(E());n();s();var xs=u(x()),hs=u(E());var wS=()=>{let o=(0,hs.useSelector)(je),t=(0,hs.useSelector)(eo),e=W(),r=(0,hs.useSelector)(_n),i=!t||!!r.key,[a,m]=(0,xs.useState)("");return(0,xs.useEffect)(()=>{(async()=>{if(!i)try{let d=await ln(t);m(o?Xe(d,e):"")}catch(d){console.log(d)}})()},[o,i,t,e]),a},ys=wS;var NS=()=>{let o=(0,Vf.useDispatch)(),[t,{setTrue:e,setFalse:r}]=ho(!1),{coin:i}=S(),a=_(),m=w(),c=W(),d=ys(),{coinId:A,localType:l}=i,f=qt(),g=ur();return{onClick:async()=>{try{e();let T=await g({coinId:A,from:a,to:m,amount:c,inputData:d,localType:l}),{isDefraud:I,isSimilar:h,tronPermission:y,blackAddressWarning:P}=T;y&&y.wrongPermission?o($c({wrongPermission:y.wrongPermission,msg:y.msg})):I?(o(st(Zo.DEFRAUD)),o(wt(P))):h?(o(st(Zo.SIMILAR)),o(wt(P))):o(st("")),f()}catch(T){console.log(T)}finally{r()}},loading:t}},Hf=NS;n();s();var Kf=u(x()),Jf=u(E());we();var BS=()=>{let[o,{setFalse:t}]=ho(!0),{coin:e}=S(),r=_(),i=(0,Jf.useDispatch)(),{coinId:a}=e;return(0,Kf.useEffect)(()=>{(async()=>{if(Number(a)!==tn){let d=await im({coinId:a,address:r});i(qc(d))}t()})()},[a,r]),o},Yf=BS;n();s();var Zf=u(x());function vS(){let o=_();return(0,Zf.useCallback)(t=>t===o?{key:"wallet_extension_send_error_receive_equal_send_address",args:{}}:null,[o])}function LS(){return[vS()]}var qf=LS;var DS=()=>{let o=Yf(),{onClick:t,loading:e}=Hf(),r=qf();return zf.default.createElement(z,{addressProps:{errorFns:r},confirmButtonProps:{onClick:t,loading:e||o}})},$f=DS;n();s();var jf=u(x());n();s();var Bi=u(x()),Ur=u(E());var MS=()=>{let[o,{setTrue:t,setFalse:e}]=ho(!1),r=(0,Ur.useDispatch)(),i=w(),a=(0,Ur.useSelector)(je),m=(0,Ur.useSelector)(St),c=W(),d=Ut(c),A=Tm(),{coin:l}=S(),f=ys(),{coinId:g}=l,C=async()=>{let I=a?"0":c,h={coinId:g,address:A},y={fromAddr:A,value:I,toAddr:i,inputData:f};try{let P=await mm(h,y);r(H(P)),r(L(!1))}catch{r(L(!0))}finally{e()}},{run:T}=zo(C,{wait:500});return(0,Bi.useEffect)(()=>{m&&(t(),T())},[m]),(0,Bi.useEffect)(()=>{m&&c!==d||(t(),T())},[c,f,m]),o},Xf=MS;var RS=()=>{let o=Xf();return Q(),jf.default.createElement(q,{confirmButtonProps:{loading:o}})},Qf=RS;n();s();var np=u(x());var sp=u(E());n();s();var op=u(x()),tp=u(E());function OS(o,t){return(0,op.useCallback)(()=>o?{text:t,type:to.COMMON_ERROR}:null,[o,t])}function vi(){let o=nc(),t=(0,tp.useSelector)(Oc),e=OS(t.wrongPermission,t.msg);oo({fns:[e,...o],override:!0})}n();s();var Wr=u(E()),ep=u(UA());we();var US=()=>{let o=fo(),{coin:t}=S(),e=_(),r=(0,Wr.useSelector)(eo),i=(0,Wr.useSelector)(ot),a=(0,Wr.useSelector)(je),m=W(),c=(0,Wr.useSelector)(qo),d=Ct({fromAddr:e,localType:si,walletId:c});return uo(async()=>{if(!await ze())throw new Error("mpc error")},async()=>{let T=a?"0":m,I=await ln(r),h=a?Xe(I,m):"",y={coinId:t.coinId,address:e};return await am(y,{fromAddr:e,toAddr:r,value:T,inputData:h})},async(T={})=>{let{info:I={}}=T,{timestamp:h,expiration:y,ref_block_bytes:P,ref_block_hash:N,feelimit:k,contractAddress:v,asset:b}=I,R={fromAddress:e,toAddress:r,amount:m,timestamp:h,expiration:y,refBlockBytes:P,refBlockHash:N},O={};return t.baseCoinId===0?O={type:Rt.TRANSFER,data:R}:a?O={type:Rt.TOKEN_TRANSFER,data:{...R,feeLimit:k,contractAddress:v}}:O={type:Rt.ASSET_TRANSFER,data:{...R,assetName:(0,ep.bufferToHex)(p.Buffer.from(b))}},await d({params:O})},async T=>{let I=await xo(si,T),h={signedTx:T,coinAmount:m,coinId:t.coinId,fromAdr:e,toAdr:r,serviceCharge:i,txHash:I};return await o(h)},T=>(ro({tx_id:T}),T))},rp=US;function WS(){let o=rp(),t=async()=>{await o()},e=(0,sp.useSelector)(rr);return vi(),np.default.createElement($,{confirmButtonProps:{onSubmit:t},blockAddressInfo:e})}var ip=WS;var GS={match:o=>o===tn,pages:{AddressPage:$f,AmountPage:Qf,ConfirmPage:ip}},ap=GS;n();s();n();s();var Ps=u(x());n();s();var up=u(x());var Es=u(E());var dp=u(mt());n();s();var mp=u(bo());var cp=u(E());function VS(){let{coinId:o}=(0,mp.useParams)(),t=_(),e=(0,cp.useSelector)(eo);return so(async()=>(await We({coinId:o,address:t},{fromAddr:t,toAddr:e,value:"0"}))?.data)}var _s=VS;n();s();co();function HS(){let o=lm();return(t,e,r)=>{let i=e||0,a=Ko(r,0)?Co(i,r):"0",m=o[t];return en(No(a,10**(m.decimals||0)),0)}}var Fs=HS;function KS(){let o=(0,Es.useDispatch)(),[t,e]=(0,up.useState)(!1),r=(0,Es.useSelector)(Nm),i=_s(),a=ic(),m=Fs();return gt(()=>{e(!0),(async()=>{try{let A=(await i())?.info||{},l={};if(r!==-1)l=(A?.coinFeeList||[]).find(({coinId:g})=>g===r);else{let g=(0,dp.sortBy)(A?.coinFeeList||[],C=>a(C.coinId).currencyAmount||0);g&&(l=g.pop())}let f=m(l?.coinId,A?.methodFeeList?.transfer,l?.rate);o(Kt(l?.coinId)),o(H(f)),o(zc(A))}finally{e(!1)}})()}),t}var fp=KS;function JS(){let o=fp();return Q(),Ps.default.createElement(q,{confirmButtonProps:{loading:o}})}function YS(){let{coin:o}=S();return Ps.default.createElement(Do,{fixed:!!o.vdecimalNum},Ps.default.createElement(JS,null))}var pp=YS;n();s();var Ie=u(x());n();s();var lp=u(E());Po();To();function ZS(){let o=fo(),{coin:t}=S(),e=_(),r=(0,lp.useSelector)(eo),i=j(),a=Zt(),m=ao(),c=_s(),{coin:d}=Tn(a,!1);return uo(c,async(f={})=>{let{info:g={}}=f,{chainId:C,accountId:T,nonce:I,tokenId:h,coinFeeList:y=[]}=g,P=y.find(({coinId:v})=>v===a)||{},N={type:Rt.TRANSFER,accountId:parseInt(T,10),nonce:I,from:e,chainId:C,to:r,tokenId:parseInt(h,10),tokenSymbol:t.symbol,decimals:t.decimals,feeTokenId:parseInt(P.tokenId,10),feeTokenSymbol:d.symbol,feeDecimals:d.decimals,fee:i,amounts:m};return await Y().signTransaction(N,e,ta)},async f=>{let{signature:g,tx:C}=f||{},{txHash:T,...I}=C||{},h={txSource:Yo.NORMAL,signedTx:JSON.stringify({fastProcessing:null,signature:g,tx:I}),fromAdr:e,coinAmount:m,coinId:t.coinId,toAdr:r,serviceCharge:f?.tx?.fee,txHash:T,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(h)})}var gp=ZS;n();s();var wo=u(x()),Ap=u(Mt());J();var bs=u(E());n();s();var pr={"select-networkFee":"_select-networkFee_ct2da_1",selectNetworkFee:"_select-networkFee_ct2da_1","select-networkFee-content":"_select-networkFee-content_ct2da_4",selectNetworkFeeContent:"_select-networkFee-content_ct2da_4","select-networkFee-title":"_select-networkFee-title_ct2da_7",selectNetworkFeeTitle:"_select-networkFee-title_ct2da_7","select-networkFee-card-content":"_select-networkFee-card-content_ct2da_13",selectNetworkFeeCardContent:"_select-networkFee-card-content_ct2da_13","select-networkFee-card-content-disable":"_select-networkFee-card-content-disable_ct2da_16",selectNetworkFeeCardContentDisable:"_select-networkFee-card-content-disable_ct2da_16"};var qS=({coinId:o,feeCoinAmountInt:t,selectedCoinId:e,onSelect:r,setSupplyGas:i,...a})=>{let m=Ge(o),c=m?.coinAmountInt,d=V.gte(c,t);return wo.default.createElement(mi.Card,{hovered:d,onClick:()=>{d&&r?.({coinId:o,feeCoinAmountInt:t})},selected:o===e},wo.default.createElement(Z.Space,{space:12,className:(0,Ap.default)(pr["select-networkFee-card-content"],{[pr["select-networkFee-card-content-disable"]]:!d})},wo.default.createElement(Me,{size:Me.SIZE.lg,src:m?.image,text:m?.text}),wo.default.createElement(Z.Space,{space:2,direction:Z.DIRECTION.vertical,...a},wo.default.createElement(M.Text,{strong:!0},m?.symbol),wo.default.createElement(M.Text,{size:M.SIZE.xs,type:M.TYPE.secondary},d?F("developer_mode_send_text_balanceprice",{balance:pe(c,{decimals:m?.decimals,useApproximate:!1})}):F("wallet_extension_placeorder_tooltips_insufficient",{token:m?.symbol})))),!d&&wo.default.createElement(Io,{category:Io.CATEGORY.fill,type:Io.TYPE.gray,size:Io.SIZE.xxs,onClick:A=>{A?.stopPropagation(),i({supplyGasVisible:!0,supplyGasCoinId:o})}},F("extension_send_btn_fill_up_token",{token:m?.symbol})))},zS=({visible:o,onToggle:t})=>{let e=Zt(),r=(0,bs.useDispatch)(),i=_(),a=Xo(),m=Fs(),[{supplyGasVisible:c,supplyGasCoinId:d},A]=Ma({supplyGasVisible:!1,supplyGasCoinId:null}),l=(0,bs.useSelector)(Uc),f=l?.coinFeeList||[],g=l?.methodFeeList?.transfer,C=Re(()=>f.map(({rate:h,coinId:y})=>{let P=m(y,g,h);return{coinId:y,feeCoinAmountInt:P}}),[f,g]),T=({coinId:h,feeCoinAmountInt:y})=>{t?.(),r(Kt(h)),r(H(y))},I=({coinId:h,feeCoinAmountInt:y})=>wo.default.createElement(qS,{coinId:h,selectedCoinId:e,feeCoinAmountInt:y,onSelect:T,setSupplyGas:A});return o?wo.default.createElement(Z.Portal,{component:Z.Container,className:pr["select-networkFee"]},wo.default.createElement(em,{onBack:t,onClose:t,title:F("wallet_transfer_subtitle_network_fee")}),wo.default.createElement(Z.Box,{className:pr["select-networkFee-content"]},wo.default.createElement(M.Text,{className:pr["select-networkFee-title"]},F("wallet_extension_send_alert_choose_token")),wo.default.createElement(mi,{space:16,dataSource:C,renderItem:I})),wo.default.createElement(xn,{walletId:a,address:i,visible:c,closeCallback:()=>{A({supplyGasVisible:!1})},coinId:d,receiveOnly:!0})):null},Cp=zS;function $S(){let[o,{toggle:t}]=ho(!1),e=gp(),r=async()=>{await e()};return oo(),Ie.default.createElement(Ie.default.Fragment,null,Ie.default.createElement($,{networkFeeProps:{onClick:t,feeLevel:!1},confirmButtonProps:{onSubmit:r}}),Ie.default.createElement(Cp,{visible:o,onToggle:t}))}function XS(){let{coin:o}=S();return Ie.default.createElement(Do,{fixed:!!o.vdecimalNum},Ie.default.createElement($S,null))}var Sp=XS;var jS={match:o=>za(o),pages:{AddressPage:z,AmountPage:pp,ConfirmPage:Sp}},Ip=jS;n();s();To();n();s();var ws=u(x());n();s();var Tp=u(x());var ks=u(E());function QS(){let o=(0,ks.useDispatch)(),{coin:t}=S(),e=_(),r=(0,ks.useSelector)(eo),i=Nc(),[a,m]=(0,Tp.useState)(!1);return gt(()=>{m(!0),(async()=>{let d={coinId:t.coinId,address:e},A={fromAddr:e,toAddr:r,value:"0"};try{let l=await i("Transfer",d,A);if(l){let{info:f,feeCoin:g,fee:C}=l;o(nu({info:f,feeCoin:g})),o(Kt(g.coinId)),o(H(C)),o(L(!1))}}catch{o(L(!0))}finally{m(!1)}})()}),a}var hp=QS;n();s();var xp=u(x());J();co();function Li(){let{coin:o}=S();return(0,xp.useCallback)(async t=>{let{ZksyncWallet:e}=await hr(),r=No(t,10**o.decimals),i=await e.getCloseAmounts(r);return Be(i,r)?null:{key:"wallet_extenshion_max_amount_no_large_than",args:{amount:V.showFloorTruncation(Co(i,10**o.decimals),o.decimals,!1),symbol:o.symbol},type:to.COMMON_ERROR}},[])}function oI(){let t=[Li()];Q(t)}var yp=oI;function tI(){let o=hp();return yp(),ws.default.createElement(q,{confirmButtonProps:{loading:o}})}function eI(){let{coin:o}=S();return ws.default.createElement(Do,{fixed:!!o.vdecimalNum},ws.default.createElement(tI,null))}var _p=eI;n();s();var Ns=u(x());n();s();var Di=u(E());Po();To();function rI(){let o=fo(),{coin:t}=S(),e=_(),r=(0,Di.useSelector)(eo),i=j(),a=Zt(),m=W(),c=(0,Di.useSelector)(Vc),d=async()=>{let{info:l,feeCoin:f}=c||{},{accountId:g,nonce:C}=l||{},T={type:Rt.TRANSFER,from:e,to:r,accountId:parseInt(g,10),tokenId:parseInt(f?.tokenId,10),tokenSymbol:f?.originSymbol,amounts:m,fees:i,decimals:t.decimals,nonce:parseInt(C,10)};return await Y().signTransaction(T,e,ea)},A=async l=>{if(l?.code)throw new Error(Ln);let{signature:f,tx:g}=l||{},{txHash:C,...T}=g||{},I={txSource:Yo.NORMAL,signedTx:JSON.stringify({signature:f,tx:T}),fromAdr:e,serviceCharge:g?.fee,toAdr:g?.to,coinAmount:m,coinId:t.coinId,txHash:C,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(I)};return async()=>{let l=await d();return A(l)}}var Fp=rI;n();s();var Ep=u(x());function nI(){let o=Li();return(0,Ep.useCallback)(async t=>{let e=await o(t);return e?{...e,highlight:Ae.AMOUNT}:null},[o])}function sI(){let t=[nI()];oo(t)}var Pp=sI;function iI(){let o=Fp(),t=async()=>o();return Pp(),Ns.default.createElement($,{confirmButtonProps:{onSubmit:t}})}function aI(){let{coin:o}=S();return Ns.default.createElement(Do,{fixed:!!o.vdecimalNum},Ns.default.createElement(iI,null))}var bp=aI;var mI={match:o=>o===sa,pages:{AddressPage:z,AmountPage:_p,ConfirmPage:bp}},kp=mI;n();s();To();n();s();var Bp=u(x());n();s();var Te=u(x()),vs=u(E());n();s();function cI(){let{coin:o}=S(),t=_();return async({value:e,to:r,signInfo:i})=>{let{gasPrice:a,inputCoins:m=[],tokenInputCoins:c=[],budget:d}=i||{},A=m.map((g={})=>{let{digest:C,version:T,objectId:I}=g;return{digest:C,version:T,objectId:I}}),l=new bc;if(l.setGasPrice(a),l.setGasPayment(A||[]),l.setSender(t),d&&l.setGasBudget(d),o.baseCoinId===0){let g=l.splitCoins(l.gas,[l.pure(e)]);l.transferObjects([g],l.pure(r))}else if(c.length>1){let g=c.slice(1).map(I=>l.object(I.objectId)),C=l.object(c[0].objectId);l.mergeCoins(C,g);let T=l.splitCoins(C,[l.pure(e)]);l.transferObjects([T],l.pure(r))}else{let g=l.splitCoins(l.object(c[0].objectId),[l.pure(e)]);l.transferObjects([g],l.pure(r))}let f=Pc(await l.build({client:Au}));return{tx:l,txBytes:f}}}var Bs=cI;n();s();function uI(){let{coin:o}=S(),t=_(),e=o.coinId;return async({to:r,value:i})=>(await Wt({address:t,coinId:e},{fromAddr:t,toAddr:r,value:i})).info||{}}var wp=uI;function Np(){let o=(0,vs.useDispatch)(),t=(0,vs.useSelector)(St),{coin:e}=S(),r=_(),i=W(),a=w(),{coinId:m}=e,[c,d]=(0,Te.useState)(!1),A=(0,Te.useRef)(0),l=wp(),f=Bs(),g=Ut(i),{run:C}=zo(async()=>{A.current++;try{o(L(!1));let T={value:i,to:a},I=await l(T),y=(await f({...T,signInfo:I}))?.tx?.blockData?.gasConfig?.budget||"0";o(su(I)),o(H(y))}catch{o(L(!0))}finally{A.current--,A.current===0&&d(!1)}},{wait:300});return(0,Te.useEffect)(()=>{t&&(d(!0),C())},[t]),(0,Te.useEffect)(()=>{t&&i!==g||(d(!0),C())},[m,r,a,i,t]),c}function dI(){let o=Np();return Q(),Bp.default.createElement(q,{confirmButtonProps:{loading:o}})}var vp=dI;n();s();var Dp=u(x());n();s();var Mi=u(E());To();Po();var Lp=()=>{let o=fo(),{coin:t}=S(),e=_(),r=ao(),i=(0,Mi.useSelector)(eo),a=(0,Mi.useSelector)(Hc),m=j(),c=Bs();return uo(async()=>await c({value:r,to:i,signInfo:{...a||{},budget:m}}),async({tx:C,txBytes:T})=>{let I={type:"raw",data:T},h=await Y().signTransaction(I,e,ra);return{tx:C,txBytes:T,signedTx:h}},async({tx:C,txBytes:T,signedTx:I}={})=>{let{signature:h,hash:y}=I||{},P={signedTx:{request_type:"WaitForEffectsCert",tx_bytes:T,signatures:[h]},coinAmount:r,coinId:t.coinId,fromAdr:e,toAdr:i,serviceCharge:C?.blockData?.gasConfig?.budget||"0",txHash:y};return await o(P)},C=>(ro({tx_id:C}),C))};function fI(){let o=Lp(),t=async()=>{await o()};return oo(),Dp.default.createElement($,{confirmButtonProps:{onSubmit:t}})}var Mp=fI;var pI={match:o=>o===ia,pages:{AddressPage:z,AmountPage:vp,ConfirmPage:Mp}},Rp=pI;n();s();n();s();var Up=u(x()),Ls=u(bo());n();s();function yt(){return Vt().get("type")||xt.SEND}n();s();function lI(){let o=Tt(),t=jm();return[o,t]}var Op=lI;function gI(){let{coinId:o}=(0,Ls.useParams)(),t=_(),e=(0,Ls.useHistory)(),r=yt(),i=Op(),a=as();return Up.default.createElement(z,{addressProps:{errorFns:{fns:i,override:!0},extraProps:{filterAddress:a}},confirmButtonProps:{onClick:()=>{e.push(`${$o}/${o}${Oe}?type=${r}&from=${t}`)}}})}var Wp=gI;n();s();var Al=u(x());n();s();var Ho=u(x()),Rs=u(E()),dl=u(bo()),fl=u(Mt());J();co();n();s();var Ao=u(x()),Hp=u(E()),Kp=u(Mt());J();n();s();var ft=u(x()),Ri=u(Mt());J();n();s();var AI="md",CI="lg",Gp=o=>{let{className:t,size:e,disabled:r,checked:i,coinImage:a,coinAmountText:m,inscriptionId:c,onChange:d}=o,A=`inscription-select-container-${e}`,l=r?"inscription-select-disabled":null;return ft.default.createElement("div",{className:(0,Ri.default)("inscription-select-container",A),onClick:d},r?ft.default.createElement("div",{className:"inscription-select-confirm"},F("extension_wallet_send_tag_confirming")):null,ft.default.createElement("div",{className:(0,Ri.default)("inscription-select",l,t)},r?null:ft.default.createElement("div",{className:"inscription-select-radio-container"},ft.default.createElement(ji.Circle,{checked:i})),ft.default.createElement("div",{className:"inscription-select-coin"},ft.default.createElement(Xr,{className:"inscription-select-coin-image",src:a,errorImg:nn,width:14,height:14}),ft.default.createElement(ci,{text:m,tooltipProps:{className:"inscription-select-coin-text-tooltip"}})),ft.default.createElement("div",{className:"inscription-select-id"},ft.default.createElement(ci,{text:c,tooltipProps:{className:"inscription-select-id-tooltip"}}))))};Gp.size={md:AI,lg:CI};var lr=Gp;n();s();var ko=u(x());J();n();s();var me={header:"_header_144xr_1",amount:"_amount_144xr_7",logo:"_logo_144xr_13",max:"_max_144xr_18",scrollContent:"_scrollContent_144xr_26",content:"_content_144xr_31",cell:"_cell_144xr_38",loading:"_loading_144xr_41"};function SI(){let{coin:o}=S(),t=te();return ko.default.createElement("div",{className:me.header},ko.default.createElement("div",{className:me.amount},ko.default.createElement(Xr,{className:me.logo,src:o.image,errorImg:nn,width:20,height:20}),t?.transferableWithoutSpendingDisplay))}function II({loading:o,list:t,visible:e,onClose:r,value:i,onSelected:a,request:m}){let{coin:c}=S(),[d,A]=(0,ko.useState)({}),{run:l}=Ra(f=>{o||f.target.scrollHeight-f.target.scrollTop-f.target.offsetHeight<=150&&m&&m()},{wait:300});return(0,ko.useEffect)(()=>{e&&A(i)},[e]),ko.default.createElement(de,{isFull:!0,topContent:ko.default.createElement(SI,{list:t,value:d,onMax:f=>{A(t.reduce((g,C)=>({...g,[C.inscriptionId]:!f}),{}))}}),footer:ko.default.createElement(Nt.ConfirmButton,{onClick:()=>{a(d)}},F("wallet_set_password_btn_confirm")),noMargin:!0,noContentPadding:!0,visible:e,onClose:r,renderContent:()=>ko.default.createElement("div",{className:me.scrollContent,onScroll:l},ko.default.createElement("div",{className:me.content},t.map((f,g)=>ko.default.createElement("div",{className:me.cell},ko.default.createElement(lr,{key:g,size:lr.size.lg,coinImage:c.image,coinAmountText:`${f.tokenAmount} ${f.tick}`,inscriptionId:f.inscriptionId,checked:d[f.inscriptionId],onChange:()=>{A(C=>({...C,[f.inscriptionId]:!C[f.inscriptionId]}))}})))),o&&ko.default.createElement("div",{className:me.loading},ko.default.createElement(Pe.Circle,{size:Pe.SIZE.sm})))})}var Vp=II;n();s();var gr={root:"_root_r3y60_1",title:"_title_r3y60_5",arrow:"_arrow_r3y60_14",content:"_content_r3y60_17",cell:"_cell_r3y60_22"};function TI({loading:o,list:t,request:e,onSelected:r},i){let{coin:a}=S(),[m,c]=(0,Ao.useState)(!1),d=(0,Hp.useSelector)(rt),[A,l]=(0,Ao.useState)(d.reduce((C,T)=>({...C,[T.inscriptionId]:!0}),{})),{selected:f,showed:g}=(0,Ao.useMemo)(()=>{let C=t.filter(I=>!!A[I.inscriptionId]),T=t.filter(I=>!A[I.inscriptionId]);return{selected:C,unselected:T,showed:t.map(I=>C.includes(I)?{...I,checked:!0}:I)}},[t,A]);return(0,Ao.useEffect)(()=>{r(f)},[f]),(0,Ao.useImperativeHandle)(i,()=>({onMax:()=>{l(t.reduce((C,T)=>({...C,[T.inscriptionId]:!0}),{}))}})),Ao.default.createElement(Ao.default.Fragment,null,Ao.default.createElement("div",{className:gr.root},Ao.default.createElement("div",{className:gr.title,onClick:()=>{c(!0)}},F("extension_wallet_send_text_select_transferable"),Ao.default.createElement($i,{className:(0,Kp.default)(gr.arrow,"okds-arrow-chevron-right-centered-md")})),Ao.default.createElement("div",{className:gr.content},g.map((C,T)=>Ao.default.createElement("div",{className:gr.cell},Ao.default.createElement(lr,{key:T,coinImage:a.image,size:lr.size.md,coinAmountText:`${C.tokenAmount} ${C.tick}`,inscriptionId:C.inscriptionId,checked:C.checked,onChange:I=>{I.stopPropagation(),l(h=>({...h,[C.inscriptionId]:!h[C.inscriptionId]}))}}))))),Ao.default.createElement(Vp,{visible:m,value:A,loading:o,list:t,request:e,onSelected:C=>{l(C),c(!1)},onClose:()=>{c(!1)}}))}var Jp=(0,Ao.forwardRef)(TI);n();s();var ce=u(x()),Yp=u(E());J();function hI(o){let{coin:t}=S();return(0,ce.useCallback)(()=>o.length===0?{key:"extension_wallet_send_text_noresults_crypto",args:{crypto:t.symbol},type:"inscribe"}:null,[o])}function Zp(){let o=Jt();return t=>{let e="";return t.key&&(e=F(t?.key,t?.args)),t?.type===to.FEE_BALANCE_INSUFFICIENT?ce.default.createElement(ce.default.Fragment,null,e," ",ce.default.createElement(kr,{coin:o})):t?.type==="inscribe"?ce.default.createElement(ce.default.Fragment,null,e):e}}function xI(o,t){let e=(0,Yp.useDispatch)(),r=oc(),i=hI(t),a=[r,i],{runErrorFns:m}=Je(a);vn(m,c=>{e(Wm(c))},o)}var qp=xI;n();s();var zp=u(bo());var $p=u(E());function yI(){let o=(0,$p.useDispatch)(),t=(0,zp.useHistory)(),{coin:e}=S(),r=_();return()=>{o(os()),o(bn()),t.push(`${$o}/${e.coinId}${fn}?type=${xt.INSCRIBE}&from=${r}`)}}var Xp=yI;n();s();var ol=u(x()),tl=u(E());n();s();var Gr=u(x()),jp=u(E());co();function Oi(){let{baseCoin:o}=S(),t=_(),[,e]=yn({coinId:o.coinId,address:t,chainId:o.chainId},{pollingInterval:20*1e3});return e||{}}function _I(o,t){let i=(()=>255)(),a=o||t?.normal||"0",[m,c]=(0,Gr.useState)("0");return(0,Gr.useEffect)(()=>{if(i&&a){let d=No(i,a);c(d)}},[i,a]),{fee:m,satBytes:a,bytes:i}}function FI(o){let t=(0,jp.useDispatch)(),e=Oi(),r=_I(o,e);return(0,Gr.useEffect)(()=>{t(ut({name:"signInfo",value:e}))},[e]),{...r,signInfo:e}}var Qp=FI;function EI(){let o=(0,tl.useDispatch)(),{fee:t}=Qp();(0,ol.useEffect)(()=>{o(H(t))},[t])}var el=EI;n();s();var il=u(x()),al=u(E());n();s();var Ds=u(x());var nl=u(E());n();s();var rl=u(E());function PI(){let{selectedSat:o,signInfo:t}=(0,rl.useSelector)(Yn),e;return o.type===bt.CUSTOM?e=o.satBytes:e=t?.[ka[o.type]],e||0}var _t=PI;function bI(){let[o,t]=(0,Ds.useState)(!0),e=(0,nl.useDispatch)(),r=_(),i=ns(),a=_t();return(0,Ds.useEffect)(()=>{(async()=>{let c;try{c=(await i({from:r,coinAmount:0,serviceCharge:0,feeRate:a})).canTransferAmount||"0"}catch{c="0"}t(!1),e(He(c))})()},[r,a]),o}var sl=bI;function kI(){let o=(0,al.useDispatch)(),t=te(),e=sl();return(0,il.useEffect)(()=>{o(Oo(t?.transferableWithoutSpending))},[t?.transferableWithoutSpending]),e}var ml=kI;n();s();var Ar=u(x()),cl=u(E());Po();ve();Ne();co();function wI(){let{coin:o,baseCoin:t}=S(),e=_(),r=(0,cl.useSelector)(qo),[i,a]=(0,Ar.useState)({from:1,size:10});return async()=>{let m=await Y().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),c={utxoType:kt.BRC20_CONVERTIBLE,address:e,tick:o.symbol,protocolId:sn(o.chainId)},d={coinId:t.coinId,utxoRequests:[{...c,...i}]},{data:A}=await pt(Jo.getBTCUTXO,d,{headers:m}),l=(A?.[0]?.utxoList||[]).map(g=>({...g,tokenAmountInt:g.tokenAmount,tokenAmount:Co(g.tokenAmount,10**o.decimals)})),f=l.length===i.size;return f&&a(g=>({...g,from:g.from+1})),{list:l,more:f}}}function NI(){let o=(0,Ar.useRef)(!0),[t,e]=(0,Ar.useState)(!0),[r,i]=(0,Ar.useState)([]),a=wI(),m=async()=>{if(!!o.current){e(!0);try{let{more:c,list:d}=await a();i(A=>[...A,...d]),o.current=c}finally{e(!1)}}};return gt(()=>{m()}),{list:r,loading:t,request:m}}var ul=NI;n();s();var Ms={loading:"_loading_19h4i_1",content:"_content_19h4i_6","inscribe-footer":"_inscribe-footer_19h4i_9",inscribeFooter:"_inscribe-footer_19h4i_9"};function BI(){let o=(0,dl.useHistory)(),t=(0,Rs.useDispatch)(),{coin:e}=S(),r=(0,Rs.useSelector)(rt),i=Xp(),a=Zp(),m=yt(),c=_(),d=(0,Ho.useMemo)(()=>r.reduce((k,{tokenAmount:v})=>no(k,v),0),[r]),{loading:A,list:l,request:f}=ul(),g=ml(),C=l.length>0,T=A||g;el(),qp(T,l);let{availableWithoutSpending:I,availableWithoutSpendingDisplay:h,availableReceiving:y,availableReceivingDisplay:P}=te();if(l.length===0&&T)return Ho.default.createElement("div",{className:Ms.loading},Ho.default.createElement(Pe.Circle,{size:Pe.SIZE.xl}));let N=Ho.default.createElement(Qa.FooterActions,{className:(0,fl.default)(Ms.inscribeFooter)},Ho.default.createElement(Io,{block:!0,type:Io.TYPE.highlight,size:Io.SIZE.lg,onClick:i},F("extension_wallet_btc_btn_inscribe")),Ho.default.createElement(Io,{block:!0,type:Io.TYPE.highlight,size:Io.SIZE.lg,disabled:!0},F("wallet_extension_send_btn_continue")));return Ho.default.createElement(q,{checkEmpty:!1,inputAmount:d,renderError:a,classes:{content:C?Ms.content:""},slot:{bottom:C?Ho.default.createElement(Jp,{loading:T,list:l,request:f,onSelected:k=>{t(ut({name:"brc20UtxoList",value:k}))}}):null,footer:l.length===0&&Number(I)>0?N:null},inputProps:{disabled:!0},confirmButtonProps:{disabled:r.length===0,onClick:()=>{o.push(`${$o}/${e.coinId}${pn}?type=${m}&from=${c}`)}},totalAmountProps:{fixBottom:!0,type:"amount",title:F("extension_wallet_send_text_transfer_available"),hiddenMaxButton:!0,slot:{bottom:Ho.default.createElement(Ho.default.Fragment,null,(Number(I)>0||Number(y)>0)&&Ho.default.createElement(us,{lockedAmount:0,pendingXrc:0,availableWithoutSpending:I,availableWithoutSpendingDisplay:h,availableReceiving:y,availableReceivingDisplay:P,goToInscribe:i}))}}})}var pl=BI;n();s();var ll=u(x()),Os=u(bo());function vI(){let{coinId:o}=(0,Os.useParams)(),t=(0,Os.useHistory)(),e=yt(),r=_();return ll.default.createElement(Su,{onConfirm:()=>{t.push(`${$o}/${o}${Oe}?type=${e}&from=${r}`)}})}var gl=vI;var LI={[xt.SEND]:pl,[xt.INSCRIBE]:gl};function DI(){let o=yt(),t=LI[o];return t?Al.default.createElement(t,null):null}var Cl=DI;n();s();var Ml=u(x());n();s();var So=u(x()),xe=u(E()),Nl=u(bo());J();n();s();var Vr=u(x());n();s();var Ft=u(x()),Sl=u(Mt());J();n();s();var he={utxoTextWrap:"_utxoTextWrap_s2w3l_1",utxoText:"_utxoText_s2w3l_1",utxoTextSymbol:"_utxoTextSymbol_s2w3l_14",utxoTextAmount:"_utxoTextAmount_s2w3l_17",badge:"_badge_s2w3l_21"};var MI=(o={})=>{let{address:t,isNeedToSign:e,coinAmount:r,symbol:i}=o;return Ft.default.createElement(Z.FlexBox,{justify:"space-between",align:Z.ALIGN.center,className:he.utxoTextWrap},Ft.default.createElement(Z.FlexBox,{align:Z.ALIGN.center},Ft.default.createElement(M.Text,{className:he.utxoText,ellipsis:{tooltip:!0}},t),e&&Ft.default.createElement($r,{className:he.badge,color:$r.COLOR.green,type:$r.TYPE.rect},F("extension_wallet_transaction_label_signature"))),Ft.default.createElement(Z.FlexBox,{align:Z.ALIGN.center,className:(0,Sl.default)(he.utxoText,he.utxoTextAmount)},Ft.default.createElement(M.Text,{inherit:!0,strong:!0,ellipsis:{tooltip:!0}},r),Ft.default.createElement(M.Text,{inherit:!0,strong:!0,className:he.utxoTextSymbol},i)))},Il=(0,Ft.memo)(MI);n();s();var Tl={utxosBlock:"_utxosBlock_ooh7h_1",utxoBorder:"_utxoBorder_ooh7h_6"};var RI=({utxos:o})=>Vr.default.createElement(Z.Box,{className:Tl.utxosBlock},o.map((t={},e)=>{let{address:r,coinAmount:i,isNeedToSign:a,symbol:m}=t;return Vr.default.createElement(Il,{key:e,address:r,coinAmount:i,isNeedToSign:a,symbol:m})})),Ui=(0,Vr.memo)(RI);co();n();s();var Hr=u(E()),yl=u(mt());n();s();var Wi=u(E());To();var hl=u(x());function OI(o){let t=(0,Wi.useSelector)(qo),e=_(),r=(0,Wi.useSelector)(rt),i=_t(),a=w(),m=Cn(t);return(0,hl.useCallback)(async c=>{if(!c.length)return null;let d={address:e,feePerB:i,inputs:[...r.map(({txHash:l,vout:f,coinAmount:g})=>({vOut:f,txId:l,amount:g})),...c.map(({txHash:l,vout:f,coinAmount:g})=>({vOut:f,txId:l,amount:g}))],outputs:[...r.map(({coinAmount:l})=>({amount:l,address:a}))]};return await ja(d,e,jr,t,{fake:o===Dn.CAL_FEE&&m})},[r,i])}var xl=OI;function UI(){let o=(0,Hr.useDispatch)(),{coin:t}=S(),e=(0,Hr.useSelector)(rt),r=_(),i=w(),a=j(),m=W(),c=(0,Hr.useSelector)(qo),d=tm(c),A=tt(),f=ya(t)?lt.BRC20_SEND:lt.BRC30_SEND,g=xl(Dn.CONFIRM),C=ns(),T=_t(),I=Mn({address:r,coinId:t.coinId,currencyId:A,txType:f,protocolId:sn(t.chainId)}),h=Em(c),y=async N=>{try{await h();let k=await g(N.utxoList||[]),v=await xo(t.localType,k),b=d?.serverWalletType,R={txSource:Yo.NORMAL,toAdr:i,coinId:t.coinId,txHash:v,signedTx:k,walletId:c,serviceCharge:a,fromAdr:r,coinAmount:m,walletType:b,txType:f,extJson:JSON.stringify({nftIds:e.reduce((B,U)=>[...B,...(U.nftLocaltionVOs||[]).map(({nftId:K})=>K)],[])})},O=await ms(R);ro({tx_id:O})}catch(k){k?.error_message&&be.error(k?.error_message)}};return async()=>{let N=await C({from:r,coinAmount:0,serviceCharge:a,feeRate:T}),k=N.utxoList||[];return o(ut({name:"feeUtxoList",value:k||[]})),await I([...e||[],...k||[]],yl.noop),await y(N)}}var _l=UI;n();s();var Fl=u(E());function WI(){let o=(0,Fl.useDispatch)(),e=[ec()],{runErrorFns:r}=Je(e);vn(r,i=>{o(Gm(i))})}var El=WI;n();s();var Pl=u(x()),Kr=u(E());function bl(){let o=(0,Kr.useDispatch)(),t=Oi();(0,Pl.useEffect)(()=>{o(ut({name:"signInfo",value:t}))},[t])}function kl(){let o=It(),t=(0,Kr.useDispatch)(),e=_(),r=w(),i=jo(),a=_t(),m=(0,Kr.useSelector)(rt),[c,d,A]=Rn({coinId:o,toAddr:r,walletId:i,fromAddr:e,satBytes:a,coinAmount:"0",utxoParams:{satBytes:a},inputs:m},{onSuccess:(l,f)=>{t(H(l)),t(ut({name:"feeUtxoList",value:f||[]}))}});return{feeLoading:c,fee:d,feeError:A}}n();s();var wl={network:"_network_1zgil_1",data:"_data_1zgil_6",dataTitle:"_dataTitle_1zgil_12"};function GI(){let o=kn(),t=_(),e=w(),r=j(),i=(0,xe.useSelector)(rt),a=(0,xe.useSelector)(Kc),{baseCoin:m}=S(),c=(l,f)=>l.map(({coinAmount:g})=>{let C=Co(g,10**m.decimals);return{address:ii(f),coinAmount:o(C,m,{useApproximate:!1}),symbol:m.symbol}}),d=(0,So.useMemo)(()=>c([...i,...a],t),[i,a]),A=(0,So.useMemo)(()=>{let l=c(i,e),f=a.reduce((g,{coinAmount:C})=>no(g,C),"0");if(Ko(f,r)){let g=Co(Pt(f,r),10**m.decimals);l.push({address:ii(t),coinAmount:o(g,m,{useApproximate:!1}),symbol:m.symbol})}return l},[i,a,r]);return So.default.createElement(go,{space:32},So.default.createElement(Fr,{title:F("extension_wallet_transaction_text_input")},So.default.createElement(Ui,{utxos:d})),So.default.createElement(Fr,{title:F("extension_wallet_transaction_text_output")},So.default.createElement(Ui,{utxos:A})))}function VI(){let o=(0,xe.useDispatch)(),[t,e]=(0,So.useState)(!1),{coinId:r}=(0,Nl.useParams)(),i=tt(),a=(0,xe.useSelector)(Jc),m=_l(),{signInfo:c}=(0,xe.useSelector)(Yn),d=Nn(),A=_t(),{feeLoading:l,fee:f,feeError:g}=kl(),C=Co(f,A),T=h=>{o(ut({name:"selectedSat",value:h}))};bl(),El();let I=c?.transferReminder;return So.default.createElement(So.default.Fragment,null,So.default.createElement($,{classes:{network:wl.network},slot:{bottom:h=>So.default.createElement(So.default.Fragment,null,So.default.createElement(go,null,So.default.createElement(Lo,{...h})),So.default.createElement(GI,null))},defaultMessage:I,networkFeeProps:{loading:l,estimateFailed:g,feeLevel:a.type,onClick:()=>{e(!0)}},confirmButtonProps:{onSubmit:m},canTransferAmount:d}),t&&So.default.createElement(Cu,{currencyId:i,bytes:C,value:a,coinId:r,signInfo:c,onChange:T,onClose:()=>{e(!1)}}))}var Bl=VI;n();s();var Us=u(x()),vl=u(bo());var Ll=u(E());co();function HI(){let o=(0,vl.useHistory)(),t=(0,Ll.useSelector)(Qo),e=Ke();return(0,Us.useEffect)(()=>{Be(e,"0")&&o.go(-1)},[e]),Us.default.createElement(Iu,{onConfirm:()=>{o.push(t||dn)}})}var Dl=HI;var KI={[xt.SEND]:Bl,[xt.INSCRIBE]:Dl};function JI(){let o=yt(),t=KI[o];return t?Ml.default.createElement(t,null):null}var Rl=JI;n();s();var Ol=u(x());function YI({children:o}){let e=Vt().get("from");return Ol.default.createElement(Do,{fromAddress:e},o)}var Ul=YI;var ZI={match:(o,t,e)=>fe({coinId:o})&&[D.BRC_20,D.FRACTAL_BRC20].includes(e),Container:Ul,pages:{AddressPage:Cl,AmountPage:Wp,ConfirmPage:Rl}},Wl=ZI;n();s();To();n();s();n();s();var Gi=u(x()),Jr=u(E()),Hl=u(mt());n();s();var Gl=u(RA()),qI=async({coin:o,fromAddress:t,toAddress:e,value:r,memo:i="",signInfo:a={}})=>{let{getRawTransaction:m}=await ha(),c={};if(o.baseCoinId===0)c={data:{type:De.TRANSFER,data:{to:e,amount:r,memo:i}}};else{let{info:A={}}=a,{contractAddress:l,contractName:f,tokenName:g}=A;c={data:{type:De.TOKEN_TRANSFER,data:{from:t,to:e,memo:i,contract:l,contractName:f,functionName:un.TRANSFER,tokenName:g,amount:r}}}}return await m(Gl.Currency.Stx,c)},Vl=async({coin:o,fromAddress:t,toAddress:e,value:r,memo:i="",signInfo:a={}})=>{let m=await qI({coin:o,fromAddress:t,toAddress:e,value:r,memo:i,signInfo:a});return(await kc({coinId:o.coinId,fromAddress:t,value:r,inputData:m}))?.gasLimit||"0"};var zI=()=>{let o=(0,Jr.useDispatch)(),t=_(),e=w(),r=(0,Jr.useSelector)(St),i=W(),a=Ut(i),{coin:m,baseCoin:c}=S(),{signInfo:d,memo:A}=(0,Jr.useSelector)(tr),l=async()=>{try{o(L(!1));let g;m.baseCoinId!==0&&(0,Hl.isEmpty)(d)?(g=await Un({coinId:m.coinId,fromAddress:t,toAddress:e,value:i}),o(jn({name:"signInfo",value:g}))):g=d;let C=await Vl({coin:m,baseCoin:c,fromAddress:t,toAddress:e,value:i,signInfo:g,memo:A});o(H(C))}catch{o(L(!0))}finally{o(yo(!1))}},{run:f}=zo(l,{wait:500});(0,Gi.useEffect)(()=>{r&&(o(yo(!0)),f())},[r]),(0,Gi.useEffect)(()=>{r&&i!==a||(o(yo(!0)),f())},[i,e,r,A])},Kl=zI;var $I=({children:o})=>(Kl(),o),Jl=$I;n();s();var Yl=u(x());var XI=()=>(Q(),Yl.default.createElement(q,null)),Zl=XI;n();s();var ye=u(x()),Gs=u(E());J();n();s();var Ws=u(E());var jI=()=>{let o=fo(),{coin:t,baseCoin:e}=S(),r=_(),i=(0,Ws.useSelector)(eo),a=W(),m=(0,Ws.useSelector)(ot),{memo:c}=(0,Ws.useSelector)(tr),d=Ct({fromAddr:r,localType:e.localType}),A=async()=>await Un({coinId:t.coinId,fromAddress:r,toAddress:i,value:a}),l=y=>{let{info:P}=y,{nonce:N}=P;return{type:De.TRANSFER,data:{to:i,amount:a,nonce:N,fee:m,memo:c}}},f=y=>{let{info:P}=y,{nonce:N,contractAddress:k,contractName:v,tokenName:b}=P;return{type:De.TOKEN_TRANSFER,data:{from:r,to:i,amount:a,nonce:N,fee:m,memo:c,contract:k,contractName:v,functionName:un.TRANSFER,tokenName:b}}};return uo(A,y=>t.baseCoinId===0?l(y):f(y),async y=>{let{data:P}=y,{nonce:N}=P,{txId:k,txSerializedHexString:v}=await d({params:y,needCapture:!0});return{txId:k,txSerializedHexString:v,nonce:N}},async({txId:y,txSerializedHexString:P,nonce:N})=>{let k={nonce:N},v=JSON.stringify(k),b={signedTx:P,coinAmount:a,coinId:t.coinId,fromAdr:r,toAdr:i,serviceCharge:m,txHash:y,memo:c,extJson:v};return await o(b)},y=>(ro({tx_id:y}),y))},ql=jI;var zl=34,QI=()=>{let o=(0,Gs.useDispatch)(),{memo:t}=(0,Gs.useSelector)(tr),e=ql(),r=i=>{let a=i.target.value;new TextEncoder().encode(a).length<=zl&&o(jn({name:"memo",value:i.target.value}))};return oo(),ye.default.createElement($,{confirmButtonProps:{onSubmit:e},slot:{bottom:i=>ye.default.createElement(ye.default.Fragment,null,ye.default.createElement(go,null,ye.default.createElement(Lo,{...i})),ye.default.createElement(se,{value:t,placeholder:F("extension_wallet_transaction_input_entermemo_max",{num:zl}),onChange:r}))}})},$l=QI;var oT={match:o=>o===aa,Container:Jl,pages:{AddressPage:z,AmountPage:Zl,ConfirmPage:$l}},Xl=oT;n();s();To();n();s();var Ql=u(x());n();s();Ne();ve();var tT=()=>{let{baseCoin:o}=S();return so(async t=>{let e={account:t,coinId:o.coinId},r;try{r=await Sa(Jo.queryAccountExist,e)}catch(i){console.log(i)}return r?.data?.account?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})};function eT(){let o=Tt(),t=tT();return[o,t]}var jl=eT;var rT=()=>{let o=jl();return Ql.default.createElement(z,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},og=rT;n();s();var tg=u(x());function nT(){return Q(),tg.default.createElement(q,null)}var eg=nT;n();s();var Yr=u(x());J();n();s();var rg=u(E());Po();var sT=o=>{let{coin:t,baseCoin:e}=S(),r=_(),i=(0,rg.useSelector)(eo),a=ao(),m=fo();return uo(async()=>await Wt({coinId:t.coinId,address:r},{fromAddr:r,toAddr:i}),async g=>{let{info:C}=g,{chainid:T,compression:I,refBlockNumber:h,refBlockId:y,refBlockTimestamp:P,expireSeconds:N,precision:k,symbol:v,contract:b}=C,R={type:0,from:r,to:i,amount:a,memo:o,precision:k,symbol:v,contract:b,common:{chainId:T,compression:I,refBlockNumber:h,refBlockId:y,refBlockTimestamp:P,expireSeconds:N}};return await Y().signTransaction(R,r,e.localType)},async g=>{let C={memo:o},T=await xo(t.localType,g),I={signedTx:g,coinAmount:a,coinId:t.coinId,fromAdr:r,toAdr:i,serviceCharge:"0",extJson:JSON.stringify(C),txHash:T};return await m(I)},g=>(ro({tx_id:g}),g))},ng=sT;var sg=256;function iT(){let[o,t]=(0,Yr.useState)(""),e=ng(o),r=async()=>{await e()},i=a=>{let m=a.target.value;new TextEncoder().encode(m).length<=sg&&t(a.target.value)};return oo(),Yr.default.createElement($,{slot:{bottom:Yr.default.createElement(se,{value:o,placeholder:F("extension_wallet_transaction_input_entermemo_max",{num:sg}),onChange:i})},confirmButtonProps:{onSubmit:r}})}var ig=iT;var aT={match:o=>o===ma,pages:{AddressPage:og,AmountPage:eg,ConfirmPage:ig}},ag=aT;n();s();To();n();s();n();s();var Vi=u(x()),Vs=u(E()),mg=u(mt());Po();var mT=({fromAddress:o,toAddress:t,amountInputValueInt:e,sendCoinBalanceInt:r,feeInt:i,coin:a,isMax:m})=>{let c=(0,Vs.useDispatch)(),{signInfo:d}=(0,Vs.useSelector)(Zn),A=Ut(e),l=async()=>{let I=await Wt({coinId:a.coinId,address:o},{fromAddr:o,toAddr:t});return c(iu({name:"signInfo",value:I})),I},f=async I=>{let h={type:"transfer",nonce:I?.info?.nonce,maxFee:i||"0",transferData:{contractAddress:I?.info?.contractAddress,from:o,to:t,amount:e}};return(await Y().signTransaction(h,o,a.localType))?.signature},g=async I=>{let{data:h}=await gn({coinId:a.coinId,address:o,inputData:I});if(h?.queryGasLimitErrorUseDefault)throw new Error("fetch maxFee error");return h?.gasLimit},C=async()=>{try{let I;(0,mg.isEmpty)(d)?I=await l():I=d;let h=await f(I),y=await g(h);c(H(y)),c(L(!1))}catch{c(L(!0))}finally{c(yo(!1))}},{run:T}=zo(C,{wait:500});(0,Vi.useEffect)(()=>{m&&(c(yo(!0)),T())},[m,r]),(0,Vi.useEffect)(()=>{m&&e!==A||(c(yo(!0)),T())},[t,e,m])},cg=mT;var cT=({children:o})=>{let t=_(),e=w(),r=W(),i=Ye(),a=j(),{coin:m}=S(),c=Yt();return cg({fromAddress:t,toAddress:e,amountInputValueInt:r,sendCoinBalanceInt:i,feeInt:a,coin:m,isMax:c}),o},ug=cT;n();s();var dg=u(x());var uT=()=>(Q(),dg.default.createElement(q,null)),fg=uT;n();s();var lg=u(x()),gg=u(E());n();s();Po();var dT=({coin:o,baseCoin:t,fromAddress:e,toAddress:r,amountInt:i,feeInt:a,nonce:m,contractAddress:c})=>{let d=fo();return uo(async()=>{let C={type:"transfer",nonce:m,maxFee:a,transferData:{contractAddress:c,from:e,to:r,amount:i}},{txId:T,signature:I}=await Y().signTransaction(C,e,t.localType);return{txId:T,signature:I}},async({txId:C,signature:T})=>{let I={serviceChargeCoinId:t.coinId,nonce:m},h=JSON.stringify(I),y={signedTx:T,coinAmount:i,coinId:o.coinId,fromAdr:e,toAdr:r,serviceCharge:a,txType:lt.TRANS_OUT,txHash:C,extJson:h};return await d(y)},C=>(ro({tx_id:C}),C))},pg=dT;var fT=()=>{let o=_(),t=w(),e=ao(),r=j(),{coin:i,baseCoin:a}=S(),{signInfo:m}=(0,gg.useSelector)(Zn),c=pg({coin:i,baseCoin:a,fromAddress:o,toAddress:t,amountInt:e,feeInt:r,nonce:m?.info?.nonce,contractAddress:m?.info?.contractAddress});return oo(),lg.default.createElement($,{confirmButtonProps:{onSubmit:c}})},Ag=fT;var pT={match:o=>o===ca,Container:ug,pages:{AddressPage:z,AmountPage:fg,ConfirmPage:Ag}},Cg=pT;n();s();To();n();s();var Pg=u(x());var Js=u(E());J();n();s();var hg=u(x());n();s();J();var Cr=u(mt());var Sg=(o,t)=>{let[e,r]=o?.split("-");return[{policyId:e,assets:[{amount:t,assetName:r}]}]},lT=(o,t)=>(0,Cr.uniq)((0,Cr.map)([...o,...t],"assetName")).map(r=>{let i=o.find(m=>m?.assetName===r),a=t.find(m=>m?.assetName===r);return{assetName:r,amount:V.add(i?.amount||0,a?.amount||0)}}),gT=o=>{let t=o.reduce((r,i)=>{let{multiAsset:a}=i;return a?.length?[...r,...a]:r},[]),e=[];return t.forEach(r=>{let{policyId:i,assets:a}=r,m=(0,Cr.findIndex)(e,{policyId:i});if(m!==-1){let{assets:c}=e[m];e[m]={policyId:i,assets:lT(a,c)}}else e=[...e,r]}),e},Ig=async({toAddr:o,utxoList:t,baseCoinId:e,sendAmountInt:r,contractAddress:i})=>{let{AdaWallet:a}=await hr(),m;return e===0&&t?.some(({multiAsset:c})=>!!c?.length)?m=gT(t):e!==0&&(m=Sg(i,r)),a.minAda(o,m)},Tg=async o=>{let{AdaWallet:t}=await hr();return t.minFee(o)},AT="999999999",CT="transfer",Hs=({toAddr:o,utxoList:t,fromAddr:e,sendAmount:r,baseCoinId:i,contractAddress:a,minTransferAmountInt:m})=>{let c={address:o,inputs:t,ttl:AT,type:CT,changeAddress:e};return i===0?c={...c,amount:r}:c={...c,amount:m,multiAsset:Sg(a,r)},c};var ST=({utxoList:o,toAddr:t,fromAddr:e,coinId:r,sendAmount:i,minTransferAmountInt:a},m)=>{let c=Gt(r),[d,A]=(0,hg.useState)("0");return ge(()=>{(async()=>{if(!o?.length)return;let l=Hs({toAddr:t,fromAddr:e,utxoList:o,contractAddress:c?.address,baseCoinId:c?.baseCoinId,sendAmount:i,minTransferAmountInt:a});try{let f=await Tg({data:l});m?.(f),A(f)}catch(f){console.log(f)}})()},[c,t,e,i,a,o]),d},xg=ST;n();s();var _g=u(x());n();s();Ne();ve();Po();J();n();s();var yg=u(bo());var IT=()=>{let{coinId:o}=(0,yg.useParams)(),t=_(),e=jo(),[r,i]=In(o);return{address:t,walletId:e,coin:r||{},coinId:Number(o),baseCoin:i||{},baseCoinId:r?.baseCoinId}},Sr=IT;var TT=()=>{let o=Ze(),{coin:t,coinId:e,walletId:r,address:i}=Sr(),a=t?.baseCoinId;return so(async(m,c,d)=>{let A=await Y().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),l=c,f=m,g=V.add(V.add(a===0?m:d,c),d);a===0&&V.gte(g,o)&&(f=o,l="0"),a!==0&&(l=V.add(c,V.add(d,d)));let C={coinId:e,address:i,fee:l,amount:f},{data:T}=await pt(Jo.getSpecialUtxoList,C,{headers:A});return T},[e,r,i,a,o])},Ks=TT;var hT=(o,t,e)=>{let[r,i]=(0,_g.useState)([]),a=Ks();return ge(()=>{(async()=>{let m=await a(o,t,e);i(m)})()},[o,t,e,a]),r},Fg=hT;n();s();J();var xT=o=>{let t=S(),{coin:{symbol:e,baseCoinId:r,decimals:i}}=t,a=V.div(o,10**i);return so(m=>r===0&&V.gt(a,0)&&V.lt(m,a)?{key:"wallet_extension_send_transfer_at_least",args:{amount:pe(a,{symbol:e})},type:to.COMMON_ERROR}:null,[a,e,r])},yT=o=>{let t=Jt(),{coin:e}=S(),r=j(),i=Ze(),{baseCoinId:a}=e;return so(m=>{let c=V.mul(m,10**e?.decimals),d,A;a===0?(A=V.add(V.add(c,r),o),d=V.add(c,r)):(A=V.add(V.add(r,o),o),d=V.add(r,o));let l=V.sub(i,d);return l!=="0"&&V.lt(l,o)?{key:"extension_wallet_cardano_text_token_atleast",args:{amount:pe(A,{decimals:t?.decimals})},type:to.COMMON_ERROR}:null},[a,r,i,t?.decimals,e?.decimals])},_T=o=>{let t=xT(o),e=yT(o);Q([t,e])},Eg=_T;function FT(){let o=(0,Js.useDispatch)(),t=j(),r=(0,Js.useSelector)(Gn)?.minTransferInt,i=W(),a=w(),m=Ze(),{coin:c,coinId:d,baseCoinId:A,address:l}=Sr(),f=Fg(i,t,r);return ge(()=>{(async()=>{let g=await Ig({contractAddress:c?.address,baseCoinId:A,utxoList:f,toAddr:a,sendAmountInt:i});o(jc({minTransferInt:g}))})()},[f,A,a,i,c?.address]),ge(()=>{A===0&&f?.some(({multiAsset:g})=>!!g?.length)&&o(Oo(V.sub(m,r)))},[f,m,r]),Eg(r),xg({coinId:d,toAddr:a,utxoList:f,fromAddr:l,minTransferAmountInt:r,sendAmount:i},g=>{o(H(g))}),Pg.default.createElement(q,null)}var bg=FT;n();s();var Ng=u(x());n();s();var kg=u(bo()),Hi=u(E());J();var ET=()=>{let o=(0,kg.useHistory)(),t=(0,Hi.useSelector)(Qo),r=(0,Hi.useSelector)(Gn)?.minTransferInt,{coin:i,coinId:a,address:m,walletId:c}=Sr(),d=An(c),A=W(),l=w(),f=j(),g=Ks(),C=Ct({fromAddr:m,walletId:c,localType:i?.localType});return so(async()=>{try{let I=await g(A,f,r),h=Hs({toAddr:l,fromAddr:m,utxoList:I,minTransferAmountInt:r,sendAmount:A,baseCoinId:i?.baseCoinId,contractAddress:i?.address}),y=await C({params:h}),P=await xo(i?.localType,y),N={coinId:a,txHash:P,signedTx:y,walletId:c,toAdr:l,serviceCharge:f,fromAdr:m,coinAmount:A,walletType:d?.serverWalletType},k=await ms(N);ro({tx_id:k}),o.push(t)}catch(I){be.error(I?.error_message||F("wallet_home_toast_network_error"))}},[i,A,l,r,f,d?.serverWalletType,g])},wg=ET;function PT(){let o=wg();return oo(),Ng.default.createElement($,{confirmButtonProps:{onSubmit:o}})}var Bg=PT;var bT={match:o=>o===ua,pages:{AmountPage:bg,ConfirmPage:Bg,AddressPage:z}},vg=bT;n();s();To();n();s();n();s();var Ys=u(x()),Lg=u(E());var kT=()=>{let o=(0,Lg.useDispatch)(),{coin:t}=S(),e=_(),r=(0,Ys.useCallback)(async()=>{try{let{data:a={}}=await We({coinId:t.coinId,address:e});a?.info?.normal?o(H(a.info.normal)):o(L(!0))}catch{o(L(!0))}finally{o(yo(!1))}},[o,e,t.coinId]),{run:i}=zo(r,{wait:500});(0,Ys.useEffect)(()=>{o(yo(!0)),i()},[e,t.coinId,i,o])},Dg=kT;var wT=({children:o})=>(Dg(),o),Mg=wT;n();s();var Rg=u(x());var NT=()=>(Q(),Rg.default.createElement(q,null)),Og=NT;n();s();var Gg=u(x());n();s();var Ug=u(E());ve();Ne();Po();var BT=()=>{let o=fo(),{coin:t}=S(),e=_(),r=ao(),i=j(),a=(0,Ug.useSelector)(qo),m=w();return uo(async()=>{let C=await Y().getRequestHeaders({walletId:a,needSign:!0,currency:"usd"}),T={coinId:t.coinId,address:e,amount:r,fee:i,accountId:a},{data:I=[]}=await pt(Jo.getSpecialUtxoList,T,{headers:C});return I},(C=[])=>({inputs:C.map((y={})=>({txId:y.txId,vOut:y.index,address:y.address,amount:y.amount})),outputs:[{address:m,amount:r}],address:e,fee:i}),async C=>await Y().signTransaction(C,e,t.localType),async C=>{let T=await xo(t.localType,C),I={signedTx:C,coinAmount:r,coinId:t.coinId,fromAdr:e,toAdr:m,serviceCharge:i,txHash:T};return await o(I)},C=>(ro({tx_id:C}),C))},Wg=BT;var vT=()=>{let o=Wg();return oo(),Gg.default.createElement($,{confirmButtonProps:{onSubmit:o}})},Vg=vT;var LT={match:o=>o===da,Container:Mg,pages:{AddressPage:z,AmountPage:Og,ConfirmPage:Vg}},Hg=LT;n();s();To();n();s();var Kg=u(x());var DT=({children:o})=>{let e=Vt().get("from");return Kg.default.createElement(Do,{fromAddress:e},o)},Jg=DT;n();s();var Xg=u(x());n();s();ve();Ne();var MT=()=>{let{baseCoin:o}=S();return so(async t=>{let e={address:t,coinId:o.coinId};try{let{data:i}=await pt(Jo.postCheckAddress,e);if(i?.res)return null}catch(i){console.log(i)}return await zt(t,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},Yg=()=>{let o=Tt(),t=MT();return[o,t]};n();s();var Zs=u(x()),Zg=u(E());co();var RT=()=>{let o=(0,Zg.useDispatch)(),{coin:t}=S(),e=_(),r=w(),i=Ht(),a=(0,Zs.useCallback)(async()=>{try{let c=await i({coinId:t.coinId,address:e,fromAddr:e,toAddr:r});o(au({name:"signInfo",value:c}));let d=[],{fee:A,depositMinAmount:l,minTransferTokenValue:f,depositGasFee:g,toAddressCheck:C}=c;t.baseCoinId===0?d.push(A):C===0?d.push(A,f,l,g):d.push(A,f);let T=d.reduce((I,h)=>no(I,h),0);o(H(T))}catch{o(L(!0))}finally{o(yo(!1))}},[o,i,t.coinId,t.baseCoinId,e,r]),{run:m}=zo(a,{wait:500});(0,Zs.useEffect)(()=>{o(yo(!0)),o(L(!1)),m()},[o,a,m])},qg=RT;n();s();var zg=u(x()),qs=u(E());co();To();var OT=()=>{let o=(0,qs.useDispatch)(),{coin:t,baseCoin:e}=S(),{baseCoinId:r}=t,i=_(),a=jo(),m=hn(i,a,na),d=Ge(e.coinId,a,{addressType:m})?.coinAmountInt,f=(0,qs.useSelector)(er)?.signInfo?.storageUsedAmount;(0,zg.useEffect)(()=>{if(!d||!f)return;let g=Pt(d,f);o(r===0?Oo(g):He(g))},[o,r,f,d])},$g=OT;var UT=()=>{qg(),$g();let o=Yg();return Xg.default.createElement(z,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},jg=UT;n();s();var rA=u(x());n();s();var Qg=u(E());co();var oA=()=>{let o=ht(),t=mc(),e=(0,Qg.useSelector)(er),{coin:r,baseCoin:i}=S(),a=j(),m=kn();return so(c=>{let d=no(e?.signInfo?.storageUsedAmount,a),A=Co(d,10**i.decimals);return(r.baseCoinId===0?Bo(o,c):Bo(t,"0"))?{key:"wallet_extension_transfer_tip_continue_using_address",args:{num:m(A,i,{useApproximate:!1,isFee:!0})},type:to.FEE_BALANCE_INSUFFICIENT}:null})},tA=()=>{let o=tc(),t=oA();Q({fns:[o,t],override:!0})},WT=()=>{let o=oA();return so(t=>{let e=o(t);return e?{...e,highlight:Ae.AMOUNT}:null})},eA=()=>{let o=rc(),t=WT();oo({fns:[o,t],override:!0})};var GT=()=>(tA(),rA.default.createElement(q,{totalAmountProps:{type:"amount"}})),nA=GT;n();s();var aA=u(x());n();s();var sA=u(E()),Ki=u(WA());var VT=()=>{let{coin:o}=S(),t=_(),e=w(),r=ao(),i=j(),a=jo(),m=(0,sA.useSelector)(er),c=Ht(),d=gs(),A=Ct({fromAddr:t,localType:o.localType,walletId:a}),l=Fm({coinId:o.coinId,coinAmount:r,fromAddr:t,toAddr:e,localType:o.localType,networkFee:i,walletId:a}),f=async()=>await c({coinId:o.coinId,address:t,fromAddr:t,toAddr:e}),g=h=>{let{blockHash:y,nonce:P}=h;return{from:t,blockHash:y,type:Ki.NearTypes.TransferNear,nonce:P,receiverId:e,amount:r}},C=h=>{let{blockHash:y,nonce:P}=h,{signInfo:N}=m,{toAddressCheck:k,minTransferTokenValue:v,depositGasFee:b,fee:R,depositMinAmount:O}=N;return{from:t,blockHash:y,type:Ki.NearTypes.TransferToken,nonce:P,receiverId:e,amount:r,contract:o.address,depositGas:b,transferGas:R,depositValue:O,minTransferTokenValue:v,shouldDeposit:Boolean(k===0)}};return uo(f,h=>o.baseCoinId===0?{params:g(h)}:{params:C(h)},A,l,d)},iA=VT;var HT=()=>{let o=iA();return eA(),aA.default.createElement($,{confirmButtonProps:{onSubmit:o}})},mA=HT;var KT={match:o=>o===fa,Container:Jg,pages:{AddressPage:jg,AmountPage:nA,ConfirmPage:mA}},cA=KT;n();s();To();n();s();var pA=u(x());n();s();var dA=u(E());n();s();n();s();var $s=u(x());n();s();var Ji={TRANSFER:"transfer",JETTON_TRANSFER:"jettonTransfer"};var zs=u(E());function JT({messageAttachedTons:o,invokeNotificationFee:t}){let{coin:e}=S(),r=w(),i=Ye(),a=W(),m=(0,zs.useSelector)(nt),c=(0,zs.useSelector)(nr),d=(0,zs.useSelector)(St),A=!!m,{fromJettonAccount:l,nonce:f}=m||{},g=(0,$s.useCallback)((C,T)=>{if(!A)return null;let I={to:r,seqno:f,decimal:e.decimals,amount:C,memo:c};return e.baseCoinId===0?I={...I,type:Ji.TRANSFER,sendMode:T}:I={...I,type:Ji.JETTON_TRANSFER,fromJettonAccount:l,messageAttachedTons:o,invokeNotificationFee:t,sendMode:Ve.PAY_GAS_SEPARATELY+Ve.IGNORE_ERRORS},I},[r,A,l,c,o,t]);return(0,$s.useMemo)(()=>d?g(i,Ve.CARRY_ALL_REMAINING_BALANCE):g(a,Ve.PAY_GAS_SEPARATELY+Ve.IGNORE_ERRORS),[d,i,a,g])}var Xs=JT;var Qs=u(x());Po();co();var uA=u(E());n();s();co();function js(o){return no(en(Co(+new Date,1e3),0),o)}function YT({messageAttachedTons:o,invokeNotificationFee:t}={}){let e=Xo(),{coin:r}=S(),i=_(),a=(0,uA.useSelector)(nt),{ttl:m}=a||{},c=Xs({messageAttachedTons:o,invokeNotificationFee:t}),[d,A]=(0,Qs.useState)(null);return(0,Qs.useEffect)(()=>{(async()=>{if(!c)return;c.expireAt=js(m);let{TonWallet:l}=await xa(),f=new l,g=await Y().getTransactionBodyForSimulate(c,i,e),{seqno:C}=c,T={address:i,body:g,ignore_chksig:!0};if(Be(C,"0")){let I=await Y().getPublicKey(i,r.localType,e),h={workChain:Ba,publicKey:I,walletVersion:Na},y=await f.getWalletInformation(h);T={...T,init_code:y.initCode,init_data:y.initData}}A(JSON.stringify(T))})()},[c,m]),d}var oi=YT;var ZT=()=>{let o=(0,dA.useDispatch)(),[t,{setTrue:e,setFalse:r}]=ho(!1),{coin:i}=S(),a=_(),m=w(),c=W(),d=oi(),{coinId:A,localType:l}=i,f=qt(),g=ur();return{onClick:async()=>{try{e();let T=await g({coinId:A,from:a,to:m,amount:c,inputData:d,localType:l}),{isDefraud:I,isSimilar:h,blackAddressWarning:y}=T;I?(o(st(Zo.DEFRAUD)),o(wt(y))):h?(o(st(Zo.SIMILAR)),o(wt(y))):o(st("")),f()}catch(T){console.log(T)}finally{r()}},loading:t}},fA=ZT;var qT=()=>{let{onClick:o,loading:t}=fA();return pA.default.createElement(z,{confirmButtonProps:{onClick:o,loading:t}})},lA=qT;n();s();var SA=u(x());n();s();var gA=u(x()),AA=u(E());co();function Yi(){let{coin:o,baseCoin:t}=S(),r=(0,AA.useSelector)(nt)?.minTonLimit,i=qe();return(0,gA.useCallback)(()=>{if(o.baseCoinId!==0&&r&&Ko(r,i)){let a=Co(r,10**t.decimals);return{key:"wallet_extension_ton_errormessage_insufficient_balance_gas2",args:{amount:a}}}return null},[r,i,o.coinId,t.decimals])}function zT(){let o=Yi();Q([o])}var CA=zT;function $T(){return CA(),SA.default.createElement(q,null)}var IA=$T;n();s();var Dt=u(x()),qr=u(E());n();s();var hA=u(x());var Zr=u(E());J();var TA=250;function XT({error:o,onChange:t}){let e=(0,Zr.useDispatch)(),r=(0,Zr.useSelector)(nt),i=(0,Zr.useSelector)(nr),m=r?.checkMemo?F("wallet_extension_import_desc_comment_required"):F("wallet_extension_import_desc_comment_optional");return hA.default.createElement(se,{value:i,placeholder:F("wallet_extension_ton_placeholder_comment_max_character2",{amount:TA}),dashed:!1,title:m,error:o,errorType:Et.TIP_TYPE.always,maxLength:TA,onChange:c=>{let d=c.target.value;e(mu(d)),t()}})}var xA=XT;n();s();Po();var ti=u(E());function jT(){let o=jo(),t=An(o),e=Ht(),{coin:r,baseCoin:i}=S(),a=_(),m=w(),c=(0,ti.useSelector)(ot),d=(0,ti.useSelector)(nt),A=(0,ti.useSelector)(Yc),l=W(),f=Xs({messageAttachedTons:d?.minTonLimit,invokeNotificationFee:A?.invokeNotificationFee}),g=fo();return uo(async()=>(await e({coinId:r.coinId,address:a,fromAddr:a,toAddr:m,value:"0"}))?.nonce,async P=>(f.seqno=P,f.expireAt=js(d?.ttl),(await Y().signTransaction(f,a,i.localType))?.boc),async P=>{let N=await xo(i.localType,P),k={signedTx:P,coinId:r.coinId,coinAmount:l,fromAdr:a,toAdr:f.to,serviceCharge:c,txHash:N,extJson:JSON.stringify({nonce:f.seqno}),txSource:Yo.NORMAL,accountId:o,walletType:t?.serverWalletType,memo:f.memo};return await g(k)},P=>(ro({tx_id:P}),P))}var yA=jT;n();s();var Zi=u(x());function QT(o){return(0,Zi.useCallback)(()=>o?{key:"wallet_extension_import_alert_fillin_comment",type:to.COMMON_ERROR}:null,[o])}function oh(){let o=Yi();return(0,Zi.useCallback)(()=>{let t=o();return t?{...t,highlight:to.FEE_BALANCE_INSUFFICIENT}:null},[o])}function th(o){let t=QT(o),e=oh();oo([t,e])}var _A=th;function eh(){let t=(0,qr.useSelector)(nt)?.checkMemo,e=(0,qr.useSelector)(nr),r=(0,qr.useSelector)(vm),[i,a]=(0,Dt.useState)(!1),m=yA(),c=async()=>t&&(!e||e.trim()==="")?(a(!0),{pause:!0}):(await m(),null);_A(i);let d=(0,qr.useSelector)(rr);return Dt.default.createElement($,{tipMessageProps:{hidden:r},slot:{bottom:A=>Dt.default.createElement(Dt.default.Fragment,null,Dt.default.createElement(go,null,Dt.default.createElement(Lo,{...A})),Dt.default.createElement(xA,{error:i,onChange:()=>{a(!1)}}))},confirmButtonProps:{onSubmit:c},blockAddressInfo:d})}var FA=eh;n();s();n();s();var EA=u(E()),PA=u(x());function rh(){let o=(0,EA.useDispatch)(),t=Ht(),{coin:e}=S(),r=_(),i=Ot(w(),{wait:500}),{coinId:a}=e;(0,PA.useEffect)(()=>{a&&r&&i&&(async()=>{try{let c=await t({coinId:a,address:r,fromAddr:r,toAddr:i,value:"0"});o(L(!c)),o(gi(c))}catch{o(L(!0)),o(gi(null))}})()},[i])}var bA=rh;n();s();var ei=u(x());var kA=u(E());co();function nh(){let o=(0,kA.useDispatch)(),t=_(),{coin:e,baseCoin:r}=S(),i=(0,ei.useRef)(null),a=Ot(oi(),{wait:500});gt(()=>{o(yo(!0))}),(0,ei.useEffect)(()=>{let m=()=>{o(L(!0)),o(Ai(null)),o(H("0"))},c=async()=>{try{let{code:A,data:l}=await gn({address:t,tokenAddress:e.address,chainId:r.chainId,coinId:r.coinId,value:"0",inputData:a});if(A!==0||!l||l?.queryGasLimitErrorUseDefault)m();else{o(L(!1)),o(Ai(l));let{invokeNotificationFee:f="0",gasLimit:g="0"}=l;o(H(e.baseCoinId===0?g:no(g,f)))}}catch{m()}finally{o(yo(!1))}};return(()=>{!a||(i.current=setInterval(c,7e3),c())})(),()=>{clearInterval(i.current)}},[a])}var wA=nh;function sh({children:o}){return bA(),wA(),o}var NA=sh;var ih={match:o=>o===pa,Container:NA,pages:{AddressPage:lA,AmountPage:IA,ConfirmPage:FA}},BA=ih;var ah=[Wl,Zu,Fd,Rd,pf,Gf,ap,Ip,kp,Rp,Xl,ag,Cg,vg,Hg,cA,BA],vA=ah;var mh=({coinId:o,protocolId:t,baseCoinId:e})=>{let r=vA.find(({match:d})=>d(e,o,t))||{},{Container:i=({children:d})=>at.default.createElement(at.default.Fragment,null,d)}=r,{AddressPage:a,AmountPage:m,ConfirmPage:c}=r.pages||{};return(0,LA.isEmpty)(r)?null:at.default.createElement(i,null,at.default.createElement(ue.Switch,null,at.default.createElement(ue.Route,{exact:!0,path:`${$o}/:coinId?${fn}`,component:a}),at.default.createElement(ue.Route,{exact:!0,path:`${$o}/:coinId?${pn}`,component:m}),at.default.createElement(ue.Route,{exact:!0,path:`${$o}/:coinId?${Oe}`,component:c})),at.default.createElement(hu,null))},ch=(0,at.memo)(mh),uh=()=>{let{coinId:o}=(0,ue.useParams)(),{coin:t,baseCoin:e}=Tn(o,!0);return at.default.createElement(ch,{coinId:t.coinId,baseCoinId:e.coinId,protocolId:t?.protocolId})},JX=uh;export{JX as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=SendPageContainer-U6PWKY2P.js.map
