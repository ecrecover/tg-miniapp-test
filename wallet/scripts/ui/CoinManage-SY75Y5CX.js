import{a as Te}from"./chunk-3GGXHJXV.js";import{a as Ie}from"./chunk-JCEFXSD3.js";import{a as z,b as D}from"./chunk-M3BU7MMF.js";import{a as be}from"./chunk-TABOGJGY.js";import{a as Ae,b as Se}from"./chunk-OIESCVLQ.js";import"./chunk-6GFPWI6N.js";import{a as we}from"./chunk-DFFU3ABO.js";import{a as xe}from"./chunk-V5E64KVH.js";import"./chunk-BBWIHX32.js";import{a as k}from"./chunk-NX5CQF2N.js";import{a as U}from"./chunk-ITKK42YQ.js";import"./chunk-SWNKITDG.js";import"./chunk-7G3IOU2S.js";import"./chunk-FSSAJWUE.js";import"./chunk-EYUJFPID.js";import"./chunk-QXSGLFJ4.js";import"./chunk-Z7MVEL6Q.js";import"./chunk-EQQ4TY26.js";import{c as he}from"./chunk-BSJ5U7SB.js";import"./chunk-RQ4URFJV.js";import"./chunk-A7QDOMG2.js";import"./chunk-PCN4TJH3.js";import"./chunk-UV4CBWDM.js";import{h as ve}from"./chunk-JZYFGUUR.js";import"./chunk-ITV6J4J2.js";import"./chunk-E4R5GU2A.js";import"./chunk-UXKXR6SF.js";import{c as ge,d as R}from"./chunk-MVELXHVO.js";import"./chunk-RSZRDNEQ.js";import"./chunk-LWWOGE47.js";import"./chunk-PNKC4I7V.js";import"./chunk-ZFY6KTVJ.js";import"./chunk-EFXUUWZM.js";import"./chunk-SXT2HSEA.js";import"./chunk-4QGZMEGU.js";import"./chunk-JGVOOQUI.js";import"./chunk-GKPU7ZYD.js";import"./chunk-IY5XPXLD.js";import"./chunk-N6T7YZKN.js";import{d as fe}from"./chunk-CE2I3GSK.js";import"./chunk-SPMBQ3GG.js";import{d as L}from"./chunk-W3BHXSAD.js";import"./chunk-KWEOQTFQ.js";import"./chunk-MYLTZKPJ.js";import"./chunk-RAK5MQVM.js";import{O as Le}from"./chunk-ILYGYWTN.js";import"./chunk-HOK5U34D.js";import"./chunk-XPB5VA3I.js";import"./chunk-XSNWL3NI.js";import"./chunk-IOMWHGY3.js";import"./chunk-EDYYUNM2.js";import"./chunk-FOI3TQUA.js";import"./chunk-6SKAHEOE.js";import"./chunk-QYGNKIL6.js";import"./chunk-WWF4GAYE.js";import"./chunk-YITM3H6Z.js";import"./chunk-IQFXZKFW.js";import"./chunk-7BFUGHAL.js";import"./chunk-JVN7YJ6W.js";import"./chunk-VSX7BSN7.js";import{a as ye}from"./chunk-V4V6C6NY.js";import{b as me}from"./chunk-ZQ5A3KPQ.js";import{a as Ce}from"./chunk-BGUY7SH3.js";import{w as b}from"./chunk-MJYAUOKI.js";import"./chunk-LI3NFLG3.js";import{a as q,c as C,r as le,x as _e}from"./chunk-FCCCJLF6.js";import{G as ue,H as P,a as ce}from"./chunk-4Z4GXCHB.js";import{n as ie,s as ae,w as se,y as eo}from"./chunk-FK3ETA6I.js";import"./chunk-QZDHFNHK.js";import"./chunk-6KPQELH2.js";import{a as de}from"./chunk-EJQOS3F4.js";import"./chunk-LHHZ5TAA.js";import"./chunk-PI6QLVMS.js";import"./chunk-QY4HIIR3.js";import"./chunk-XFWUEPSK.js";import"./chunk-MNNY2ODL.js";import"./chunk-VCAWL4NW.js";import{k as pe}from"./chunk-YZ3HCB4K.js";import"./chunk-EZ7VUFME.js";import"./chunk-C3FJ2D4V.js";import"./chunk-C5ZJZEPI.js";import"./chunk-LGHM3MOC.js";import"./chunk-2FULUWWG.js";import"./chunk-SLEUZTBQ.js";import"./chunk-4X6ZAX3L.js";import{c as A}from"./chunk-4QSQKIBZ.js";import{b as ne,c as Xe}from"./chunk-OXVQDEZW.js";import{j as re,m as Ve}from"./chunk-X3G52GGX.js";import"./chunk-WUKT6J7S.js";import"./chunk-FTJCOLFJ.js";import{$a as te,hb as Qe}from"./chunk-QG673PNL.js";import"./chunk-ZUFARSFM.js";import{p as $,x as oe}from"./chunk-6MTHEPGF.js";import{I as F,w as u}from"./chunk-ZQQ7HNWV.js";import"./chunk-Y62GSKHT.js";import"./chunk-2BXFMFMK.js";import{S as ee,c as Je}from"./chunk-ZOQTSYT4.js";import{a as w}from"./chunk-ADZWCU3Q.js";import"./chunk-AXQY4CD5.js";import"./chunk-ZPRPROG4.js";import"./chunk-FDI7TLXH.js";import"./chunk-L4HTIIR6.js";import"./chunk-733NI6T7.js";import"./chunk-5TB3ZTAO.js";import"./chunk-EYWGNJVY.js";import"./chunk-PIGJQYQ3.js";import"./chunk-TBVIGR5T.js";import"./chunk-FHQVMQUK.js";import"./chunk-XNS2NFYY.js";import{f as l,m as t,o as r}from"./chunk-REC7XVZY.js";t();r();var d=l(w()),Ke=l(de()),Ye=l(Je());F();t();r();var Ne=l(Te()),O=l(w());F();t();r();var S={"list-title":"_list-title_1q23d_1",listTitle:"_list-title_1q23d_1","empty-box":"_empty-box_1q23d_6",emptyBox:"_empty-box_1q23d_6","search-text":"_search-text_1q23d_10",searchText:"_search-text_1q23d_10","coin-box":"_coin-box_1q23d_13",coinBox:"_coin-box_1q23d_13","icon-add":"_icon-add_1q23d_13",iconAdd:"_icon-add_1q23d_13","icon-remove":"_icon-remove_1q23d_16",iconRemove:"_icon-remove_1q23d_16","icon-not-remove":"_icon-not-remove_1q23d_19",iconNotRemove:"_icon-not-remove_1q23d_19"};var ke=({renderCoin:e,list:n})=>O.default.createElement(A.Box,null,O.default.createElement(b.Text,{className:S.listTitle,size:b.SIZE.xs,type:b.TYPE.secondary},u("wallet_manage_crypto_list_added_crypto")),O.default.createElement(L,{itemKey:"coinId",renderEmpty:!1,renderItem:e,dataSource:n,component:Ne.default,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade-added"}));t();r();var W=l(w());F();Qe();var G=({coin:e,deleteAddedCoinAbled:n,onAction:o,isSearchStatus:a})=>{let s="",i="",c=Se(),f=e?.aggregation;e?.added?n?(s="okx-wallet-plugin-take",i="icon-remove"):(s="okx-wallet-plugin-take",i="icon-not-remove"):(s="okx-wallet-plugin-add",i="icon-add");let p=ae({coinId:e?.baseCoinId})&&!!e?.address,v=a&&!f&&!p&&!!e?.address,h=C(()=>c(e),[e?.coinId,c]);return W.default.createElement(L.Coin,{className:S["coin-box"],hovered:!1,name:e?.coinId===te?e?.chainName:e?.name,icon:e.image,symbol:e.symbol,address:v&&`${u("wallet_manage_crypto_label_contract_address")}: ${ie(e?.address)}`,tag:f?u("wallet_manage_crypto_labels_crypto_multichain"):e.tokenType},!h&&e?.added?W.default.createElement(Ae,{coinId:e?.coinId,from:ue}):W.default.createElement(me.IconButton,{className:S[i],disabled:e?.added&&!n,onClick:()=>{o(e)},icon:{icon:s}}))};t();r();var J=l(w());t();r();var Ee=l(w()),je=l(de());F();var Be=()=>{let e=(0,je.useHistory)();return Ee.default.createElement(oe.State,{className:S["empty-box"],title:u("wallet_search_text_search_no_results"),buttonText:u("wallet_manage_crypto_text_add_custom_crypto"),onButtonClick:()=>{e.push(P)}})};var Fe=({loadingMore:e,searchCoins:n,renderCoin:o,spinLoading:a})=>J.default.createElement(L,{itemKey:"coinId",dataSource:n,renderItem:o,loadingMore:e,renderEmpty:()=>a?null:J.default.createElement(Be,null)});t();r();var E=l(w()),Me=l(Te());F();var qe=(0,E.forwardRef)(({unAddedLoadingMore:e,renderCoin:n,unAddedLoading:o,unAddedList:a})=>a.length===0?null:E.default.createElement(A.Box,null,E.default.createElement(b.Text,{className:S.listTitle,size:b.SIZE.xs,type:b.TYPE.secondary},u("wallet_manage_crypto_subtitle_popular_crypto")),E.default.createElement(L,{itemKey:"coinId",renderEmpty:!1,renderItem:n,dataSource:a,component:!o&&Me.default,loadingMore:e,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade"})));t();r();t();r();var Q=l(w());function H(e,n){let o=(0,Q.useRef)(null),a=(0,Q.useRef)(Date.now());return q((...i)=>{o.current||(e(...i),a.current=Date.now(),o.current=setTimeout(()=>{o.current=null},n))})}t();r();var K=(e,n)=>{if(e.aggregation){let o=n(e.childrenCoin);return{...e,childrenCoin:o}}return e};var Pe=()=>{let e=U(),n=k();return C(()=>pe(e,n).map(s=>({...s,added:!0})),[e])},Re=()=>{let e=z();return H(n=>{let o=K(n,e);R(o)},500)};t();r();var Ue=l(eo());var ze=()=>{let{currentNetworkUniqueId:e}=(0,Ue.useSelector)(fe),n=he({netWorkId:e?String(e):void 0}),{data:o,loading:a,run:s}=be(),i=o?.supportNetworkList,c=a&&!o?.supportNetworkList?.length,f=!!i&&i.length>0,p="";if(e!==""){let h=n?.coinId;p=(i||[]).find(m=>m.coinId===h)?.name||""}let v=`${P}?network=${p}`;return{supportCustomCoin:f,customCryptoPath:v,customCoinLoading:c,reloadCustomNetworkData:s}};t();r();var N=l(w());var De=()=>{let e=U(),n=k(),[o,a]=(0,N.useState)(""),s=le(o,{wait:300}),i=(0,N.useCallback)(y=>{a(y.target.value)},[]),[c,f]=(0,N.useState)(!0);(0,N.useEffect)(()=>{f(!!o)},[o]);let{data:p,loadingMore:v,listRef:h}=D({symbolLike:s,aggregation:!0,chainIds:n?[Number(n)]:void 0},{reloadDeps:[s],enableEmptyAccountCoins:!0,beforeRequest:()=>{if(!s)return{list:[],pageNo:0,isNoMore:!0}},onFinally(){f(!1)}}),m=C(()=>new Set(e.map(y=>y.aggregation?y.symbol:y.coinId)),[e]),x=C(()=>(p?.list??[]).map(g=>(g.added=m.has(g.aggregation?g.symbol:g.coinId),g)).sort((g,T)=>T.added-g.added),[m,p?.list]);return{searchListRef:h,search:o,searchCoins:x,searchLoading:c,searchLoadingMore:v,onSearch:i}};t();r();t();r();Ve();Xe();function Oe(){let e=ve();return q(async n=>{try{let{code:o}=await re(ne.registerCustomCoinAddr,{coinAddrRegisterList:[{accountId:e,coinId:n}]},{needSign:!0});return o===0}catch{return!1}})}var We=()=>{let e=xe(),n=z(),o=Oe();return H(async a=>{let s=se(a),i;if(s){if(i=await Le(a),!i)return}else i=a;i=K(i,n),a.added?R(i):await o(i.coinId)&&(e(i),ge(i))},500)};t();r();var M=l(w());var He=(e=[],n)=>{let o=k(),a=we(),s=C(()=>new Set(e.map(I=>I.aggregation?I.symbol:I.coinId)),[e]),i=C(()=>Array.from(new Set(Ie(e).map(I=>I.coinId))),[e]),{data:c,loading:f,loadingMore:p,listRef:v,reload:h}=D({aggregation:!0,chainIds:o?[Number(o)]:void 0,excludeCoinIds:i},{enable:!a,reloadDeps:[o],enableEmptyAccountCoins:!0}),m=_e(s.size),x=s.size<m;(0,M.useEffect)(()=>{!n&&x&&h()},[x,s.size,n]);let y=C(()=>c?.list?.filter(B=>!s.has(B.aggregation?B.symbol:B.coinId))??[],[c?.list,e])??[],[g,T]=(0,M.useState)(!0);return(0,M.useEffect)(()=>{f||T(!1)},[f]),{unAddedList:y,unAddedListRef:v,unAddedLoading:g,unAddedLoadingMore:p}};t();r();var j={"wallet-coin__manage":"_wallet-coin__manage_javif_1",walletCoinManage:"_wallet-coin__manage_javif_1","wallet-coin__manage__search":"_wallet-coin__manage__search_javif_4",walletCoinManageSearch:"_wallet-coin__manage__search_javif_4","wallet-coin__manage__spin":"_wallet-coin__manage__spin_javif_8",walletCoinManageSpin:"_wallet-coin__manage__spin_javif_8","wallet-coin__manage__spin__hidden":"_wallet-coin__manage__spin__hidden_javif_11",walletCoinManageSpinHidden:"_wallet-coin__manage__spin__hidden_javif_11","wallet-coin__manage__spin__auto":"_wallet-coin__manage__spin__auto_javif_14",walletCoinManageSpinAuto:"_wallet-coin__manage__spin__auto_javif_14","wallet-coin__manage__spin__custom":"_wallet-coin__manage__spin__custom_javif_17",walletCoinManageSpinCustom:"_wallet-coin__manage__spin__custom_javif_17","wallet-coin__manage__tag__title":"_wallet-coin__manage__tag__title_javif_21",walletCoinManageTagTitle:"_wallet-coin__manage__tag__title_javif_21","fade-enter":"_fade-enter_javif_25",fadeEnter:"_fade-enter_javif_25","fade-added-enter":"_fade-added-enter_javif_26",fadeAddedEnter:"_fade-added-enter_javif_26","fade-enter-active":"_fade-enter-active_javif_30",fadeEnterActive:"_fade-enter-active_javif_30","fade-added-enter-active":"_fade-added-enter-active_javif_31",fadeAddedEnterActive:"_fade-added-enter-active_javif_31",fade:"_fade_javif_25","fade-added":"_fade-added_javif_26",fadeAdded:"_fade-added_javif_26","fade-leave-active":"_fade-leave-active_javif_41",fadeLeaveActive:"_fade-leave-active_javif_41","fade-added-leave-active":"_fade-added-leave-active_javif_42",fadeAddedLeaveActive:"_fade-added-leave-active_javif_42"};var oo=()=>{let e=(0,Ke.useHistory)(),{customCryptoPath:n,supportCustomCoin:o,customCoinLoading:a,reloadCustomNetworkData:s}=ze(),{searchListRef:i,search:c,searchCoins:f,onSearch:p,searchLoading:v,searchLoadingMore:h}=De(),m=!!c,x=Pe(),{unAddedList:y,unAddedListRef:g,unAddedLoading:T,unAddedLoadingMore:I}=He(x,m),B=Re(),V=x?.length>1,Ze=We();(0,d.useEffect)(()=>{s()},[]);let $e=Z=>d.default.createElement(G,{isSearchStatus:m,coin:Z,onAction:B,deleteAddedCoinAbled:V}),X=Z=>d.default.createElement(G,{isSearchStatus:m,coin:Z,deleteAddedCoinAbled:V,onAction:Ze}),Y=c?v:T,Ge=u("wallet_manage_crypto_placeholder_search_coin");return d.default.createElement(A.Container,{className:"wallet-coin__manage"},d.default.createElement(Ce,{offsetTop:0},d.default.createElement(ye,{sticky:!1,closeable:!1,onBack:()=>{e.push(ce)},title:u("wallet_manage_crypto_maintitle_manage_crypto")}),o&&d.default.createElement(A.Box,{className:j["wallet-coin__manage__search"]},d.default.createElement($.Search,{value:c,size:$.SIZE.md,placeholder:Ge,onChange:p}))),d.default.createElement(A.Spin,{ref:m?i:g,className:(0,Ye.default)(j["wallet-coin__manage__spin"],Y?j["wallet-coin__manage__spin__hidden"]:j["wallet-coin__manage__spin__auto"]),loading:Y,size:ee.SIZE.lg},!m&&!!o&&d.default.createElement(A.Spin,{loading:a&&!T},d.default.createElement(L.Cell,{className:j["wallet-coin__manage__spin__custom"],isLink:!0,to:n,title:u("wallet_manage_crypto_text_custom_crypto")})),m&&d.default.createElement(Fe,{itemKey:"coinId",searchCoins:f,renderCoin:X,spinLoading:Y,loadingMore:h}),!m&&d.default.createElement(ke,{list:x,renderCoin:$e}),!m&&d.default.createElement(qe,{unAddedList:y,unAddedLoading:T,unAddedLoadingMore:I,renderCoin:X})))},wr=d.default.memo(oo);export{wr as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=CoinManage-SY75Y5CX.js.map
