import"./chunk-ILWESRDE.js";import{a as lt}from"./chunk-R4C4FHGQ.js";import{a as ct}from"./chunk-QZ3JGCCS.js";import"./chunk-XXBOVGSY.js";import{a as K,b as V,d as W}from"./chunk-H7VNXVFH.js";import{a as at}from"./chunk-KPD5HBWY.js";import{a as z}from"./chunk-3QA2SYRR.js";import{a as ut}from"./chunk-WH33YWXJ.js";import"./chunk-TWZSLMIY.js";import"./chunk-C64P2PDF.js";import{a as Wt,f as Zt,g as Xt}from"./chunk-OZMVWMFO.js";import{b as zt,e as Kt,f as Vt,g as it}from"./chunk-KTO7CPX7.js";import"./chunk-KDP5Z4RF.js";import{a as st}from"./chunk-GVNVILUC.js";import{f as ot,n as nt}from"./chunk-DDO6HXRN.js";import"./chunk-CLWWTOKP.js";import{a as Rt}from"./chunk-J4TF3RT7.js";import{e as et}from"./chunk-6FOZGMAL.js";import{Qa as rt}from"./chunk-2MV3WEYP.js";import{N as Ht,O as Ut,U as Mt,aa as Yt,hb as tt,y as Ot}from"./chunk-HPXM6RSK.js";import"./chunk-IUIJ46C3.js";import{a as Gt}from"./chunk-NJ5CWPUY.js";import"./chunk-UMJMJOW4.js";import"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import"./chunk-O5JCC6KG.js";import"./chunk-MAIAJ7GD.js";import"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import"./chunk-AMVK42SC.js";import"./chunk-D6RIE45O.js";import{c as f}from"./chunk-JXCCIV3J.js";import"./chunk-AOA7NX2Y.js";import"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import"./chunk-SOHTSUTI.js";import{I as Y,w}from"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-E24EBHFY.js";import{M as Q,S as $,Y as T,c as Ft}from"./chunk-V4F2JFTP.js";import{a as E}from"./chunk-6DDC4Y2S.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-YUXYCITH.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{c as G,f as b,m as r,o}from"./chunk-EQYVU4XP.js";var bt=G((Er,gt)=>{r();o();var re=Ht(),oe=Kt(),ne=Vt(),se=zt(),ie=Yt(),ae=Ut(),ue=200;function le(t,e,s,n){var i=-1,a=oe,u=!0,c=t.length,d=[],y=e.length;if(!c)return d;s&&(e=se(e,ie(s))),n?(a=ne,u=!1):e.length>=ue&&(a=ae,u=!1,e=new re(e));t:for(;++i<c;){var p=t[i],I=s==null?p:s(p);if(p=n||p!==0?p:0,u&&I===I){for(var m=y;m--;)if(e[m]===I)continue t;d.push(p)}else a(e,I,n)||d.push(p)}return d}gt.exports=le});var Tt=G((Ar,wt)=>{r();o();var ce=bt(),me=Wt(),ht=it();function pe(t,e,s){var n=t.length;if(n<2)return n?ht(t[0]):[];for(var i=-1,a=Array(n);++i<n;)for(var u=t[i],c=-1;++c<n;)c!=i&&(a[i]=ce(a[i]||u,t[c],e,s));return ht(me(a,1),e,s)}wt.exports=pe});var Nt=G((Cr,kt)=>{r();o();var fe=Mt(),_e=Zt(),de=Tt(),ye=Xt(),Ie=_e(function(t){return de(fe(t,ye))});kt.exports=Ie});var Et=G((Fr,vt)=>{r();o();var xe=it();function ge(t){return t&&t.length?xe(t):[]}vt.exports=ge});r();o();var N=b(E());r();o();var C=b(E());var mt=b(Ft());r();o();r();o();var B={root:"_root_na3xe_1",icon:"_icon_na3xe_12",loading:"_loading_na3xe_16",finished:"_finished_na3xe_22",failed:"_failed_na3xe_25"};var pt=(t,e)=>()=>C.default.createElement(Q,{className:(0,mt.default)(t,B.icon,e)}),jt=pt("okds-success-circle",B.finished),Jt=pt("okx-wallet-plugin-warning-circle",B.failed),Qt=()=>C.default.createElement($,{loaderClassName:B.loading}),$t=()=>null,te={[0]:$t,[1]:Qt,[2]:jt,[3]:Jt},ft=({status:t})=>{let e=te[t];return C.default.createElement(f.Box,{className:B.root},C.default.createElement(e,null))};r();o();var dt=b(E());Y();r();o();var _t={root:"_root_mrqdw_1"};var yt=({status:t,success:e=0,failed:s=0,duplicated:n=0})=>{let a={[0]:null,[1]:{key:"wallet_extension_private_key_title_importing_private_key",params:{}},[2]:{key:s>0||n>0?"wallet_extension_private_key_title_num_imports_successful":"wallet_extension_private_key_title_import_successful",params:{num:e}},[3]:{key:"wallet_extension_private_key_title_import_failed",params:{}}}[t],u=a?w(a.key,a.params):"";return u?dt.default.createElement(f.Box,{className:_t.root},u):null};r();o();var D=b(E());Y();r();o();var q={root:"_root_zr8dm_1",item:"_item_zr8dm_8",retry:"_retry_zr8dm_15",divider:"_divider_zr8dm_24"};function ee({status:t,total:e=0,success:s=0,failed:n=0,duplicated:i=0}){let a={importing:{key:"wallet_extension_private_key_text_importing_num_entries",params:{num:s},retry:!1},success:{key:"wallet_extension_private_key_text_num_entries_imported",params:{num:s},retry:!1},duplicated:{key:"wallet_extension_private_key_duplicate_imports",params:{num:i},retry:!1},failed:{key:"wallet_extension_private_key_text_num_failed_entries",params:{num:n},retry:n>0}};return{items:{[0]:[],[1]:[a.importing],[2]:[s===e?a.success:void 0,i>0?a.duplicated:void 0,n>0?a.failed:void 0].filter(Boolean),[3]:[i>0?a.duplicated:void 0,n>0?a.failed:void 0].filter(Boolean)}[t]}}var It=({status:t,total:e,success:s,failed:n,duplicated:i,onRetry:a})=>{let{items:u=[]}=ee({status:t,total:e,success:s,failed:n,duplicated:i});return D.default.createElement(f.Box,{className:q.root},u.map((c,d)=>{let{key:y,params:p,retry:I}=c;return D.default.createElement(f.Box,{key:d,className:q.item},w(y,p),d===0&&u.length>1&&D.default.createElement(f.Box,{className:q.divider}),I&&D.default.createElement(f.Box,{onClick:a,className:q.retry},w("wallet_extension_private_key_btn_try_again")))}))};r();o();var L=b(E());Y();r();o();var H={root:"_root_1ir3w_1",actions:"_actions_1ir3w_10",tip:"_tip_1ir3w_15"};var xt=({status:t,onCancel:e,onComplete:s})=>{let n=t===1,i=t===0;return L.default.createElement(f.Box,{className:H.root},L.default.createElement(f.Box,{className:H.actions},n?L.default.createElement(T,{category:T.CATEGORY.outline,type:T.TYPE.primary,onClick:e,size:T.SIZE.xl,block:!0},w("wallet_extension_private_key_btn_stop_import")):!i&&L.default.createElement(T,{category:T.CATEGORY.fill,type:T.TYPE.highlight,size:T.SIZE.xl,onClick:s,block:!0},w("wallet_extension_private_key_btn_ok"))),n&&L.default.createElement(f.Box,{className:H.tip},w("wallet_extension_private_key_text_dont_close_page")))};r();o();var l=b(E()),M=b(Ot()),Bt=b(Gt()),Lt=b(Rt()),At=b(Nt()),Z=b(Et());function be(){let t=e=>({execute:e,cancel:()=>{},start:()=>{}});return new lt(t)}var U=t=>e=>e+t;function he(){let t=(0,M.useDispatch)(),{value:e}=K(),{value:s}=V(),{value:n}=W(),i=e.filter(g=>g.value).map(g=>g.value),[a,u]=(0,l.useState)(0),c=(0,l.useRef)(i),d=(0,l.useRef)([]),y=(0,l.useRef)([]),p=(0,l.useRef)(!1),I=(0,l.useRef)(),[m]=(0,l.useState)(i.length),[h,A]=(0,l.useState)(0),[v,P]=(0,l.useState)(0),[k,F]=(0,l.useState)(0),x=(0,l.useRef)(0),S=m-h,X=g=>g>0,Ct=(0,M.useSelector)(tt),j=(0,l.useRef)(Ct);(0,l.useEffect)(()=>{m<=0||(h===m&&u(2),(v===m||k===m||v+k===m)&&u(3))},[v,h,k,m]);let J=g=>{!X(g)||(u(1),I.current=be(),I.current.start(async qt=>{if(X(g)&&g>x.current){let O=c.current[x.current];try{p.current=!0,j.current?await t(ot([s],O,!1)):(await t(nt(n,[s],O,!1)),await t(st()),j.current=!0),await z(200),A(U(1)),d.current.push(O)}catch(Dt){Dt?.message===ut?F(U(1)):(P(U(1)),y.current.push(O))}finally{p.current=!1,x.current=U(1)(x.current),qt()}}else u(2)}))};return{start:()=>{h>0||(x.current=0,J(m))},cancel:async()=>{for(u(2),I.current?.cancel();p.current;)await z(100);let g=(0,At.default)(c.current,[...d.current,...y.current]);P((0,Z.default)(g).length+y.current.length),c.current=(0,Z.default)(g),d.current=[],y.current=[]},retry:()=>{S>0&&(x.current=0,P(0),F(0),J(S))},failed:v,success:h,total:m,duplicated:k,remain:S,status:a}}var Pt=()=>{let t=(0,Bt.useHistory)(),{value:e,setValue:s}=K(),{value:n,setValue:i}=V(),{setValue:a}=W();(!e.filter(x=>x.value).map(x=>x.value).length||!n)&&t.replace(rt);let{remainAccountAmount:c}=at(),d=(0,l.useRef)(!1),{start:y,cancel:p,retry:I,success:m,failed:h,total:A,duplicated:v,status:P}=he(),k=async()=>{s([{id:Date.now(),show:!1,value:"",error:!1}]),i(""),a(""),await(0,Lt.default)("")},F=async()=>{await k();let x=await globalThis.platform.getActiveTabs();await globalThis.platform.closeTab(x.map(({id:S})=>S))};return(0,l.useEffect)(()=>{!d.current&&c>0&&m+h<A&&(y(),d.current=!0)},[h,c,y,m,A]),et(async()=>{await k()}),{start:y,cancel:p,retry:I,complete:F,success:m,failed:h,total:A,duplicated:v,status:P}};r();o();var St={root:"_root_80chm_1"};var mo=()=>{let{status:t,success:e,failed:s,total:n,duplicated:i,cancel:a,retry:u,complete:c}=Pt();return N.default.createElement(ct,null,N.default.createElement(f.Box,{className:St.root},N.default.createElement(ft,{status:t}),N.default.createElement(yt,{status:t,success:e,failed:s,duplicated:i}),N.default.createElement(It,{status:t,total:n,success:e,failed:s,duplicated:i,onRetry:u}),N.default.createElement(xt,{status:t,onCancel:a,onComplete:c})))};export{mo as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=Confirm-4DDN32WV.js.map
