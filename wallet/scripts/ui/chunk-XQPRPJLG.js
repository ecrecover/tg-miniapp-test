import{e as Ne,f as we,h as Ee,j as ye,l as y}from"./chunk-JWIDJEDW.js";import{c as Q,e as X}from"./chunk-2PVY7Q74.js";import{a as E,b as r}from"./chunk-AQEDLRCW.js";import{b as Ie}from"./chunk-2CQDB45Y.js";import{a as be}from"./chunk-SWNKITDG.js";import{c as C}from"./chunk-OBDMMZ5P.js";import{b as Ge,f as ve}from"./chunk-ILYGYWTN.js";import{o as w}from"./chunk-FCCCJLF6.js";import{aa as T}from"./chunk-QZDHFNHK.js";import{Kb as Co,ib as K,lb as De,m as go}from"./chunk-QG673PNL.js";import{F as Te,n as _}from"./chunk-6MTHEPGF.js";import{I as N,w as e}from"./chunk-ZQQ7HNWV.js";import{Y as a}from"./chunk-ZOQTSYT4.js";import{a as g,g as _o}from"./chunk-ADZWCU3Q.js";import{f as u,m as t,o as n}from"./chunk-REC7XVZY.js";t();n();var c=u(g());var s=u(_o()),re=u(go());N();Co();t();n();t();n();var $=u(g());N();t();n();var k=u(g());var ko=({title:l,text:m,...p})=>k.default.createElement(_.Prompt,{className:"tx-check-dialog",hideCloseBtn:!0,alignBottom:!1,titleCenter:!1,infoType:null,renderContent:D=>k.default.createElement(D,null,k.default.createElement("div",{className:"tx-check-dialog__content"},k.default.createElement("div",{className:"tx-check-dialog__content-title"},l),k.default.createElement("div",{className:"tx-check-dialog__content-text"},m))),cancelBtnProps:{category:a.CATEGORY.outline,size:a.SIZE.lg},confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},...p}),O=k.default.memo(ko);var xo=({visible:l,onConfirm:m,onCancel:p})=>$.default.createElement(O,{visible:l,title:e("wallet_extension_transaction_popup_failed_transaction"),text:e("wallet_extension_transaction_popup_replace_failed_transaction"),confirmText:e("wallet_extension_transaction_popup_btn_replace"),cancelText:e("wallet_extension_transaction_popup_btn_skip"),onConfirm:m,onCancel:p}),ee=$.default.memo(xo);t();n();var oe=u(g());N();var Po=({visible:l,onConfirm:m,onCancel:p})=>oe.default.createElement(O,{visible:l,title:e("wallet_extension_transaction_popup_pending_transaction"),text:e("wallet_extension_transaction_popup_replace_pending_transaction"),confirmText:e("wallet_extension_transaction_popup_btn_replace"),cancelText:e("wallet_extension_transaction_popup_btn_continue_wait"),onConfirm:m,onCancel:p,hideCloseBtn:!0}),te=oe.default.memo(Po);t();n();var ae=u(g());N();t();n();var ne=u(g());var To=({...l})=>ne.default.createElement(_.Prompt,{alignBottom:!1,hideCloseBtn:!0,infoType:_.Prompt.INFO_TYPE.warn,confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},cancelBtnProps:{category:a.CATEGORY.outline,size:a.SIZE.lg},...l}),Fe=ne.default.memo(To);var Do=({visible:l,onConfirm:m,onCancel:p})=>ae.default.createElement(Fe,{visible:l,title:e("wallet_extension_popup_repeat_order"),confirmText:e("wallet_extension_popup_repeat_order_btn_continue"),cancelText:p?e("wallet_extension_popup_repeat_order_btn_viewhistory"):null,text:e("wallet_extension_popup_repeat_order_desc"),onConfirm:m,onCancel:p||(()=>{})}),ie=ae.default.memo(Do);t();n();var i=u(g());N();function Go({visible:l,onConfirm:m,onCancel:p,data:D}){let{userGasInfo:S,updateGasInfo:U,baseCoin:F}=D,{gasPrice:Y,maxFeePerGas:z}=U,{supportEip1559:B,gasLimit:x,gasPrice:L,maxFeePerGas:W}=S,A=B?W:L,Z=Q(A,x,F),P=X(A,x),R=B?z:Y,G=Q(R,x,F),H=X(R,x);return i.default.createElement(_.Prompt,{visible:l,className:"ethereum-check-gas-dialog",alignBottom:!1,titleCenter:!1,infoType:null,onConfirm:m,onClose:p,confirmText:e("extension_toast_btn_confirmgasfee"),confirmBtnProps:{type:a.TYPE.highlight,size:a.SIZE.lg},renderContent:v=>i.default.createElement(v,null,i.default.createElement("div",{className:"ethereum-check-gas-dialog__title"},e("extension_toast_title_transaction_replace")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__subtitle"},e("extension_toast_subtitle_gasincrease")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},e("extension_toast_title_current_transaction")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail"},Z),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},P)),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee-title"},e("extension_toast_title_gasprice")),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee"},i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__fee-detail--speed"},G),i.default.createElement("div",{className:"ethereum-check-gas-dialog__fee__gas-detail"},H)))})}var se=(0,i.memo)(Go);var ce=({children:l,btnProps:m,dataForCheck:p,whetherCheckRepeat:D,whetherCheckGas:S,onFailedCancel:U,onFailedConfirm:F,onPendingCancel:Y,onPendingConfirm:z,onRepeatCancel:B,onRepeatConfirm:x,onGasReplaceCancel:L,onGasReplaceConfirm:W,onClick:A,beforeClick:Z,afterClick:P})=>{let{fetchParams:R,userGasInfo:G,baseCoinAmountUse:H}=p,v=(0,c.useRef)([]),V=(0,c.useRef)(y.NEW),le=(0,c.useRef)({}),h=(0,c.useRef)({}),pe=(0,c.useRef)(!1),[Be,{setTrue:Ae,setFalse:me}]=w(!1),[Re,{setTrue:Oe,setFalse:fe}]=w(!1),[Se,{setTrue:Ue,setFalse:ue}]=w(!1),[Ye,{setTrue:ze,setFalse:de}]=w(!1),{coinId:j,from:he,to:Le,amount:We,gasPrice:Ze}=R,{baseCoin:ge}=be(j,!0),{coinAmountInt:He}=Ie(ge.coinId),Ve=async()=>{let o={checkTypes:[T.REPEAT,T.OVERWRITTEN],coinId:j,from:he,to:Le,amount:We,gasPrice:Ze},[{data:f=[]},{data:I}]=await Promise.all([ve(o),Ge({coinId:j,address:he})]);v.current=f;let J=I?.info?.gasPrice||{};return le.current=J,f},b=()=>v.current,je=()=>le.current,_e=()=>h.current,Me=()=>{let f=b().find(ho=>ho?.checkType===T.OVERWRITTEN)||{},{gasPrice:I,priorityFee:J}=f;return{originGasPrice:K(I,1.1),originPriorityFee:K(J,1.1)}},qe=()=>{V.current=y.ON_CHAIN},Je=()=>{V.current=y.NEW},Ke=o=>(h.current={...h.current,...o},h.current),Qe=()=>{pe.current=!0},Xe=()=>{Te.error({title:e("extension_toast_text_insufficient_balance")})},M=r(()=>{let o={nonce:0,updateGasInfo:null},f=v.current.find(I=>I?.checkType===T.OVERWRITTEN)||{};return V.current===y.NEW?o.nonce=f.newNonce:o.nonce=f.nonce,pe.current&&(h.current.gasPrice||h.current.maxFeePerGas)&&(o.updateGasInfo=h.current),o},A),$e=E(Ae,C),eo=E(Oe,C),oo=o=>we(o,$e,eo),to=E(Ke,ze,C),Ce=S?o=>Ee(o,{userGasInfo:G,serverGasInfo:je(),originTxGasInfo:Me()},to):re.identity,no=E(Xe,P,C),ao=o=>{let f=De(He,H);return ye(o,{userGasInfo:G,updateGasInfo:_e(),baseCoinAmountAvailable:f},no)},ke=D?o=>(Ne(o,T.REPEAT)&&(Ue(),C()),o):re.identity,xe=r(b,ke,M),q=r(qe,xe),Pe=r(Je,xe),io=r(U,me,Pe),so=r(F,me,b,Ce,q),ro=r(Y,fe,Pe),co=r(z,fe,b,Ce,q),lo=r(B,ue,P),po=r(x,ue,M),mo=r(L,de,P,C),fo=r(Qe,W,de,b,ao,q),uo=r(Z,Ve,oo,ke,M,P);return c.default.createElement(c.default.Fragment,null,c.default.createElement(a,{category:a.CATEGORY.fill,type:a.TYPE.highlight,size:a.SIZE.lg,block:!0,...m,onClick:uo},l),c.default.createElement(ee,{visible:Be,onCancel:io,onConfirm:so}),c.default.createElement(te,{visible:Re,onCancel:ro,onConfirm:co}),c.default.createElement(ie,{visible:Se,onCancel:lo,onConfirm:po}),c.default.createElement(se,{visible:Ye,onCancel:mo,onConfirm:fo,data:{baseCoin:ge,userGasInfo:G,updateGasInfo:_e()}}))},vo=ce;ce.propTypes={children:s.default.node,btnProps:s.default.object,dataForCheck:s.default.object,whetherCheckRepeat:s.default.bool,whetherCheckGas:s.default.bool,onFailedCancel:s.default.func,onFailedConfirm:s.default.func,onPendingCancel:s.default.func,onPendingConfirm:s.default.func,onRepeatCancel:s.default.func,onRepeatConfirm:s.default.func,onClick:s.default.func,beforeClick:s.default.func,afterClick:s.default.func};ce.defaultProps={children:null,btnProps:{},dataForCheck:{},whetherCheckRepeat:!1,whetherCheckGas:!0,onFailedCancel:()=>{},onFailedConfirm:()=>{},onPendingCancel:()=>{},onPendingConfirm:()=>{},onRepeatCancel:()=>{},onRepeatConfirm:()=>{},onClick:()=>{},beforeClick:()=>{},afterClick:()=>{}};t();n();export{vo as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-XQPRPJLG.js.map
