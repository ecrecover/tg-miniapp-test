import{a as Ct,b as Lt,d as Dt,e as Tt}from"./chunk-HBFCFKVJ.js";import{d as R}from"./chunk-TIUK4KJW.js";import{a as _t}from"./chunk-4FUS2OZX.js";import"./chunk-6Q5IIHLM.js";import"./chunk-5TSSPPXG.js";import"./chunk-AQJYTALL.js";import"./chunk-2DFF4YBY.js";import"./chunk-UXQ7H5EX.js";import"./chunk-GRLVWTBK.js";import"./chunk-XZRYRRSY.js";import"./chunk-TH64D43G.js";import"./chunk-JMAKZZHS.js";import"./chunk-2XG4UAIK.js";import"./chunk-2K7DYI6B.js";import"./chunk-UFQZJGJ2.js";import"./chunk-NZPUYPHL.js";import"./chunk-4QAFBCO2.js";import"./chunk-B553FNEQ.js";import"./chunk-6QKWDR6X.js";import"./chunk-S2GMXONU.js";import"./chunk-ZJHJYBLR.js";import"./chunk-5DVBM2WJ.js";import"./chunk-2PABOPC7.js";import"./chunk-I3U7CKFC.js";import"./chunk-ZPDRUAGN.js";import"./chunk-PUO23DIP.js";import"./chunk-O2J764NL.js";import"./chunk-CDLW656Z.js";import"./chunk-3K3KMGWB.js";import"./chunk-5EZVDCYS.js";import"./chunk-475E6NBR.js";import"./chunk-RC5IAFKK.js";import"./chunk-4VLUHY4K.js";import"./chunk-IHPHPUUG.js";import"./chunk-ZEWK7OGU.js";import"./chunk-QVA4WXOQ.js";import"./chunk-EX22SDGB.js";import"./chunk-4RARGC4D.js";import"./chunk-OQOFXHGC.js";import"./chunk-3QA2SYRR.js";import"./chunk-3SC55VQ2.js";import{e as v}from"./chunk-VTLNAOHG.js";import"./chunk-Y7YPG2EJ.js";import"./chunk-7R67VE77.js";import"./chunk-NHGZUGLZ.js";import"./chunk-G5LEAVCY.js";import"./chunk-ACHWU2H6.js";import"./chunk-ZPFBKNRM.js";import"./chunk-7DP5LYUM.js";import"./chunk-BVXKJJ4A.js";import"./chunk-TBBE7OKY.js";import"./chunk-7HJDVUH5.js";import{a as ct}from"./chunk-IUXU7DTR.js";import{b as B,d as dt,e as A,g as ht,h as V,i as $,j as gt,m as k,n as Z,o as J,p as xt,q as yt,r as Y,s as Q,t as j}from"./chunk-5XXRPHJM.js";import"./chunk-YHZPBXHC.js";import{a as pt}from"./chunk-ISL2MCWJ.js";import"./chunk-6B2YB6M3.js";import"./chunk-OUTTG7YQ.js";import"./chunk-7PVSIZ6H.js";import"./chunk-5NXPDYL5.js";import"./chunk-DY54SY5O.js";import"./chunk-VQBK6IHT.js";import"./chunk-CTT7GD4C.js";import"./chunk-LQAOHG2H.js";import"./chunk-WNQ6F6VV.js";import"./chunk-LEADLFDQ.js";import"./chunk-DGK7TBBE.js";import"./chunk-6Y7ULJF6.js";import"./chunk-3YH3AGVS.js";import"./chunk-3LB7TUPB.js";import"./chunk-TK6JYPIW.js";import"./chunk-OS6E6KVM.js";import"./chunk-GZRBUDXF.js";import"./chunk-WY46TT4P.js";import"./chunk-MTMUCMTY.js";import"./chunk-S6N4IJX7.js";import"./chunk-ZD4EJWX6.js";import"./chunk-WGCZSWYA.js";import"./chunk-IINHHLHP.js";import"./chunk-DY2YURLY.js";import"./chunk-KXZSXP3G.js";import"./chunk-6HXVFU7V.js";import"./chunk-D5FMQLJG.js";import"./chunk-3I7UBQEQ.js";import"./chunk-DXRBY5MU.js";import"./chunk-6FR2UIE7.js";import"./chunk-5GMHHIH5.js";import{D as ut}from"./chunk-7KCWBFQ2.js";import"./chunk-QLUP7GYN.js";import"./chunk-7Y44NCE5.js";import"./chunk-BKPOG6ZD.js";import"./chunk-OZMVWMFO.js";import"./chunk-KTO7CPX7.js";import"./chunk-P3XTPXPO.js";import"./chunk-S6TPD26J.js";import"./chunk-4IY6P5HR.js";import"./chunk-FQWGOLDH.js";import"./chunk-QEPBNPHF.js";import"./chunk-3JLS3TGD.js";import"./chunk-KDP5Z4RF.js";import"./chunk-W234FNSM.js";import"./chunk-DDO6HXRN.js";import"./chunk-CLWWTOKP.js";import{a as ft}from"./chunk-KZ2PCELG.js";import"./chunk-C7ZG4INB.js";import"./chunk-J5ANWCEO.js";import{f as it,w as S}from"./chunk-VMO2INN3.js";import"./chunk-J4TF3RT7.js";import{p as nt,q as at,v as lt}from"./chunk-6FOZGMAL.js";import"./chunk-2MV3WEYP.js";import{y as F}from"./chunk-HPXM6RSK.js";import{a as E}from"./chunk-IUIJ46C3.js";import"./chunk-KZ3ZU675.js";import{a as Yt}from"./chunk-NJ5CWPUY.js";import"./chunk-UMJMJOW4.js";import{g as mt,l as Kt}from"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import"./chunk-O5JCC6KG.js";import"./chunk-MAIAJ7GD.js";import"./chunk-4PGNX6E2.js";import"./chunk-DBHB6SUD.js";import"./chunk-6UYK5TIR.js";import"./chunk-I56VJWE4.js";import"./chunk-PS3S6BG3.js";import"./chunk-RT4Y2U5N.js";import"./chunk-2VHH444P.js";import"./chunk-RIMU4JTV.js";import"./chunk-MGLVPWSV.js";import"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import"./chunk-AMVK42SC.js";import"./chunk-D6RIE45O.js";import"./chunk-XCAARJ7Q.js";import{c as g}from"./chunk-JXCCIV3J.js";import"./chunk-AOA7NX2Y.js";import"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import{A as U,n as ot,v as rt,z as st}from"./chunk-SOHTSUTI.js";import{I as w,n as tt,w as _}from"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-E24EBHFY.js";import{M as et,c as $t}from"./chunk-V4F2JFTP.js";import{a as y}from"./chunk-6DDC4Y2S.js";import"./chunk-TEY24VZN.js";import"./chunk-RKHQOOTU.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-F4JTGWJH.js";import"./chunk-YUXYCITH.js";import"./chunk-RMV3AS5X.js";import"./chunk-SF2LTPAC.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{f as l,m as r,o as s}from"./chunk-EQYVU4XP.js";r();s();var m=l(y()),q=l(F()),Mt=l(Yt());w();r();s();var K=l(y()),St=l(F());Kt();var Gt=()=>{let e=(0,St.useDispatch)();return(0,K.useEffect)(()=>()=>{e(mt()),e(xt()),e(Y())},[]),null},It=(0,K.memo)(Gt);r();s();var p=l(y()),N=l(F());w();r();s();var X={root:"_root_1jnow_1",left:"_left_1jnow_10"};r();s();var b=l(y());w();r();s();var G={root:"_root_tcl1w_1",filter:"_filter_tcl1w_13"};r();s();var C=l(y());var Nt=l($t());w();var Wt={tooltip:"wallet_extension_history_tooltip_autoblocked_risky"},wt="hasReadTxHistoryFilterEntryTooltip",qt=()=>{try{return localStorage.getItem(wt)??!1}catch{return!0}},zt=()=>{try{localStorage.setItem(wt,!0)}catch(e){console.error(e)}};function Ut({onClick:e}){let t=(0,C.useRef)();(0,C.useEffect)(()=>{qt()||(t.current.setVisible(!0),zt())},[]);let o=n=>{t.current=n},i=(0,C.useRef)();return nt(()=>{t.current.setVisible(!1)},i),C.default.createElement(U,{popupRef:o,placement:U.DIRECTION.bottomRight,title:_(Wt.tooltip)},C.default.createElement(g.Box,{ref:i},C.default.createElement(et,{onClick:e,className:(0,Nt.default)("okds-filter",G.filter)})))}var Ft=Ut;r();s();var I=l(y());w();r();s();var H={root:"_root_skuda_1",textBox:"_textBox_skuda_7",text:"_text_skuda_7"};r();s();var W=l(y());function Zt({onChange:e,reject:t}){let[o,i]=(0,W.useState)(t);return(0,W.useEffect)(()=>{i(t)},[t]),{currentReject:o,onChangeReject:x=>c=>{let a=t,d={...a,[x]:c};i(d),dt(x,c).then(h=>{h?(i(d),e?.(d)):i(a)}).catch(()=>{i(a)})}}}var Et=Zt;var Bt={hideValuelessNftTittle:"wallet_extension_history_toggle_block_risky",hideValuelessNftSubtitle:"wallet_extension_history_toggle_risky_invalid_only"},Jt=e=>{let{currentReject:t,onChangeReject:o}=Et(e);return I.default.createElement(g.Box,{className:H.root},I.default.createElement(g.Box,{className:H.textBox},I.default.createElement(S.Text,{warp:!0,strong:!0,size:S.SIZE.md,className:H.text},_(Bt.hideValuelessNftTittle)),I.default.createElement(S.Text,{warp:!0,size:S.SIZE.xs,className:H.text,type:S.TYPE.secondary},_(Bt.hideValuelessNftSubtitle))),I.default.createElement(st,{onChange:o(B.hideValuelessNft),checked:t?.[B.hideValuelessNft]}))},Vt=Jt;r();s();var O=l(y()),kt=l(F());function Qt(){let e=(0,kt.useDispatch)(),[t,o]=(0,O.useState)({[B.hideValuelessNft]:!1}),[i,n]=(0,O.useState)(!1),x=()=>A().then(h=>{o(h)}).catch(()=>{});(0,O.useEffect)(()=>{x()},[]);let c=()=>{n(!0)},a=()=>{n(!1)};return{reject:t,onChangeShowValueLess:h=>{o(h),e(j({})),setTimeout(()=>{a()},200)},openDialog:c,closeDialog:a,showRejectDialog:i}}var jt=Qt;function Xt(){let{reject:e,onChangeShowValueLess:t,openDialog:o,closeDialog:i,showRejectDialog:n}=jt();return b.default.createElement(g.Box,{className:G.root},b.default.createElement(Ft,{onClick:o}),b.default.createElement(ot,{title:_("wallet_extension_history_title_filter"),visible:n,onClose:i,onCancel:i,alignBottom:!0,noMargin:!0},b.default.createElement(Vt,{onChange:t,reject:e})))}var Rt=Xt;r();s();var D="2009-01-12";var Ht=e=>{if(typeof e=="object"&&e instanceof Date){let t=e.getFullYear(),o=e.getMonth()+1,i=e.getDate();return o<10&&(o=`0${o}`),i<10&&(i=`0${i}`),`${t}-${o}-${i}`}return e},te=(e,t)=>new Date(e)<=new Date(t);function ee(){let e=(0,N.useDispatch)(),t=(0,N.useSelector)(V);return p.default.createElement(_t,{align:rt.DIRECTION.left,value:t.mainCoinId,searchable:!0,onChange:o=>{e(j({mainCoinId:o}))}})}function oe(){let e=(0,N.useDispatch)(),t=(0,N.useSelector)(V),[o,i]=p.default.useState(!1),n=p.default.useRef(o),c=v(t.mainCoinId)?.supportFullHistory||t.mainCoinId==="";return(0,p.useEffect)(()=>{c&&e(k({dates:[D,t.dates[1]]}))},[]),(0,p.useEffect)(()=>{let a=Ht(t.dates[0]),d=Ht(tt.subtract(3,"M"));!c&&n.current&&te(a,d)&&e(k({dates:[pt()?.stringDates?.[0],t.dates[1]]})),c&&!n.current&&a===d&&e(k({dates:[D,t.dates[1]]})),c?(i(D),n.current=D):(i(""),n.current=!1)},[c,t.mainCoinId]),p.default.createElement(R.DateRangeSelection,{dates:t.dates,mainCoinId:t.mainCoinId,customMinDate:o,setDate:a=>{e(k({dates:a}))},onChange:a=>{e(j({dates:a}))}})}function re(){return p.default.createElement(g.Box,{className:X.root},p.default.createElement(g.Box,{className:X.left},p.default.createElement(ee,null),p.default.createElement(oe,null)),p.default.createElement(Rt,null))}var Ot=re;r();s();var f=l(y()),L=l(F());var se=()=>{let e=(0,L.useDispatch)(),[t,o]=(0,f.useState)(),i=(0,L.useSelector)(V),n=(0,L.useSelector)(ht),x=(0,L.useSelector)(it),c=(0,L.useSelector)(gt),a=(0,L.useSelector)($),[d,h]=(0,f.useState)(null),{run:T}=at(()=>{e(Q({...a}))},{wait:200}),M=(0,f.useCallback)(()=>{e(Q({...a},{scrollLoad:!0}))},[i]);Tt({scrollContainer:d},T),lt(M,{target:d,threshold:150});let[z,P]=(0,f.useMemo)(()=>Ct(n,x),[n,x]);return f.default.createElement(f.default.Fragment,null,f.default.createElement(Dt.HistoryList,{completedList:P,pendingList:z,isLoading:c,onClick:o,onRepeat:T,onContainer:h}),f.default.createElement(Lt,{params:t,onRefresh:T,onClose:()=>{o(null)}}))},bt=(0,f.memo)(se);r();s();var ie=()=>{let e=(0,Mt.useHistory)(),t=(0,q.useDispatch)(),o=(0,q.useSelector)($),[i,n]=(0,m.useState)(!0),c=v(o.mainCoinId)?.supportFullHistory||o.mainCoinId==="";return(0,m.useEffect)(()=>{let d=[(async()=>{let h=await A()??{};return await ut({...o,startDate:c?new Date(`${D} 00:00:00`).getTime():o.startDate,hideValuelessNft:h?.hideValuelessNft??!0,status:[E.PENDING,E.CONFIRMING,E.ERROR,E.SUCCESS]})})()];Promise.all(d).then(([h])=>{let T=(P,Pt)=>{let vt=P.length,At=Pt?P[vt-1]?.rowId:"";t(yt(At)),t(J(!1))},M=h.content||[],z=h.hasViewMore;t(Z(M)),T(M,z)}).catch(()=>{t(Z([])),t(J(!1))}).finally(()=>{n(!1)})},[]),m.default.createElement(R.PageContainer,{className:"tx-history__container"},m.default.createElement(ft,{sticky:!1,className:"tx-history__navigator",title:_("wallet_extension_header_text_history"),onBack:()=>{e.goBack(),t(Y())},closeable:!1,bordered:!1}),i?m.default.createElement(ct,null):m.default.createElement(m.default.Fragment,null,m.default.createElement(R.FilterContainer,null,m.default.createElement(Ot,null)),m.default.createElement(bt,null)),m.default.createElement(It,null))},ir=(0,m.memo)(ie);export{ir as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=WalletHistory-5EQ2H26O.js.map
