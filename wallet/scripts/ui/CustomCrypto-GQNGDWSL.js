import{a as Fe}from"./chunk-TABOGJGY.js";import{a as ke}from"./chunk-V5E64KVH.js";import"./chunk-BBWIHX32.js";import{a as Ee}from"./chunk-ITKK42YQ.js";import"./chunk-7G3IOU2S.js";import"./chunk-FSSAJWUE.js";import"./chunk-EYUJFPID.js";import"./chunk-QXSGLFJ4.js";import"./chunk-RQ4URFJV.js";import"./chunk-A7QDOMG2.js";import"./chunk-PCN4TJH3.js";import"./chunk-UV4CBWDM.js";import"./chunk-JZYFGUUR.js";import{a as Y}from"./chunk-55MBPFME.js";import"./chunk-ITV6J4J2.js";import"./chunk-E4R5GU2A.js";import"./chunk-UXKXR6SF.js";import{a as ve,b as ee}from"./chunk-MVELXHVO.js";import"./chunk-RSZRDNEQ.js";import"./chunk-LWWOGE47.js";import"./chunk-PNKC4I7V.js";import"./chunk-ZFY6KTVJ.js";import"./chunk-EFXUUWZM.js";import"./chunk-SXT2HSEA.js";import"./chunk-4QGZMEGU.js";import"./chunk-JGVOOQUI.js";import"./chunk-GKPU7ZYD.js";import"./chunk-IY5XPXLD.js";import"./chunk-N6T7YZKN.js";import"./chunk-CE2I3GSK.js";import"./chunk-SPMBQ3GG.js";import"./chunk-RAK5MQVM.js";import"./chunk-HOK5U34D.js";import"./chunk-XPB5VA3I.js";import"./chunk-XSNWL3NI.js";import"./chunk-IOMWHGY3.js";import"./chunk-EDYYUNM2.js";import"./chunk-FOI3TQUA.js";import"./chunk-QYGNKIL6.js";import"./chunk-WWF4GAYE.js";import"./chunk-YITM3H6Z.js";import"./chunk-IQFXZKFW.js";import"./chunk-7BFUGHAL.js";import"./chunk-JVN7YJ6W.js";import"./chunk-VSX7BSN7.js";import{a as Te}from"./chunk-V4V6C6NY.js";import"./chunk-ZQ5A3KPQ.js";import{a as Se}from"./chunk-BGUY7SH3.js";import"./chunk-MJYAUOKI.js";import"./chunk-LI3NFLG3.js";import{o as ge,q as Z}from"./chunk-FCCCJLF6.js";import{G as be,a as Ie,k as xe,l as we}from"./chunk-4Z4GXCHB.js";import{s as N}from"./chunk-FK3ETA6I.js";import"./chunk-QZDHFNHK.js";import"./chunk-6KPQELH2.js";import{a as X}from"./chunk-EJQOS3F4.js";import"./chunk-LHHZ5TAA.js";import"./chunk-PI6QLVMS.js";import"./chunk-QY4HIIR3.js";import"./chunk-XFWUEPSK.js";import"./chunk-MNNY2ODL.js";import"./chunk-VCAWL4NW.js";import"./chunk-C3FJ2D4V.js";import"./chunk-C5ZJZEPI.js";import"./chunk-LGHM3MOC.js";import"./chunk-2FULUWWG.js";import"./chunk-SLEUZTBQ.js";import"./chunk-4X6ZAX3L.js";import{c as ye}from"./chunk-4QSQKIBZ.js";import"./chunk-OXVQDEZW.js";import"./chunk-X3G52GGX.js";import"./chunk-WUKT6J7S.js";import"./chunk-FTJCOLFJ.js";import{aa as de,ab as Ce,ca as pe,db as J,hb as he,ma as F,oa as _e,q as ue,ra as fe,za as W}from"./chunk-QG673PNL.js";import"./chunk-ZUFARSFM.js";import{G as H,p as v,v as V}from"./chunk-6MTHEPGF.js";import{I as P,w as n}from"./chunk-ZQQ7HNWV.js";import"./chunk-Y62GSKHT.js";import"./chunk-2BXFMFMK.js";import{M as le,S as me,Y as B,c as Ye}from"./chunk-ZOQTSYT4.js";import{a as k}from"./chunk-ADZWCU3Q.js";import"./chunk-AXQY4CD5.js";import"./chunk-ZPRPROG4.js";import"./chunk-FDI7TLXH.js";import"./chunk-L4HTIIR6.js";import"./chunk-733NI6T7.js";import"./chunk-5TB3ZTAO.js";import"./chunk-EYWGNJVY.js";import"./chunk-PIGJQYQ3.js";import"./chunk-TBVIGR5T.js";import"./chunk-FHQVMQUK.js";import"./chunk-XNS2NFYY.js";import{f as y,m as i,o as a}from"./chunk-REC7XVZY.js";i();a();var s=y(k()),De=y(X());P();i();a();var A=y(k()),j=y(X());P();var Ne=y(Ye());var je=(e,t)=>{let o=e==="protocol"?we:xe;if(t){let r=new URLSearchParams(t).toString();return`${o}?${r}`}return o},Qe=({selectedInfo:e,category:t})=>{let o=(0,j.useHistory)(),r=(0,j.useLocation)(),c=new URLSearchParams(r.search);return A.default.createElement("div",{className:"chain-select",onClick:()=>{let u={...Object.fromEntries(c.entries()),pageType:"customCrypto"};o.push(je(t,u))}},A.default.createElement("div",{className:"chain-select-title"},t==="protocol"?n("extension_defi_info_title_protocol"):n("wallet_custom_crypto_subtitle_select_network")),A.default.createElement("div",{className:"chain-select-box"},t==="protocol"?null:A.default.createElement("img",{className:"chain-select-icon",src:e?.imageUrl||e?.logo,alt:"chain"}),A.default.createElement("div",{className:"chain-select-name"},e?.name),A.default.createElement(le,{className:(0,Ne.default)("okds-arrow-chevron-right-centered-md","chain-select-arrow")})))},Q=Qe;i();a();var te=y(k());var $e=({currentAddress:e,addressInputTitle:t,errorText:o,placeHolderText:r,addressIsInvalid:c,updateCustomCoin:u})=>te.default.createElement("div",{className:"contract-address-box"},te.default.createElement(v.TextArea,{autoResize:!0,value:e,title:t,size:v.SIZE.xl,error:c&&o,errorType:v.TIP_TYPE.always,placeholder:r,onChange:l=>{u(l.target.value)}})),Ae=$e;i();a();var S=y(k());P();W();var Ge=({customCoin:e})=>{let t=(o,r)=>e.localType===ue?null:S.default.createElement("div",{className:"crypto-base-info"},S.default.createElement("div",{className:"crypto-base-info-title"},o),S.default.createElement("input",{disabled:!0,className:"crypto-base-info-box",value:r.toString()}));return S.default.createElement(S.default.Fragment,null,e?.symbol&&S.default.createElement(S.default.Fragment,null,t(n("wallet_manage_crypto_subtitle_custom_crpto_symbol"),e.symbol),t(n("wallet_manage_crypto_custom_coin_subtitle_decimals"),e.decimals)))},Oe=Ge;i();a();he();W();var oe={[F]:{title:"wallet_extension_create_input_title_contract_token_symbol",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[Ce]:{title:"extension_wallet_customcoin_text_currency_symbol",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[pe]:{title:"extension_wallet_customcoin_text_currency_symbol",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[_e]:{title:"extension_wallet_cardano_text_fingerprint",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[fe]:{title:"wallet_extension_import_title_jetton_master",error:"developer_mode_manage_errortip_request_failed",placeholder:"wallet_extension_import_input_jetton_master"},default:{title:"wallet_transaction_history_subtitle_contract_address",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"}};i();a();var M=y(k());P();W();i();a();var O=y(k());P();var Ke=({isFacet:e,onToggle:t})=>{let o=[{value:"ERC20",label:"ERC20"},{value:"Facet",label:"Facet"}],[r,c]=(0,O.useState)(e?"Facet":"ERC20"),u=(0,O.useCallback)((l={value:"ERC20"})=>{c(l.value),t(l.value==="Facet")},[]);return O.default.createElement("div",{className:"chain-select-isfacet"},O.default.createElement(V,{title:n("extension_defi_info_title_protocol"),value:r,options:o,onChange:u,size:V.SIZE.lg,searchable:!1,dropMode:!0}))},Me=Ke;var Ve=({selectedNetwork:e,account:t,accountIsInvalid:o,accountErrorMessage:r,setAccount:c,updateCustomCoin:u,accountRef:l,setProtocol:x,protocol:_,protocolList:f,isFacet:d,setIsFacet:C})=>{let h=Y(),p=Number(h.get("protocolId"));return(0,M.useEffect)(()=>{let m=null;if(!N(e)){x("");return}if(p&&f?.length&&(m=f.find(w=>w.protocolId===p)),!m&&f.length>0&&(m=f[0]),m){let w={...m,name:m.protocolName};x(w)}},[f,e]),{renderCustomForm:()=>e?.coinId===F?M.default.createElement("div",{className:"contract-address-box"},M.default.createElement(v.TextArea,{autoResize:!0,value:t,title:n("wallet_extension_create_input_title_contract_account_name"),size:v.SIZE.xl,error:o&&r,errorType:v.TIP_TYPE.always,placeholder:n("wallet_extension_create_input_title_contract_token_symbol"),onChange:m=>{c(m.target.value),l.current=m.target.value,u()}})):e?.coinId===de?M.default.createElement(Me,{isFacet:d,onToggle:m=>{C(m),u()}}):N(e)&&_?M.default.createElement(Q,{selectedInfo:_,category:"protocol"}):null}},Pe=Ve;i();a();var T=y(k());W();var Je=(e,t,o,r,c,u)=>{let[l,x]=(0,T.useState)({}),[_,f]=(0,T.useState)(!1),[d,C]=(0,T.useState)(""),[h,p]=(0,T.useState)(!0),[D,m]=(0,T.useState)(""),[w,E]=(0,T.useState)(!1),[U,L]=(0,T.useState)(!1),R=g=>`facet_${g}`,{run:$}=Z(async({addr:g,accountName:q,protocolId:G})=>{L(!1);let b;try{b=await ve({contractAddress:o?R(g):g,chainInfo:e,account:q,isFacet:o,...N(e)?{protocolId:G}:{}})}catch(K){b={},K?.data?.originalError?.data?.code==="ERR_NETWORK"&&L(!0)}if(g===t){if(x(b),e.coinId===F&&!b?.accountValid){f(!0),C(b.msg),p(!0);return}else if(!D&&e?.coinId===F){E(!1),p(!0);return}f(!1),C(""),g&&b?.symbol?(E(!1),p(!1)):g?(E(!0),p(!0)):(E(!1),p(!0))}},{wait:500});return{customCoin:l,accountIsInvalid:_,accountErrorMessage:d,stateOnLock:h,account:D,addressIsInvalid:w,setAccount:m,updateCustomCoin:()=>{x({}),p(!0),$({addr:r.current,accountName:c.current,protocolId:u?.protocolId})},networkError:U}},Le=Je;i();a();var Be=y(X());P();i();a();function Xe(e,t){if(e.key&&t.key)return e.key===t.key;if(e.coinId&&t.coinId)return e.coinId===t.coinId;let o=e.address||e.contractAddress,r=t.address||t.contractAddress;return o&&r?o.toLowerCase()===r.toLowerCase()&&e.localType===t.localType:!1}function re(e,t){for(let o=0;o<t.length;o++){let r=t[o];if(Xe(r,e)||r.childrenCoin&&re(e,r.childrenCoin))return!0}return!1}he();function ne(e,t,o){let r=(0,Be.useHistory)(),[c,{setTrue:u,setFalse:l}]=ge(),x=Ee(),_=ke(),f=async C=>{t.coinId===J&&await _({...e,baseCoinId:J,address:e.contractAddress},async()=>{C||await ee(e)},l)},{run:d}=Z(async()=>{u();let C=re(e,x);if(await f(C),C){H.error(n("wallet_manage_crypto_errortip_crypto_added")),l();return}try{await ee({...e,protocolId:o}),H.success(n("wallet_manage_crypto_toast_custom_crypto_success")),r.push(Ie)}catch(h){let p=h?.data?.originalError?.msg||n("wallet_extenshion_toast_add_failed");H.error(p)}finally{l()}},{wait:100});return{isSubmitting:c,submitAction:d}}i();a();var et="Ethereum",tt=()=>{let e=(0,De.useHistory)(),t=s.default.useRef(""),o=s.default.useRef(""),r=s.default.useRef(""),[c,u]=(0,s.useState)(!1),[l,x]=(0,s.useState)(""),[_,f]=(0,s.useState)(""),[d,C]=(0,s.useState)({imageUrl:"",name:"",coinId:-1}),{data:{supportNetworkList:h,protocolList:p}={}}=Fe(d.coinId),m=Y().get("network"),{title:w,error:E,placeholder:U,placeholderName:L,placeholderId:R}=oe[d?.coinId]||oe.default,$=(0,s.useMemo)(()=>n(w),[w]),se=(0,s.useMemo)(()=>N(d)&&_?.searchType?_.searchType===1?n(L):n(R):n(U),[U,R,L,_.searchType,d?.coinId]),{customCoin:g,accountIsInvalid:q,accountErrorMessage:G,stateOnLock:b,account:K,addressIsInvalid:ie,setAccount:Ue,updateCustomCoin:ae,networkError:ce}=Le(d,l,c,r,t,_),Re=(0,s.useMemo)(()=>ce?n("developer_mode_manage_errortip_network_error"):n(E),[E,ce]),{renderCustomForm:qe}=Pe({selectedNetwork:d,account:K,accountIsInvalid:q,accountErrorMessage:G,setAccount:Ue,updateCustomCoin:ae,accountRef:t,protocolRef:o,setProtocol:f,protocol:_,protocolList:p,isFacet:c,setIsFacet:u}),{isSubmitting:ze,submitAction:He}=ne(g,d,_.protocolId);return(0,s.useEffect)(()=>{async function z(){if(h.length>0){let We=m||et;C(h.filter(Ze=>Ze.name===We)[0]||h[0])}}z()},[h]),s.default.createElement("div",{className:"custom-crypto-page main-container"},s.default.createElement(Te,{title:n("wallet_manage_crypto_maintitle_custom_crypto"),onBack:()=>{e.push(be)}}),s.default.createElement(ye.Spin,{loading:!h?.length||!p?.length,size:me.SIZE.lg},s.default.createElement("div",{className:"custom-crypto--body"},s.default.createElement(Q,{selectedInfo:d}),qe(),s.default.createElement(Ae,{updateCustomCoin:z=>{r.current=z,x(z),ae()},currentAddress:l,addressInputTitle:$,errorText:Re,placeHolderText:se,addressIsInvalid:ie}),s.default.createElement(Oe,{customCoin:g})),s.default.createElement(Se.FooterActions,null,s.default.createElement(B,{onClick:He,size:B.SIZE.lg,type:B.TYPE.highlight,category:B.CATEGORY.fill,loading:ze,disabled:ie||b||q},n("wallet_set_password_btn_confirm")))))},ko=tt;export{ko as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=CustomCrypto-GQNGDWSL.js.map
