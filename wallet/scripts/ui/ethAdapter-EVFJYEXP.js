import{a as _}from"./chunk-ZC47SUCB.js";import{a as R,b as y,c as O}from"./chunk-PWJF5RRQ.js";import"./chunk-7CHHD7YT.js";import"./chunk-HKLZAYYN.js";import"./chunk-E4R5GU2A.js";import{a as I}from"./chunk-ROVVMPCE.js";import"./chunk-D5SV35TH.js";import"./chunk-VI37HTG4.js";import"./chunk-5PP4KT6B.js";import"./chunk-LHHZ5TAA.js";import"./chunk-PI6QLVMS.js";import"./chunk-QY4HIIR3.js";import"./chunk-XFWUEPSK.js";import"./chunk-MNNY2ODL.js";import"./chunk-VCAWL4NW.js";import{a as M,b as H}from"./chunk-UHHZIQ2V.js";import"./chunk-Q277JDUA.js";import"./chunk-2LDYLNUY.js";import"./chunk-KCITCUTL.js";import"./chunk-YZ3HCB4K.js";import"./chunk-EZ7VUFME.js";import"./chunk-T2OWRX3Y.js";import"./chunk-C3FJ2D4V.js";import{c as P}from"./chunk-C5ZJZEPI.js";import"./chunk-2FULUWWG.js";import"./chunk-SLEUZTBQ.js";import{a as m}from"./chunk-4X6ZAX3L.js";import"./chunk-4QSQKIBZ.js";import"./chunk-OXVQDEZW.js";import"./chunk-X3G52GGX.js";import"./chunk-WUKT6J7S.js";import"./chunk-FTJCOLFJ.js";import{o as f,za as K}from"./chunk-QG673PNL.js";import"./chunk-ZUFARSFM.js";import"./chunk-6MTHEPGF.js";import"./chunk-ZQQ7HNWV.js";import"./chunk-Y62GSKHT.js";import"./chunk-ZOQTSYT4.js";import"./chunk-ADZWCU3Q.js";import"./chunk-ZPRPROG4.js";import"./chunk-FDI7TLXH.js";import"./chunk-L4HTIIR6.js";import"./chunk-733NI6T7.js";import"./chunk-EYWGNJVY.js";import"./chunk-2U2UJUF7.js";import"./chunk-W426TRRH.js";import"./chunk-PIGJQYQ3.js";import"./chunk-7K7BCLRD.js";import"./chunk-WELSRPTB.js";import"./chunk-YSXN7JDZ.js";import"./chunk-TBVIGR5T.js";import"./chunk-FHQVMQUK.js";import"./chunk-XNS2NFYY.js";import{f as g,m as S,o as E}from"./chunk-REC7XVZY.js";S();E();var k=g(R());K();var v=g(_()),o=g(P());var w=k.default.HardwareWebSdk,T=class extends O{async signTransaction(u,e,s){return new Promise((r,n)=>{(async()=>{let{onekeyInfo:i,hdPathMap:a}=u,c;try{c=await this.initOneKey({onekeyInfo:i,onUiCancel(){n(new Error(m))}})}catch(p){return n(this.handleErrors(p))}e=I(e);let d=M(e),h=a[f],{success:l,payload:t}=await w.evmSignTransaction(i?.connectId,c,{path:h,transaction:{...d.toJSON(),to:(0,o.bufferToHex)(d.to).toString(),chainId:e.chainId}});if(y.closeModal(),l){let p=H(d,t);return r(s?p:{rawTxResult:p})}return n(this.handleErrors(t))})()})}async signPersonalMessage(u,e={}){return new Promise((s,r)=>{(async()=>{let{onekeyInfo:n,hdPathMap:i}=u,a;try{a=await this.initOneKey({onekeyInfo:n,onUiCancel(){r(new Error(m))}})}catch(t){return r(this.handleErrors(t))}let{data:c=""}=e||{},d=i[f],{success:h,payload:l}=await w.evmSignMessage(n?.connectId,a,{path:d,messageHex:(0,o.stripHexPrefix)(c)});if(y.closeModal(),h){let{signature:t=""}=l||{};return e.result=(0,o.addHexPrefix)(t),s()}return r(this.handleErrors(l))})()})}async signTypedData(u,e={}){return new Promise((s,r)=>{(async()=>{let{onekeyInfo:n,hdPathMap:i}=u,a;try{a=await this.initOneKey({onekeyInfo:n,onUiCancel(){r(new Error(m))}})}catch(D){return r(this.handleErrors(D))}let c=i[f];if(!(e.version==="V4"))return e.uiSignErrorMessage="OneKey: Only version 4 of typed data signing is supported",y.closeModal(),s();let h=JSON.parse(e.data),{domain_separator_hash:l,message_hash:t}=(0,v.default)(h,!0),{success:p,payload:x}=await w.evmSignTypedData(n?.connectId,a,{path:c,data:h,metamask_v4_compat:!0,domainHash:l,messageHash:t});return y.closeModal(),p?(e.rawSig=(0,o.addHexPrefix)(x?.signature),s()):r(this.handleErrors(x))})()})}},J=new T;export{J as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=ethAdapter-EVFJYEXP.js.map
