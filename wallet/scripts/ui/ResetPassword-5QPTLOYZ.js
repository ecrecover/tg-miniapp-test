import{a as w,b as N}from"./chunk-Z4MJQAMH.js";import{a as P,b as x}from"./chunk-CRPAHKLS.js";import"./chunk-PCT6WF3F.js";import"./chunk-X6MJ7FAJ.js";import{p as S}from"./chunk-JVN7YJ6W.js";import"./chunk-V4V6C6NY.js";import"./chunk-ZQ5A3KPQ.js";import"./chunk-BGUY7SH3.js";import"./chunk-MJYAUOKI.js";import"./chunk-LI3NFLG3.js";import{B as T,a as g,o as F}from"./chunk-FCCCJLF6.js";import{a as C}from"./chunk-4Z4GXCHB.js";import"./chunk-FK3ETA6I.js";import"./chunk-QZDHFNHK.js";import"./chunk-6KPQELH2.js";import"./chunk-EJQOS3F4.js";import"./chunk-LHHZ5TAA.js";import"./chunk-PI6QLVMS.js";import"./chunk-QY4HIIR3.js";import"./chunk-XFWUEPSK.js";import{d as y,f as M}from"./chunk-MNNY2ODL.js";import"./chunk-C3FJ2D4V.js";import"./chunk-C5ZJZEPI.js";import"./chunk-LGHM3MOC.js";import"./chunk-4QSQKIBZ.js";import"./chunk-OXVQDEZW.js";import"./chunk-X3G52GGX.js";import"./chunk-WUKT6J7S.js";import"./chunk-FTJCOLFJ.js";import"./chunk-QG673PNL.js";import"./chunk-ZUFARSFM.js";import{C as t,G as b,p as o}from"./chunk-6MTHEPGF.js";import{I as V,w as r}from"./chunk-ZQQ7HNWV.js";import"./chunk-Y62GSKHT.js";import"./chunk-2BXFMFMK.js";import{Y as i}from"./chunk-ZOQTSYT4.js";import{a as U}from"./chunk-ADZWCU3Q.js";import"./chunk-FDI7TLXH.js";import"./chunk-L4HTIIR6.js";import"./chunk-733NI6T7.js";import"./chunk-EYWGNJVY.js";import"./chunk-TBVIGR5T.js";import"./chunk-FHQVMQUK.js";import"./chunk-XNS2NFYY.js";import{f as L,m as _,o as u}from"./chunk-REC7XVZY.js";_();u();var s=L(U());V();M();_();u();var B={root:"_root_1r48s_1"};var ts=({history:v})=>{let l=t.useForm(),[e,z]=s.default.useState({}),[Z,h]=s.default.useState(null),[A,{setTrue:O,setFalse:I}]=F(!1),f=(0,s.useRef)(),E=g(()=>{f.current=S(e.oldPassword).then(()=>(h(null),l.cleanErrors("oldPassword"),!0)).catch(()=>{let a=r("wallet_set_password_errortip_password_wrong");return h(a),l.setErrors({oldPassword:a}),!1})});T(()=>{!e.oldPassword||E()},[e.oldPassword],{wait:500});let c=!!Z||!e.oldPassword||!e.password||!e.confirm||e.password?.length<P||e.confirm?.length<P,k=g(async()=>{let{password:a,confirm:m}=e;if(c)return;if(a!==m){l.setErrors({confirm:r("wallet_settings_reset_passord_errortip_input_error")});return}if(O(),f.current||E(),!await f.current){I();return}await y().modifyPassword(m)&&(b.success(r("wallet_edit_wallet_toast_renamed_success")),v.push(C)),I()},[c,e]);return s.default.createElement(N,{className:B.root,title:r("wallet_settings_reset_passord_maintitle_reset_password"),desc:r("wallet_extension_subtitle_password_unlock")},({formClass:a,formErrorClass:m,itemClass:p})=>s.default.createElement(t,{form:l,size:o.SIZE.lg,validateTrigger:["onChange","onBlur"],className:a,errorClassName:m,onSubmit:k,onValuesChange:(n,d)=>{z(d)}},s.default.createElement(t.Item,{name:"oldPassword",style:{marginBottom:0},label:r("wallet_settings_reset_passord_subtitle_old_password"),className:p},s.default.createElement(o.Password,{autoFocus:!0,autoComplete:"off",size:o.SIZE.xl,inputClassName:w.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_old_password")})),s.default.createElement(t.Item,{name:"password",style:{marginBottom:0,marginTop:"32px"},className:p,label:r("wallet_settings_reset_passord_subtitle_new_password")},s.default.createElement(o.Password,{autoComplete:"off",size:o.SIZE.xl,inputClassName:w.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_desc")})),s.default.createElement(t.Item,{noStyle:!0,shouldUpdate:(n,d)=>n.password!==d.password},({getFieldValue:n})=>{let d=n("password");return s.default.createElement(x,{password:d})}),s.default.createElement(t.Item,{name:"confirm",className:p,label:r("wallet_settings_reset_passord_subtitle_password_confirmation"),style:{flex:1,marginTop:"32px"}},s.default.createElement(o.Password,{autoComplete:"off",size:o.SIZE.xl,inputClassName:w.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_password_confirmation"),onChange:()=>{l.cleanErrors("confirm")}})),s.default.createElement(t.Item,{noStyle:!0},s.default.createElement(i,{block:!0,htmlType:"submit",loading:A,disabled:c,category:i.CATEGORY.fill,type:i.TYPE.highlight,size:i.SIZE.lg},r("wallet_set_password_btn_confirm")))))};export{ts as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=ResetPassword-5QPTLOYZ.js.map
