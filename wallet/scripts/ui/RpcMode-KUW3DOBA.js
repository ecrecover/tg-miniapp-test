import{b as pt,f as ct,g as ft}from"./chunk-4EURYJGL.js";import{a as ut,b as _t,d as ht,e as gt}from"./chunk-D6QLUPRP.js";import{n as st,p as mt,q as lt}from"./chunk-T4GCTTFD.js";import"./chunk-2N725U3P.js";import{a as dt}from"./chunk-HRX2UNWH.js";import"./chunk-44RHJNWT.js";import"./chunk-4T2UKPH7.js";import"./chunk-XQL7T4TZ.js";import{a as at}from"./chunk-DOBZVR54.js";import{a as it}from"./chunk-JNNUDHDZ.js";import"./chunk-SCZBCO2U.js";import"./chunk-NYT3QVML.js";import"./chunk-2P6KMQ6R.js";import"./chunk-PVE3B4RU.js";import{a as Xo,b as Ro}from"./chunk-LE6IGNMO.js";import{b as rt}from"./chunk-EEQBHLM7.js";import{a as ot}from"./chunk-37OBG2P3.js";import{h as j,t as nt}from"./chunk-XE2F6LDQ.js";import"./chunk-REIQGNZB.js";import{d as tt,e as et}from"./chunk-Q4CU3DV4.js";import{a as Qo}from"./chunk-DSYZP5KR.js";import"./chunk-UFQZJGJ2.js";import"./chunk-B553FNEQ.js";import"./chunk-6QKWDR6X.js";import"./chunk-7XFZKU6W.js";import"./chunk-5DVBM2WJ.js";import"./chunk-I3U7CKFC.js";import"./chunk-ZPDRUAGN.js";import{a as Jo}from"./chunk-WCH23YYN.js";import"./chunk-NZZFB6IS.js";import{d as O,e as fo,g as oo}from"./chunk-35PGDXR7.js";import"./chunk-PUO23DIP.js";import"./chunk-O2J764NL.js";import{e as S}from"./chunk-CDLW656Z.js";import"./chunk-3K3KMGWB.js";import{b as $o}from"./chunk-5EZVDCYS.js";import"./chunk-475E6NBR.js";import"./chunk-RC5IAFKK.js";import"./chunk-4VLUHY4K.js";import{e as qo,m as Ko}from"./chunk-IHPHPUUG.js";import"./chunk-ZEWK7OGU.js";import{a as L}from"./chunk-QVA4WXOQ.js";import"./chunk-EX22SDGB.js";import"./chunk-4RARGC4D.js";import{c as Vo}from"./chunk-OQOFXHGC.js";import"./chunk-3QA2SYRR.js";import"./chunk-3SC55VQ2.js";import"./chunk-VTLNAOHG.js";import"./chunk-Y7YPG2EJ.js";import"./chunk-7R67VE77.js";import"./chunk-NHGZUGLZ.js";import"./chunk-G5LEAVCY.js";import"./chunk-ACHWU2H6.js";import"./chunk-ZPFBKNRM.js";import"./chunk-7DP5LYUM.js";import"./chunk-BVXKJJ4A.js";import"./chunk-TBBE7OKY.js";import"./chunk-7HJDVUH5.js";import"./chunk-JBYIJGSA.js";import"./chunk-QKBD2KSL.js";import"./chunk-VTOQBCNE.js";import"./chunk-KUI26AZJ.js";import"./chunk-E2XQ2FKN.js";import"./chunk-ADKEXOTG.js";import"./chunk-7PVSIZ6H.js";import"./chunk-H7DITLB3.js";import"./chunk-5NXPDYL5.js";import"./chunk-VQBK6IHT.js";import"./chunk-CTT7GD4C.js";import"./chunk-LQAOHG2H.js";import{b as Do}from"./chunk-WNQ6F6VV.js";import"./chunk-LEADLFDQ.js";import"./chunk-DGK7TBBE.js";import"./chunk-6Y7ULJF6.js";import{a as D,b as Go}from"./chunk-3YH3AGVS.js";import"./chunk-3LB7TUPB.js";import"./chunk-TK6JYPIW.js";import"./chunk-OS6E6KVM.js";import"./chunk-GZRBUDXF.js";import"./chunk-WY46TT4P.js";import"./chunk-MTMUCMTY.js";import{c as Wo,d as R,g as jo}from"./chunk-S6N4IJX7.js";import"./chunk-ZD4EJWX6.js";import"./chunk-WGCZSWYA.js";import"./chunk-IINHHLHP.js";import{e as Zo}from"./chunk-DY2YURLY.js";import"./chunk-KXZSXP3G.js";import"./chunk-6HXVFU7V.js";import"./chunk-D5FMQLJG.js";import"./chunk-3I7UBQEQ.js";import"./chunk-DXRBY5MU.js";import"./chunk-6FR2UIE7.js";import"./chunk-5GMHHIH5.js";import"./chunk-7KCWBFQ2.js";import"./chunk-QLUP7GYN.js";import"./chunk-7Y44NCE5.js";import"./chunk-BKPOG6ZD.js";import"./chunk-OZMVWMFO.js";import"./chunk-KTO7CPX7.js";import"./chunk-P3XTPXPO.js";import"./chunk-S6TPD26J.js";import"./chunk-4IY6P5HR.js";import"./chunk-FQWGOLDH.js";import{R as Yo}from"./chunk-QEPBNPHF.js";import"./chunk-3JLS3TGD.js";import"./chunk-KDP5Z4RF.js";import"./chunk-W234FNSM.js";import"./chunk-DDO6HXRN.js";import"./chunk-CLWWTOKP.js";import{a as Ho}from"./chunk-KZ2PCELG.js";import"./chunk-C7ZG4INB.js";import{a as X}from"./chunk-J5ANWCEO.js";import{w as $}from"./chunk-VMO2INN3.js";import"./chunk-J4TF3RT7.js";import{a as J,o as Q}from"./chunk-6FOZGMAL.js";import{a as Oo,h as Mo}from"./chunk-2MV3WEYP.js";import{$a as zo,y as co}from"./chunk-HPXM6RSK.js";import{b as V}from"./chunk-IUIJ46C3.js";import"./chunk-XRXUVH6X.js";import"./chunk-KZ3ZU675.js";import{a as jt}from"./chunk-NJ5CWPUY.js";import{l as uo,p as Zt}from"./chunk-UMJMJOW4.js";import"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import"./chunk-O5JCC6KG.js";import"./chunk-MAIAJ7GD.js";import"./chunk-4PGNX6E2.js";import"./chunk-DBHB6SUD.js";import"./chunk-I56VJWE4.js";import"./chunk-PS3S6BG3.js";import"./chunk-RT4Y2U5N.js";import"./chunk-2VHH444P.js";import{b as Uo}from"./chunk-RIMU4JTV.js";import{f as Fo,i as W}from"./chunk-MGLVPWSV.js";import"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import"./chunk-AMVK42SC.js";import"./chunk-D6RIE45O.js";import"./chunk-XCAARJ7Q.js";import{c as z}from"./chunk-JXCCIV3J.js";import"./chunk-AOA7NX2Y.js";import"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import{Kb as po,ac as Po,ib as q,jc as Wt,kb as K,lb as bo,m as Z,nb as So,o as vo,pb as lo,qb as No,sb as Lo,yb as Bo,za as Yt}from"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import{E as Eo,G as Io,c as Y,n as Co,p as mo,q as wo}from"./chunk-SOHTSUTI.js";import{I as F,m as Ao,w as r}from"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-E24EBHFY.js";import{M as ko,Y as I,c as Ht}from"./chunk-V4F2JFTP.js";import{a as b}from"./chunk-6DDC4Y2S.js";import"./chunk-TEY24VZN.js";import"./chunk-RKHQOOTU.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-F4JTGWJH.js";import"./chunk-YUXYCITH.js";import"./chunk-RMV3AS5X.js";import"./chunk-SF2LTPAC.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{f as _,m as e,o as n}from"./chunk-EQYVU4XP.js";e();n();var N=_(b()),no=_(jt()),ro=_(co());var go=_(Z());e();n();var eo=_(b());e();n();var c=_(b());F();po();e();n();var Tt=_(b());F();var qt=({chainGasLoadFailed:o,isSufficientBalance:t,transaction:u,actions:m,modifiedDataError:a,walletInfo:i,unapprovedTx:l})=>{let{extensionConfig:p}=L("rpc_info"),{chain:s,nonce:f,loading:d,gas:h}=u,{sign:w,cancel:y}=m,{chainGasLoading:C}=h,E=(0,Tt.useCallback)(async()=>{await y()},[y]),A={actionType:S.ACTION_TYPE.CANCEL,onClick:E},g=async()=>{try{if(!await $o({walletId:i?.walletId,callback:y}))return}catch(v){console.error(v)}let H=v=>{let io=Zo[i?.keyringIdentityType];Yo({tx_source:"dapp",from_addr:l.from,to_addr:l.to,main_token_symbol:p?.symbol,token_symbol:v?.extraParams?.coinSymbol||"",contract_address:l?.to,volume_token:l?.value,volume_usdt:"",tx_hash_unique:v?.txHash,wallet_type:io,chain_id:parseInt(s.chainId,16)})};w(i?.walletId,H)},G=()=>{globalThis.open(p.faucetUrl)},P={disabled:C||o||!t&&!p.faucetUrl||f.pending||d.sign||d.token||a,actionType:S.ACTION_TYPE.CONFIRM,onClick:g};return!t&&p.faucetUrl&&(P.actionType=S.ACTION_TYPE.FILL_UP,P.onClick=G,P.btnText=r("wallet_extension_transfer_btn_via_faucet")),[A,P]},xt=qt;e();n();F();var yt=_(Z());var Kt=({chainGasLoadFailed:o,modifiedDataError:t,isSufficientBalance:u,isRevokeTx:m,transaction:a,loading:i})=>{let{auth:l,chain:p}=a,s=j(l.name||W),f=j(l.symbol||W),d=()=>t?{}:null,h=()=>u?null:{type:Y.TYPE.warn,message:r("wallet_extension_popup_insufficient_network_fee",{token:p.symbol})},w=()=>o?{type:oo.TIP_TYPE.FEE_ERROR}:null,y=()=>m?{type:Y.TYPE.info,message:r("extension_revoke_approval_alert_evoke_authorization",{contract:s,asset:f})}:null,C=()=>R(l.customApproveAmount)?{type:Y.TYPE.warn,message:r("wallet_extension_popup_unlimited_transfer",{contract:s,asset:f})}:(0,yt.gt)(l.customApproveAmount,0)?{type:Y.TYPE.warn,message:r("extension_approve_alert_authorized_tips",{contract:s,asset:f})}:null;if(i)return null;let E=[d,h,y,C,w];for(let A=0;A<E.length;A++){let g=E[A],G=g();if(G)return G}return null},At=Kt;e();n();var M=_(b());var ho=_(Ht());po();var kt=_(Z());F();e();n();var U={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",content:"_content_1jypd_1",inner:"_inner_1jypd_5","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",warningText:"_warningText_1jypd_9",icon:"_icon_1jypd_13"};function Vt({nonce:o,suggestedNonce:t,setNonce:u}){let m=i=>{u(i)},a;return o&&(lo(o,t)?a=r("developer_mode_send_tooltip_higher",{num:t}):So(o,t)&&(a=r("developer_mode_send_tooltip_lower",{num:t}))),M.default.createElement(at.Row,{className:U.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},M.default.createElement("div",{className:U.content},M.default.createElement("div",{className:U.inner},M.default.createElement(mo.Number,{innerClassName:(0,ho.default)({"rpc-evm-send-edit-nonce__warning-input":!!a}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:r("developer_mode_send_maintitle_nonce"),placeholder:`${(0,kt.isNil)(t)?"":Ao.thousandFormat(t)}`,size:mo.SIZE.xl,value:o,onAdd:()=>!o&&t!==null?(m(K(t,1)),!1):!0,onSub:()=>!o&&lo(t,0)?(m(bo(t-1)),!1):!0,onChange:m})),a&&M.default.createElement("div",{className:U.warningText},M.default.createElement(ko,{className:(0,ho.default)(U.icon,"okx-wallet-plugin-warning-circle")}),a)))}var Ct=Vt;e();n();var k=_(b());F();Wt();po();e();n();var x=_(b());F();e();n();var B={AuthorizationToken:"_AuthorizationToken_g68hx_1",authorizationToken:"_AuthorizationToken_g68hx_1",title:"_title_g68hx_1",content:"_content_g68hx_4",unlimited_text:"_unlimited_text_g68hx_13",unlimitedText:"_unlimited_text_g68hx_13",balance:"_balance_g68hx_17",amount:"_amount_g68hx_22",checkAll:"_checkAll_g68hx_26",checkAll__text:"_checkAll__text_g68hx_30",checkAllText:"_checkAll__text_g68hx_30",footerActions:"_footerActions_g68hx_33"};var $t=({onClose:o,onConfirm:t,approveToken:u})=>{let{symbol:m,decimals:a,customApproveAmount:i}=u,l=j(m,10),p=R(i),[s,f]=(0,x.useState)(!1),[d,h]=(0,x.useState)(p?"0":i),w=g=>{h(g)},[y,{set:C}]=Q(!1),E=(0,x.useMemo)(()=>rt(s,d),[s,d]),A=J(async()=>{try{C(!0),await t?.(s?Wo:d),o?.()}catch(g){console.log(g)}finally{C(!1)}});return x.default.createElement(z.FlexBox,{className:B.AuthorizationToken,direction:z.DIRECTION.vertical,align:z.ALIGN.center},x.default.createElement($.Text,{strong:700,className:B.title},r("wallet_contract_interaction_approval_permission_authorized_amount")),x.default.createElement(z.Box,{className:B.content},s?x.default.createElement($.Text,{strong:500,size:$.SIZE.xl,className:B.unlimited_text},r("wallet_extension_transfer_title_unlimited_amount",{token:l})):x.default.createElement(Vo,{symbol:l,autoSize:jo,placeholder:"0",decimals:a||0,value:d,onChange:w,style:{fontWeight:500,height:"48px"}})),x.default.createElement(wo,{className:B.checkAll,checked:s,textClass:B.checkAll__text,onChange:({target:{checked:g}})=>{f(g)}},r("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),x.default.createElement(X.FooterActions,{affixStyle:{position:"none"},placeholder:!1,className:B.footerActions},x.default.createElement(I,{loading:y,disabled:E,category:I.CATEGORY.fill,type:I.TYPE.primary,size:I.SIZE.lg,onClick:A},r("commonall_filter_btn_save"))))},wt=$t;e();n();var to={edit_btn:"_edit_btn_rw6lw_1",editBtn:"_edit_btn_rw6lw_1",authorization_token_dialog:"_authorization_token_dialog_rw6lw_5",authorizationTokenDialog:"_authorization_token_dialog_rw6lw_5",authorization_token_dialog__content:"_authorization_token_dialog__content_rw6lw_5",authorizationTokenDialogContent:"_authorization_token_dialog__content_rw6lw_5"};var Jt=({onUpdateAuthAmount:o,dappInfo:t,isOffline:u,approveToken:m})=>{let{isApprove:a,isRevoke:i,address:l,customApproveAmount:p=0,symbol:s=W,decimals:f=0,icon:d=Fo}=m,h=(0,k.useMemo)(()=>{let A=i?V.CANCEL_AUTHORIZATION:V.AUTHORIZATION,g=Po(Uo(q(p,Lo.pow(10,f))));return{approvalType:A,asset:{symbol:s,decimals:f,address:l,imageUrl:d},approvalRaw:g}},[s,f,l,p,i,d]),[w,{set:y}]=Q(!1),C=J(()=>{y(!1)}),E=()=>{y(!0)};return u?k.default.createElement(et,null):a?k.default.createElement(k.default.Fragment,null,k.default.createElement(nt,{approveInfo:h,editBtnSlot:!i&&k.default.createElement(I,{size:I.SIZE.xs,type:I.TYPE.primary,category:I.CATEGORY.outline,className:to.edit_btn,onClick:E},r("wallet_extension_transfer_text_edit"))}),k.default.createElement(Co,{className:to.authorization_token_dialog,alignBottom:!0,noContentPadding:!0,onClose:C,visible:w,windowClass:to.authorization_token_dialog__content},k.default.createElement(wt,{txType:V.AUTHORIZATION,onConfirm:o,approveToken:m,onClose:C}))):k.default.createElement(O,null,k.default.createElement(tt,{...t}))},Et=Jt;var It=({unapprovedTx:o})=>{let[t,u]=(0,c.useState)(""),[m,a]=(0,c.useState)(!1),i=Ro(t),{extensionConfig:l}=L("rpc_info"),p=ut(o.origin,o.from),[s,f]=st({...o,walletId:p?.walletId}),{title:d,auth:h,meta:w,nonce:y,gas:C,loading:E,data:A}=s,{setNonce:g,setAuthAmount:G}=f,{chainGasInfo:To,customGasInfo:P,chainGasLoading:H,chainGasLoadFailed:v,stopPollingGasPrice:io,updateCustomGasInfo:Ot,chainGasLimitLoadFailed:Mt}=C,ao=qo(),xo=pt(P);it(),ft(o.from);let yo=No(ao?.balance,K(xo,Bo(o.value||0))),Gt=At({chainGasLoadFailed:v,isSufficientBalance:yo,isRevokeTx:h.isRevoke,modifiedDataError:i,transaction:s,loading:H}),Dt=xt({chainGasLoadFailed:v,isSufficientBalance:yo,transaction:s,actions:f,modifiedDataError:i,walletInfo:p,unapprovedTx:o}),Ut=so=>{Ot(so),a(!1)};return c.default.createElement(z.Container,null,c.default.createElement(Ho,{title:d,closeable:!1,backable:!1}),c.default.createElement(Et,{confirmBuryPointFn:()=>{},onUpdateAuthAmount:so=>{G(so)},dappInfo:w.originInfo,isOffline:E.token,approveToken:h}),c.default.createElement(O,null,c.default.createElement(Jo,{onClick:()=>{a(!0)},injectCoin:ao,loading:H,estimateFailed:v,networkFee:H?void 0:q(xo,10**ao?.decimals)})),c.default.createElement(O,null,c.default.createElement(fo,{title:r("wallet_extension_network_address_title_walletused"),address:p.address,walletId:p.walletId}),!!o.to&&c.default.createElement(fo,{title:r("wallet_extension_popup_text_interact_with"),address:o.to})),c.default.createElement(Ct,{nonce:y.custom,suggestedNonce:y.suggested,setNonce:g}),A?c.default.createElement(O,{bordered:!1},c.default.createElement(ot,{data:A,copyable:{hideDesc:!0}})):c.default.createElement(O,{bordered:!1},c.default.createElement(Xo,{value:t,error:i,onChange:u})),c.default.createElement(X,{placeholder:!0,offsetBottom:0,borderTop:!0},!i&&c.default.createElement(oo,{...Gt}),c.default.createElement(S,{buttonGroup:Dt})),m?c.default.createElement(ct,{onBack:()=>{a(!1)},rpcInfo:l,chainGasInfo:To,customGasInfo:P,updateCustomGasInfo:Ut,stopPollingGasPrice:io,chainGasLimitLoadFailed:Mt}):null)};var vt=({unapprovedTxList:o})=>{let t=o[o.length-1];return eo.default.createElement(eo.default.Fragment,null,eo.default.createElement(It,{unapprovedTx:t}))};e();n();var Nt=_(b());e();n();var bt=_(co());F();Zt();var Qt=o=>{let t=(0,bt.useDispatch)(),{address:u}=o,m=_t(),a=Qo(),i={actionType:S.ACTION_TYPE.CANCEL,btnText:r("wallet_dapp_connection_btn_reject"),async onClick(){a({all_confirmation:"cancel",trade:"add_token"}),await m(u,!1),await uo(t)}},{extensionConfig:l}=L("rpc_info"),{url:p,chainId:s}=l,f=Ko(p),d={actionType:S.ACTION_TYPE.CONFIRM,async onClick(){try{a({all_confirmation:"confirm",trade:"add_token"}),await f(s,o.address),await m(u,!0),await uo(t)}catch{Io.error(r("wallet_extenshion_toast_add_failed"))}}};return[i,d]},St=Qt;var Xt=({unapproved:o})=>{let{extensionConfig:t}=L("rpc_info"),u=lt(o),m=St(u);return Nt.default.createElement(dt,{token:u,provider:t,buttonGroup:m})},Lt=Xt;e();n();var Bt=_(b()),Pt=_(Z()),Ft=_(co());Yt();var zt=()=>{let o=(0,Ft.useSelector)(zo),t=(0,Pt.last)(o);return Bt.default.createElement(ht,{unapproved:{...t,localType:vo}})};e();n();var Dr=()=>{let{unapprovedTxList:o,unapprovedTxCount:t,unapprovedStList:u,unapprovedStCount:m,unapprovedSnList:a,unapprovedSnCount:i,unapprovedPermissionsRequestId:l,unapprovedRequestCount:p,unapprovedPermissionCount:s}=mt(),f=(0,ro.useDispatch)(),d=(0,no.useHistory)(),h=(0,ro.useSelector)(Go);switch((0,N.useEffect)(()=>{(async()=>{p===0&&(await f(Do()),d.push(Oo))})()},[p]),!0){case(h===D.connect&&s>0):return N.default.createElement(no.Redirect,{to:`${Mo}/${l}`});case h===D.msg:return N.default.createElement(zt,null);case(h===D.addToken&&m>0):return N.default.createElement(Lt,{unapproved:(0,go.last)(u)});case(h===D.addChain&&i>0):return N.default.createElement(gt,{unapproved:(0,go.last)(a)});case(h===D.transaction&&t>0):return N.default.createElement(vt,{unapprovedTxList:o});default:return N.default.createElement(Eo,{delayTime:5e3})}};export{Dr as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=RpcMode-KUW3DOBA.js.map
