import{a as fe}from"./chunk-CGQV4V24.js";import{a as hi}from"./chunk-RKHQOOTU.js";import{a as Ue}from"./chunk-KJOC4LFM.js";import{a as fi}from"./chunk-RMV3AS5X.js";import{d as si}from"./chunk-YR74Q3QD.js";import{c as Mt,m as S,n as B,o as E}from"./chunk-EQYVU4XP.js";var Ft=Mt(gt=>{"use strict";S();E();Object.defineProperty(gt,"__esModule",{value:!0});gt.numberToBuffer=gt.normalize=gt.recoverPublicKey=gt.concatSig=gt.legacyToBuffer=gt.isNullish=gt.padWithZeroes=void 0;var Bt=fe(),Re=Ue();function Ke(i,s){if(i!==""&&!/^[a-f0-9]+$/iu.test(i))throw new Error(`Expected an unprefixed hex string. Received: ${i}`);if(s<0)throw new Error(`Expected a non-negative integer target length. Received: ${s}`);return String.prototype.padStart.call(i,s,"0")}gt.padWithZeroes=Ke;function ai(i){return i==null}gt.isNullish=ai;function ui(i){return typeof i=="string"&&!(0,Re.isHexString)(i)?B.Buffer.from(i):(0,Bt.toBuffer)(i)}gt.legacyToBuffer=ui;function li(i,s,o){let p=(0,Bt.fromSigned)(s),f=(0,Bt.fromSigned)(o),v=(0,Bt.bufferToInt)(i),g=Ke((0,Bt.toUnsigned)(p).toString("hex"),64),x=Ke((0,Bt.toUnsigned)(f).toString("hex"),64),L=(0,Re.stripHexPrefix)((0,Re.intToHex)(v));return(0,Bt.addHexPrefix)(g.concat(x,L))}gt.concatSig=li;function ci(i,s){let o=(0,Bt.fromRpcSig)(s);return(0,Bt.ecrecover)(i,o.v,o.r,o.s)}gt.recoverPublicKey=ci;function di(i){if(!!i){if(typeof i=="number"){if(i<0)return"0x";let s=(0,Bt.toBuffer)(i);i=(0,Bt.bufferToHex)(s)}if(typeof i!="string"){let s="eth-sig-util.normalize() requires hex string or integer input.";throw s+=` received ${typeof i}: ${i}`,new Error(s)}return(0,Bt.addHexPrefix)(i.toLowerCase())}}gt.normalize=di;function pi(i){let s=i.toString(16),o=s.length%2?"0":"";return B.Buffer.from(o+s,"hex")}gt.numberToBuffer=pi});var xr=Mt(Ut=>{"use strict";S();E();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.extractPublicKey=Ut.recoverPersonalSignature=Ut.personalSign=void 0;var Ct=fe(),At=Ft();function mi({privateKey:i,data:s}){if((0,At.isNullish)(s))throw new Error("Missing data parameter");if((0,At.isNullish)(i))throw new Error("Missing privateKey parameter");let o=(0,At.legacyToBuffer)(s),p=(0,Ct.hashPersonalMessage)(o),f=(0,Ct.ecsign)(p,i);return(0,At.concatSig)((0,Ct.toBuffer)(f.v),f.r,f.s)}Ut.personalSign=mi;function vi({data:i,signature:s}){if((0,At.isNullish)(i))throw new Error("Missing data parameter");if((0,At.isNullish)(s))throw new Error("Missing signature parameter");let o=Mr(i,s),p=(0,Ct.publicToAddress)(o);return(0,Ct.bufferToHex)(p)}Ut.recoverPersonalSignature=vi;function gi({data:i,signature:s}){if((0,At.isNullish)(i))throw new Error("Missing data parameter");if((0,At.isNullish)(s))throw new Error("Missing signature parameter");return`0x${Mr(i,s).toString("hex")}`}Ut.extractPublicKey=gi;function Mr(i,s){let o=(0,Ct.hashPersonalMessage)((0,At.legacyToBuffer)(i));return(0,At.recoverPublicKey)(o,s)}});var Ve=Mt(yt=>{"use strict";S();E();Object.defineProperty(yt,"__esModule",{value:!0});yt.output=yt.exists=yt.hash=yt.bytes=yt.bool=yt.number=void 0;function he(i){if(!Number.isSafeInteger(i)||i<0)throw new Error(`Wrong positive integer: ${i}`)}yt.number=he;function br(i){if(typeof i!="boolean")throw new Error(`Expected boolean, not ${i}`)}yt.bool=br;function De(i,...s){if(!(i instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(s.length>0&&!s.includes(i.length))throw new TypeError(`Expected Uint8Array of length ${s}, not of length=${i.length}`)}yt.bytes=De;function _r(i){if(typeof i!="function"||typeof i.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");he(i.outputLen),he(i.blockLen)}yt.hash=_r;function Br(i,s=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(s&&i.finished)throw new Error("Hash#digest() has already been called")}yt.exists=Br;function kr(i,s){De(i);let o=s.outputLen;if(i.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}yt.output=kr;var yi={number:he,bool:br,bytes:De,hash:_r,exists:Br,output:kr};yt.default=yi});var Tr=Mt(kt=>{"use strict";S();E();Object.defineProperty(kt,"__esModule",{value:!0});kt.add=kt.toBig=kt.split=kt.fromBig=void 0;var ae=BigInt(2**32-1),je=BigInt(32);function Ze(i,s=!1){return s?{h:Number(i&ae),l:Number(i>>je&ae)}:{h:Number(i>>je&ae)|0,l:Number(i&ae)|0}}kt.fromBig=Ze;function Sr(i,s=!1){let o=new Uint32Array(i.length),p=new Uint32Array(i.length);for(let f=0;f<i.length;f++){let{h:v,l:g}=Ze(i[f],s);[o[f],p[f]]=[v,g]}return[o,p]}kt.split=Sr;var wi=(i,s)=>BigInt(i>>>0)<<je|BigInt(s>>>0);kt.toBig=wi;var Mi=(i,s,o)=>i>>>o,xi=(i,s,o)=>i<<32-o|s>>>o,bi=(i,s,o)=>i>>>o|s<<32-o,_i=(i,s,o)=>i<<32-o|s>>>o,Bi=(i,s,o)=>i<<64-o|s>>>o-32,ki=(i,s,o)=>i>>>o-32|s<<64-o,Si=(i,s)=>s,Ei=(i,s)=>i,Ti=(i,s,o)=>i<<o|s>>>32-o,Ai=(i,s,o)=>s<<o|i>>>32-o,Oi=(i,s,o)=>s<<o-32|i>>>64-o,Pi=(i,s,o)=>i<<o-32|s>>>64-o;function Er(i,s,o,p){let f=(s>>>0)+(p>>>0);return{h:i+o+(f/2**32|0)|0,l:f|0}}kt.add=Er;var Li=(i,s,o)=>(i>>>0)+(s>>>0)+(o>>>0),Hi=(i,s,o,p)=>s+o+p+(i/2**32|0)|0,qi=(i,s,o,p)=>(i>>>0)+(s>>>0)+(o>>>0)+(p>>>0),Ni=(i,s,o,p,f)=>s+o+p+f+(i/2**32|0)|0,Ii=(i,s,o,p,f)=>(i>>>0)+(s>>>0)+(o>>>0)+(p>>>0)+(f>>>0),$i=(i,s,o,p,f,v)=>s+o+p+f+v+(i/2**32|0)|0,Ui={fromBig:Ze,split:Sr,toBig:kt.toBig,shrSH:Mi,shrSL:xi,rotrSH:bi,rotrSL:_i,rotrBH:Bi,rotrBL:ki,rotr32H:Si,rotr32L:Ei,rotlSH:Ti,rotlSL:Ai,rotlBH:Oi,rotlBL:Pi,add:Er,add3L:Li,add3H:Hi,add4L:qi,add4H:Ni,add5H:$i,add5L:Ii};kt.default=Ui});var Ar=Mt(ue=>{"use strict";S();E();Object.defineProperty(ue,"__esModule",{value:!0});ue.crypto=void 0;ue.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0}});var ce=Mt(_=>{"use strict";S();E();Object.defineProperty(_,"__esModule",{value:!0});_.randomBytes=_.wrapConstructorWithOpts=_.wrapConstructor=_.checkOpts=_.Hash=_.concatBytes=_.toBytes=_.utf8ToBytes=_.asyncLoop=_.nextTick=_.hexToBytes=_.bytesToHex=_.isLE=_.rotr=_.createView=_.u32=_.u8=void 0;var le=Ar(),Ri=i=>new Uint8Array(i.buffer,i.byteOffset,i.byteLength);_.u8=Ri;var Ki=i=>new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4));_.u32=Ki;var Di=i=>new DataView(i.buffer,i.byteOffset,i.byteLength);_.createView=Di;var Vi=(i,s)=>i<<32-s|i>>>s;_.rotr=Vi;_.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!_.isLE)throw new Error("Non little-endian hardware is not supported");var ji=Array.from({length:256},(i,s)=>s.toString(16).padStart(2,"0"));function Zi(i){if(!(i instanceof Uint8Array))throw new Error("Uint8Array expected");let s="";for(let o=0;o<i.length;o++)s+=ji[i[o]];return s}_.bytesToHex=Zi;function zi(i){if(typeof i!="string")throw new TypeError("hexToBytes: expected string, got "+typeof i);if(i.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let s=new Uint8Array(i.length/2);for(let o=0;o<s.length;o++){let p=o*2,f=i.slice(p,p+2),v=Number.parseInt(f,16);if(Number.isNaN(v)||v<0)throw new Error("Invalid byte sequence");s[o]=v}return s}_.hexToBytes=zi;var Wi=async()=>{};_.nextTick=Wi;async function Fi(i,s,o){let p=Date.now();for(let f=0;f<i;f++){o(f);let v=Date.now()-p;v>=0&&v<s||(await(0,_.nextTick)(),p+=v)}}_.asyncLoop=Fi;function Or(i){if(typeof i!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof i}`);return new TextEncoder().encode(i)}_.utf8ToBytes=Or;function We(i){if(typeof i=="string"&&(i=Or(i)),!(i instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof i})`);return i}_.toBytes=We;function Ci(...i){if(!i.every(p=>p instanceof Uint8Array))throw new Error("Uint8Array list expected");if(i.length===1)return i[0];let s=i.reduce((p,f)=>p+f.length,0),o=new Uint8Array(s);for(let p=0,f=0;p<i.length;p++){let v=i[p];o.set(v,f),f+=v.length}return o}_.concatBytes=Ci;var ze=class{clone(){return this._cloneInto()}};_.Hash=ze;var Ji=i=>Object.prototype.toString.call(i)==="[object Object]"&&i.constructor===Object;function Xi(i,s){if(s!==void 0&&(typeof s!="object"||!Ji(s)))throw new TypeError("Options should be object or undefined");return Object.assign(i,s)}_.checkOpts=Xi;function Gi(i){let s=p=>i().update(We(p)).digest(),o=i();return s.outputLen=o.outputLen,s.blockLen=o.blockLen,s.create=()=>i(),s}_.wrapConstructor=Gi;function Yi(i){let s=(p,f)=>i(f).update(We(p)).digest(),o=i({});return s.outputLen=o.outputLen,s.blockLen=o.blockLen,s.create=p=>i(p),s}_.wrapConstructorWithOpts=Yi;function Qi(i=32){if(le.crypto.web)return le.crypto.web.getRandomValues(new Uint8Array(i));if(le.crypto.node)return new Uint8Array(le.crypto.node.randomBytes(i).buffer);throw new Error("The environment doesn't have randomBytes function")}_.randomBytes=Qi});var Ur=Mt(P=>{"use strict";S();E();Object.defineProperty(P,"__esModule",{value:!0});P.shake256=P.shake128=P.keccak_512=P.keccak_384=P.keccak_256=P.keccak_224=P.sha3_512=P.sha3_384=P.sha3_256=P.sha3_224=P.Keccak=P.keccakP=void 0;var Jt=Ve(),te=Tr(),Qt=ce(),[Hr,qr,Nr]=[[],[],[]],tn=BigInt(0),Yt=BigInt(1),en=BigInt(2),rn=BigInt(7),nn=BigInt(256),on=BigInt(113);for(let i=0,s=Yt,o=1,p=0;i<24;i++){[o,p]=[p,(2*o+3*p)%5],Hr.push(2*(5*p+o)),qr.push((i+1)*(i+2)/2%64);let f=tn;for(let v=0;v<7;v++)s=(s<<Yt^(s>>rn)*on)%nn,s&en&&(f^=Yt<<(Yt<<BigInt(v))-Yt);Nr.push(f)}var[sn,fn]=te.default.split(Nr,!0),Pr=(i,s,o)=>o>32?te.default.rotlBH(i,s,o):te.default.rotlSH(i,s,o),Lr=(i,s,o)=>o>32?te.default.rotlBL(i,s,o):te.default.rotlSL(i,s,o);function Ir(i,s=24){let o=new Uint32Array(10);for(let p=24-s;p<24;p++){for(let g=0;g<10;g++)o[g]=i[g]^i[g+10]^i[g+20]^i[g+30]^i[g+40];for(let g=0;g<10;g+=2){let x=(g+8)%10,L=(g+2)%10,Tt=o[L],It=o[L+1],ve=Pr(Tt,It,1)^o[x],oe=Lr(Tt,It,1)^o[x+1];for(let Vt=0;Vt<50;Vt+=10)i[g+Vt]^=ve,i[g+Vt+1]^=oe}let f=i[2],v=i[3];for(let g=0;g<24;g++){let x=qr[g],L=Pr(f,v,x),Tt=Lr(f,v,x),It=Hr[g];f=i[It],v=i[It+1],i[It]=L,i[It+1]=Tt}for(let g=0;g<50;g+=10){for(let x=0;x<10;x++)o[x]=i[g+x];for(let x=0;x<10;x++)i[g+x]^=~o[(x+2)%10]&o[(x+4)%10]}i[0]^=sn[p],i[1]^=fn[p]}o.fill(0)}P.keccakP=Ir;var Zt=class extends Qt.Hash{constructor(s,o,p,f=!1,v=24){if(super(),this.blockLen=s,this.suffix=o,this.outputLen=p,this.enableXOF=f,this.rounds=v,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Jt.default.number(p),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Qt.u32)(this.state)}keccak(){Ir(this.state32,this.rounds),this.posOut=0,this.pos=0}update(s){Jt.default.exists(this);let{blockLen:o,state:p}=this;s=(0,Qt.toBytes)(s);let f=s.length;for(let v=0;v<f;){let g=Math.min(o-this.pos,f-v);for(let x=0;x<g;x++)p[this.pos++]^=s[v++];this.pos===o&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:s,suffix:o,pos:p,blockLen:f}=this;s[p]^=o,(o&128)!==0&&p===f-1&&this.keccak(),s[f-1]^=128,this.keccak()}writeInto(s){Jt.default.exists(this,!1),Jt.default.bytes(s),this.finish();let o=this.state,{blockLen:p}=this;for(let f=0,v=s.length;f<v;){this.posOut>=p&&this.keccak();let g=Math.min(p-this.posOut,v-f);s.set(o.subarray(this.posOut,this.posOut+g),f),this.posOut+=g,f+=g}return s}xofInto(s){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(s)}xof(s){return Jt.default.number(s),this.xofInto(new Uint8Array(s))}digestInto(s){if(Jt.default.output(s,this),this.finished)throw new Error("digest() was already called");return this.writeInto(s),this.destroy(),s}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(s){let{blockLen:o,suffix:p,outputLen:f,rounds:v,enableXOF:g}=this;return s||(s=new Zt(o,p,f,g,v)),s.state32.set(this.state32),s.pos=this.pos,s.posOut=this.posOut,s.finished=this.finished,s.rounds=v,s.suffix=p,s.outputLen=f,s.enableXOF=g,s.destroyed=this.destroyed,s}};P.Keccak=Zt;var Rt=(i,s,o)=>(0,Qt.wrapConstructor)(()=>new Zt(s,i,o));P.sha3_224=Rt(6,144,224/8);P.sha3_256=Rt(6,136,256/8);P.sha3_384=Rt(6,104,384/8);P.sha3_512=Rt(6,72,512/8);P.keccak_224=Rt(1,144,224/8);P.keccak_256=Rt(1,136,256/8);P.keccak_384=Rt(1,104,384/8);P.keccak_512=Rt(1,72,512/8);var $r=(i,s,o)=>(0,Qt.wrapConstructorWithOpts)((p={})=>new Zt(s,i,p.dkLen===void 0?o:p.dkLen,!0));P.shake128=$r(31,168,128/8);P.shake256=$r(31,136,256/8)});var Rr=Mt((T,ee)=>{"use strict";S();E();var hn=T&&T.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(T,"__esModule",{value:!0});T.crypto=T.wrapHash=T.equalsBytes=T.hexToBytes=T.bytesToUtf8=T.utf8ToBytes=T.createView=T.concatBytes=T.toHex=T.bytesToHex=T.assertBytes=T.assertBool=void 0;var Fe=hn(Ve()),an=ce(),un=Fe.default.bool;T.assertBool=un;var ln=Fe.default.bytes;T.assertBytes=ln;var re=ce();Object.defineProperty(T,"bytesToHex",{enumerable:!0,get:function(){return re.bytesToHex}});Object.defineProperty(T,"toHex",{enumerable:!0,get:function(){return re.bytesToHex}});Object.defineProperty(T,"concatBytes",{enumerable:!0,get:function(){return re.concatBytes}});Object.defineProperty(T,"createView",{enumerable:!0,get:function(){return re.createView}});Object.defineProperty(T,"utf8ToBytes",{enumerable:!0,get:function(){return re.utf8ToBytes}});function cn(i){if(!(i instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof i}`);return new TextDecoder().decode(i)}T.bytesToUtf8=cn;function dn(i){let s=i.startsWith("0x")?i.substring(2):i;return(0,an.hexToBytes)(s)}T.hexToBytes=dn;function pn(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;o++)if(i[o]!==s[o])return!1;return!0}T.equalsBytes=pn;function mn(i){return s=>(Fe.default.bytes(s),i(s))}T.wrapHash=mn;T.crypto=(()=>{let i=typeof self=="object"&&"crypto"in self?self.crypto:void 0,s=typeof ee<"u"&&typeof ee.require=="function"&&ee.require.bind(ee);return{node:s&&!i?s("crypto"):void 0,web:i}})()});var Kr=Mt(Ot=>{"use strict";S();E();Object.defineProperty(Ot,"__esModule",{value:!0});Ot.keccak512=Ot.keccak384=Ot.keccak256=Ot.keccak224=void 0;var ie=Ur(),de=Rr();Ot.keccak224=(0,de.wrapHash)(ie.keccak_224);Ot.keccak256=(()=>{let i=(0,de.wrapHash)(ie.keccak_256);return i.create=ie.keccak_256.create,i})();Ot.keccak384=(0,de.wrapHash)(ie.keccak_384);Ot.keccak512=(0,de.wrapHash)(ie.keccak_512)});var Vr=Mt((Dr,Ce)=>{S();E();(function(i,s){"use strict";function o(c,t){if(!c)throw new Error(t||"Assertion failed")}function p(c,t){c.super_=t;var r=function(){};r.prototype=t.prototype,c.prototype=new r,c.prototype.constructor=c}function f(c,t,r){if(f.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,c!==null&&((t==="le"||t==="be")&&(r=t,t=10),this._init(c||0,t||10,r||"be"))}typeof i=="object"?i.exports=f:s.BN=f,f.BN=f,f.wordSize=26;var v;try{v=si().Buffer}catch{}f.isBN=function(t){return t instanceof f?!0:t!==null&&typeof t=="object"&&t.constructor.wordSize===f.wordSize&&Array.isArray(t.words)},f.max=function(t,r){return t.cmp(r)>0?t:r},f.min=function(t,r){return t.cmp(r)<0?t:r},f.prototype._init=function(t,r,n){if(typeof t=="number")return this._initNumber(t,r,n);if(typeof t=="object")return this._initArray(t,r,n);r==="hex"&&(r=16),o(r===(r|0)&&r>=2&&r<=36),t=t.toString().replace(/\s+/g,"");var h=0;t[0]==="-"&&h++,r===16?this._parseHex(t,h):this._parseBase(t,r,h),t[0]==="-"&&(this.negative=1),this.strip(),n==="le"&&this._initArray(this.toArray(),r,n)},f.prototype._initNumber=function(t,r,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[t&67108863],this.length=1):t<4503599627370496?(this.words=[t&67108863,t/67108864&67108863],this.length=2):(o(t<9007199254740992),this.words=[t&67108863,t/67108864&67108863,1],this.length=3),n==="le"&&this._initArray(this.toArray(),r,n)},f.prototype._initArray=function(t,r,n){if(o(typeof t.length=="number"),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var h=0;h<this.length;h++)this.words[h]=0;var l,d,m=0;if(n==="be")for(h=t.length-1,l=0;h>=0;h-=3)d=t[h]|t[h-1]<<8|t[h-2]<<16,this.words[l]|=d<<m&67108863,this.words[l+1]=d>>>26-m&67108863,m+=24,m>=26&&(m-=26,l++);else if(n==="le")for(h=0,l=0;h<t.length;h+=3)d=t[h]|t[h+1]<<8|t[h+2]<<16,this.words[l]|=d<<m&67108863,this.words[l+1]=d>>>26-m&67108863,m+=24,m>=26&&(m-=26,l++);return this.strip()};function g(c,t,r){for(var n=0,h=Math.min(c.length,r),l=t;l<h;l++){var d=c.charCodeAt(l)-48;n<<=4,d>=49&&d<=54?n|=d-49+10:d>=17&&d<=22?n|=d-17+10:n|=d&15}return n}f.prototype._parseHex=function(t,r){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var h,l,d=0;for(n=t.length-6,h=0;n>=r;n-=6)l=g(t,n,n+6),this.words[h]|=l<<d&67108863,this.words[h+1]|=l>>>26-d&4194303,d+=24,d>=26&&(d-=26,h++);n+6!==r&&(l=g(t,r,n+6),this.words[h]|=l<<d&67108863,this.words[h+1]|=l>>>26-d&4194303),this.strip()};function x(c,t,r,n){for(var h=0,l=Math.min(c.length,r),d=t;d<l;d++){var m=c.charCodeAt(d)-48;h*=n,m>=49?h+=m-49+10:m>=17?h+=m-17+10:h+=m}return h}f.prototype._parseBase=function(t,r,n){this.words=[0],this.length=1;for(var h=0,l=1;l<=67108863;l*=r)h++;h--,l=l/r|0;for(var d=t.length-n,m=d%h,a=Math.min(d,d-m)+n,e=0,u=n;u<a;u+=h)e=x(t,u,u+h,r),this.imuln(l),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(m!==0){var y=1;for(e=x(t,u,t.length,r),u=0;u<m;u++)y*=r;this.imuln(y),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}},f.prototype.copy=function(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},f.prototype.clone=function(){var t=new f(null);return this.copy(t),t},f.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},f.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},f.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var L=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Tt=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],It=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(t,r){t=t||10,r=r|0||1;var n;if(t===16||t==="hex"){n="";for(var h=0,l=0,d=0;d<this.length;d++){var m=this.words[d],a=((m<<h|l)&16777215).toString(16);l=m>>>24-h&16777215,l!==0||d!==this.length-1?n=L[6-a.length]+a+n:n=a+n,h+=2,h>=26&&(h-=26,d--)}for(l!==0&&(n=l.toString(16)+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}if(t===(t|0)&&t>=2&&t<=36){var e=Tt[t],u=It[t];n="";var y=this.clone();for(y.negative=0;!y.isZero();){var w=y.modn(u).toString(t);y=y.idivn(u),y.isZero()?n=w+n:n=L[e-w.length]+w+n}for(this.isZero()&&(n="0"+n);n.length%r!==0;)n="0"+n;return this.negative!==0&&(n="-"+n),n}o(!1,"Base should be between 2 and 36")},f.prototype.toNumber=function(){var t=this.words[0];return this.length===2?t+=this.words[1]*67108864:this.length===3&&this.words[2]===1?t+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-t:t},f.prototype.toJSON=function(){return this.toString(16)},f.prototype.toBuffer=function(t,r){return o(typeof v<"u"),this.toArrayLike(v,t,r)},f.prototype.toArray=function(t,r){return this.toArrayLike(Array,t,r)},f.prototype.toArrayLike=function(t,r,n){var h=this.byteLength(),l=n||Math.max(1,h);o(h<=l,"byte array longer than desired length"),o(l>0,"Requested array length <= 0"),this.strip();var d=r==="le",m=new t(l),a,e,u=this.clone();if(d){for(e=0;!u.isZero();e++)a=u.andln(255),u.iushrn(8),m[e]=a;for(;e<l;e++)m[e]=0}else{for(e=0;e<l-h;e++)m[e]=0;for(e=0;!u.isZero();e++)a=u.andln(255),u.iushrn(8),m[l-e-1]=a}return m},Math.clz32?f.prototype._countBits=function(t){return 32-Math.clz32(t)}:f.prototype._countBits=function(t){var r=t,n=0;return r>=4096&&(n+=13,r>>>=13),r>=64&&(n+=7,r>>>=7),r>=8&&(n+=4,r>>>=4),r>=2&&(n+=2,r>>>=2),n+r},f.prototype._zeroBits=function(t){if(t===0)return 26;var r=t,n=0;return(r&8191)===0&&(n+=13,r>>>=13),(r&127)===0&&(n+=7,r>>>=7),(r&15)===0&&(n+=4,r>>>=4),(r&3)===0&&(n+=2,r>>>=2),(r&1)===0&&n++,n},f.prototype.bitLength=function(){var t=this.words[this.length-1],r=this._countBits(t);return(this.length-1)*26+r};function ve(c){for(var t=new Array(c.bitLength()),r=0;r<t.length;r++){var n=r/26|0,h=r%26;t[r]=(c.words[n]&1<<h)>>>h}return t}f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,r=0;r<this.length;r++){var n=this._zeroBits(this.words[r]);if(t+=n,n!==26)break}return t},f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},f.prototype.toTwos=function(t){return this.negative!==0?this.abs().inotn(t).iaddn(1):this.clone()},f.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},f.prototype.isNeg=function(){return this.negative!==0},f.prototype.neg=function(){return this.clone().ineg()},f.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},f.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]|t.words[r];return this.strip()},f.prototype.ior=function(t){return o((this.negative|t.negative)===0),this.iuor(t)},f.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},f.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},f.prototype.iuand=function(t){var r;this.length>t.length?r=t:r=this;for(var n=0;n<r.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=r.length,this.strip()},f.prototype.iand=function(t){return o((this.negative|t.negative)===0),this.iuand(t)},f.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},f.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},f.prototype.iuxor=function(t){var r,n;this.length>t.length?(r=this,n=t):(r=t,n=this);for(var h=0;h<n.length;h++)this.words[h]=r.words[h]^n.words[h];if(this!==r)for(;h<r.length;h++)this.words[h]=r.words[h];return this.length=r.length,this.strip()},f.prototype.ixor=function(t){return o((this.negative|t.negative)===0),this.iuxor(t)},f.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},f.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},f.prototype.inotn=function(t){o(typeof t=="number"&&t>=0);var r=Math.ceil(t/26)|0,n=t%26;this._expand(r),n>0&&r--;for(var h=0;h<r;h++)this.words[h]=~this.words[h]&67108863;return n>0&&(this.words[h]=~this.words[h]&67108863>>26-n),this.strip()},f.prototype.notn=function(t){return this.clone().inotn(t)},f.prototype.setn=function(t,r){o(typeof t=="number"&&t>=0);var n=t/26|0,h=t%26;return this._expand(n+1),r?this.words[n]=this.words[n]|1<<h:this.words[n]=this.words[n]&~(1<<h),this.strip()},f.prototype.iadd=function(t){var r;if(this.negative!==0&&t.negative===0)return this.negative=0,r=this.isub(t),this.negative^=1,this._normSign();if(this.negative===0&&t.negative!==0)return t.negative=0,r=this.isub(t),t.negative=1,r._normSign();var n,h;this.length>t.length?(n=this,h=t):(n=t,h=this);for(var l=0,d=0;d<h.length;d++)r=(n.words[d]|0)+(h.words[d]|0)+l,this.words[d]=r&67108863,l=r>>>26;for(;l!==0&&d<n.length;d++)r=(n.words[d]|0)+l,this.words[d]=r&67108863,l=r>>>26;if(this.length=n.length,l!==0)this.words[this.length]=l,this.length++;else if(n!==this)for(;d<n.length;d++)this.words[d]=n.words[d];return this},f.prototype.add=function(t){var r;return t.negative!==0&&this.negative===0?(t.negative=0,r=this.sub(t),t.negative^=1,r):t.negative===0&&this.negative!==0?(this.negative=0,r=t.sub(this),this.negative=1,r):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},f.prototype.isub=function(t){if(t.negative!==0){t.negative=0;var r=this.iadd(t);return t.negative=1,r._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n=this.cmp(t);if(n===0)return this.negative=0,this.length=1,this.words[0]=0,this;var h,l;n>0?(h=this,l=t):(h=t,l=this);for(var d=0,m=0;m<l.length;m++)r=(h.words[m]|0)-(l.words[m]|0)+d,d=r>>26,this.words[m]=r&67108863;for(;d!==0&&m<h.length;m++)r=(h.words[m]|0)+d,d=r>>26,this.words[m]=r&67108863;if(d===0&&m<h.length&&h!==this)for(;m<h.length;m++)this.words[m]=h.words[m];return this.length=Math.max(this.length,m),h!==this&&(this.negative=1),this.strip()},f.prototype.sub=function(t){return this.clone().isub(t)};function oe(c,t,r){r.negative=t.negative^c.negative;var n=c.length+t.length|0;r.length=n,n=n-1|0;var h=c.words[0]|0,l=t.words[0]|0,d=h*l,m=d&67108863,a=d/67108864|0;r.words[0]=m;for(var e=1;e<n;e++){for(var u=a>>>26,y=a&67108863,w=Math.min(e,t.length-1),M=Math.max(0,e-c.length+1);M<=w;M++){var b=e-M|0;h=c.words[b]|0,l=t.words[M]|0,d=h*l+y,u+=d/67108864|0,y=d&67108863}r.words[e]=y|0,a=u|0}return a!==0?r.words[e]=a|0:r.length--,r.strip()}var Vt=function(t,r,n){var h=t.words,l=r.words,d=n.words,m=0,a,e,u,y=h[0]|0,w=y&8191,M=y>>>13,b=h[1]|0,k=b&8191,A=b>>>13,$t=h[2]|0,O=$t&8191,H=$t>>>13,ir=h[3]|0,N=ir&8191,I=ir>>>13,nr=h[4]|0,$=nr&8191,U=nr>>>13,or=h[5]|0,R=or&8191,K=or>>>13,sr=h[6]|0,D=sr&8191,V=sr>>>13,fr=h[7]|0,j=fr&8191,Z=fr>>>13,hr=h[8]|0,z=hr&8191,W=hr>>>13,ar=h[9]|0,F=ar&8191,C=ar>>>13,ur=l[0]|0,J=ur&8191,X=ur>>>13,lr=l[1]|0,G=lr&8191,Y=lr>>>13,cr=l[2]|0,Q=cr&8191,tt=cr>>>13,dr=l[3]|0,et=dr&8191,rt=dr>>>13,pr=l[4]|0,it=pr&8191,nt=pr>>>13,mr=l[5]|0,ot=mr&8191,st=mr>>>13,vr=l[6]|0,ft=vr&8191,ht=vr>>>13,gr=l[7]|0,at=gr&8191,ut=gr>>>13,yr=l[8]|0,lt=yr&8191,ct=yr>>>13,wr=l[9]|0,dt=wr&8191,pt=wr>>>13;n.negative=t.negative^r.negative,n.length=19,a=Math.imul(w,J),e=Math.imul(w,X),e=e+Math.imul(M,J)|0,u=Math.imul(M,X);var we=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(we>>>26)|0,we&=67108863,a=Math.imul(k,J),e=Math.imul(k,X),e=e+Math.imul(A,J)|0,u=Math.imul(A,X),a=a+Math.imul(w,G)|0,e=e+Math.imul(w,Y)|0,e=e+Math.imul(M,G)|0,u=u+Math.imul(M,Y)|0;var Me=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Me>>>26)|0,Me&=67108863,a=Math.imul(O,J),e=Math.imul(O,X),e=e+Math.imul(H,J)|0,u=Math.imul(H,X),a=a+Math.imul(k,G)|0,e=e+Math.imul(k,Y)|0,e=e+Math.imul(A,G)|0,u=u+Math.imul(A,Y)|0,a=a+Math.imul(w,Q)|0,e=e+Math.imul(w,tt)|0,e=e+Math.imul(M,Q)|0,u=u+Math.imul(M,tt)|0;var xe=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(xe>>>26)|0,xe&=67108863,a=Math.imul(N,J),e=Math.imul(N,X),e=e+Math.imul(I,J)|0,u=Math.imul(I,X),a=a+Math.imul(O,G)|0,e=e+Math.imul(O,Y)|0,e=e+Math.imul(H,G)|0,u=u+Math.imul(H,Y)|0,a=a+Math.imul(k,Q)|0,e=e+Math.imul(k,tt)|0,e=e+Math.imul(A,Q)|0,u=u+Math.imul(A,tt)|0,a=a+Math.imul(w,et)|0,e=e+Math.imul(w,rt)|0,e=e+Math.imul(M,et)|0,u=u+Math.imul(M,rt)|0;var be=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(be>>>26)|0,be&=67108863,a=Math.imul($,J),e=Math.imul($,X),e=e+Math.imul(U,J)|0,u=Math.imul(U,X),a=a+Math.imul(N,G)|0,e=e+Math.imul(N,Y)|0,e=e+Math.imul(I,G)|0,u=u+Math.imul(I,Y)|0,a=a+Math.imul(O,Q)|0,e=e+Math.imul(O,tt)|0,e=e+Math.imul(H,Q)|0,u=u+Math.imul(H,tt)|0,a=a+Math.imul(k,et)|0,e=e+Math.imul(k,rt)|0,e=e+Math.imul(A,et)|0,u=u+Math.imul(A,rt)|0,a=a+Math.imul(w,it)|0,e=e+Math.imul(w,nt)|0,e=e+Math.imul(M,it)|0,u=u+Math.imul(M,nt)|0;var _e=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(_e>>>26)|0,_e&=67108863,a=Math.imul(R,J),e=Math.imul(R,X),e=e+Math.imul(K,J)|0,u=Math.imul(K,X),a=a+Math.imul($,G)|0,e=e+Math.imul($,Y)|0,e=e+Math.imul(U,G)|0,u=u+Math.imul(U,Y)|0,a=a+Math.imul(N,Q)|0,e=e+Math.imul(N,tt)|0,e=e+Math.imul(I,Q)|0,u=u+Math.imul(I,tt)|0,a=a+Math.imul(O,et)|0,e=e+Math.imul(O,rt)|0,e=e+Math.imul(H,et)|0,u=u+Math.imul(H,rt)|0,a=a+Math.imul(k,it)|0,e=e+Math.imul(k,nt)|0,e=e+Math.imul(A,it)|0,u=u+Math.imul(A,nt)|0,a=a+Math.imul(w,ot)|0,e=e+Math.imul(w,st)|0,e=e+Math.imul(M,ot)|0,u=u+Math.imul(M,st)|0;var Be=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Be>>>26)|0,Be&=67108863,a=Math.imul(D,J),e=Math.imul(D,X),e=e+Math.imul(V,J)|0,u=Math.imul(V,X),a=a+Math.imul(R,G)|0,e=e+Math.imul(R,Y)|0,e=e+Math.imul(K,G)|0,u=u+Math.imul(K,Y)|0,a=a+Math.imul($,Q)|0,e=e+Math.imul($,tt)|0,e=e+Math.imul(U,Q)|0,u=u+Math.imul(U,tt)|0,a=a+Math.imul(N,et)|0,e=e+Math.imul(N,rt)|0,e=e+Math.imul(I,et)|0,u=u+Math.imul(I,rt)|0,a=a+Math.imul(O,it)|0,e=e+Math.imul(O,nt)|0,e=e+Math.imul(H,it)|0,u=u+Math.imul(H,nt)|0,a=a+Math.imul(k,ot)|0,e=e+Math.imul(k,st)|0,e=e+Math.imul(A,ot)|0,u=u+Math.imul(A,st)|0,a=a+Math.imul(w,ft)|0,e=e+Math.imul(w,ht)|0,e=e+Math.imul(M,ft)|0,u=u+Math.imul(M,ht)|0;var ke=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(ke>>>26)|0,ke&=67108863,a=Math.imul(j,J),e=Math.imul(j,X),e=e+Math.imul(Z,J)|0,u=Math.imul(Z,X),a=a+Math.imul(D,G)|0,e=e+Math.imul(D,Y)|0,e=e+Math.imul(V,G)|0,u=u+Math.imul(V,Y)|0,a=a+Math.imul(R,Q)|0,e=e+Math.imul(R,tt)|0,e=e+Math.imul(K,Q)|0,u=u+Math.imul(K,tt)|0,a=a+Math.imul($,et)|0,e=e+Math.imul($,rt)|0,e=e+Math.imul(U,et)|0,u=u+Math.imul(U,rt)|0,a=a+Math.imul(N,it)|0,e=e+Math.imul(N,nt)|0,e=e+Math.imul(I,it)|0,u=u+Math.imul(I,nt)|0,a=a+Math.imul(O,ot)|0,e=e+Math.imul(O,st)|0,e=e+Math.imul(H,ot)|0,u=u+Math.imul(H,st)|0,a=a+Math.imul(k,ft)|0,e=e+Math.imul(k,ht)|0,e=e+Math.imul(A,ft)|0,u=u+Math.imul(A,ht)|0,a=a+Math.imul(w,at)|0,e=e+Math.imul(w,ut)|0,e=e+Math.imul(M,at)|0,u=u+Math.imul(M,ut)|0;var Se=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Se>>>26)|0,Se&=67108863,a=Math.imul(z,J),e=Math.imul(z,X),e=e+Math.imul(W,J)|0,u=Math.imul(W,X),a=a+Math.imul(j,G)|0,e=e+Math.imul(j,Y)|0,e=e+Math.imul(Z,G)|0,u=u+Math.imul(Z,Y)|0,a=a+Math.imul(D,Q)|0,e=e+Math.imul(D,tt)|0,e=e+Math.imul(V,Q)|0,u=u+Math.imul(V,tt)|0,a=a+Math.imul(R,et)|0,e=e+Math.imul(R,rt)|0,e=e+Math.imul(K,et)|0,u=u+Math.imul(K,rt)|0,a=a+Math.imul($,it)|0,e=e+Math.imul($,nt)|0,e=e+Math.imul(U,it)|0,u=u+Math.imul(U,nt)|0,a=a+Math.imul(N,ot)|0,e=e+Math.imul(N,st)|0,e=e+Math.imul(I,ot)|0,u=u+Math.imul(I,st)|0,a=a+Math.imul(O,ft)|0,e=e+Math.imul(O,ht)|0,e=e+Math.imul(H,ft)|0,u=u+Math.imul(H,ht)|0,a=a+Math.imul(k,at)|0,e=e+Math.imul(k,ut)|0,e=e+Math.imul(A,at)|0,u=u+Math.imul(A,ut)|0,a=a+Math.imul(w,lt)|0,e=e+Math.imul(w,ct)|0,e=e+Math.imul(M,lt)|0,u=u+Math.imul(M,ct)|0;var Ee=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,a=Math.imul(F,J),e=Math.imul(F,X),e=e+Math.imul(C,J)|0,u=Math.imul(C,X),a=a+Math.imul(z,G)|0,e=e+Math.imul(z,Y)|0,e=e+Math.imul(W,G)|0,u=u+Math.imul(W,Y)|0,a=a+Math.imul(j,Q)|0,e=e+Math.imul(j,tt)|0,e=e+Math.imul(Z,Q)|0,u=u+Math.imul(Z,tt)|0,a=a+Math.imul(D,et)|0,e=e+Math.imul(D,rt)|0,e=e+Math.imul(V,et)|0,u=u+Math.imul(V,rt)|0,a=a+Math.imul(R,it)|0,e=e+Math.imul(R,nt)|0,e=e+Math.imul(K,it)|0,u=u+Math.imul(K,nt)|0,a=a+Math.imul($,ot)|0,e=e+Math.imul($,st)|0,e=e+Math.imul(U,ot)|0,u=u+Math.imul(U,st)|0,a=a+Math.imul(N,ft)|0,e=e+Math.imul(N,ht)|0,e=e+Math.imul(I,ft)|0,u=u+Math.imul(I,ht)|0,a=a+Math.imul(O,at)|0,e=e+Math.imul(O,ut)|0,e=e+Math.imul(H,at)|0,u=u+Math.imul(H,ut)|0,a=a+Math.imul(k,lt)|0,e=e+Math.imul(k,ct)|0,e=e+Math.imul(A,lt)|0,u=u+Math.imul(A,ct)|0,a=a+Math.imul(w,dt)|0,e=e+Math.imul(w,pt)|0,e=e+Math.imul(M,dt)|0,u=u+Math.imul(M,pt)|0;var Te=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Te>>>26)|0,Te&=67108863,a=Math.imul(F,G),e=Math.imul(F,Y),e=e+Math.imul(C,G)|0,u=Math.imul(C,Y),a=a+Math.imul(z,Q)|0,e=e+Math.imul(z,tt)|0,e=e+Math.imul(W,Q)|0,u=u+Math.imul(W,tt)|0,a=a+Math.imul(j,et)|0,e=e+Math.imul(j,rt)|0,e=e+Math.imul(Z,et)|0,u=u+Math.imul(Z,rt)|0,a=a+Math.imul(D,it)|0,e=e+Math.imul(D,nt)|0,e=e+Math.imul(V,it)|0,u=u+Math.imul(V,nt)|0,a=a+Math.imul(R,ot)|0,e=e+Math.imul(R,st)|0,e=e+Math.imul(K,ot)|0,u=u+Math.imul(K,st)|0,a=a+Math.imul($,ft)|0,e=e+Math.imul($,ht)|0,e=e+Math.imul(U,ft)|0,u=u+Math.imul(U,ht)|0,a=a+Math.imul(N,at)|0,e=e+Math.imul(N,ut)|0,e=e+Math.imul(I,at)|0,u=u+Math.imul(I,ut)|0,a=a+Math.imul(O,lt)|0,e=e+Math.imul(O,ct)|0,e=e+Math.imul(H,lt)|0,u=u+Math.imul(H,ct)|0,a=a+Math.imul(k,dt)|0,e=e+Math.imul(k,pt)|0,e=e+Math.imul(A,dt)|0,u=u+Math.imul(A,pt)|0;var Ae=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,a=Math.imul(F,Q),e=Math.imul(F,tt),e=e+Math.imul(C,Q)|0,u=Math.imul(C,tt),a=a+Math.imul(z,et)|0,e=e+Math.imul(z,rt)|0,e=e+Math.imul(W,et)|0,u=u+Math.imul(W,rt)|0,a=a+Math.imul(j,it)|0,e=e+Math.imul(j,nt)|0,e=e+Math.imul(Z,it)|0,u=u+Math.imul(Z,nt)|0,a=a+Math.imul(D,ot)|0,e=e+Math.imul(D,st)|0,e=e+Math.imul(V,ot)|0,u=u+Math.imul(V,st)|0,a=a+Math.imul(R,ft)|0,e=e+Math.imul(R,ht)|0,e=e+Math.imul(K,ft)|0,u=u+Math.imul(K,ht)|0,a=a+Math.imul($,at)|0,e=e+Math.imul($,ut)|0,e=e+Math.imul(U,at)|0,u=u+Math.imul(U,ut)|0,a=a+Math.imul(N,lt)|0,e=e+Math.imul(N,ct)|0,e=e+Math.imul(I,lt)|0,u=u+Math.imul(I,ct)|0,a=a+Math.imul(O,dt)|0,e=e+Math.imul(O,pt)|0,e=e+Math.imul(H,dt)|0,u=u+Math.imul(H,pt)|0;var Oe=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,a=Math.imul(F,et),e=Math.imul(F,rt),e=e+Math.imul(C,et)|0,u=Math.imul(C,rt),a=a+Math.imul(z,it)|0,e=e+Math.imul(z,nt)|0,e=e+Math.imul(W,it)|0,u=u+Math.imul(W,nt)|0,a=a+Math.imul(j,ot)|0,e=e+Math.imul(j,st)|0,e=e+Math.imul(Z,ot)|0,u=u+Math.imul(Z,st)|0,a=a+Math.imul(D,ft)|0,e=e+Math.imul(D,ht)|0,e=e+Math.imul(V,ft)|0,u=u+Math.imul(V,ht)|0,a=a+Math.imul(R,at)|0,e=e+Math.imul(R,ut)|0,e=e+Math.imul(K,at)|0,u=u+Math.imul(K,ut)|0,a=a+Math.imul($,lt)|0,e=e+Math.imul($,ct)|0,e=e+Math.imul(U,lt)|0,u=u+Math.imul(U,ct)|0,a=a+Math.imul(N,dt)|0,e=e+Math.imul(N,pt)|0,e=e+Math.imul(I,dt)|0,u=u+Math.imul(I,pt)|0;var Pe=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,a=Math.imul(F,it),e=Math.imul(F,nt),e=e+Math.imul(C,it)|0,u=Math.imul(C,nt),a=a+Math.imul(z,ot)|0,e=e+Math.imul(z,st)|0,e=e+Math.imul(W,ot)|0,u=u+Math.imul(W,st)|0,a=a+Math.imul(j,ft)|0,e=e+Math.imul(j,ht)|0,e=e+Math.imul(Z,ft)|0,u=u+Math.imul(Z,ht)|0,a=a+Math.imul(D,at)|0,e=e+Math.imul(D,ut)|0,e=e+Math.imul(V,at)|0,u=u+Math.imul(V,ut)|0,a=a+Math.imul(R,lt)|0,e=e+Math.imul(R,ct)|0,e=e+Math.imul(K,lt)|0,u=u+Math.imul(K,ct)|0,a=a+Math.imul($,dt)|0,e=e+Math.imul($,pt)|0,e=e+Math.imul(U,dt)|0,u=u+Math.imul(U,pt)|0;var Le=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Le>>>26)|0,Le&=67108863,a=Math.imul(F,ot),e=Math.imul(F,st),e=e+Math.imul(C,ot)|0,u=Math.imul(C,st),a=a+Math.imul(z,ft)|0,e=e+Math.imul(z,ht)|0,e=e+Math.imul(W,ft)|0,u=u+Math.imul(W,ht)|0,a=a+Math.imul(j,at)|0,e=e+Math.imul(j,ut)|0,e=e+Math.imul(Z,at)|0,u=u+Math.imul(Z,ut)|0,a=a+Math.imul(D,lt)|0,e=e+Math.imul(D,ct)|0,e=e+Math.imul(V,lt)|0,u=u+Math.imul(V,ct)|0,a=a+Math.imul(R,dt)|0,e=e+Math.imul(R,pt)|0,e=e+Math.imul(K,dt)|0,u=u+Math.imul(K,pt)|0;var He=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(He>>>26)|0,He&=67108863,a=Math.imul(F,ft),e=Math.imul(F,ht),e=e+Math.imul(C,ft)|0,u=Math.imul(C,ht),a=a+Math.imul(z,at)|0,e=e+Math.imul(z,ut)|0,e=e+Math.imul(W,at)|0,u=u+Math.imul(W,ut)|0,a=a+Math.imul(j,lt)|0,e=e+Math.imul(j,ct)|0,e=e+Math.imul(Z,lt)|0,u=u+Math.imul(Z,ct)|0,a=a+Math.imul(D,dt)|0,e=e+Math.imul(D,pt)|0,e=e+Math.imul(V,dt)|0,u=u+Math.imul(V,pt)|0;var qe=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(qe>>>26)|0,qe&=67108863,a=Math.imul(F,at),e=Math.imul(F,ut),e=e+Math.imul(C,at)|0,u=Math.imul(C,ut),a=a+Math.imul(z,lt)|0,e=e+Math.imul(z,ct)|0,e=e+Math.imul(W,lt)|0,u=u+Math.imul(W,ct)|0,a=a+Math.imul(j,dt)|0,e=e+Math.imul(j,pt)|0,e=e+Math.imul(Z,dt)|0,u=u+Math.imul(Z,pt)|0;var Ne=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,a=Math.imul(F,lt),e=Math.imul(F,ct),e=e+Math.imul(C,lt)|0,u=Math.imul(C,ct),a=a+Math.imul(z,dt)|0,e=e+Math.imul(z,pt)|0,e=e+Math.imul(W,dt)|0,u=u+Math.imul(W,pt)|0;var Ie=(m+a|0)+((e&8191)<<13)|0;m=(u+(e>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,a=Math.imul(F,dt),e=Math.imul(F,pt),e=e+Math.imul(C,dt)|0,u=Math.imul(C,pt);var $e=(m+a|0)+((e&8191)<<13)|0;return m=(u+(e>>>13)|0)+($e>>>26)|0,$e&=67108863,d[0]=we,d[1]=Me,d[2]=xe,d[3]=be,d[4]=_e,d[5]=Be,d[6]=ke,d[7]=Se,d[8]=Ee,d[9]=Te,d[10]=Ae,d[11]=Oe,d[12]=Pe,d[13]=Le,d[14]=He,d[15]=qe,d[16]=Ne,d[17]=Ie,d[18]=$e,m!==0&&(d[19]=m,n.length++),n};Math.imul||(Vt=oe);function oi(c,t,r){r.negative=t.negative^c.negative,r.length=c.length+t.length;for(var n=0,h=0,l=0;l<r.length-1;l++){var d=h;h=0;for(var m=n&67108863,a=Math.min(l,t.length-1),e=Math.max(0,l-c.length+1);e<=a;e++){var u=l-e,y=c.words[u]|0,w=t.words[e]|0,M=y*w,b=M&67108863;d=d+(M/67108864|0)|0,b=b+m|0,m=b&67108863,d=d+(b>>>26)|0,h+=d>>>26,d&=67108863}r.words[l]=m,n=d,d=h}return n!==0?r.words[l]=n:r.length--,r.strip()}function tr(c,t,r){var n=new St;return n.mulp(c,t,r)}f.prototype.mulTo=function(t,r){var n,h=this.length+t.length;return this.length===10&&t.length===10?n=Vt(this,t,r):h<63?n=oe(this,t,r):h<1024?n=oi(this,t,r):n=tr(this,t,r),n};function St(c,t){this.x=c,this.y=t}St.prototype.makeRBT=function(t){for(var r=new Array(t),n=f.prototype._countBits(t)-1,h=0;h<t;h++)r[h]=this.revBin(h,n,t);return r},St.prototype.revBin=function(t,r,n){if(t===0||t===n-1)return t;for(var h=0,l=0;l<r;l++)h|=(t&1)<<r-l-1,t>>=1;return h},St.prototype.permute=function(t,r,n,h,l,d){for(var m=0;m<d;m++)h[m]=r[t[m]],l[m]=n[t[m]]},St.prototype.transform=function(t,r,n,h,l,d){this.permute(d,t,r,n,h,l);for(var m=1;m<l;m<<=1)for(var a=m<<1,e=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),y=0;y<l;y+=a)for(var w=e,M=u,b=0;b<m;b++){var k=n[y+b],A=h[y+b],$t=n[y+b+m],O=h[y+b+m],H=w*$t-M*O;O=w*O+M*$t,$t=H,n[y+b]=k+$t,h[y+b]=A+O,n[y+b+m]=k-$t,h[y+b+m]=A-O,b!==a&&(H=e*w-u*M,M=e*M+u*w,w=H)}},St.prototype.guessLen13b=function(t,r){var n=Math.max(r,t)|1,h=n&1,l=0;for(n=n/2|0;n;n=n>>>1)l++;return 1<<l+1+h},St.prototype.conjugate=function(t,r,n){if(!(n<=1))for(var h=0;h<n/2;h++){var l=t[h];t[h]=t[n-h-1],t[n-h-1]=l,l=r[h],r[h]=-r[n-h-1],r[n-h-1]=-l}},St.prototype.normalize13b=function(t,r){for(var n=0,h=0;h<r/2;h++){var l=Math.round(t[2*h+1]/r)*8192+Math.round(t[2*h]/r)+n;t[h]=l&67108863,l<67108864?n=0:n=l/67108864|0}return t},St.prototype.convert13b=function(t,r,n,h){for(var l=0,d=0;d<r;d++)l=l+(t[d]|0),n[2*d]=l&8191,l=l>>>13,n[2*d+1]=l&8191,l=l>>>13;for(d=2*r;d<h;++d)n[d]=0;o(l===0),o((l&-8192)===0)},St.prototype.stub=function(t){for(var r=new Array(t),n=0;n<t;n++)r[n]=0;return r},St.prototype.mulp=function(t,r,n){var h=2*this.guessLen13b(t.length,r.length),l=this.makeRBT(h),d=this.stub(h),m=new Array(h),a=new Array(h),e=new Array(h),u=new Array(h),y=new Array(h),w=new Array(h),M=n.words;M.length=h,this.convert13b(t.words,t.length,m,h),this.convert13b(r.words,r.length,u,h),this.transform(m,d,a,e,h,l),this.transform(u,d,y,w,h,l);for(var b=0;b<h;b++){var k=a[b]*y[b]-e[b]*w[b];e[b]=a[b]*w[b]+e[b]*y[b],a[b]=k}return this.conjugate(a,e,h),this.transform(a,e,M,d,h,l),this.conjugate(M,d,h),this.normalize13b(M,h),n.negative=t.negative^r.negative,n.length=t.length+r.length,n.strip()},f.prototype.mul=function(t){var r=new f(null);return r.words=new Array(this.length+t.length),this.mulTo(t,r)},f.prototype.mulf=function(t){var r=new f(null);return r.words=new Array(this.length+t.length),tr(this,t,r)},f.prototype.imul=function(t){return this.clone().mulTo(t,this)},f.prototype.imuln=function(t){o(typeof t=="number"),o(t<67108864);for(var r=0,n=0;n<this.length;n++){var h=(this.words[n]|0)*t,l=(h&67108863)+(r&67108863);r>>=26,r+=h/67108864|0,r+=l>>>26,this.words[n]=l&67108863}return r!==0&&(this.words[n]=r,this.length++),this},f.prototype.muln=function(t){return this.clone().imuln(t)},f.prototype.sqr=function(){return this.mul(this)},f.prototype.isqr=function(){return this.imul(this.clone())},f.prototype.pow=function(t){var r=ve(t);if(r.length===0)return new f(1);for(var n=this,h=0;h<r.length&&r[h]===0;h++,n=n.sqr());if(++h<r.length)for(var l=n.sqr();h<r.length;h++,l=l.sqr())r[h]!==0&&(n=n.mul(l));return n},f.prototype.iushln=function(t){o(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,h=67108863>>>26-r<<26-r,l;if(r!==0){var d=0;for(l=0;l<this.length;l++){var m=this.words[l]&h,a=(this.words[l]|0)-m<<r;this.words[l]=a|d,d=m>>>26-r}d&&(this.words[l]=d,this.length++)}if(n!==0){for(l=this.length-1;l>=0;l--)this.words[l+n]=this.words[l];for(l=0;l<n;l++)this.words[l]=0;this.length+=n}return this.strip()},f.prototype.ishln=function(t){return o(this.negative===0),this.iushln(t)},f.prototype.iushrn=function(t,r,n){o(typeof t=="number"&&t>=0);var h;r?h=(r-r%26)/26:h=0;var l=t%26,d=Math.min((t-l)/26,this.length),m=67108863^67108863>>>l<<l,a=n;if(h-=d,h=Math.max(0,h),a){for(var e=0;e<d;e++)a.words[e]=this.words[e];a.length=d}if(d!==0)if(this.length>d)for(this.length-=d,e=0;e<this.length;e++)this.words[e]=this.words[e+d];else this.words[0]=0,this.length=1;var u=0;for(e=this.length-1;e>=0&&(u!==0||e>=h);e--){var y=this.words[e]|0;this.words[e]=u<<26-l|y>>>l,u=y&m}return a&&u!==0&&(a.words[a.length++]=u),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},f.prototype.ishrn=function(t,r,n){return o(this.negative===0),this.iushrn(t,r,n)},f.prototype.shln=function(t){return this.clone().ishln(t)},f.prototype.ushln=function(t){return this.clone().iushln(t)},f.prototype.shrn=function(t){return this.clone().ishrn(t)},f.prototype.ushrn=function(t){return this.clone().iushrn(t)},f.prototype.testn=function(t){o(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26,h=1<<r;if(this.length<=n)return!1;var l=this.words[n];return!!(l&h)},f.prototype.imaskn=function(t){o(typeof t=="number"&&t>=0);var r=t%26,n=(t-r)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=n)return this;if(r!==0&&n++,this.length=Math.min(n,this.length),r!==0){var h=67108863^67108863>>>r<<r;this.words[this.length-1]&=h}return this.strip()},f.prototype.maskn=function(t){return this.clone().imaskn(t)},f.prototype.iaddn=function(t){return o(typeof t=="number"),o(t<67108864),t<0?this.isubn(-t):this.negative!==0?this.length===1&&(this.words[0]|0)<t?(this.words[0]=t-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},f.prototype._iaddn=function(t){this.words[0]+=t;for(var r=0;r<this.length&&this.words[r]>=67108864;r++)this.words[r]-=67108864,r===this.length-1?this.words[r+1]=1:this.words[r+1]++;return this.length=Math.max(this.length,r+1),this},f.prototype.isubn=function(t){if(o(typeof t=="number"),o(t<67108864),t<0)return this.iaddn(-t);if(this.negative!==0)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var r=0;r<this.length&&this.words[r]<0;r++)this.words[r]+=67108864,this.words[r+1]-=1;return this.strip()},f.prototype.addn=function(t){return this.clone().iaddn(t)},f.prototype.subn=function(t){return this.clone().isubn(t)},f.prototype.iabs=function(){return this.negative=0,this},f.prototype.abs=function(){return this.clone().iabs()},f.prototype._ishlnsubmul=function(t,r,n){var h=t.length+n,l;this._expand(h);var d,m=0;for(l=0;l<t.length;l++){d=(this.words[l+n]|0)+m;var a=(t.words[l]|0)*r;d-=a&67108863,m=(d>>26)-(a/67108864|0),this.words[l+n]=d&67108863}for(;l<this.length-n;l++)d=(this.words[l+n]|0)+m,m=d>>26,this.words[l+n]=d&67108863;if(m===0)return this.strip();for(o(m===-1),m=0,l=0;l<this.length;l++)d=-(this.words[l]|0)+m,m=d>>26,this.words[l]=d&67108863;return this.negative=1,this.strip()},f.prototype._wordDiv=function(t,r){var n=this.length-t.length,h=this.clone(),l=t,d=l.words[l.length-1]|0,m=this._countBits(d);n=26-m,n!==0&&(l=l.ushln(n),h.iushln(n),d=l.words[l.length-1]|0);var a=h.length-l.length,e;if(r!=="mod"){e=new f(null),e.length=a+1,e.words=new Array(e.length);for(var u=0;u<e.length;u++)e.words[u]=0}var y=h.clone()._ishlnsubmul(l,1,a);y.negative===0&&(h=y,e&&(e.words[a]=1));for(var w=a-1;w>=0;w--){var M=(h.words[l.length+w]|0)*67108864+(h.words[l.length+w-1]|0);for(M=Math.min(M/d|0,67108863),h._ishlnsubmul(l,M,w);h.negative!==0;)M--,h.negative=0,h._ishlnsubmul(l,1,w),h.isZero()||(h.negative^=1);e&&(e.words[w]=M)}return e&&e.strip(),h.strip(),r!=="div"&&n!==0&&h.iushrn(n),{div:e||null,mod:h}},f.prototype.divmod=function(t,r,n){if(o(!t.isZero()),this.isZero())return{div:new f(0),mod:new f(0)};var h,l,d;return this.negative!==0&&t.negative===0?(d=this.neg().divmod(t,r),r!=="mod"&&(h=d.div.neg()),r!=="div"&&(l=d.mod.neg(),n&&l.negative!==0&&l.iadd(t)),{div:h,mod:l}):this.negative===0&&t.negative!==0?(d=this.divmod(t.neg(),r),r!=="mod"&&(h=d.div.neg()),{div:h,mod:d.mod}):(this.negative&t.negative)!==0?(d=this.neg().divmod(t.neg(),r),r!=="div"&&(l=d.mod.neg(),n&&l.negative!==0&&l.isub(t)),{div:d.div,mod:l}):t.length>this.length||this.cmp(t)<0?{div:new f(0),mod:this}:t.length===1?r==="div"?{div:this.divn(t.words[0]),mod:null}:r==="mod"?{div:null,mod:new f(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new f(this.modn(t.words[0]))}:this._wordDiv(t,r)},f.prototype.div=function(t){return this.divmod(t,"div",!1).div},f.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},f.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},f.prototype.divRound=function(t){var r=this.divmod(t);if(r.mod.isZero())return r.div;var n=r.div.negative!==0?r.mod.isub(t):r.mod,h=t.ushrn(1),l=t.andln(1),d=n.cmp(h);return d<0||l===1&&d===0?r.div:r.div.negative!==0?r.div.isubn(1):r.div.iaddn(1)},f.prototype.modn=function(t){o(t<=67108863);for(var r=(1<<26)%t,n=0,h=this.length-1;h>=0;h--)n=(r*n+(this.words[h]|0))%t;return n},f.prototype.idivn=function(t){o(t<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var h=(this.words[n]|0)+r*67108864;this.words[n]=h/t|0,r=h%t}return this.strip()},f.prototype.divn=function(t){return this.clone().idivn(t)},f.prototype.egcd=function(t){o(t.negative===0),o(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new f(1),l=new f(0),d=new f(0),m=new f(1),a=0;r.isEven()&&n.isEven();)r.iushrn(1),n.iushrn(1),++a;for(var e=n.clone(),u=r.clone();!r.isZero();){for(var y=0,w=1;(r.words[0]&w)===0&&y<26;++y,w<<=1);if(y>0)for(r.iushrn(y);y-- >0;)(h.isOdd()||l.isOdd())&&(h.iadd(e),l.isub(u)),h.iushrn(1),l.iushrn(1);for(var M=0,b=1;(n.words[0]&b)===0&&M<26;++M,b<<=1);if(M>0)for(n.iushrn(M);M-- >0;)(d.isOdd()||m.isOdd())&&(d.iadd(e),m.isub(u)),d.iushrn(1),m.iushrn(1);r.cmp(n)>=0?(r.isub(n),h.isub(d),l.isub(m)):(n.isub(r),d.isub(h),m.isub(l))}return{a:d,b:m,gcd:n.iushln(a)}},f.prototype._invmp=function(t){o(t.negative===0),o(!t.isZero());var r=this,n=t.clone();r.negative!==0?r=r.umod(t):r=r.clone();for(var h=new f(1),l=new f(0),d=n.clone();r.cmpn(1)>0&&n.cmpn(1)>0;){for(var m=0,a=1;(r.words[0]&a)===0&&m<26;++m,a<<=1);if(m>0)for(r.iushrn(m);m-- >0;)h.isOdd()&&h.iadd(d),h.iushrn(1);for(var e=0,u=1;(n.words[0]&u)===0&&e<26;++e,u<<=1);if(e>0)for(n.iushrn(e);e-- >0;)l.isOdd()&&l.iadd(d),l.iushrn(1);r.cmp(n)>=0?(r.isub(n),h.isub(l)):(n.isub(r),l.isub(h))}var y;return r.cmpn(1)===0?y=h:y=l,y.cmpn(0)<0&&y.iadd(t),y},f.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var r=this.clone(),n=t.clone();r.negative=0,n.negative=0;for(var h=0;r.isEven()&&n.isEven();h++)r.iushrn(1),n.iushrn(1);do{for(;r.isEven();)r.iushrn(1);for(;n.isEven();)n.iushrn(1);var l=r.cmp(n);if(l<0){var d=r;r=n,n=d}else if(l===0||n.cmpn(1)===0)break;r.isub(n)}while(!0);return n.iushln(h)},f.prototype.invm=function(t){return this.egcd(t).a.umod(t)},f.prototype.isEven=function(){return(this.words[0]&1)===0},f.prototype.isOdd=function(){return(this.words[0]&1)===1},f.prototype.andln=function(t){return this.words[0]&t},f.prototype.bincn=function(t){o(typeof t=="number");var r=t%26,n=(t-r)/26,h=1<<r;if(this.length<=n)return this._expand(n+1),this.words[n]|=h,this;for(var l=h,d=n;l!==0&&d<this.length;d++){var m=this.words[d]|0;m+=l,l=m>>>26,m&=67108863,this.words[d]=m}return l!==0&&(this.words[d]=l,this.length++),this},f.prototype.isZero=function(){return this.length===1&&this.words[0]===0},f.prototype.cmpn=function(t){var r=t<0;if(this.negative!==0&&!r)return-1;if(this.negative===0&&r)return 1;this.strip();var n;if(this.length>1)n=1;else{r&&(t=-t),o(t<=67108863,"Number is too big");var h=this.words[0]|0;n=h===t?0:h<t?-1:1}return this.negative!==0?-n|0:n},f.prototype.cmp=function(t){if(this.negative!==0&&t.negative===0)return-1;if(this.negative===0&&t.negative!==0)return 1;var r=this.ucmp(t);return this.negative!==0?-r|0:r},f.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var r=0,n=this.length-1;n>=0;n--){var h=this.words[n]|0,l=t.words[n]|0;if(h!==l){h<l?r=-1:h>l&&(r=1);break}}return r},f.prototype.gtn=function(t){return this.cmpn(t)===1},f.prototype.gt=function(t){return this.cmp(t)===1},f.prototype.gten=function(t){return this.cmpn(t)>=0},f.prototype.gte=function(t){return this.cmp(t)>=0},f.prototype.ltn=function(t){return this.cmpn(t)===-1},f.prototype.lt=function(t){return this.cmp(t)===-1},f.prototype.lten=function(t){return this.cmpn(t)<=0},f.prototype.lte=function(t){return this.cmp(t)<=0},f.prototype.eqn=function(t){return this.cmpn(t)===0},f.prototype.eq=function(t){return this.cmp(t)===0},f.red=function(t){return new q(t)},f.prototype.toRed=function(t){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),t.convertTo(this)._forceRed(t)},f.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},f.prototype._forceRed=function(t){return this.red=t,this},f.prototype.forceRed=function(t){return o(!this.red,"Already a number in reduction context"),this._forceRed(t)},f.prototype.redAdd=function(t){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},f.prototype.redIAdd=function(t){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},f.prototype.redSub=function(t){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},f.prototype.redISub=function(t){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},f.prototype.redShl=function(t){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},f.prototype.redMul=function(t){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},f.prototype.redIMul=function(t){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},f.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},f.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},f.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},f.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},f.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},f.prototype.redPow=function(t){return o(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var ge={k256:null,p224:null,p192:null,p25519:null};function _t(c,t){this.name=c,this.p=new f(t,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_t.prototype._tmp=function(){var t=new f(null);return t.words=new Array(Math.ceil(this.n/13)),t},_t.prototype.ireduce=function(t){var r=t,n;do this.split(r,this.tmp),r=this.imulK(r),r=r.iadd(this.tmp),n=r.bitLength();while(n>this.n);var h=n<this.n?-1:r.ucmp(this.p);return h===0?(r.words[0]=0,r.length=1):h>0?r.isub(this.p):r.strip(),r},_t.prototype.split=function(t,r){t.iushrn(this.n,0,r)},_t.prototype.imulK=function(t){return t.imul(this.k)};function se(){_t.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}p(se,_t),se.prototype.split=function(t,r){for(var n=4194303,h=Math.min(t.length,9),l=0;l<h;l++)r.words[l]=t.words[l];if(r.length=h,t.length<=9){t.words[0]=0,t.length=1;return}var d=t.words[9];for(r.words[r.length++]=d&n,l=10;l<t.length;l++){var m=t.words[l]|0;t.words[l-10]=(m&n)<<4|d>>>22,d=m}d>>>=22,t.words[l-10]=d,d===0&&t.length>10?t.length-=10:t.length-=9},se.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var r=0,n=0;n<t.length;n++){var h=t.words[n]|0;r+=h*977,t.words[n]=r&67108863,r=h*64+(r/67108864|0)}return t.words[t.length-1]===0&&(t.length--,t.words[t.length-1]===0&&t.length--),t};function er(){_t.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}p(er,_t);function rr(){_t.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}p(rr,_t);function ye(){_t.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}p(ye,_t),ye.prototype.imulK=function(t){for(var r=0,n=0;n<t.length;n++){var h=(t.words[n]|0)*19+r,l=h&67108863;h>>>=26,t.words[n]=l,r=h}return r!==0&&(t.words[t.length++]=r),t},f._prime=function(t){if(ge[t])return ge[t];var r;if(t==="k256")r=new se;else if(t==="p224")r=new er;else if(t==="p192")r=new rr;else if(t==="p25519")r=new ye;else throw new Error("Unknown prime "+t);return ge[t]=r,r};function q(c){if(typeof c=="string"){var t=f._prime(c);this.m=t.p,this.prime=t}else o(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}q.prototype._verify1=function(t){o(t.negative===0,"red works only with positives"),o(t.red,"red works only with red numbers")},q.prototype._verify2=function(t,r){o((t.negative|r.negative)===0,"red works only with positives"),o(t.red&&t.red===r.red,"red works only with red numbers")},q.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},q.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},q.prototype.add=function(t,r){this._verify2(t,r);var n=t.add(r);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},q.prototype.iadd=function(t,r){this._verify2(t,r);var n=t.iadd(r);return n.cmp(this.m)>=0&&n.isub(this.m),n},q.prototype.sub=function(t,r){this._verify2(t,r);var n=t.sub(r);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},q.prototype.isub=function(t,r){this._verify2(t,r);var n=t.isub(r);return n.cmpn(0)<0&&n.iadd(this.m),n},q.prototype.shl=function(t,r){return this._verify1(t),this.imod(t.ushln(r))},q.prototype.imul=function(t,r){return this._verify2(t,r),this.imod(t.imul(r))},q.prototype.mul=function(t,r){return this._verify2(t,r),this.imod(t.mul(r))},q.prototype.isqr=function(t){return this.imul(t,t.clone())},q.prototype.sqr=function(t){return this.mul(t,t)},q.prototype.sqrt=function(t){if(t.isZero())return t.clone();var r=this.m.andln(3);if(o(r%2===1),r===3){var n=this.m.add(new f(1)).iushrn(2);return this.pow(t,n)}for(var h=this.m.subn(1),l=0;!h.isZero()&&h.andln(1)===0;)l++,h.iushrn(1);o(!h.isZero());var d=new f(1).toRed(this),m=d.redNeg(),a=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new f(2*e*e).toRed(this);this.pow(e,a).cmp(m)!==0;)e.redIAdd(m);for(var u=this.pow(e,h),y=this.pow(t,h.addn(1).iushrn(1)),w=this.pow(t,h),M=l;w.cmp(d)!==0;){for(var b=w,k=0;b.cmp(d)!==0;k++)b=b.redSqr();o(k<M);var A=this.pow(u,new f(1).iushln(M-k-1));y=y.redMul(A),u=A.redSqr(),w=w.redMul(u),M=k}return y},q.prototype.invm=function(t){var r=t._invmp(this.m);return r.negative!==0?(r.negative=0,this.imod(r).redNeg()):this.imod(r)},q.prototype.pow=function(t,r){if(r.isZero())return new f(1).toRed(this);if(r.cmpn(1)===0)return t.clone();var n=4,h=new Array(1<<n);h[0]=new f(1).toRed(this),h[1]=t;for(var l=2;l<h.length;l++)h[l]=this.mul(h[l-1],t);var d=h[0],m=0,a=0,e=r.bitLength()%26;for(e===0&&(e=26),l=r.length-1;l>=0;l--){for(var u=r.words[l],y=e-1;y>=0;y--){var w=u>>y&1;if(d!==h[0]&&(d=this.sqr(d)),w===0&&m===0){a=0;continue}m<<=1,m|=w,a++,!(a!==n&&(l!==0||y!==0))&&(d=this.mul(d,h[m]),a=0,m=0)}e=26}return d},q.prototype.convertTo=function(t){var r=t.umod(this.m);return r===t?r.clone():r},q.prototype.convertFrom=function(t){var r=t.clone();return r.red=null,r},f.mont=function(t){return new jt(t)};function jt(c){q.call(this,c),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}p(jt,q),jt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},jt.prototype.convertFrom=function(t){var r=this.imod(t.mul(this.rinv));return r.red=null,r},jt.prototype.imul=function(t,r){if(t.isZero()||r.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(r),h=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),l=n.isub(h).iushrn(this.shift),d=l;return l.cmp(this.m)>=0?d=l.isub(this.m):l.cmpn(0)<0&&(d=l.iadd(this.m)),d._forceRed(this)},jt.prototype.mul=function(t,r){if(t.isZero()||r.isZero())return new f(0)._forceRed(this);var n=t.mul(r),h=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),l=n.isub(h).iushrn(this.shift),d=l;return l.cmp(this.m)>=0?d=l.isub(this.m):l.cmpn(0)<0&&(d=l.iadd(this.m)),d._forceRed(this)},jt.prototype.invm=function(t){var r=this.imod(t._invmp(this.m).mul(this.r2));return r._forceRed(this)}})(typeof Ce>"u"||Ce,Dr)});var Fr=Mt(Lt=>{"use strict";S();E();var vn=Lt&&Lt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.rawEncode=Lt.parseNumber=Lt.solidityPack=void 0;var Dt=fe(),gn=Ue(),zt=vn(Vr()),Zr=Ft();function yn(i,s){if(i.length!==s.length)throw new Error("Number of types are not matching the values");let o=[];for(let p=0;p<i.length;p++){let f=Wr(i[p]),v=s[p];o.push(zr(f,v,null))}return B.Buffer.concat(o)}Lt.solidityPack=yn;function pe(i){return i.lastIndexOf("]")===i.length-1}function me(i){let s=i.match(/(.*)\[(.*?)\]$/u);return s?s[2]===""?"dynamic":parseInt(s[2],10):null}function Xt(i){return parseInt(/^\D+(\d+)$/u.exec(i)[1],10)}function Kt(i){let s=typeof i;if(s==="string")return(0,Dt.isHexPrefixed)(i)?new zt.default((0,gn.stripHexPrefix)(i),16):new zt.default(i,10);if(s==="number")return new zt.default(i);if(i.toArray)return i;throw new Error("Argument is not a number")}Lt.parseNumber=Kt;function zr(i,s,o){let p,f;if(pe(i)){let v=i.replace(/\[.*?\]/u,"");if(!pe(v)){let x=me(i);if(x!=="dynamic"&&x!==0&&s.length>x)throw new Error(`Elements exceed array size: ${x}`)}let g=s.map(function(x){return zr(v,x,256)});return B.Buffer.concat(g)}else{if(i==="bytes")return s;if(i==="string")return B.Buffer.from(s,"utf8");if(i==="bool"){o=o||8;let v=Array(o/4).join("0");return B.Buffer.from(s?`${v}1`:`${v}0`,"hex")}else if(i==="address"){let v=20;return o&&(v=o/8),(0,Dt.setLengthLeft)((0,Dt.toBuffer)(s),v)}else if(i.startsWith("bytes")){if(p=Xt(i),p<1||p>32)throw new Error(`Invalid bytes<N> width: ${p}`);return typeof s=="number"&&(s=(0,Zr.normalize)(s)),(0,Dt.setLengthRight)((0,Dt.toBuffer)(s),p)}else if(i.startsWith("uint")){if(p=Xt(i),p%8||p<8||p>256)throw new Error(`Invalid uint<N> width: ${p}`);if(f=Kt(s),f.bitLength()>p)throw new Error(`Supplied uint exceeds width: ${p} vs ${f.bitLength()}`);return o=o||p,f.toArrayLike(B.Buffer,"be",o/8)}else if(i.startsWith("int")){if(p=Xt(i),p%8||p<8||p>256)throw new Error(`Invalid int<N> width: ${p}`);if(f=Kt(s),f.bitLength()>p)throw new Error(`Supplied int exceeds width: ${p} vs ${f.bitLength()}`);return o=o||p,f.toTwos(p).toArrayLike(B.Buffer,"be",o/8)}}throw new Error(`Unsupported or invalid type: ${i}`)}function Wr(i){return i.startsWith("int[")?`int256${i.slice(3)}`:i==="int"?"int256":i.startsWith("uint[")?`uint256${i.slice(4)}`:i==="uint"?"uint256":i.startsWith("fixed[")?`fixed128x128${i.slice(5)}`:i==="fixed"?"fixed128x128":i.startsWith("ufixed[")?`ufixed128x128${i.slice(6)}`:i==="ufixed"?"ufixed128x128":i}function wn(i,s){let o=[],p=[],f=0;i.forEach(function(v){if(pe(v)){let g=me(v);g!=="dynamic"?f+=32*g:f+=32}else f+=32});for(let v=0;v<i.length;v++){let g=Wr(i[v]),x=s[v],L=Pt(g,x);Mn(g)?(o.push(Pt("uint256",f)),p.push(L),f+=L.length):o.push(L)}return B.Buffer.concat(o.concat(p))}Lt.rawEncode=wn;function Pt(i,s){let o,p,f,v;if(i==="address")return Pt("uint160",Kt(s));if(i==="bool")return Pt("uint8",s?1:0);if(i==="string")return Pt("bytes",B.Buffer.from(s,"utf8"));if(pe(i)){if(typeof s.length>"u")throw new Error("Not an array?");if(o=me(i),o!=="dynamic"&&o!==0&&s.length>o)throw new Error(`Elements exceed array size: ${o}`);f=[],i=i.slice(0,i.lastIndexOf("[")),typeof s=="string"&&(s=JSON.parse(s));for(v in s)Object.prototype.hasOwnProperty.call(s,v)&&f.push(Pt(i,s[v]));if(o==="dynamic"){let g=Pt("uint256",s.length);f.unshift(g)}return B.Buffer.concat(f)}else{if(i==="bytes")return s=B.Buffer.from(s),f=B.Buffer.concat([Pt("uint256",s.length),s]),s.length%32!==0&&(f=B.Buffer.concat([f,(0,Dt.zeros)(32-s.length%32)])),f;if(i.startsWith("bytes")){if(o=Xt(i),o<1||o>32)throw new Error(`Invalid bytes<N> width: ${o}`);return typeof s=="number"&&(s=(0,Zr.normalize)(s)),(0,Dt.setLengthRight)((0,Dt.toBuffer)(s),32)}else if(i.startsWith("uint")){if(o=Xt(i),o%8||o<8||o>256)throw new Error(`Invalid uint<N> width: ${o}`);if(p=Kt(s),p.bitLength()>o)throw new Error(`Supplied uint exceeds width: ${o} vs ${p.bitLength()}`);if(p<0)throw new Error("Supplied uint is negative");return p.toArrayLike(B.Buffer,"be",32)}else if(i.startsWith("int")){if(o=Xt(i),o%8||o<8||o>256)throw new Error(`Invalid int<N> width: ${o}`);if(p=Kt(s),p.bitLength()>o)throw new Error(`Supplied int exceeds width: ${o} vs ${p.bitLength()}`);return p.toTwos(256).toArrayLike(B.Buffer,"be",32)}else if(i.startsWith("ufixed")){if(o=jr(i),p=Kt(s),p<0)throw new Error("Supplied ufixed is negative");return Pt("uint256",p.mul(new zt.default(2).pow(new zt.default(o[1]))))}else if(i.startsWith("fixed"))return o=jr(i),Pt("int256",Kt(s).mul(new zt.default(2).pow(new zt.default(o[1]))))}throw new Error(`Unsupported or invalid type: ${i}`)}function Mn(i){return i==="string"||i==="bytes"||me(i)==="dynamic"}function jr(i){let s=/^\D+(\d+)x(\d+)$/u.exec(i);return[parseInt(s[1],10),parseInt(s[2],10)]}});var Yr=Mt(mt=>{"use strict";S();E();Object.defineProperty(mt,"__esModule",{value:!0});mt.recoverTypedSignature=mt.signTypedData=mt.typedSignatureHash=mt.TypedDataUtils=mt.TYPED_MESSAGE_SCHEMA=mt.SignTypedDataVersion=void 0;var xn=Ue(),xt=fe(),Ht=Kr(),ne=Fr(),qt=Ft(),wt;(function(i){i.V1="V1",i.V3="V3",i.V4="V4"})(wt=mt.SignTypedDataVersion||(mt.SignTypedDataVersion={}));mt.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};function Gt(i,s){if(Object.keys(wt).includes(i)){if(s&&!s.includes(i))throw new Error(`SignTypedDataVersion not allowed: '${i}'. Allowed versions are: ${s.join(", ")}`)}else throw new Error(`Invalid version: '${i}'`)}function Cr(i,s,o,p,f){if(Gt(f,[wt.V3,wt.V4]),i[o]!==void 0)return["bytes32",f===wt.V4&&p==null?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,xt.arrToBufArr)((0,Ht.keccak256)(Xe(o,p,i,f)))];if(p===void 0)throw new Error(`missing value for field ${s} of type ${o}`);if(o==="bytes")return typeof p=="number"?p=(0,qt.numberToBuffer)(p):(0,xn.isHexString)(p)?p=(0,qt.numberToBuffer)(parseInt(p,16)):p=B.Buffer.from(p,"utf8"),["bytes32",(0,xt.arrToBufArr)((0,Ht.keccak256)(p))];if(o==="string")return typeof p=="number"?p=(0,qt.numberToBuffer)(p):p=B.Buffer.from(p??"","utf8"),["bytes32",(0,xt.arrToBufArr)((0,Ht.keccak256)(p))];if(o.lastIndexOf("]")===o.length-1){if(f===wt.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");let v=o.slice(0,o.lastIndexOf("[")),g=p.map(x=>Cr(i,s,v,x,f));return["bytes32",(0,xt.arrToBufArr)((0,Ht.keccak256)((0,ne.rawEncode)(g.map(([x])=>x),g.map(([,x])=>x))))]}return[o,p]}function Xe(i,s,o,p){Gt(p,[wt.V3,wt.V4]);let f=["bytes32"],v=[Xr(i,o)];for(let g of o[i]){if(p===wt.V3&&s[g.name]===void 0)continue;let[x,L]=Cr(o,g.name,g.type,s[g.name],p);f.push(x),v.push(L)}return(0,ne.rawEncode)(f,v)}function Jr(i,s){let o="",p=Ge(i,s);p.delete(i);let f=[i,...Array.from(p).sort()];for(let v of f){if(!s[v])throw new Error(`No type definition specified: ${v}`);o+=`${v}(${s[v].map(({name:x,type:L})=>`${L} ${x}`).join(",")})`}return o}function Ge(i,s,o=new Set){if([i]=i.match(/^\w*/u),o.has(i)||s[i]===void 0)return o;o.add(i);for(let p of s[i])Ge(p.type,s,o);return o}function Je(i,s,o,p){return Gt(p,[wt.V3,wt.V4]),(0,xt.arrToBufArr)((0,Ht.keccak256)(Xe(i,s,o,p)))}function Xr(i,s){let o=B.Buffer.from(Jr(i,s),"utf-8");return(0,xt.arrToBufArr)((0,Ht.keccak256)(o))}function Gr(i){let s={};for(let o in mt.TYPED_MESSAGE_SCHEMA.properties)i[o]&&(s[o]=i[o]);return"types"in s&&(s.types=Object.assign({EIP712Domain:[]},s.types)),s}function bn(i,s){Gt(s,[wt.V3,wt.V4]);let o=Gr(i),p=[B.Buffer.from("1901","hex")];return p.push(Je("EIP712Domain",o.domain,o.types,s)),o.primaryType!=="EIP712Domain"&&p.push(Je(o.primaryType,o.message,o.types,s)),(0,xt.arrToBufArr)((0,Ht.keccak256)(B.Buffer.concat(p)))}mt.TypedDataUtils={encodeData:Xe,encodeType:Jr,findTypeDependencies:Ge,hashStruct:Je,hashType:Xr,sanitizeData:Gr,eip712Hash:bn};function _n(i){let s=Ye(i);return(0,xt.bufferToHex)(s)}mt.typedSignatureHash=_n;function Ye(i){let s=new Error("Expect argument to be non-empty array");if(typeof i!="object"||!("length"in i)||!i.length)throw s;let o=i.map(function(v){return v.type!=="bytes"?v.value:(0,qt.legacyToBuffer)(v.value)}),p=i.map(function(v){return v.type}),f=i.map(function(v){if(!v.name)throw s;return`${v.type} ${v.name}`});return(0,xt.arrToBufArr)((0,Ht.keccak256)((0,ne.solidityPack)(["bytes32","bytes32"],[(0,Ht.keccak256)((0,ne.solidityPack)(new Array(i.length).fill("string"),f)),(0,Ht.keccak256)((0,ne.solidityPack)(p,o))])))}function Bn({privateKey:i,data:s,version:o}){if(Gt(o),(0,qt.isNullish)(s))throw new Error("Missing data parameter");if((0,qt.isNullish)(i))throw new Error("Missing private key parameter");let p=o===wt.V1?Ye(s):mt.TypedDataUtils.eip712Hash(s,o),f=(0,xt.ecsign)(p,i);return(0,qt.concatSig)((0,xt.toBuffer)(f.v),f.r,f.s)}mt.signTypedData=Bn;function kn({data:i,signature:s,version:o}){if(Gt(o),(0,qt.isNullish)(i))throw new Error("Missing data parameter");if((0,qt.isNullish)(s))throw new Error("Missing signature parameter");let p=o===wt.V1?Ye(i):mt.TypedDataUtils.eip712Hash(i,o),f=(0,qt.recoverPublicKey)(p,s),v=(0,xt.publicToAddress)(f);return(0,xt.bufferToHex)(v)}mt.recoverTypedSignature=kn});var ii=Mt(vt=>{"use strict";S();E();var Sn=vt&&vt.__createBinding||(Object.create?function(i,s,o,p){p===void 0&&(p=o);var f=Object.getOwnPropertyDescriptor(s,o);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,p,f)}:function(i,s,o,p){p===void 0&&(p=o),i[p]=s[o]}),En=vt&&vt.__setModuleDefault||(Object.create?function(i,s){Object.defineProperty(i,"default",{enumerable:!0,value:s})}:function(i,s){i.default=s}),Qr=vt&&vt.__importStar||function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var o in i)o!=="default"&&Object.prototype.hasOwnProperty.call(i,o)&&Sn(s,i,o);return En(s,i),s};Object.defineProperty(vt,"__esModule",{value:!0});vt.getEncryptionPublicKey=vt.decryptSafely=vt.decrypt=vt.encryptSafely=vt.encrypt=void 0;var Wt=Qr(fi()),Et=Qr(hi()),Nt=Ft();function ti({publicKey:i,data:s,version:o}){if((0,Nt.isNullish)(i))throw new Error("Missing publicKey parameter");if((0,Nt.isNullish)(s))throw new Error("Missing data parameter");if((0,Nt.isNullish)(o))throw new Error("Missing version parameter");switch(o){case"x25519-xsalsa20-poly1305":{if(typeof s!="string")throw new Error("Message data must be given as a string");let p=Wt.box.keyPair(),f;try{f=Et.decodeBase64(i)}catch{throw new Error("Bad public key")}let v=Et.decodeUTF8(s),g=Wt.randomBytes(Wt.box.nonceLength),x=Wt.box(v,g,f,p.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:Et.encodeBase64(g),ephemPublicKey:Et.encodeBase64(p.publicKey),ciphertext:Et.encodeBase64(x)}}default:throw new Error("Encryption type/version not supported")}}vt.encrypt=ti;function Tn({publicKey:i,data:s,version:o}){if((0,Nt.isNullish)(i))throw new Error("Missing publicKey parameter");if((0,Nt.isNullish)(s))throw new Error("Missing data parameter");if((0,Nt.isNullish)(o))throw new Error("Missing version parameter");let p=2**11,f=16;if(typeof s=="object"&&"toJSON"in s)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");let v={data:s,padding:""},x=B.Buffer.byteLength(JSON.stringify(v),"utf-8")%p,L=0;x>0&&(L=p-x-f),v.padding="0".repeat(L);let Tt=JSON.stringify(v);return ti({publicKey:i,data:Tt,version:o})}vt.encryptSafely=Tn;function ei({encryptedData:i,privateKey:s}){if((0,Nt.isNullish)(i))throw new Error("Missing encryptedData parameter");if((0,Nt.isNullish)(s))throw new Error("Missing privateKey parameter");switch(i.version){case"x25519-xsalsa20-poly1305":{let o=ri(s),p=Wt.box.keyPair.fromSecretKey(o).secretKey,f=Et.decodeBase64(i.nonce),v=Et.decodeBase64(i.ciphertext),g=Et.decodeBase64(i.ephemPublicKey),x=Wt.box.open(v,f,g,p),L;try{L=Et.encodeUTF8(x)}catch{throw new Error("Decryption failed.")}if(L)return L;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}vt.decrypt=ei;function An({encryptedData:i,privateKey:s}){if((0,Nt.isNullish)(i))throw new Error("Missing encryptedData parameter");if((0,Nt.isNullish)(s))throw new Error("Missing privateKey parameter");return JSON.parse(ei({encryptedData:i,privateKey:s})).data}vt.decryptSafely=An;function On(i){let s=ri(i),o=Wt.box.keyPair.fromSecretKey(s).publicKey;return Et.encodeBase64(o)}vt.getEncryptionPublicKey=On;function ri(i){let s=B.Buffer.from(i,"hex").toString("base64");return Et.decodeBase64(s)}});var Ln=Mt(bt=>{"use strict";S();E();var Pn=bt&&bt.__createBinding||(Object.create?function(i,s,o,p){p===void 0&&(p=o);var f=Object.getOwnPropertyDescriptor(s,o);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(i,p,f)}:function(i,s,o,p){p===void 0&&(p=o),i[p]=s[o]}),Qe=bt&&bt.__exportStar||function(i,s){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&Pn(s,i,o)};Object.defineProperty(bt,"__esModule",{value:!0});bt.normalize=bt.concatSig=void 0;Qe(xr(),bt);Qe(Yr(),bt);Qe(ii(),bt);var ni=Ft();Object.defineProperty(bt,"concatSig",{enumerable:!0,get:function(){return ni.concatSig}});Object.defineProperty(bt,"normalize",{enumerable:!0,get:function(){return ni.normalize}})});export{Ln as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-SLWN4ZJ3.js.map
