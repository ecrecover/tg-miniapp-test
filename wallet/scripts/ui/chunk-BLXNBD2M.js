import{l as ii,m as si,s as ca,u as ai}from"./chunk-JXVNQTQI.js";import{Ba as Ze,Ha as Jn,I as Hr,L as ye,Sa as ei,Ta as ti,Ua as ri,V as Qn,Y as jt,Ya as ni,b as Fn,f as qn,ga as N,i as Ht,jb as oi,k as Wn,kb as jr,lb as ge,ma as ct,o as le,q as yt,ra as $n,t as Xn,y as V}from"./chunk-YMSVZYST.js";import{Ca as Kn,Ia as mt,Ta as me,Ua as Mr,ba as Vn,gb as Zn,hb as zn,nc as Yn,oc as nr,q as Ke,ta as Gn}from"./chunk-LTVFH3JK.js";import{A as Ur,G as jn,g as Ut,n as Mt,p as Hn,x as Lr}from"./chunk-6MTHEPGF.js";import{D as Mn,I as rr,a as Dn,b as ft,d as Ln,v as Un}from"./chunk-ZQQ7HNWV.js";import{A as Br,M as Lt,S as Dr,Y as Ge}from"./chunk-ZOQTSYT4.js";import{a as we}from"./chunk-ADZWCU3Q.js";import{d as Be}from"./chunk-EWYZZSY3.js";import{a as fa}from"./chunk-FHQVMQUK.js";import{d as Cr}from"./chunk-XNS2NFYY.js";import{c as x,f as Q,h as _,l as process,m as c,n as h,o as l}from"./chunk-REC7XVZY.js";var Gt=x($=>{"use strict";c();l();var va=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function Sa(e,r){return Object.prototype.hasOwnProperty.call(e,r)}$.assign=function(e){for(var r=Array.prototype.slice.call(arguments,1);r.length;){var t=r.shift();if(!!t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(var n in t)Sa(t,n)&&(e[n]=t[n])}}return e};$.shrinkBuf=function(e,r){return e.length===r?e:e.subarray?e.subarray(0,r):(e.length=r,e)};var Ta={arraySet:function(e,r,t,n,i){if(r.subarray&&e.subarray){e.set(r.subarray(t,t+n),i);return}for(var o=0;o<n;o++)e[i+o]=r[t+o]},flattenChunks:function(e){var r,t,n,i,o,a;for(n=0,r=0,t=e.length;r<t;r++)n+=e[r].length;for(a=new Uint8Array(n),i=0,r=0,t=e.length;r<t;r++)o=e[r],a.set(o,i),i+=o.length;return a}},Pa={arraySet:function(e,r,t,n,i){for(var o=0;o<n;o++)e[i+o]=r[t+o]},flattenChunks:function(e){return[].concat.apply([],e)}};$.setTyped=function(e){e?($.Buf8=Uint8Array,$.Buf16=Uint16Array,$.Buf32=Int32Array,$.assign($,Ta)):($.Buf8=Array,$.Buf16=Array,$.Buf32=Array,$.assign($,Pa))};$.setTyped(va)});var Si=x((Yh,vi)=>{"use strict";c();l();function ka(e,r,t,n){for(var i=e&65535|0,o=e>>>16&65535|0,a=0;t!==0;){a=t>2e3?2e3:t,t-=a;do i=i+r[n++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}vi.exports=ka});var Pi=x(($h,Ti)=>{"use strict";c();l();function Ia(){for(var e,r=[],t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r}var Ra=Ia();function xa(e,r,t,n){var i=Ra,o=n+t;e^=-1;for(var a=n;a<o;a++)e=e>>>8^i[(e^r[a])&255];return e^-1}Ti.exports=xa});var Ii=x((td,ki)=>{"use strict";c();l();var fr=30,Na=12;ki.exports=function(r,t){var n,i,o,a,s,d,f,u,g,w,p,v,O,S,b,A,L,k,m,C,I,T,R,F,P;n=r.state,i=r.next_in,F=r.input,o=i+(r.avail_in-5),a=r.next_out,P=r.output,s=a-(t-r.avail_out),d=a+(r.avail_out-257),f=n.dmax,u=n.wsize,g=n.whave,w=n.wnext,p=n.window,v=n.hold,O=n.bits,S=n.lencode,b=n.distcode,A=(1<<n.lenbits)-1,L=(1<<n.distbits)-1;e:do{O<15&&(v+=F[i++]<<O,O+=8,v+=F[i++]<<O,O+=8),k=S[v&A];t:for(;;){if(m=k>>>24,v>>>=m,O-=m,m=k>>>16&255,m===0)P[a++]=k&65535;else if(m&16){C=k&65535,m&=15,m&&(O<m&&(v+=F[i++]<<O,O+=8),C+=v&(1<<m)-1,v>>>=m,O-=m),O<15&&(v+=F[i++]<<O,O+=8,v+=F[i++]<<O,O+=8),k=b[v&L];r:for(;;){if(m=k>>>24,v>>>=m,O-=m,m=k>>>16&255,m&16){if(I=k&65535,m&=15,O<m&&(v+=F[i++]<<O,O+=8,O<m&&(v+=F[i++]<<O,O+=8)),I+=v&(1<<m)-1,I>f){r.msg="invalid distance too far back",n.mode=fr;break e}if(v>>>=m,O-=m,m=a-s,I>m){if(m=I-m,m>g&&n.sane){r.msg="invalid distance too far back",n.mode=fr;break e}if(T=0,R=p,w===0){if(T+=u-m,m<C){C-=m;do P[a++]=p[T++];while(--m);T=a-I,R=P}}else if(w<m){if(T+=u+w-m,m-=w,m<C){C-=m;do P[a++]=p[T++];while(--m);if(T=0,w<C){m=w,C-=m;do P[a++]=p[T++];while(--m);T=a-I,R=P}}}else if(T+=w-m,m<C){C-=m;do P[a++]=p[T++];while(--m);T=a-I,R=P}for(;C>2;)P[a++]=R[T++],P[a++]=R[T++],P[a++]=R[T++],C-=3;C&&(P[a++]=R[T++],C>1&&(P[a++]=R[T++]))}else{T=a-I;do P[a++]=P[T++],P[a++]=P[T++],P[a++]=P[T++],C-=3;while(C>2);C&&(P[a++]=P[T++],C>1&&(P[a++]=P[T++]))}}else if((m&64)===0){k=b[(k&65535)+(v&(1<<m)-1)];continue r}else{r.msg="invalid distance code",n.mode=fr;break e}break}}else if((m&64)===0){k=S[(k&65535)+(v&(1<<m)-1)];continue t}else if(m&32){n.mode=Na;break e}else{r.msg="invalid literal/length code",n.mode=fr;break e}break}}while(i<o&&a<d);C=O>>3,i-=C,O-=C<<3,v&=(1<<O)-1,r.next_in=i,r.next_out=a,r.avail_in=i<o?5+(o-i):5-(i-o),r.avail_out=a<d?257+(d-a):257-(a-d),n.hold=v,n.bits=O}});var Di=x((id,Bi)=>{"use strict";c();l();var Ri=Gt(),gt=15,xi=852,Ni=592,Ai=0,Zr=1,Ci=2,Aa=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Ca=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Ba=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Da=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Bi.exports=function(r,t,n,i,o,a,s,d){var f=d.bits,u=0,g=0,w=0,p=0,v=0,O=0,S=0,b=0,A=0,L=0,k,m,C,I,T,R=null,F=0,P,ee=new Ri.Buf16(gt+1),y=new Ri.Buf16(gt+1),K=null,oe=0,at,ut,wt;for(u=0;u<=gt;u++)ee[u]=0;for(g=0;g<i;g++)ee[t[n+g]]++;for(v=f,p=gt;p>=1&&ee[p]===0;p--);if(v>p&&(v=p),p===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,d.bits=1,0;for(w=1;w<p&&ee[w]===0;w++);for(v<w&&(v=w),b=1,u=1;u<=gt;u++)if(b<<=1,b-=ee[u],b<0)return-1;if(b>0&&(r===Ai||p!==1))return-1;for(y[1]=0,u=1;u<gt;u++)y[u+1]=y[u]+ee[u];for(g=0;g<i;g++)t[n+g]!==0&&(s[y[t[n+g]]++]=g);if(r===Ai?(R=K=s,P=19):r===Zr?(R=Aa,F-=257,K=Ca,oe-=257,P=256):(R=Ba,K=Da,P=-1),L=0,g=0,u=w,T=a,O=v,S=0,C=-1,A=1<<v,I=A-1,r===Zr&&A>xi||r===Ci&&A>Ni)return 1;for(;;){at=u-S,s[g]<P?(ut=0,wt=s[g]):s[g]>P?(ut=K[oe+s[g]],wt=R[F+s[g]]):(ut=32+64,wt=0),k=1<<u-S,m=1<<O,w=m;do m-=k,o[T+(L>>S)+m]=at<<24|ut<<16|wt|0;while(m!==0);for(k=1<<u-1;L&k;)k>>=1;if(k!==0?(L&=k-1,L+=k):L=0,g++,--ee[u]===0){if(u===p)break;u=t[n+s[g]]}if(u>v&&(L&I)!==C){for(S===0&&(S=v),T+=w,O=u-S,b=1<<O;O+S<p&&(b-=ee[O+S],!(b<=0));)O++,b<<=1;if(A+=1<<O,r===Zr&&A>xi||r===Ci&&A>Ni)return 1;C=L&I,o[C]=v<<24|O<<16|T-a|0}}return L!==0&&(o[T+L]=u-S<<24|64<<16|0),d.bits=v,0}});var mo=x(de=>{"use strict";c();l();var ie=Gt(),Jr=Si(),be=Pi(),La=Ii(),Kt=Di(),Ua=0,ao=1,uo=2,Li=4,Ma=5,cr=6,dt=0,Ha=1,ja=2,ae=-2,fo=-3,en=-4,Fa=-5,Ui=8,co=1,Mi=2,Hi=3,ji=4,Fi=5,qi=6,Wi=7,Vi=8,Gi=9,Ki=10,dr=11,Me=12,zr=13,Zi=14,Yr=15,zi=16,Yi=17,Xi=18,Qi=19,lr=20,hr=21,$i=22,Ji=23,eo=24,to=25,ro=26,Xr=27,no=28,io=29,H=30,tn=31,qa=32,Wa=852,Va=592,Ga=15,Ka=Ga;function oo(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function Za(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ie.Buf16(320),this.work=new ie.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function lo(e){var r;return!e||!e.state?ae:(r=e.state,e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=co,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new ie.Buf32(Wa),r.distcode=r.distdyn=new ie.Buf32(Va),r.sane=1,r.back=-1,dt)}function ho(e){var r;return!e||!e.state?ae:(r=e.state,r.wsize=0,r.whave=0,r.wnext=0,lo(e))}function po(e,r){var t,n;return!e||!e.state||(n=e.state,r<0?(t=0,r=-r):(t=(r>>4)+1,r<48&&(r&=15)),r&&(r<8||r>15))?ae:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=t,n.wbits=r,ho(e))}function _o(e,r){var t,n;return e?(n=new Za,e.state=n,n.window=null,t=po(e,r),t!==dt&&(e.state=null),t):ae}function za(e){return _o(e,Ka)}var so=!0,Qr,$r;function Ya(e){if(so){var r;for(Qr=new ie.Buf32(512),$r=new ie.Buf32(32),r=0;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(Kt(ao,e.lens,0,288,Qr,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;Kt(uo,e.lens,0,32,$r,0,e.work,{bits:5}),so=!1}e.lencode=Qr,e.lenbits=9,e.distcode=$r,e.distbits=5}function wo(e,r,t,n){var i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new ie.Buf8(o.wsize)),n>=o.wsize?(ie.arraySet(o.window,r,t-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>n&&(i=n),ie.arraySet(o.window,r,t-n,i,o.wnext),n-=i,n?(ie.arraySet(o.window,r,t-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function Xa(e,r){var t,n,i,o,a,s,d,f,u,g,w,p,v,O,S=0,b,A,L,k,m,C,I,T,R=new ie.Buf8(4),F,P,ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return ae;t=e.state,t.mode===Me&&(t.mode=zr),a=e.next_out,i=e.output,d=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,f=t.hold,u=t.bits,g=s,w=d,T=dt;e:for(;;)switch(t.mode){case co:if(t.wrap===0){t.mode=zr;break}for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(t.wrap&2&&f===35615){t.check=0,R[0]=f&255,R[1]=f>>>8&255,t.check=be(t.check,R,2,0),f=0,u=0,t.mode=Mi;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",t.mode=H;break}if((f&15)!==Ui){e.msg="unknown compression method",t.mode=H;break}if(f>>>=4,u-=4,I=(f&15)+8,t.wbits===0)t.wbits=I;else if(I>t.wbits){e.msg="invalid window size",t.mode=H;break}t.dmax=1<<I,e.adler=t.check=1,t.mode=f&512?Ki:Me,f=0,u=0;break;case Mi:for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(t.flags=f,(t.flags&255)!==Ui){e.msg="unknown compression method",t.mode=H;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=H;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,t.check=be(t.check,R,2,0)),f=0,u=0,t.mode=Hi;case Hi:for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.head&&(t.head.time=f),t.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,R[2]=f>>>16&255,R[3]=f>>>24&255,t.check=be(t.check,R,4,0)),f=0,u=0,t.mode=ji;case ji:for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,t.check=be(t.check,R,2,0)),f=0,u=0,t.mode=Fi;case Fi:if(t.flags&1024){for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&(R[0]=f&255,R[1]=f>>>8&255,t.check=be(t.check,R,2,0)),f=0,u=0}else t.head&&(t.head.extra=null);t.mode=qi;case qi:if(t.flags&1024&&(p=t.length,p>s&&(p=s),p&&(t.head&&(I=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),ie.arraySet(t.head.extra,n,o,p,I)),t.flags&512&&(t.check=be(t.check,n,p,o)),s-=p,o+=p,t.length-=p),t.length))break e;t.length=0,t.mode=Wi;case Wi:if(t.flags&2048){if(s===0)break e;p=0;do I=n[o+p++],t.head&&I&&t.length<65536&&(t.head.name+=String.fromCharCode(I));while(I&&p<s);if(t.flags&512&&(t.check=be(t.check,n,p,o)),s-=p,o+=p,I)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Vi;case Vi:if(t.flags&4096){if(s===0)break e;p=0;do I=n[o+p++],t.head&&I&&t.length<65536&&(t.head.comment+=String.fromCharCode(I));while(I&&p<s);if(t.flags&512&&(t.check=be(t.check,n,p,o)),s-=p,o+=p,I)break e}else t.head&&(t.head.comment=null);t.mode=Gi;case Gi:if(t.flags&512){for(;u<16;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(f!==(t.check&65535)){e.msg="header crc mismatch",t.mode=H;break}f=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Me;break;case Ki:for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}e.adler=t.check=oo(f),f=0,u=0,t.mode=dr;case dr:if(t.havedict===0)return e.next_out=a,e.avail_out=d,e.next_in=o,e.avail_in=s,t.hold=f,t.bits=u,ja;e.adler=t.check=1,t.mode=Me;case Me:if(r===Ma||r===cr)break e;case zr:if(t.last){f>>>=u&7,u-=u&7,t.mode=Xr;break}for(;u<3;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}switch(t.last=f&1,f>>>=1,u-=1,f&3){case 0:t.mode=Zi;break;case 1:if(Ya(t),t.mode=lr,r===cr){f>>>=2,u-=2;break e}break;case 2:t.mode=Yi;break;case 3:e.msg="invalid block type",t.mode=H}f>>>=2,u-=2;break;case Zi:for(f>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",t.mode=H;break}if(t.length=f&65535,f=0,u=0,t.mode=Yr,r===cr)break e;case Yr:t.mode=zi;case zi:if(p=t.length,p){if(p>s&&(p=s),p>d&&(p=d),p===0)break e;ie.arraySet(i,n,o,p,a),s-=p,o+=p,d-=p,a+=p,t.length-=p;break}t.mode=Me;break;case Yi:for(;u<14;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(t.nlen=(f&31)+257,f>>>=5,u-=5,t.ndist=(f&31)+1,f>>>=5,u-=5,t.ncode=(f&15)+4,f>>>=4,u-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=H;break}t.have=0,t.mode=Xi;case Xi:for(;t.have<t.ncode;){for(;u<3;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.lens[ee[t.have++]]=f&7,f>>>=3,u-=3}for(;t.have<19;)t.lens[ee[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,F={bits:t.lenbits},T=Kt(Ua,t.lens,0,19,t.lencode,0,t.work,F),t.lenbits=F.bits,T){e.msg="invalid code lengths set",t.mode=H;break}t.have=0,t.mode=Qi;case Qi:for(;t.have<t.nlen+t.ndist;){for(;S=t.lencode[f&(1<<t.lenbits)-1],b=S>>>24,A=S>>>16&255,L=S&65535,!(b<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(L<16)f>>>=b,u-=b,t.lens[t.have++]=L;else{if(L===16){for(P=b+2;u<P;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(f>>>=b,u-=b,t.have===0){e.msg="invalid bit length repeat",t.mode=H;break}I=t.lens[t.have-1],p=3+(f&3),f>>>=2,u-=2}else if(L===17){for(P=b+3;u<P;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=b,u-=b,I=0,p=3+(f&7),f>>>=3,u-=3}else{for(P=b+7;u<P;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=b,u-=b,I=0,p=11+(f&127),f>>>=7,u-=7}if(t.have+p>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=H;break}for(;p--;)t.lens[t.have++]=I}}if(t.mode===H)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=H;break}if(t.lenbits=9,F={bits:t.lenbits},T=Kt(ao,t.lens,0,t.nlen,t.lencode,0,t.work,F),t.lenbits=F.bits,T){e.msg="invalid literal/lengths set",t.mode=H;break}if(t.distbits=6,t.distcode=t.distdyn,F={bits:t.distbits},T=Kt(uo,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,F),t.distbits=F.bits,T){e.msg="invalid distances set",t.mode=H;break}if(t.mode=lr,r===cr)break e;case lr:t.mode=hr;case hr:if(s>=6&&d>=258){e.next_out=a,e.avail_out=d,e.next_in=o,e.avail_in=s,t.hold=f,t.bits=u,La(e,w),a=e.next_out,i=e.output,d=e.avail_out,o=e.next_in,n=e.input,s=e.avail_in,f=t.hold,u=t.bits,t.mode===Me&&(t.back=-1);break}for(t.back=0;S=t.lencode[f&(1<<t.lenbits)-1],b=S>>>24,A=S>>>16&255,L=S&65535,!(b<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(A&&(A&240)===0){for(k=b,m=A,C=L;S=t.lencode[C+((f&(1<<k+m)-1)>>k)],b=S>>>24,A=S>>>16&255,L=S&65535,!(k+b<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=k,u-=k,t.back+=k}if(f>>>=b,u-=b,t.back+=b,t.length=L,A===0){t.mode=ro;break}if(A&32){t.back=-1,t.mode=Me;break}if(A&64){e.msg="invalid literal/length code",t.mode=H;break}t.extra=A&15,t.mode=$i;case $i:if(t.extra){for(P=t.extra;u<P;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Ji;case Ji:for(;S=t.distcode[f&(1<<t.distbits)-1],b=S>>>24,A=S>>>16&255,L=S&65535,!(b<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if((A&240)===0){for(k=b,m=A,C=L;S=t.distcode[C+((f&(1<<k+m)-1)>>k)],b=S>>>24,A=S>>>16&255,L=S&65535,!(k+b<=u);){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}f>>>=k,u-=k,t.back+=k}if(f>>>=b,u-=b,t.back+=b,A&64){e.msg="invalid distance code",t.mode=H;break}t.offset=L,t.extra=A&15,t.mode=eo;case eo:if(t.extra){for(P=t.extra;u<P;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=H;break}t.mode=to;case to:if(d===0)break e;if(p=w-d,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=H;break}p>t.wnext?(p-=t.wnext,v=t.wsize-p):v=t.wnext-p,p>t.length&&(p=t.length),O=t.window}else O=i,v=a-t.offset,p=t.length;p>d&&(p=d),d-=p,t.length-=p;do i[a++]=O[v++];while(--p);t.length===0&&(t.mode=hr);break;case ro:if(d===0)break e;i[a++]=t.length,d--,t.mode=hr;break;case Xr:if(t.wrap){for(;u<32;){if(s===0)break e;s--,f|=n[o++]<<u,u+=8}if(w-=d,e.total_out+=w,t.total+=w,w&&(e.adler=t.check=t.flags?be(t.check,i,w,a-w):Jr(t.check,i,w,a-w)),w=d,(t.flags?f:oo(f))!==t.check){e.msg="incorrect data check",t.mode=H;break}f=0,u=0}t.mode=no;case no:if(t.wrap&&t.flags){for(;u<32;){if(s===0)break e;s--,f+=n[o++]<<u,u+=8}if(f!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=H;break}f=0,u=0}t.mode=io;case io:T=Ha;break e;case H:T=fo;break e;case tn:return en;case qa:default:return ae}return e.next_out=a,e.avail_out=d,e.next_in=o,e.avail_in=s,t.hold=f,t.bits=u,(t.wsize||w!==e.avail_out&&t.mode<H&&(t.mode<Xr||r!==Li))&&wo(e,e.output,e.next_out,w-e.avail_out)?(t.mode=tn,en):(g-=e.avail_in,w-=e.avail_out,e.total_in+=g,e.total_out+=w,t.total+=w,t.wrap&&w&&(e.adler=t.check=t.flags?be(t.check,i,w,e.next_out-w):Jr(t.check,i,w,e.next_out-w)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Me?128:0)+(t.mode===lr||t.mode===Yr?256:0),(g===0&&w===0||r===Li)&&T===dt&&(T=Fa),T)}function Qa(e){if(!e||!e.state)return ae;var r=e.state;return r.window&&(r.window=null),e.state=null,dt}function $a(e,r){var t;return!e||!e.state||(t=e.state,(t.wrap&2)===0)?ae:(t.head=r,r.done=!1,dt)}function Ja(e,r){var t=r.length,n,i,o;return!e||!e.state||(n=e.state,n.wrap!==0&&n.mode!==dr)?ae:n.mode===dr&&(i=1,i=Jr(i,r,t,0),i!==n.check)?fo:(o=wo(e,r,t,t),o?(n.mode=tn,en):(n.havedict=1,dt))}de.inflateReset=ho;de.inflateReset2=po;de.inflateResetKeep=lo;de.inflateInit=za;de.inflateInit2=_o;de.inflate=Xa;de.inflateEnd=Qa;de.inflateGetHeader=$a;de.inflateSetDictionary=Ja;de.inflateInfo="pako inflate (from Nodeca project)"});var bo=x(Et=>{"use strict";c();l();var pr=Gt(),yo=!0,go=!0;try{String.fromCharCode.apply(null,[0])}catch{yo=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{go=!1}var Zt=new pr.Buf8(256);for(He=0;He<256;He++)Zt[He]=He>=252?6:He>=248?5:He>=240?4:He>=224?3:He>=192?2:1;var He;Zt[254]=Zt[254]=1;Et.string2buf=function(e){var r,t,n,i,o,a=e.length,s=0;for(i=0;i<a;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<a&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),s+=t<128?1:t<2048?2:t<65536?3:4;for(r=new pr.Buf8(s),o=0,i=0;o<s;i++)t=e.charCodeAt(i),(t&64512)===55296&&i+1<a&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),i++)),t<128?r[o++]=t:t<2048?(r[o++]=192|t>>>6,r[o++]=128|t&63):t<65536?(r[o++]=224|t>>>12,r[o++]=128|t>>>6&63,r[o++]=128|t&63):(r[o++]=240|t>>>18,r[o++]=128|t>>>12&63,r[o++]=128|t>>>6&63,r[o++]=128|t&63);return r};function Eo(e,r){if(r<65534&&(e.subarray&&go||!e.subarray&&yo))return String.fromCharCode.apply(null,pr.shrinkBuf(e,r));for(var t="",n=0;n<r;n++)t+=String.fromCharCode(e[n]);return t}Et.buf2binstring=function(e){return Eo(e,e.length)};Et.binstring2buf=function(e){for(var r=new pr.Buf8(e.length),t=0,n=r.length;t<n;t++)r[t]=e.charCodeAt(t);return r};Et.buf2string=function(e,r){var t,n,i,o,a=r||e.length,s=new Array(a*2);for(n=0,t=0;t<a;){if(i=e[t++],i<128){s[n++]=i;continue}if(o=Zt[i],o>4){s[n++]=65533,t+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&t<a;)i=i<<6|e[t++]&63,o--;if(o>1){s[n++]=65533;continue}i<65536?s[n++]=i:(i-=65536,s[n++]=55296|i>>10&1023,s[n++]=56320|i&1023)}return Eo(s,n)};Et.utf8border=function(e,r){var t;for(r=r||e.length,r>e.length&&(r=e.length),t=r-1;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+Zt[e[t]]>r?t:r}});var vo=x((dd,Oo)=>{"use strict";c();l();Oo.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var To=x((wd,So)=>{"use strict";c();l();So.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var ko=x((gd,Po)=>{"use strict";c();l();function eu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}Po.exports=eu});var Ro=x((Od,Io)=>{"use strict";c();l();function tu(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}Io.exports=tu});var No=x(Yt=>{"use strict";c();l();var bt=mo(),zt=Gt(),_r=bo(),G=vo(),rn=To(),ru=ko(),nu=Ro(),xo=Object.prototype.toString;function pt(e){if(!(this instanceof pt))return new pt(e);this.options=zt.assign({chunkSize:16384,windowBits:0,to:""},e||{});var r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ru,this.strm.avail_out=0;var t=bt.inflateInit2(this.strm,r.windowBits);if(t!==G.Z_OK)throw new Error(rn[t]);if(this.header=new nu,bt.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=_r.string2buf(r.dictionary):xo.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=bt.inflateSetDictionary(this.strm,r.dictionary),t!==G.Z_OK)))throw new Error(rn[t])}pt.prototype.push=function(e,r){var t=this.strm,n=this.options.chunkSize,i=this.options.dictionary,o,a,s,d,f,u=!1;if(this.ended)return!1;a=r===~~r?r:r===!0?G.Z_FINISH:G.Z_NO_FLUSH,typeof e=="string"?t.input=_r.binstring2buf(e):xo.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;do{if(t.avail_out===0&&(t.output=new zt.Buf8(n),t.next_out=0,t.avail_out=n),o=bt.inflate(t,G.Z_NO_FLUSH),o===G.Z_NEED_DICT&&i&&(o=bt.inflateSetDictionary(this.strm,i)),o===G.Z_BUF_ERROR&&u===!0&&(o=G.Z_OK,u=!1),o!==G.Z_STREAM_END&&o!==G.Z_OK)return this.onEnd(o),this.ended=!0,!1;t.next_out&&(t.avail_out===0||o===G.Z_STREAM_END||t.avail_in===0&&(a===G.Z_FINISH||a===G.Z_SYNC_FLUSH))&&(this.options.to==="string"?(s=_r.utf8border(t.output,t.next_out),d=t.next_out-s,f=_r.buf2string(t.output,s),t.next_out=d,t.avail_out=n-d,d&&zt.arraySet(t.output,t.output,s,d,0),this.onData(f)):this.onData(zt.shrinkBuf(t.output,t.next_out))),t.avail_in===0&&t.avail_out===0&&(u=!0)}while((t.avail_in>0||t.avail_out===0)&&o!==G.Z_STREAM_END);return o===G.Z_STREAM_END&&(a=G.Z_FINISH),a===G.Z_FINISH?(o=bt.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===G.Z_OK):(a===G.Z_SYNC_FLUSH&&(this.onEnd(G.Z_OK),t.avail_out=0),!0)};pt.prototype.onData=function(e){this.chunks.push(e)};pt.prototype.onEnd=function(e){e===G.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=zt.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function nn(e,r){var t=new pt(r);if(t.push(e,!0),t.err)throw t.msg||rn[t.err];return t.result}function iu(e,r){return r=r||{},r.raw=!0,nn(e,r)}Yt.Inflate=pt;Yt.inflate=nn;Yt.inflateRaw=iu;Yt.ungzip=nn});var pe=x(Qe=>{"use strict";c();l();Object.defineProperty(Qe,"__esModule",{value:!0});Qe.testnet=Qe.regtest=Qe.bitcoin=void 0;Qe.bitcoin={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128};Qe.regtest={messagePrefix:`Bitcoin Signed Message:
`,bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239};Qe.testnet={messagePrefix:`Bitcoin Signed Message:
`,bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}});var fn=x($e=>{"use strict";c();l();Object.defineProperty($e,"__esModule",{value:!0});$e.encode=$e.decode=$e.check=void 0;function uu(e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return!1;let r=e[3];if(r===0||5+r>=e.length||e[4+r]!==2)return!1;let t=e[5+r];return!(t===0||6+r+t!==e.length||e[4]&128||r>1&&e[4]===0&&!(e[5]&128)||e[r+6]&128||t>1&&e[r+6]===0&&!(e[r+7]&128))}$e.check=uu;function fu(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(e[0]!==48)throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(e[2]!==2)throw new Error("Expected DER integer");let r=e[3];if(r===0)throw new Error("R length is zero");if(5+r>=e.length)throw new Error("R length is too long");if(e[4+r]!==2)throw new Error("Expected DER integer (2)");let t=e[5+r];if(t===0)throw new Error("S length is zero");if(6+r+t!==e.length)throw new Error("S length is invalid");if(e[4]&128)throw new Error("R value is negative");if(r>1&&e[4]===0&&!(e[5]&128))throw new Error("R value excessively padded");if(e[r+6]&128)throw new Error("S value is negative");if(t>1&&e[r+6]===0&&!(e[r+7]&128))throw new Error("S value excessively padded");return{r:e.slice(4,4+r),s:e.slice(6+r)}}$e.decode=fu;function cu(e,r){let t=e.length,n=r.length;if(t===0)throw new Error("R length is zero");if(n===0)throw new Error("S length is zero");if(t>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(e[0]&128)throw new Error("R value is negative");if(r[0]&128)throw new Error("S value is negative");if(t>1&&e[0]===0&&!(e[1]&128))throw new Error("R value excessively padded");if(n>1&&r[0]===0&&!(r[1]&128))throw new Error("S value excessively padded");let i=h.Buffer.allocUnsafe(6+t+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+t]=2,i[5+t]=r.length,r.copy(i,6+t),i}$e.encode=cu});var ln=x(vt=>{"use strict";c();l();Object.defineProperty(vt,"__esModule",{value:!0});vt.REVERSE_OPS=vt.OPS=void 0;var cn={OP_FALSE:0,OP_0:0,OP_DATA_1:1,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};vt.OPS=cn;var jo={};vt.REVERSE_OPS=jo;for(let e of Object.keys(cn)){let r=cn[e];jo[r]=e}});var qo=x(et=>{"use strict";c();l();Object.defineProperty(et,"__esModule",{value:!0});et.decode=et.encode=et.encodingLength=void 0;var Je=ln();function Fo(e){return e<Je.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}et.encodingLength=Fo;function lu(e,r,t){let n=Fo(r);return n===1?e.writeUInt8(r,t):n===2?(e.writeUInt8(Je.OPS.OP_PUSHDATA1,t),e.writeUInt8(r,t+1)):n===3?(e.writeUInt8(Je.OPS.OP_PUSHDATA2,t),e.writeUInt16LE(r,t+1)):(e.writeUInt8(Je.OPS.OP_PUSHDATA4,t),e.writeUInt32LE(r,t+1)),n}et.encode=lu;function hu(e,r){let t=e.readUInt8(r),n,i;if(t<Je.OPS.OP_PUSHDATA1)n=t,i=1;else if(t===Je.OPS.OP_PUSHDATA1){if(r+2>e.length)return null;n=e.readUInt8(r+1),i=2}else if(t===Je.OPS.OP_PUSHDATA2){if(r+3>e.length)return null;n=e.readUInt16LE(r+1),i=3}else{if(r+5>e.length)return null;if(t!==Je.OPS.OP_PUSHDATA4)throw new Error("Unexpected opcode");n=e.readUInt32LE(r+1),i=5}return{opcode:t,number:n,size:i}}et.decode=hu});var Wo=x(St=>{"use strict";c();l();Object.defineProperty(St,"__esModule",{value:!0});St.encode=St.decode=void 0;function du(e,r,t){r=r||4,t=t===void 0?!0:t;let n=e.length;if(n===0)return 0;if(n>r)throw new TypeError("Script number overflow");if(t&&(e[n-1]&127)===0&&(n<=1||(e[n-2]&128)===0))throw new Error("Non-minimally encoded script number");if(n===5){let o=e.readUInt32LE(0),a=e.readUInt8(4);return a&128?-((a&-129)*4294967296+o):a*4294967296+o}let i=0;for(let o=0;o<n;++o)i|=e[o]<<8*o;return e[n-1]&128?-(i&~(128<<8*(n-1))):i}St.decode=du;function pu(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}function _u(e){let r=Math.abs(e),t=pu(r),n=h.Buffer.allocUnsafe(t),i=e<0;for(let o=0;o<t;++o)n.writeUInt8(r&255,o),r>>=8;return n[t-1]&128?n.writeUInt8(i?128:0,t-1):i&&(n[t-1]|=128),n}St.encode=_u});var te=x(E=>{"use strict";c();l();Object.defineProperty(E,"__esModule",{value:!0});E.oneOf=E.Null=E.BufferN=E.Function=E.UInt32=E.UInt8=E.tuple=E.maybe=E.Hex=E.Buffer=E.String=E.Boolean=E.Array=E.Number=E.Hash256bit=E.Hash160bit=E.Buffer256bit=E.isTaptree=E.isTapleaf=E.TAPLEAF_VERSION_MASK=E.Satoshi=E.Signer=E.BIP32Path=E.UInt31=E.isPoint=E.typeforce=void 0;var gr=Cr(),q=Be();Object.defineProperty(E,"typeforce",{enumerable:!0,get:function(){return q.typeforce}});var Vo=gr.Buffer.alloc(32,0),Go=gr.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function wu(e){if(!gr.Buffer.isBuffer(e)||e.length<33)return!1;let r=e[0],t=e.slice(1,33);if(t.compare(Vo)===0||t.compare(Go)>=0)return!1;if((r===2||r===3)&&e.length===33)return!0;let n=e.slice(33);return n.compare(Vo)===0||n.compare(Go)>=0?!1:r===4&&e.length===65}E.isPoint=wu;var mu=Math.pow(2,31)-1;function yu(e){return q.typeforce.UInt32(e)&&e<=mu}E.UInt31=yu;function Ko(e){return q.typeforce.String(e)&&!!e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}E.BIP32Path=Ko;Ko.toJSON=()=>"BIP32 derivation path";function gu(e){return(q.typeforce.Buffer(e.publicKey)||typeof e.getPublicKey=="function")&&typeof e.sign=="function"}E.Signer=gu;var Eu=21*1e14;function bu(e){return q.typeforce.UInt53(e)&&e<=Eu}E.Satoshi=bu;E.TAPLEAF_VERSION_MASK=254;function Zo(e){return!e||!("output"in e)||!gr.Buffer.isBuffer(e.output)?!1:e.version!==void 0?(e.version&E.TAPLEAF_VERSION_MASK)===e.version:!0}E.isTapleaf=Zo;function zo(e){return(0,E.Array)(e)?e.length!==2?!1:e.every(r=>zo(r)):Zo(e)}E.isTaptree=zo;E.Buffer256bit=q.typeforce.BufferN(32);E.Hash160bit=q.typeforce.BufferN(20);E.Hash256bit=q.typeforce.BufferN(32);E.Number=q.typeforce.Number;E.Array=q.typeforce.Array;E.Boolean=q.typeforce.Boolean;E.String=q.typeforce.String;E.Buffer=q.typeforce.Buffer;E.Hex=q.typeforce.Hex;E.maybe=q.typeforce.maybe;E.tuple=q.typeforce.tuple;E.UInt8=q.typeforce.UInt8;E.UInt32=q.typeforce.UInt32;E.Function=q.typeforce.Function;E.BufferN=q.typeforce.BufferN;E.Null=q.typeforce.Null;E.oneOf=q.typeforce.oneOf});var es=x(ue=>{"use strict";c();l();var Ou=ue&&ue.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),vu=ue&&ue.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),$o=ue&&ue.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Ou(r,e,t);return vu(r,e),r};Object.defineProperty(ue,"__esModule",{value:!0});ue.encode=ue.decode=void 0;var Jo=$o(fn()),hn=$o(te()),{typeforce:Su}=hn,Yo=h.Buffer.alloc(1,0);function Xo(e){let r=0;for(;e[r]===0;)++r;return r===e.length?Yo:(e=e.slice(r),e[0]&128?h.Buffer.concat([Yo,e],1+e.length):e)}function Qo(e){e[0]===0&&(e=e.slice(1));let r=h.Buffer.alloc(32,0),t=Math.max(0,32-e.length);return e.copy(r,t),r}function Tu(e){let r=e.readUInt8(e.length-1),t=r&-193;if(t<=0||t>=4)throw new Error("Invalid hashType "+r);let n=Jo.decode(e.slice(0,-1)),i=Qo(n.r),o=Qo(n.s);return{signature:h.Buffer.concat([i,o],64),hashType:r}}ue.decode=Tu;function Pu(e,r){Su({signature:hn.BufferN(64),hashType:hn.UInt8},{signature:e,hashType:r});let t=r&-193;if(t<=0||t>=4)throw new Error("Invalid hashType "+r);let n=h.Buffer.allocUnsafe(1);n.writeUInt8(r,0);let i=Xo(e.slice(0,32)),o=Xo(e.slice(32,64));return h.Buffer.concat([Jo.encode(i,o),n])}ue.encode=Pu});var ve=x(D=>{"use strict";c();l();var ku=D&&D.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Iu=D&&D.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Qt=D&&D.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&ku(r,e,t);return Iu(r,e),r};Object.defineProperty(D,"__esModule",{value:!0});D.signature=D.number=D.isCanonicalScriptSignature=D.isDefinedHashType=D.isCanonicalPubKey=D.toStack=D.fromASM=D.toASM=D.decompile=D.compile=D.isPushOnly=D.OPS=void 0;var Ru=Qt(fn()),re=ln();Object.defineProperty(D,"OPS",{enumerable:!0,get:function(){return re.OPS}});var dn=Qt(qo()),ts=Qt(Wo()),xu=Qt(es()),Oe=Qt(te()),{typeforce:Xt}=Oe,rs=re.OPS.OP_RESERVED;function Nu(e){return Oe.Number(e)&&(e===re.OPS.OP_0||e>=re.OPS.OP_1&&e<=re.OPS.OP_16||e===re.OPS.OP_1NEGATE)}function Au(e){return Oe.Buffer(e)||Nu(e)}function ns(e){return Oe.Array(e)&&e.every(Au)}D.isPushOnly=ns;function Er(e){if(e.length===0)return re.OPS.OP_0;if(e.length===1){if(e[0]>=1&&e[0]<=16)return rs+e[0];if(e[0]===129)return re.OPS.OP_1NEGATE}}function is(e){return h.Buffer.isBuffer(e)}function Cu(e){return Oe.Array(e)}function br(e){return h.Buffer.isBuffer(e)}function os(e){if(is(e))return e;Xt(Oe.Array,e);let r=e.reduce((i,o)=>br(o)?o.length===1&&Er(o)!==void 0?i+1:i+dn.encodingLength(o.length)+o.length:i+1,0),t=h.Buffer.allocUnsafe(r),n=0;if(e.forEach(i=>{if(br(i)){let o=Er(i);if(o!==void 0){t.writeUInt8(o,n),n+=1;return}n+=dn.encode(t,i.length,n),i.copy(t,n),n+=i.length}else t.writeUInt8(i,n),n+=1}),n!==t.length)throw new Error("Could not decode chunks");return t}D.compile=os;function pn(e){if(Cu(e))return e;Xt(Oe.Buffer,e);let r=[],t=0;for(;t<e.length;){let n=e[t];if(n>re.OPS.OP_0&&n<=re.OPS.OP_PUSHDATA4){let i=dn.decode(e,t);if(i===null||(t+=i.size,t+i.number>e.length))return null;let o=e.slice(t,t+i.number);t+=i.number;let a=Er(o);a!==void 0?r.push(a):r.push(o)}else r.push(n),t+=1}return r}D.decompile=pn;function Bu(e){return is(e)&&(e=pn(e)),e.map(r=>{if(br(r)){let t=Er(r);if(t===void 0)return r.toString("hex");r=t}return re.REVERSE_OPS[r]}).join(" ")}D.toASM=Bu;function Du(e){return Xt(Oe.String,e),os(e.split(" ").map(r=>re.OPS[r]!==void 0?re.OPS[r]:(Xt(Oe.Hex,r),h.Buffer.from(r,"hex"))))}D.fromASM=Du;function Lu(e){return e=pn(e),Xt(ns,e),e.map(r=>br(r)?r:r===re.OPS.OP_0?h.Buffer.allocUnsafe(0):ts.encode(r-rs))}D.toStack=Lu;function Uu(e){return Oe.isPoint(e)}D.isCanonicalPubKey=Uu;function ss(e){let r=e;return r&128&&(r=r&-129),r&64&&(r=r&-65),r>0&&r<4}D.isDefinedHashType=ss;function Mu(e){return!h.Buffer.isBuffer(e)||!ss(e[e.length-1])?!1:Ru.check(e.slice(0,-1))}D.isCanonicalScriptSignature=Mu;D.number=ts;D.signature=xu});var je=x(Tt=>{"use strict";c();l();Object.defineProperty(Tt,"__esModule",{value:!0});Tt.value=Tt.prop=void 0;function Hu(e,r,t){Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){let n=t.call(this);return this[r]=n,n},set(n){Object.defineProperty(this,r,{configurable:!0,enumerable:!0,value:n,writable:!0})}})}Tt.prop=Hu;function ju(e){let r;return()=>(r!==void 0||(r=e()),r)}Tt.value=ju});var cs=x(Se=>{"use strict";c();l();var Fu=Se&&Se.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),qu=Se&&Se.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),fs=Se&&Se.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Fu(r,e,t);return qu(r,e),r};Object.defineProperty(Se,"__esModule",{value:!0});Se.p2data=void 0;var Wu=pe(),Or=fs(ve()),Fe=te(),as=fs(je()),us=Or.OPS;function Vu(e,r){return e.length!==r.length?!1:e.every((t,n)=>t.equals(r[n]))}function Gu(e,r){if(!e.data&&!e.output)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,Fe.typeforce)({network:Fe.typeforce.maybe(Fe.typeforce.Object),output:Fe.typeforce.maybe(Fe.typeforce.Buffer),data:Fe.typeforce.maybe(Fe.typeforce.arrayOf(Fe.typeforce.Buffer))},e);let t=e.network||Wu.bitcoin,n={name:"embed",network:t};if(as.prop(n,"output",()=>{if(!!e.data)return Or.compile([us.OP_RETURN].concat(e.data))}),as.prop(n,"data",()=>{if(!!e.output)return Or.decompile(e.output).slice(1)}),r.validate&&e.output){let i=Or.decompile(e.output);if(i[0]!==us.OP_RETURN)throw new TypeError("Output is invalid");if(!i.slice(1).every(Fe.typeforce.Buffer))throw new TypeError("Output is invalid");if(e.data&&!Vu(e.data,n.data))throw new TypeError("Data mismatch")}return Object.assign(n,e)}Se.p2data=Gu});var ds=x(Te=>{"use strict";c();l();var Ku=Te&&Te.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Zu=Te&&Te.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),hs=Te&&Te.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Ku(r,e,t);return Zu(r,e),r};Object.defineProperty(Te,"__esModule",{value:!0});Te.p2ms=void 0;var zu=pe(),Pt=hs(ve()),z=te(),tt=hs(je()),kt=Pt.OPS,vr=kt.OP_RESERVED;function ls(e,r){return e.length!==r.length?!1:e.every((t,n)=>t.equals(r[n]))}function Yu(e,r){if(!e.input&&!e.output&&!(e.pubkeys&&e.m!==void 0)&&!e.signatures)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{});function t(d){return Pt.isCanonicalScriptSignature(d)||(r.allowIncomplete&&d===kt.OP_0)!==void 0}(0,z.typeforce)({network:z.typeforce.maybe(z.typeforce.Object),m:z.typeforce.maybe(z.typeforce.Number),n:z.typeforce.maybe(z.typeforce.Number),output:z.typeforce.maybe(z.typeforce.Buffer),pubkeys:z.typeforce.maybe(z.typeforce.arrayOf(z.isPoint)),signatures:z.typeforce.maybe(z.typeforce.arrayOf(t)),input:z.typeforce.maybe(z.typeforce.Buffer)},e);let i={network:e.network||zu.bitcoin},o=[],a=!1;function s(d){a||(a=!0,o=Pt.decompile(d),i.m=o[0]-vr,i.n=o[o.length-2]-vr,i.pubkeys=o.slice(1,-2))}if(tt.prop(i,"output",()=>{if(!!e.m&&!!i.n&&!!e.pubkeys)return Pt.compile([].concat(vr+e.m,e.pubkeys,vr+i.n,kt.OP_CHECKMULTISIG))}),tt.prop(i,"m",()=>{if(!!i.output)return s(i.output),i.m}),tt.prop(i,"n",()=>{if(!!i.pubkeys)return i.pubkeys.length}),tt.prop(i,"pubkeys",()=>{if(!!e.output)return s(e.output),i.pubkeys}),tt.prop(i,"signatures",()=>{if(!!e.input)return Pt.decompile(e.input).slice(1)}),tt.prop(i,"input",()=>{if(!!e.signatures)return Pt.compile([kt.OP_0].concat(e.signatures))}),tt.prop(i,"witness",()=>{if(!!i.input)return[]}),tt.prop(i,"name",()=>{if(!(!i.m||!i.n))return`p2ms(${i.m} of ${i.n})`}),r.validate){if(e.output){if(s(e.output),!z.typeforce.Number(o[0]))throw new TypeError("Output is invalid");if(!z.typeforce.Number(o[o.length-2]))throw new TypeError("Output is invalid");if(o[o.length-1]!==kt.OP_CHECKMULTISIG)throw new TypeError("Output is invalid");if(i.m<=0||i.n>16||i.m>i.n||i.n!==o.length-3)throw new TypeError("Output is invalid");if(!i.pubkeys.every(d=>(0,z.isPoint)(d)))throw new TypeError("Output is invalid");if(e.m!==void 0&&e.m!==i.m)throw new TypeError("m mismatch");if(e.n!==void 0&&e.n!==i.n)throw new TypeError("n mismatch");if(e.pubkeys&&!ls(e.pubkeys,i.pubkeys))throw new TypeError("Pubkeys mismatch")}if(e.pubkeys){if(e.n!==void 0&&e.n!==e.pubkeys.length)throw new TypeError("Pubkey count mismatch");if(i.n=e.pubkeys.length,i.n<i.m)throw new TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<i.m)throw new TypeError("Not enough signatures provided");if(e.signatures.length>i.m)throw new TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==kt.OP_0)throw new TypeError("Input is invalid");if(i.signatures.length===0||!i.signatures.every(t))throw new TypeError("Input has invalid signature(s)");if(e.signatures&&!ls(e.signatures,i.signatures))throw new TypeError("Signature mismatch");if(e.m!==void 0&&e.m!==e.signatures.length)throw new TypeError("Signature count mismatch")}}return Object.assign(i,e)}Te.p2ms=Yu});var ws=x(Pe=>{"use strict";c();l();var Xu=Pe&&Pe.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Qu=Pe&&Pe.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),_s=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Xu(r,e,t);return Qu(r,e),r};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.p2pk=void 0;var $u=pe(),Rt=_s(ve()),_e=te(),It=_s(je()),ps=Rt.OPS;function Ju(e,r){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,_e.typeforce)({network:_e.typeforce.maybe(_e.typeforce.Object),output:_e.typeforce.maybe(_e.typeforce.Buffer),pubkey:_e.typeforce.maybe(_e.isPoint),signature:_e.typeforce.maybe(Rt.isCanonicalScriptSignature),input:_e.typeforce.maybe(_e.typeforce.Buffer)},e);let t=It.value(()=>Rt.decompile(e.input)),n=e.network||$u.bitcoin,i={name:"p2pk",network:n};if(It.prop(i,"output",()=>{if(!!e.pubkey)return Rt.compile([e.pubkey,ps.OP_CHECKSIG])}),It.prop(i,"pubkey",()=>{if(!!e.output)return e.output.slice(1,-1)}),It.prop(i,"signature",()=>{if(!!e.input)return t()[0]}),It.prop(i,"input",()=>{if(!!e.signature)return Rt.compile([e.signature])}),It.prop(i,"witness",()=>{if(!!i.input)return[]}),r.validate){if(e.output){if(e.output[e.output.length-1]!==ps.OP_CHECKSIG)throw new TypeError("Output is invalid");if(!(0,_e.isPoint)(i.pubkey))throw new TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(i.pubkey))throw new TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(i.input))throw new TypeError("Signature mismatch");if(e.input){if(t().length!==1)throw new TypeError("Input is invalid");if(!Rt.isCanonicalScriptSignature(i.signature))throw new TypeError("Input has invalid signature")}}return Object.assign(i,e)}Pe.p2pk=Ju});var Nt=x(fe=>{"use strict";c();l();Object.defineProperty(fe,"__esModule",{value:!0});fe.taggedHash=fe.hash256=fe.hash160=fe.sha256=fe.ripemd160=void 0;var ms=Be();function ys(e){return h.Buffer.from(ms.base.ripemd160(e))}fe.ripemd160=ys;function xt(e){return h.Buffer.from(ms.base.sha256(e))}fe.sha256=xt;function ef(e){return ys(xt(e))}fe.hash160=ef;function tf(e){return xt(xt(e))}fe.hash256=tf;var rf=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],nf=Object.fromEntries(rf.map(e=>{let r=xt(h.Buffer.from(e));return[e,h.Buffer.concat([r,r])]}));function of(e,r){return xt(h.Buffer.concat([nf[e],r]))}fe.taggedHash=of});var Es=x(ke=>{"use strict";c();l();var sf=ke&&ke.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),af=ke&&ke.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),wn=ke&&ke.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&sf(r,e,t);return af(r,e),r};Object.defineProperty(ke,"__esModule",{value:!0});ke.p2pkh=void 0;var _n=wn(Nt()),uf=pe(),At=wn(ve()),J=te(),qe=wn(je()),rt=At.OPS,gs=Be();function ff(e,r){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,J.typeforce)({network:J.typeforce.maybe(J.typeforce.Object),address:J.typeforce.maybe(J.typeforce.String),hash:J.typeforce.maybe(J.typeforce.BufferN(20)),output:J.typeforce.maybe(J.typeforce.BufferN(25)),pubkey:J.typeforce.maybe(J.isPoint),signature:J.typeforce.maybe(At.isCanonicalScriptSignature),input:J.typeforce.maybe(J.typeforce.Buffer)},e);let t=qe.value(()=>{let a=gs.base.fromBase58Check(e.address),s=a.readUInt8(0),d=a.slice(1);return{version:s,hash:d}}),n=qe.value(()=>At.decompile(e.input)),i=e.network||uf.bitcoin,o={name:"p2pkh",network:i};if(qe.prop(o,"address",()=>{if(!o.hash)return;let a=h.Buffer.allocUnsafe(21);return a.writeUInt8(i.pubKeyHash,0),o.hash.copy(a,1),gs.base.toBase58Check(a)}),qe.prop(o,"hash",()=>{if(e.output)return e.output.slice(3,23);if(e.address)return t().hash;if(e.pubkey||o.pubkey)return _n.hash160(e.pubkey||o.pubkey)}),qe.prop(o,"output",()=>{if(!!o.hash)return At.compile([rt.OP_DUP,rt.OP_HASH160,o.hash,rt.OP_EQUALVERIFY,rt.OP_CHECKSIG])}),qe.prop(o,"pubkey",()=>{if(!!e.input)return n()[1]}),qe.prop(o,"signature",()=>{if(!!e.input)return n()[0]}),qe.prop(o,"input",()=>{if(!!e.pubkey&&!!e.signature)return At.compile([e.signature,e.pubkey])}),qe.prop(o,"witness",()=>{if(!!o.input)return[]}),r.validate){let a=h.Buffer.from([]);if(e.address){if(t().version!==i.pubKeyHash)throw new TypeError("Invalid version or Network mismatch");if(t().hash.length!==20)throw new TypeError("Invalid address");a=t().hash}if(e.hash){if(a.length>0&&!a.equals(e.hash))throw new TypeError("Hash mismatch");a=e.hash}if(e.output){if(e.output.length!==25||e.output[0]!==rt.OP_DUP||e.output[1]!==rt.OP_HASH160||e.output[2]!==20||e.output[23]!==rt.OP_EQUALVERIFY||e.output[24]!==rt.OP_CHECKSIG)throw new TypeError("Output is invalid");let s=e.output.slice(3,23);if(a.length>0&&!a.equals(s))throw new TypeError("Hash mismatch");a=s}if(e.pubkey){let s=_n.hash160(e.pubkey);if(a.length>0&&!a.equals(s))throw new TypeError("Hash mismatch");a=s}if(e.input){let s=n();if(s.length!==2)throw new TypeError("Input is invalid");if(!At.isCanonicalScriptSignature(s[0]))throw new TypeError("Input has invalid signature");if(!(0,J.isPoint)(s[1]))throw new TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(s[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(s[1]))throw new TypeError("Pubkey mismatch");let d=_n.hash160(s[1]);if(a.length>0&&!a.equals(d))throw new TypeError("Hash mismatch")}}return Object.assign(o,e)}ke.p2pkh=ff});var vs=x(Re=>{"use strict";c();l();var cf=Re&&Re.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),lf=Re&&Re.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),mn=Re&&Re.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&cf(r,e,t);return lf(r,e),r};Object.defineProperty(Re,"__esModule",{value:!0});Re.p2sh=void 0;var bs=mn(Nt()),hf=pe(),We=mn(ve()),j=te(),Ie=mn(je()),Os=Be(),Sr=We.OPS;function df(e,r){return e.length!==r.length?!1:e.every((t,n)=>t.equals(r[n]))}function pf(e,r){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,j.typeforce)({network:j.typeforce.maybe(j.typeforce.Object),address:j.typeforce.maybe(j.typeforce.String),hash:j.typeforce.maybe(j.typeforce.BufferN(20)),output:j.typeforce.maybe(j.typeforce.BufferN(23)),redeem:j.typeforce.maybe({network:j.typeforce.maybe(j.typeforce.Object),output:j.typeforce.maybe(j.typeforce.Buffer),input:j.typeforce.maybe(j.typeforce.Buffer),witness:j.typeforce.maybe(j.typeforce.arrayOf(j.typeforce.Buffer))}),input:j.typeforce.maybe(j.typeforce.Buffer),witness:j.typeforce.maybe(j.typeforce.arrayOf(j.typeforce.Buffer))},e);let t=e.network;t||(t=e.redeem&&e.redeem.network||hf.bitcoin);let n={network:t},i=Ie.value(()=>{let s=Os.base.fromBase58Check(e.address),d=s.readUInt8(0),f=s.slice(1);return{version:d,hash:f}}),o=Ie.value(()=>We.decompile(e.input)),a=Ie.value(()=>{let s=o();return{network:t,output:s[s.length-1],input:We.compile(s.slice(0,-1)),witness:e.witness||[]}});if(Ie.prop(n,"address",()=>{if(!n.hash)return;let s=h.Buffer.allocUnsafe(21);return s.writeUInt8(n.network.scriptHash,0),n.hash.copy(s,1),Os.base.toBase58Check(s)}),Ie.prop(n,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return i().hash;if(n.redeem&&n.redeem.output)return bs.hash160(n.redeem.output)}),Ie.prop(n,"output",()=>{if(!!n.hash)return We.compile([Sr.OP_HASH160,n.hash,Sr.OP_EQUAL])}),Ie.prop(n,"redeem",()=>{if(!!e.input)return a()}),Ie.prop(n,"input",()=>{if(!(!e.redeem||!e.redeem.input||!e.redeem.output))return We.compile([].concat(We.decompile(e.redeem.input),e.redeem.output))}),Ie.prop(n,"witness",()=>{if(n.redeem&&n.redeem.witness)return n.redeem.witness;if(n.input)return[]}),Ie.prop(n,"name",()=>{let s=["p2sh"];return n.redeem!==void 0&&n.redeem.name!==void 0&&s.push(n.redeem.name),s.join("-")}),r.validate){let s=h.Buffer.from([]);if(e.address){if(i().version!==t.scriptHash)throw new TypeError("Invalid version or Network mismatch");if(i().hash.length!==20)throw new TypeError("Invalid address");s=i().hash}if(e.hash){if(s.length>0&&!s.equals(e.hash))throw new TypeError("Hash mismatch");s=e.hash}if(e.output){if(e.output.length!==23||e.output[0]!==Sr.OP_HASH160||e.output[1]!==20||e.output[22]!==Sr.OP_EQUAL)throw new TypeError("Output is invalid");let f=e.output.slice(2,22);if(s.length>0&&!s.equals(f))throw new TypeError("Hash mismatch");s=f}let d=f=>{if(f.output){let u=We.decompile(f.output);if(!u||u.length<1)throw new TypeError("Redeem.output too short");let g=bs.hash160(f.output);if(s.length>0&&!s.equals(g))throw new TypeError("Hash mismatch");s=g}if(f.input){let u=f.input.length>0,g=f.witness&&f.witness.length>0;if(!u&&!g)throw new TypeError("Empty input");if(u&&g)throw new TypeError("Input and witness provided");if(u){let w=We.decompile(f.input);if(!We.isPushOnly(w))throw new TypeError("Non push-only scriptSig")}}};if(e.input){let f=o();if(!f||f.length<1)throw new TypeError("Input too short");if(!h.Buffer.isBuffer(a().output))throw new TypeError("Input is invalid");d(a())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==t)throw new TypeError("Network mismatch");if(e.input){let f=a();if(e.redeem.output&&!e.redeem.output.equals(f.output))throw new TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(f.input))throw new TypeError("Redeem.input mismatch")}d(e.redeem)}if(e.witness&&e.redeem&&e.redeem.witness&&!df(e.redeem.witness,e.witness))throw new TypeError("Witness and redeem.witness mismatch")}return Object.assign(n,e)}Re.p2sh=pf});var Ts=x(xe=>{"use strict";c();l();var _f=xe&&xe.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),wf=xe&&xe.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),gn=xe&&xe.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&_f(r,e,t);return wf(r,e),r};Object.defineProperty(xe,"__esModule",{value:!0});xe.p2wpkh=void 0;var yn=gn(Nt()),mf=pe(),Pr=gn(ve()),Y=te(),nt=gn(je()),Tr=Be(),Ss=Pr.OPS,yf=h.Buffer.alloc(0);function gf(e,r){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,Y.typeforce)({address:Y.typeforce.maybe(Y.typeforce.String),hash:Y.typeforce.maybe(Y.typeforce.BufferN(20)),input:Y.typeforce.maybe(Y.typeforce.BufferN(0)),network:Y.typeforce.maybe(Y.typeforce.Object),output:Y.typeforce.maybe(Y.typeforce.BufferN(22)),pubkey:Y.typeforce.maybe(Y.isPoint),signature:Y.typeforce.maybe(Pr.isCanonicalScriptSignature),witness:Y.typeforce.maybe(Y.typeforce.arrayOf(Y.typeforce.Buffer))},e);let t=nt.value(()=>{let o=Tr.base.bech32.decode(e.address),a=o.words.shift(),s=Tr.base.bech32.fromWords(o.words);return{version:a,prefix:o.prefix,data:h.Buffer.from(s)}}),n=e.network||mf.bitcoin,i={name:"p2wpkh",network:n};if(nt.prop(i,"address",()=>{if(!i.hash)return;let o=Tr.base.bech32.toWords(i.hash);return o.unshift(0),Tr.base.bech32.encode(n.bech32,o)}),nt.prop(i,"hash",()=>{if(e.output)return e.output.slice(2,22);if(e.address)return t().data;if(e.pubkey||i.pubkey)return yn.hash160(e.pubkey||i.pubkey)}),nt.prop(i,"output",()=>{if(!!i.hash)return Pr.compile([Ss.OP_0,i.hash])}),nt.prop(i,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(!!e.witness)return e.witness[1]}),nt.prop(i,"signature",()=>{if(!!e.witness)return e.witness[0]}),nt.prop(i,"input",()=>{if(!!i.witness)return yf}),nt.prop(i,"witness",()=>{if(!!e.pubkey&&!!e.signature)return[e.signature,e.pubkey]}),r.validate){let o=h.Buffer.from([]);if(e.address){if(n&&n.bech32!==t().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(t().version!==0)throw new TypeError("Invalid address version");if(t().data.length!==20)throw new TypeError("Invalid address data");o=t().data}if(e.hash){if(o.length>0&&!o.equals(e.hash))throw new TypeError("Hash mismatch");o=e.hash}if(e.output){if(e.output.length!==22||e.output[0]!==Ss.OP_0||e.output[1]!==20)throw new TypeError("Output is invalid");if(o.length>0&&!o.equals(e.output.slice(2)))throw new TypeError("Hash mismatch");o=e.output.slice(2)}if(e.pubkey){let a=yn.hash160(e.pubkey);if(o.length>0&&!o.equals(a))throw new TypeError("Hash mismatch");if(o=a,!(0,Y.isPoint)(e.pubkey)||e.pubkey.length!==33)throw new TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(e.witness.length!==2)throw new TypeError("Witness is invalid");if(!Pr.isCanonicalScriptSignature(e.witness[0]))throw new TypeError("Witness has invalid signature");if(!(0,Y.isPoint)(e.witness[1])||e.witness[1].length!==33)throw new TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw new TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw new TypeError("Pubkey mismatch");let a=yn.hash160(e.witness[1]);if(o.length>0&&!o.equals(a))throw new TypeError("Hash mismatch")}}return Object.assign(i,e)}xe.p2wpkh=gf});var Is=x(Ne=>{"use strict";c();l();var Ef=Ne&&Ne.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),bf=Ne&&Ne.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),bn=Ne&&Ne.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Ef(r,e,t);return bf(r,e),r};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.p2wsh=void 0;var Ps=bn(Nt()),Of=pe(),it=bn(ve()),U=te(),Ve=bn(je()),kr=Be(),ks=it.OPS,En=h.Buffer.alloc(0);function vf(e,r){return e.length!==r.length?!1:e.every((t,n)=>t.equals(r[n]))}function Ir(e){return!!(h.Buffer.isBuffer(e)&&e.length===65&&e[0]===4&&(0,U.isPoint)(e))}function Sf(e,r){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,U.typeforce)({network:U.typeforce.maybe(U.typeforce.Object),address:U.typeforce.maybe(U.typeforce.String),hash:U.typeforce.maybe(U.typeforce.BufferN(32)),output:U.typeforce.maybe(U.typeforce.BufferN(34)),redeem:U.typeforce.maybe({input:U.typeforce.maybe(U.typeforce.Buffer),network:U.typeforce.maybe(U.typeforce.Object),output:U.typeforce.maybe(U.typeforce.Buffer),witness:U.typeforce.maybe(U.typeforce.arrayOf(U.typeforce.Buffer))}),input:U.typeforce.maybe(U.typeforce.BufferN(0)),witness:U.typeforce.maybe(U.typeforce.arrayOf(U.typeforce.Buffer))},e);let t=Ve.value(()=>{let a=kr.base.bech32.decode(e.address),s=a.words.shift(),d=kr.base.bech32.fromWords(a.words);return{version:s,prefix:a.prefix,data:h.Buffer.from(d)}}),n=Ve.value(()=>it.decompile(e.redeem.input)),i=e.network;i||(i=e.redeem&&e.redeem.network||Of.bitcoin);let o={network:i};if(Ve.prop(o,"address",()=>{if(!o.hash)return;let a=kr.base.bech32.toWords(o.hash);return a.unshift(0),kr.base.bech32.encode(i.bech32,a)}),Ve.prop(o,"hash",()=>{if(e.output)return e.output.slice(2);if(e.address)return t().data;if(o.redeem&&o.redeem.output)return Ps.sha256(o.redeem.output)}),Ve.prop(o,"output",()=>{if(!!o.hash)return it.compile([ks.OP_0,o.hash])}),Ve.prop(o,"redeem",()=>{if(!!e.witness)return{output:e.witness[e.witness.length-1],input:En,witness:e.witness.slice(0,-1)}}),Ve.prop(o,"input",()=>{if(!!o.witness)return En}),Ve.prop(o,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){let a=it.toStack(n());return o.redeem=Object.assign({witness:a},e.redeem),o.redeem.input=En,[].concat(a,e.redeem.output)}if(!!e.redeem&&!!e.redeem.output&&!!e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),Ve.prop(o,"name",()=>{let a=["p2wsh"];return o.redeem!==void 0&&o.redeem.name!==void 0&&a.push(o.redeem.name),a.join("-")}),r.validate){let a=h.Buffer.from([]);if(e.address){if(t().prefix!==i.bech32)throw new TypeError("Invalid prefix or Network mismatch");if(t().version!==0)throw new TypeError("Invalid address version");if(t().data.length!==32)throw new TypeError("Invalid address data");a=t().data}if(e.hash){if(a.length>0&&!a.equals(e.hash))throw new TypeError("Hash mismatch");a=e.hash}if(e.output){if(e.output.length!==34||e.output[0]!==ks.OP_0||e.output[1]!==32)throw new TypeError("Output is invalid");let s=e.output.slice(2);if(a.length>0&&!a.equals(s))throw new TypeError("Hash mismatch");a=s}if(e.redeem){if(e.redeem.network&&e.redeem.network!==i)throw new TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw new TypeError("Ambiguous witness source");if(e.redeem.output){if(it.decompile(e.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");let s=Ps.sha256(e.redeem.output);if(a.length>0&&!a.equals(s))throw new TypeError("Hash mismatch");a=s}if(e.redeem.input&&!it.isPushOnly(n()))throw new TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&!vf(e.witness,e.redeem.witness))throw new TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&n().some(Ir)||e.redeem.output&&(it.decompile(e.redeem.output)||[]).some(Ir))throw new TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){let s=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(s))throw new TypeError("Witness and redeem.output mismatch");if(e.witness.some(Ir)||(it.decompile(s)||[]).some(Ir))throw new TypeError("Witness contains uncompressed pubkey")}}return Object.assign(o,e)}Ne.p2wsh=Sf});var Ns=x((x_,xs)=>{"use strict";c();l();var On=fa().Buffer,Tf=9007199254740991;function vn(e){if(e<0||e>Tf||e%1!==0)throw new RangeError("value out of range")}function $t(e,r,t){if(vn(e),r||(r=On.allocUnsafe(Rs(e))),!On.isBuffer(r))throw new TypeError("buffer must be a Buffer instance");return t||(t=0),e<253?(r.writeUInt8(e,t),$t.bytes=1):e<=65535?(r.writeUInt8(253,t),r.writeUInt16LE(e,t+1),$t.bytes=3):e<=4294967295?(r.writeUInt8(254,t),r.writeUInt32LE(e,t+1),$t.bytes=5):(r.writeUInt8(255,t),r.writeUInt32LE(e>>>0,t+1),r.writeUInt32LE(e/4294967296|0,t+5),$t.bytes=9),r}function Jt(e,r){if(!On.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");r||(r=0);var t=e.readUInt8(r);if(t<253)return Jt.bytes=1,t;if(t===253)return Jt.bytes=3,e.readUInt16LE(r+1);if(t===254)return Jt.bytes=5,e.readUInt32LE(r+1);Jt.bytes=9;var n=e.readUInt32LE(r+1),i=e.readUInt32LE(r+5),o=i*4294967296+n;return vn(o),o}function Rs(e){return vn(e),e<253?1:e<=65535?3:e<=4294967295?5:9}xs.exports={encode:$t,decode:Jt,encodingLength:Rs}});var Us=x(W=>{"use strict";c();l();var Pf=W&&W.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),kf=W&&W.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),As=W&&W.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Pf(r,e,t);return kf(r,e),r};Object.defineProperty(W,"__esModule",{value:!0});W.BufferReader=W.BufferWriter=W.cloneBuffer=W.reverseBuffer=W.writeUInt64LE=W.readUInt64LE=W.varuint=void 0;var _t=As(te()),{typeforce:Cs}=_t,er=As(Ns());W.varuint=er;function Bs(e,r){if(typeof e!="number")throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>r)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function Ds(e,r){let t=e.readUInt32LE(r),n=e.readUInt32LE(r+4);return n*=4294967296,Bs(n+t,9007199254740991),n+t}W.readUInt64LE=Ds;function Ls(e,r,t){return Bs(r,9007199254740991),e.writeInt32LE(r&-1,t),e.writeUInt32LE(Math.floor(r/4294967296),t+4),t+8}W.writeUInt64LE=Ls;function If(e){if(e.length<1)return e;let r=e.length-1,t=0;for(let n=0;n<e.length/2;n++)t=e[n],e[n]=e[r],e[r]=t,r--;return e}W.reverseBuffer=If;function Rf(e){let r=h.Buffer.allocUnsafe(e.length);return e.copy(r),r}W.cloneBuffer=Rf;var tr=class{static withCapacity(r){return new tr(h.Buffer.alloc(r))}constructor(r,t=0){this.buffer=r,this.offset=t,Cs(_t.tuple(_t.Buffer,_t.UInt32),[r,t])}writeUInt8(r){this.offset=this.buffer.writeUInt8(r,this.offset)}writeInt32(r){this.offset=this.buffer.writeInt32LE(r,this.offset)}writeUInt32(r){this.offset=this.buffer.writeUInt32LE(r,this.offset)}writeUInt64(r){this.offset=Ls(this.buffer,r,this.offset)}writeVarInt(r){er.encode(r,this.buffer,this.offset),this.offset+=er.encode.bytes}writeSlice(r){if(this.buffer.length<this.offset+r.length)throw new Error("Cannot write slice out of bounds");this.offset+=r.copy(this.buffer,this.offset)}writeVarSlice(r){this.writeVarInt(r.length),this.writeSlice(r)}writeVector(r){this.writeVarInt(r.length),r.forEach(t=>this.writeVarSlice(t))}end(){if(this.buffer.length===this.offset)return this.buffer;throw new Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}};W.BufferWriter=tr;var Sn=class{constructor(r,t=0){this.buffer=r,this.offset=t,Cs(_t.tuple(_t.Buffer,_t.UInt32),[r,t])}readUInt8(){let r=this.buffer.readUInt8(this.offset);return this.offset++,r}readInt32(){let r=this.buffer.readInt32LE(this.offset);return this.offset+=4,r}readUInt32(){let r=this.buffer.readUInt32LE(this.offset);return this.offset+=4,r}readUInt64(){let r=Ds(this.buffer,this.offset);return this.offset+=8,r}readVarInt(){let r=er.decode(this.buffer,this.offset);return this.offset+=er.decode.bytes,r}readSlice(r){if(this.buffer.length<this.offset+r)throw new Error("Cannot read slice out of bounds");let t=this.buffer.slice(this.offset,this.offset+r);return this.offset+=r,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let r=this.readVarInt(),t=[];for(let n=0;n<r;n++)t.push(this.readVarSlice());return t}};W.BufferReader=Sn});var js=x(Ct=>{"use strict";c();l();Object.defineProperty(Ct,"__esModule",{value:!0});Ct.taprootTweakPubkey=Ct.taprootTweakPrivKey=void 0;var xf=Be(),Pn=xf.signUtil.schnorr.secp256k1,kn=Pn.schnorr,Ms=Pn.secp256k1.ProjectivePoint,Tn=Pn.secp256k1.CURVE.n;function Hs(e,r){let t=kn.utils,n=t.taggedHash("TapTweak",e,r),i=t.bytesToNumberBE(n);if(i>=Tn)throw new Error("tweak higher than curve order");return i}function Nf(e,r=new Uint8Array){let t=kn.utils,n=t.bytesToNumberBE(e),i=Ms.fromPrivateKey(n),o=i.hasEvenY()?n:t.mod(-n,Tn),a=t.pointToBytes(i),s=Hs(a,r);return t.numberToBytesBE(t.mod(o+s,Tn),32)}Ct.taprootTweakPrivKey=Nf;function Af(e,r){r||(r=new Uint8Array);let t=kn.utils,n=Hs(e,r),o=t.lift_x(t.bytesToNumberBE(e)).add(Ms.fromPrivateKey(n)),a=o.hasEvenY()?0:1;return[t.pointToBytes(o),a]}Ct.taprootTweakPubkey=Af});var Ws=x(M=>{"use strict";c();l();var Cf=M&&M.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Bf=M&&M.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Df=M&&M.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Cf(r,e,t);return Bf(r,e),r};Object.defineProperty(M,"__esModule",{value:!0});M.tweakKey=M.tapTweakHash=M.tapleafHash=M.findScriptPath=M.toHashTree=M.rootHashFromPath=M.MAX_TAPTREE_DEPTH=M.LEAF_VERSION_TAPSCRIPT=void 0;var ot=Cr(),Nn=Df(Nt()),Fs=Us(),Lf=te(),Uf=js();M.LEAF_VERSION_TAPSCRIPT=192;M.MAX_TAPTREE_DEPTH=128;var Mf=e=>"left"in e&&"right"in e;function Hf(e,r){if(e.length<33)throw new TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);let t=(e.length-33)/32,n=r;for(let i=0;i<t;i++){let o=e.slice(33+32*i,65+32*i);n.compare(o)<0?n=xn(n,o):n=xn(o,n)}return n}M.rootHashFromPath=Hf;function In(e){if((0,Lf.isTapleaf)(e))return{hash:qs(e)};let r=[In(e[0]),In(e[1])];r.sort((i,o)=>i.hash.compare(o.hash));let[t,n]=r;return{hash:xn(t.hash,n.hash),left:t,right:n}}M.toHashTree=In;function Rn(e,r){if(Mf(e)){let t=Rn(e.left,r);if(t!==void 0)return[...t,e.right.hash];let n=Rn(e.right,r);if(n!==void 0)return[...n,e.left.hash]}else if(e.hash.equals(r))return[]}M.findScriptPath=Rn;function qs(e){let r=e.version||M.LEAF_VERSION_TAPSCRIPT;return Nn.taggedHash("TapLeaf",ot.Buffer.concat([ot.Buffer.from([r]),qf(e.output)]))}M.tapleafHash=qs;function jf(e,r){return Nn.taggedHash("TapTweak",ot.Buffer.concat(r?[e,r]:[e]))}M.tapTweakHash=jf;function Ff(e,r){if(!ot.Buffer.isBuffer(e)||e.length!==32||r&&r.length!==32)return null;let t=(0,Uf.taprootTweakPubkey)(e,r);return{parity:t[1],x:ot.Buffer.from(t[0])}}M.tweakKey=Ff;function xn(e,r){return Nn.taggedHash("TapBranch",ot.Buffer.concat([e,r]))}function qf(e){let r=Fs.varuint.encodingLength(e.length),t=ot.Buffer.allocUnsafe(r);return Fs.varuint.encode(e.length,t),ot.Buffer.concat([t,e])}});var Zs=x(Ae=>{"use strict";c();l();var Wf=Ae&&Ae.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Vf=Ae&&Ae.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Ks=Ae&&Ae.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Wf(r,e,t);return Vf(r,e),r};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.p2tr=void 0;var Rr=Cr(),Gf=pe(),An=Ks(ve()),B=te(),ne=Ws(),ce=Ks(je()),xr=Be(),Vs=An.OPS,Gs=1,Kf=80;function Zf(e,r){if(!e.address&&!e.output&&!e.pubkey&&!e.internalPubkey&&!(e.witness&&e.witness.length>1))throw new TypeError("Not enough data");r=Object.assign({validate:!0},r||{}),(0,B.typeforce)({address:B.typeforce.maybe(B.typeforce.String),input:B.typeforce.maybe(B.typeforce.BufferN(0)),network:B.typeforce.maybe(B.typeforce.Object),output:B.typeforce.maybe(B.typeforce.BufferN(34)),internalPubkey:B.typeforce.maybe(B.typeforce.BufferN(32)),hash:B.typeforce.maybe(B.typeforce.BufferN(32)),pubkey:B.typeforce.maybe(B.typeforce.BufferN(32)),witness:B.typeforce.maybe(B.typeforce.arrayOf(B.typeforce.Buffer)),scriptTree:B.typeforce.maybe(B.isTaptree),redeem:B.typeforce.maybe({output:B.typeforce.maybe(B.typeforce.Buffer),redeemVersion:B.typeforce.maybe(B.typeforce.Number),witness:B.typeforce.maybe(B.typeforce.arrayOf(B.typeforce.Buffer))}),redeemVersion:B.typeforce.maybe(B.typeforce.Number)},e);let t=ce.value(()=>{let s=xr.base.bech32m.decode(e.address),d=s.words.shift(),f=xr.base.bech32m.fromWords(s.words);return{version:d,prefix:s.prefix,data:Rr.Buffer.from(f)}}),n=ce.value(()=>{if(!(!e.witness||!e.witness.length))return e.witness.length>=2&&e.witness[e.witness.length-1][0]===Kf?e.witness.slice(0,-1):e.witness.slice()}),i=ce.value(()=>{if(e.scriptTree)return(0,ne.toHashTree)(e.scriptTree);if(e.hash)return{hash:e.hash}}),o=e.network||Gf.bitcoin,a={name:"p2tr",network:o};if(ce.prop(a,"address",()=>{if(!a.pubkey)return;let s=xr.base.bech32m.toWords(a.pubkey);return s.unshift(Gs),xr.base.bech32m.encode(o.bech32,s)}),ce.prop(a,"hash",()=>{let s=i();if(s)return s.hash;let d=n();if(d&&d.length>1){let f=d[d.length-1],u=f[0]&B.TAPLEAF_VERSION_MASK,g=d[d.length-2],w=(0,ne.tapleafHash)({output:g,version:u});return(0,ne.rootHashFromPath)(f,w)}return null}),ce.prop(a,"output",()=>{if(!!a.pubkey)return An.compile([Vs.OP_1,a.pubkey])}),ce.prop(a,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&e.redeem.redeemVersion!==void 0&&e.redeem.redeemVersion!==null?e.redeem.redeemVersion:ne.LEAF_VERSION_TAPSCRIPT),ce.prop(a,"redeem",()=>{let s=n();if(!(!s||s.length<2))return{output:s[s.length-2],witness:s.slice(0,-2),redeemVersion:s[s.length-1][0]&B.TAPLEAF_VERSION_MASK}}),ce.prop(a,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return t().data;if(a.internalPubkey){let s=(0,ne.tweakKey)(a.internalPubkey,a.hash);if(s)return s.x}}),ce.prop(a,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;let s=n();if(s&&s.length>1)return s[s.length-1].slice(1,33)}),ce.prop(a,"signature",()=>{if(e.signature)return e.signature;let s=n();if(!(!s||s.length!==1))return s[0]}),ce.prop(a,"witness",()=>{if(e.witness)return e.witness;let s=i();if(s&&e.redeem&&e.redeem.output&&e.internalPubkey){let d=(0,ne.tapleafHash)({output:e.redeem.output,version:a.redeemVersion}),f=(0,ne.findScriptPath)(s,d);if(!f)return;let u=(0,ne.tweakKey)(e.internalPubkey,s.hash);if(!u)return;let g=Rr.Buffer.concat([Rr.Buffer.from([a.redeemVersion|u.parity]),e.internalPubkey].concat(f));return[e.redeem.output,g]}if(e.signature)return[e.signature]}),r.validate){let s=Rr.Buffer.from([]);if(e.address){if(o&&o.bech32!==t().prefix)throw new TypeError("Invalid prefix or Network mismatch");if(t().version!==Gs)throw new TypeError("Invalid address version");if(t().data.length!==32)throw new TypeError("Invalid address data");s=t().data}if(e.pubkey){if(s.length>0&&!s.equals(e.pubkey))throw new TypeError("Pubkey mismatch");s=e.pubkey}if(e.output){if(e.output.length!==34||e.output[0]!==Vs.OP_1||e.output[1]!==32)throw new TypeError("Output is invalid");if(s.length>0&&!s.equals(e.output.slice(2)))throw new TypeError("Pubkey mismatch");s=e.output.slice(2)}if(e.internalPubkey){let u=(0,ne.tweakKey)(e.internalPubkey,a.hash);if(s.length>0&&!s.equals(u.x))throw new TypeError("Pubkey mismatch");s=u.x}if(s&&s.length&&s.length!==32)throw new TypeError("Invalid pubkey for p2tr");let d=i();if(e.hash&&d&&!e.hash.equals(d.hash))throw new TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&d){let u=(0,ne.tapleafHash)({output:e.redeem.output,version:a.redeemVersion});if(!(0,ne.findScriptPath)(d,u))throw new TypeError("Redeem script not in tree")}let f=n();if(e.redeem&&a.redeem){if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==a.redeem.redeemVersion)throw new TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(An.decompile(e.redeem.output).length===0)throw new TypeError("Redeem.output is invalid");if(a.redeem.output&&!e.redeem.output.equals(a.redeem.output))throw new TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&a.redeem.witness&&!zf(e.redeem.witness,a.redeem.witness))throw new TypeError("Redeem.witness and witness mismatch")}if(f&&f.length)if(f.length===1){if(e.signature&&!e.signature.equals(f[0]))throw new TypeError("Signature mismatch")}else{let u=f[f.length-1];if(u.length<33)throw new TypeError(`The control-block length is too small. Got ${u.length}, expected min 33.`);if((u.length-33)%32!==0)throw new TypeError(`The control-block length of ${u.length} is incorrect!`);let g=(u.length-33)/32;if(g>128)throw new TypeError(`The script path is too long. Got ${g}, expected max 128.`);let w=u.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(w))throw new TypeError("Internal pubkey mismatch");if(w.length!==32)throw new TypeError("Invalid internalPubkey for p2tr witness");let p=u[0]&B.TAPLEAF_VERSION_MASK,v=f[f.length-2],O=(0,ne.tapleafHash)({output:v,version:p}),S=(0,ne.rootHashFromPath)(u,O),b=(0,ne.tweakKey)(w,S);if(!b)throw new TypeError("Invalid outputKey for p2tr witness");if(s.length&&!s.equals(b.x))throw new TypeError("Pubkey mismatch for p2tr witness");if(b.parity!==(u[0]&1))throw new Error("Incorrect parity")}}return Object.assign(a,e)}Ae.p2tr=Zf;function zf(e,r){return e.length!==r.length?!1:e.every((t,n)=>t.equals(r[n]))}});var zs=x(X=>{"use strict";c();l();Object.defineProperty(X,"__esModule",{value:!0});X.p2tr=X.p2wsh=X.p2wpkh=X.p2sh=X.p2pkh=X.p2pk=X.p2ms=X.embed=void 0;var Yf=cs();Object.defineProperty(X,"embed",{enumerable:!0,get:function(){return Yf.p2data}});var Xf=ds();Object.defineProperty(X,"p2ms",{enumerable:!0,get:function(){return Xf.p2ms}});var Qf=ws();Object.defineProperty(X,"p2pk",{enumerable:!0,get:function(){return Qf.p2pk}});var $f=Es();Object.defineProperty(X,"p2pkh",{enumerable:!0,get:function(){return $f.p2pkh}});var Jf=vs();Object.defineProperty(X,"p2sh",{enumerable:!0,get:function(){return Jf.p2sh}});var ec=Ts();Object.defineProperty(X,"p2wpkh",{enumerable:!0,get:function(){return ec.p2wpkh}});var tc=Is();Object.defineProperty(X,"p2wsh",{enumerable:!0,get:function(){return tc.p2wsh}});var rc=Zs();Object.defineProperty(X,"p2tr",{enumerable:!0,get:function(){return rc.p2tr}})});var sa=x(Z=>{"use strict";c();l();var nc=Z&&Z.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(r,t);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,i)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),ic=Z&&Z.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Ar=Z&&Z.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&nc(r,e,t);return ic(r,e),r};Object.defineProperty(Z,"__esModule",{value:!0});Z.toOutputScript=Z.fromOutputScript=Z.toBech32=Z.toBase58Check=Z.fromBech32=Z.fromBase58Check=void 0;var Ys=Ar(pe()),Ce=Ar(zs()),Xs=Ar(ve()),Nr=Ar(te()),st=Be(),{typeforce:oc}=Nr,Qs=40,$s=2,Js=16,ea=2,ta=80,ra="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function sc(e,r){let t=e.slice(2);if(t.length<$s||t.length>Qs)throw new TypeError("Invalid program length for segwit address");let n=e[0]-ta;if(n<ea||n>Js)throw new TypeError("Invalid version for segwit address");if(e[1]!==t.length)throw new TypeError("Invalid script for segwit address");return console.warn(ra),oa(t,n,r.bech32)}function na(e){let r=st.base.fromBase58Check(e);if(r.length<21)throw new TypeError(e+" is too short");if(r.length>21)throw new TypeError(e+" is too long");let t=r.readUInt8(0),n=r.slice(1);return{version:t,hash:n}}Z.fromBase58Check=na;function ia(e){let r,t;try{r=st.base.bech32.decode(e)}catch{}if(r){if(t=r.words[0],t!==0)throw new TypeError(e+" uses wrong encoding")}else if(r=st.base.bech32m.decode(e),t=r.words[0],t===0)throw new TypeError(e+" uses wrong encoding");let n=st.base.bech32.fromWords(r.words.slice(1));return{version:t,prefix:r.prefix,data:h.Buffer.from(n)}}Z.fromBech32=ia;function ac(e,r){oc(Nr.tuple(Nr.Hash160bit,Nr.UInt8),arguments);let t=h.Buffer.allocUnsafe(21);return t.writeUInt8(r,0),e.copy(t,1),st.base.toBase58Check(t)}Z.toBase58Check=ac;function oa(e,r,t){let n=st.base.bech32.toWords(e);return n.unshift(r),r===0?st.base.bech32.encode(t,n):st.base.bech32m.encode(t,n)}Z.toBech32=oa;function uc(e,r){r=r||Ys.bitcoin;try{return Ce.p2pkh({output:e,network:r}).address}catch{}try{return Ce.p2sh({output:e,network:r}).address}catch{}try{return Ce.p2wpkh({output:e,network:r}).address}catch{}try{return Ce.p2wsh({output:e,network:r}).address}catch{}try{return Ce.p2tr({output:e,network:r}).address}catch{}try{return sc(e,r)}catch{}throw new Error(Xs.toASM(e)+" has no matching Address")}Z.fromOutputScript=uc;function fc(e,r){r=r||Ys.bitcoin;let t,n;try{t=na(e)}catch{}if(t){if(t.version===r.pubKeyHash)return Ce.p2pkh({hash:t.hash}).output;if(t.version===r.scriptHash)return Ce.p2sh({hash:t.hash}).output}else{try{n=ia(e)}catch{}if(n){if(n.prefix!==r.bech32)throw new Error(e+" has an invalid prefix");if(n.version===0){if(n.data.length===20)return Ce.p2wpkh({hash:n.data}).output;if(n.data.length===32)return Ce.p2wsh({hash:n.data}).output}else if(n.version===1){if(n.data.length===32)return Ce.p2tr({pubkey:n.data}).output}else if(n.version>=ea&&n.version<=Js&&n.data.length>=$s&&n.data.length<=Qs)return console.warn(ra),Xs.compile([n.version+ta,n.data])}}throw new Error(e+" has no matching Script")}Z.toOutputScript=fc});c();l();var ir=Q(we());c();l();c();l();var fi=Q(we());function ui(e,r){let{chainId:t,isNativeToken:n,balance:i,availableBalance:o}=r,{fromToStore:a,accountStore:s}=le(),{getTokenBalanceByAccount:d}=a,f=Ze(t,me.BTC_MAINNET)&&n;(0,fi.useEffect)(()=>{f&&s.computedSpecialWalletAddress&&d(e,r)},[f,i,o,s.computedSpecialWalletAddress])}function la(){let{fromToStore:e}=le(),{from:r,to:t}=e;ui(Mr.FROM,Ht(r)),ui(Mr.TO,Ht(t))}var ci=la;function ha(){ci()}var li=ha;function da(){let{accountStore:e,fromToStore:r}=le(),{computedAccountId:t,address:n,setFromChainId:i}=e,{from:o,to:a,setBalanceState:s,getSwapTokenBalance:d,computedIsToAddressEqualsCurrentToAddress:f}=r,{amount:u,chainId:g}=o;(0,ir.useEffect)(()=>{$n(g)&&i(g)},[g,i]),(0,ir.useEffect)(()=>{d()},[t,d]),(0,ir.useEffect)(()=>{s({amount:u,address:n,from:o,to:a})},[u,n,o,a,s,f]),li()}var Pc=da;c();l();var ht=Q(we()),wi=Q(jr());c();l();var Ft=Q(we());var pa=()=>{let{fromToStore:e,commonStore:r,accountStore:t}=le(),{computedIsMarket:n,computedIsWalletEnv:i}=r,{address:o}=t,{from:a={},to:s}=e,{tokenContractAddress:d,tokenName:f,chainName:u}=a,{tokenContractAddress:g,tokenName:w}=s,p=(0,Ft.useMemo)(()=>({user_id:o,terminal_type:i?"Extension":"Web",from_token_address:d,from_token_name:f,to_token_address:n?"":g,to_token_name:n?"":w,chain_name:u}),[o,u,n,i,d,f,g,w]),v=(0,Ft.useCallback)(()=>{(n?ei:ri)(p)},[p,n]),O=(0,Ft.useCallback)(S=>{let b=n?ni:ti,A={...p,content:S};b(A)},[p,n]);return{monitorShareClickEvent:v,monitorCopyClickEvent:O}},or=pa;c();l();var he=Q(we()),di=Q(ca()),Fr=Q(jr());c();l();var Ee=Q(we());rr();var _a=e=>{let{fromToStore:r,commonStore:t}=le(),{computedIsMarket:n}=t,[i,o]=(0,Ee.useState)(""),[a,s]=(0,Ee.useState)(!1),[d,f]=(0,Ee.useState)(null),{from:u={},to:g}=r,{chainId:w,tokenContractAddress:p}=u,{chainId:v,tokenContractAddress:O}=g,S=(0,Ee.useCallback)(async()=>{s(!0),f(null);let[b,A]=await Mn(ii.get(Yn,{params:{source:n?1:0,fromTokenAddress:p,toTokenAddress:O,chainId:w}}));if(s(!1),b){f(b);return}o(A?.data?.url)},[n,p,O,w]);return(0,Ee.useEffect)(()=>{p&&O&&w&&v&&e&&S()},[p,O,w,v,e,S]),(0,Ee.useMemo)(()=>({shareLink:i,loading:a,error:d,refresh:S}),[i,a,d,S])},hi=_a;c();l();var lt={"share-button":"_share-button_gi8lr_1",shareButton:"_share-button_gi8lr_1",description:"_description_gi8lr_4",input:"_input_gi8lr_10","copy-button":"_copy-button_gi8lr_15",copyButton:"_copy-button_gi8lr_15",loading:"_loading_gi8lr_18",empty:"_empty_gi8lr_21"};var wa=({shareLink:e=""})=>{let{monitorCopyClickEvent:r}=or();return he.default.createElement(he.default.Fragment,null,he.default.createElement(Hn,{value:e,size:Br.xl,readOnly:!0,inputClassName:lt.input,suffix:he.default.createElement(di.CopyToClipboard,{text:e,onCopy:()=>{r(e),jn.success(N("swaptrade_order_info_label_from_copy_success"))}},he.default.createElement(Ge,{className:lt.copyButton,category:Ge.CATEGORY.outline,type:Ge.TYPE.primary,size:Ge.SIZE.xxs},N("swaptrade_dialog_btn_desc_copy")))}),he.default.createElement("p",{className:(0,Fr.default)(lt.description)},N("swaptrade_dialog_dialog_title_share_x")))},ma=({visible:e,...r})=>{let{shareLink:t,loading:n,error:i,refresh:o}=hi(!!e),a=()=>i?he.default.createElement(Lr.State,{className:lt.empty,type:Lr.State.TYPE.noNetwork,title:N("swaptrade_general_emptystate_title_loading_fail"),description:N("swaptrade_general_emptystate_subtitle_network_error"),buttonText:N("swaptrade_recent_transaction_dialog_btn_reload"),onButtonClick:o}):n?he.default.createElement(Dr.Circle,{className:(0,Fr.default)(lt.loading,"flex justify-center"),size:Dr.SIZE.xl}):he.default.createElement(wa,{shareLink:t});return he.default.createElement(Mt.Confirmation,{title:N("swaptrade_mid_dialog_header_share_as_blink"),hideCloseBtn:!1,onConfirm:()=>{},confirmText:n||i?void 0:N("swaptrade_mid_dialog_btn_share_on_x"),visible:e,width:420,confirmBtnProps:n||i?void 0:{className:lt.shareButton,size:Br.lg,icon:"okx-defi-dex-twitter",iconType:Ge.ICON_POSITION.leading,href:oi(t),target:"__blank"},...r},a())},pi=ma;c();l();var _i={icon:"_icon_26h91_1"};var ya=({iconStyle:e,iconClassName:r,tooltipProps:t})=>{let[n,i]=ht.default.useState(!1),{monitorShareClickEvent:o}=or();return ht.default.createElement(ht.default.Fragment,null,ht.default.createElement(Ur,{placement:Ur.DIRECTION.bottom,title:N("swaptrade_mid_dialog_header_share_as_blink"),...t},ht.default.createElement(Lt,{className:(0,wi.default)("okx-defi-nft-share2",_i.icon,r),style:e,onClick:()=>(o(),i(!0))})),ht.default.createElement(pi,{visible:n,onClose:()=>i(!1)}))},mi=ya;c();l();var Le=Q(we()),sr=Q(jr());c();l();var De={navigator:"_navigator_12g8k_1",title:"_title_12g8k_8",back:"_back_12g8k_13",right:"_right_12g8k_14","right-icon":"_right-icon_12g8k_23",rightIcon:"_right-icon_12g8k_23",icon:"_icon_12g8k_43"};var ga=({className:e,onBack:r,title:t,rightIcon:n,settingIcon:i,showShareBlinkIcon:o,settingIconClick:a=()=>{}})=>Le.default.createElement("div",{className:(0,sr.default)(De.navigator,e)},Le.default.createElement("div",{className:De.back},Le.default.createElement(Lt,{onClick:r,className:(0,sr.default)("okds-arrow-chevron-left-centered-md",De.icon)})),Le.default.createElement("div",{className:De.title},t),Le.default.createElement("div",{className:De.right},o&&Le.default.createElement(mi,{iconStyle:{fontSize:24},tooltipProps:{show:!1},iconClassName:De.rightIcon}),n&&Le.default.createElement("div",{className:De.rightIcon},n),i&&Le.default.createElement(Lt,{className:(0,sr.default)("okds-setting",De.rightIcon),style:{fontSize:"24px"},onClick:a}))),Il=ga;c();l();var Ei=Q(we());c();l();var ar=Q(we());c();l();var yi={"warn-state-container":"_warn-state-container_6j01f_1",warnStateContainer:"_warn-state-container_6j01f_1","error-state-container":"_error-state-container_6j01f_2",errorStateContainer:"_error-state-container_6j01f_2","error-state-title":"_error-state-title_6j01f_15",errorStateTitle:"_error-state-title_6j01f_15","error-state-content":"_error-state-content_6j01f_21",errorStateContent:"_error-state-content_6j01f_21","add-funds":"_add-funds_6j01f_28",addFunds:"_add-funds_6j01f_28",warning:"_warning_6j01f_33",error:"_error_6j01f_2","ledger-network-tips":"_ledger-network-tips_6j01f_39",ledgerNetworkTips:"_ledger-network-tips_6j01f_39",mb16:"_mb16_6j01f_42","error-icon":"_error-icon_6j01f_45",errorIcon:"_error-icon_6j01f_45","warn-icon":"_warn-icon_6j01f_46",warnIcon:"_warn-icon_6j01f_46"};var Ea=({chainName:e})=>{let r=()=>{let t=Mt.tip({infoType:Mt.Tip.INFO_TYPE.default,children:N("swaptrade_top_modaldesc_ledger_supported_paychains"),confirmText:N("swaptrade_card_btn_value_difference_gotit"),onConfirm:()=>{t.destroy()},confirmBtnProps:{block:!0,size:Ge.SIZE.md}})};return ar.default.createElement(ar.default.Fragment,null,N("swaptrade_top_alert_desc_paychain_not_supported",{payChain:e}),ar.default.createElement(Ut,{className:yi.ledgerNetworkTips,type:Ut.TYPE.primary,weight:Ut.WEIGHT.muted,size:Ut.SIZE.xs,onClick:r},N("swaptrade_top_alert_textbtn_view_supported_chains")))},gi=Ea;var ba=e=>{let r=N("swaptrade_adjustslip_modal_title_wrongnetwork"),t=N("swaptrade_card_alert_switch_wallet_to_match",{chainName:e});return mt()?(r=N("swaptrade_extension_mid_plzswitch_wallet"),t=N("swaptrade_extension_mid_plzswitch_wallettips",{chain:e})):ai&&(r=N("swaptrade_top_alert_title_please_switch_network"),t=Ei.default.createElement(gi,{chainName:e})),{title:r,content:t}},ze={default:()=>({type:"",title:"",content:"",errorType:""}),quote:()=>({type:"error",title:N("swap_title_quote_server_error"),content:N("swaptrade_quote_server_error_content"),errorType:Ke.QUOTE_ERROR}),honeypot:e=>({type:"error",title:N("wallet_swap_alert_scamtoken",{tokenSymbol:e}),titleEquation:N("wallet_swap_alert_scamtoken",{tokenSymbol:ge(e)}),content:N("wallet_swap_toast_scam_token_desc"),errorType:Ke.QUOTE_ERROR}),leverageToken:(e,r)=>{let t=e&&r?N("swaptrade_mid_alert_highrisk_both_token",{sellToken:e.tokenSymbol,receiveToken:r.tokenSymbol}):N("swaptrade_mid_alert_highrisk_token",{token:e?.tokenSymbol||r?.tokenSymbol}),n=e&&r?N("swaptrade_mid_alert_highrisk_both_token",{sellToken:ge(e.tokenSymbol),receiveToken:ge(r.tokenSymbol)}):N("swaptrade_mid_alert_highrisk_token",{token:ge(e?.tokenSymbol)||ge(r?.tokenSymbol)});return{type:"error",title:t,titleEquation:n,content:N("swaptrade_top_text_protect_capital"),errorType:Ke.QUOTE_ERROR}},wrongNetwork:e=>{let{title:r,content:t}=ba(e);return{type:"warning",title:r,content:t,errorType:Ke.NETWORK_ERROR}},feeConfig:()=>({type:"error",title:N("swaptrade_card_reminder_title_parameter_error"),content:N("swaptrade_card_reminder_desc_feepercent",{feePercent:"feePercent",value1:"0",value2:ct(Gn,{needZero:!1})}),errorType:Ke.FEE_CONFIG_ERROR}),accountErrorTips:()=>({type:"warning",title:N("swaptrade_adjustslip_modal_title_wrongnetwork"),content:N("swaptrade_mid_alert_desc_vm_wallet"),errorType:Ke.FEE_CONFIG_ERROR})},$l={handleBalanceErrorState:({state:e})=>e.errorType===Ke.BALANCE_ERROR?ze.default():"",handleQuoteErrorState:({quote:e,honeypotToken:r,hasLeverageToken:t,leverageTokenPair:n=[]})=>{let{quoteError:i}=e;return i?ze.quote():r?ze.honeypot(r.tokenSymbol):t?ze.leverageToken(n[0],n[1]):""},handleNetworkErrorState:e=>(Jn({type:Vn.SWITCH_WALLET}),ze.wrongNetwork(e)),handleDefaultState:()=>ze.default(),handleFeeConfigErrorState:()=>ze.feeConfig(),handleFacetTokenAccountErrorState:()=>ze.accountErrorTips()};c();l();rr();c();l();rr();function qr(){return mt()?{walletType:"okwallet-extension"}:Un.getProjectStorage("onChain")}var bi={HEART:"heart",HEART_FINISH:"heartFinish",UPDATE_HASH:"updateHash",UPDATE_HASH_ERROR:"updateHashError",SAVE_ORDER:"saveOrder",SAVE_ORDER_PARAMS:"saveOrderParams",SAVE_ORDER_ERROR:"saveOrderError",SEND_ERROR:"sendError",ON_WALLET_FAIL:"onWalletFail",PAYLOAD:"payload",UPDATE_NONCE:"updateNonce",UPDATE_NONCE_FAIL:"updateNonceFail",CLOSE_CONFIRM_SWAP:"closeConfirmSwap",BEFOREUNLOAD:"beforeunload",CANCEL_ORDER:"cancelOrder",REDEEM_ORDER:"redeemOrder",ERROR_BOUNDARY:"errorBoundary",STUFF_LOG:"stuffLog",GET_LIMIT_CALL_DATA_ERROR:"getLimitCallDataError",SAVE_APPROVE:"saveApprove",SAVE_APPROVE_ERROR:"saveApproveError",APPROVE_DATA:"approveData",APPROVE_TOKEN_ERROR:"approveTokenError",CHAIN_ID_ADDRESS_MAP_IS_EMPTY:"chainIdAddressMapIsEmpty",UPDATE_BTC_BALANCE_ERROR_BEFORE_SWAP:"updateBtcBalanceErrorBeforeSwap",CHAIN_INFO:"chainInfo",ON_CHAIN_CHANGE:"onChainChange",LINK_SWITCH_START:"linkSwitchStart",LINK_SWITCH_SUCCESS:"linkSwitchSuccess",LINK_SWITCH_FAILED:"linkSwitchFailed",LINK_SWITCH_END:"linkSwitchEnd",DOUBLE_CHECK_CHAIN_ID_SUCCESS:"doubleCheckChainIdSuccess",DOUBLE_CHECK_CHAIN_ID_FAILED:"doubleCheckChainIdFailed",GET_CHAIN_ID_FAILED:"getChainIdFailed",UPDATE_APPROVAL_GAS_INFO_ERROR:"updateApprovalGasInfoError",WALLET_INFO:"walletInfo",OVER_VIEW_PRE_DATA_ERROR:"overViewInfoPreDataError",TRANSACTION_HISTORY_PRE_DATA_ERROR:"transactionHistoryPreDataError",REDEEM_ORDER_CALL_DATA:"redeemOrderCallData",REDEEM_ORDER_CALL_DATA_ERROR:"redeemOrderCallDataError",REDEEM_ORDER_ERROR:"redeemOrderError",INTENT_QUOTE_CALLDATA_ERROR:"intentQuoteCallDataError",INTENT_SWAP_SIGN_ERROR:"intentSwapSignError",INTENT_ORDER_CREATE_ERROR:"intentOrderCreateError",INTENT_SWAP_PROCESS_ERROR:"intentSwapProcessError",REGISTER_CO_LISTING_ERROR:"registerCoListingError",BEFORE_SEND_TRANSACTION_ERROR:"beforeSendTransactionError",TRANSACTION_HISTORY_LIST_ERROR:"transaction_history_list_error",TRANSACTION_HISTORY_INFO_ERROR:"transaction_history_info_error",EXTENSION_SWITCH_BTC_ADDRESS_ERROR:"extensionSwitchBtcAddressError",CHECK_CHAIN_ID_BEFORE_SEND_TRANSACTION:"checkChainIdBeforeSendTransaction",CHECK_CHAIN_ID_AFTER_SEND_TRANSACTION:"checkChainIdAfterSendTransaction",WIDGET_UPDATE_PROVIDER_ERROR:"widgetUpdateProviderError",OK_GLOBAL_LOCALE_MAP_IS_EMPTY:"okGlobalLocaleMapIsEmpty",SET_LANGUAGE_ERROR:"setLanguageError"};var Oa={business:"dex"},Wr=class{constructor(r){_(this,"setTags",r=>{this.tags={...this.tags,...r}});_(this,"extendTags",()=>{let{walletType:r,scanAppType:t}=qr();return Qn({walletType:r,scanAppType:t,taskId:this.uid,...this.tags},Xn)});_(this,"wrapHandle",(r,t,n)=>{r(t,{...n,tags:{...this.extendTags(),...n?.tags}})});_(this,"debug",(...r)=>{this.wrapHandle(ft.debug,...r)});_(this,"info",(...r)=>{this.wrapHandle(ft.info,...r)});_(this,"error",(...r)=>{this.wrapHandle(ft.error,...r)});_(this,"warn",(...r)=>{this.wrapHandle(ft.warn,...r)});_(this,"stuff",(...r)=>{r.length===1&&typeof r[0]=="string"?this.wrapHandle(ft.info,bi.STUFF_LOG,{msg:r[0]}):this.wrapHandle(ft.info,bi.STUFF_LOG,...r)});_(this,"generateUUID",()=>{this.uid=si()});_(this,"timerRef",null);_(this,"heartNumber",0);_(this,"uid","");_(this,"keepLive",()=>{this.generateUUID(),this.heartNumber=0,this.timerRef&&clearInterval(this.timerRef),this.heartCheck(),this.timerRef=setInterval(()=>{this.heartCheck()},30*1e3)});_(this,"heartCheck",()=>{this.info("heart",{tags:{heartNumber:this.heartNumber}}),this.heartNumber++});_(this,"removeKeep",()=>{this.timerRef&&clearInterval(this.timerRef),this.info("heart finish",{tags:{heartNumber:this.heartNumber}}),this.heartNumber=0,this.uid=""});this.tags=r}};var Oi=new Wr(Oa);c();l();c();l();c();l();c();l();c();l();var qt=class{constructor(r,t){_(this,"percent","");_(this,"exactPercent","");_(this,"dexRouterPercent","");Object.assign(this,t),this.dexRouterPercent=r}get computedPercent(){return this.percent?ct(this.percent,{needZero:!1}):""}get computedExactPercent(){let r=nr.BigNumber(this.percent).multipliedBy(this.dexRouterPercent).dividedBy(100);return r.isNaN()?"":ct(r.toNumber(),{needZero:!1})}};var Wt=class{constructor(r,t,n){_(this,"fromToken",{});_(this,"toToken",{});_(this,"dexQuoteInfoList",[]);let{fromToken:i={},toToken:o={},dexQuoteInfoList:a}=t||{};this.fromToken=i,this.toToken=o,this.dialogHeaderText=n?ge(this.toToken?.tokenSymbol):`${ge(this.fromToken?.tokenSymbol)}/${ge(this.toToken?.tokenSymbol)}`,yt(a)&&(this.dexQuoteInfoList=a.map(s=>new qt(r,s)))}};var Vt=class{constructor(r,t){_(this,"percent","");_(this,"router","");_(this,"subRouterList",[]);_(this,"flag","");let{percent:n="",router:i="",flag:o="",subRouterList:a}=r||{};this.percent=n,this.router=i,this.flag=o,yt(a)&&(this.subRouterList=a.map(s=>new Wt(n,s,t)))}get computedPercent(){return this.percent?ct(this.percent,{needZero:!1}):""}};var Ye=class{constructor(r,t=!1){_(this,"data",[]);yt(r)&&(this.data=r.map(n=>new Vt(n,t)))}};var se={DEFAULT:0,LOADING:1,DISCONNECTION:2,NO_DATA:3,SHOW_DATA:4},Ue={DISMISS:"0",FROM:"1",BRIDGE:"2",TO:"3"},Gr={IN_CHAIN:"0",CROSS_CHAIN:"1"},ur={NORMAL_PERCENT:0,EXACT_PERCENT:1},Kr=class{constructor({swapStore:r,fromToStore:t,swapDappStore:n}){_(this,"showEntryForPc",!1);_(this,"isShowShowAll",!0);_(this,"updateIsShowShowAll",(r=!1)=>{this.isShowShowAll=r});_(this,"status",se.LOADING);_(this,"percentType",ur.NORMAL_PERCENT);_(this,"swapType",Gr.IN_CHAIN);_(this,"tokenInfo",{dexRouter:{token0:{},token1:{}},fromDexRouter:{token0:{},token1:{}},bridge:{token0:{},token1:{}},toDexRouter:{token0:{},token1:{}}});_(this,"dexRouterList",[]);_(this,"fromDexRouterList",[]);_(this,"toDexRouterToList",[]);_(this,"bridgeRouterList",[]);_(this,"getInfoByMenuType",r=>{if(this.swapType===Gr.IN_CHAIN)return{routerList:this.dexRouterList,tokenInfo:this.tokenInfo.dexRouter};switch(r){case Ue.FROM:return{routerList:this.fromDexRouterList,tokenInfo:this.tokenInfo.fromDexRouter};case Ue.BRIDGE:return{routerList:this.bridgeRouterList,tokenInfo:this.tokenInfo.bridge};case Ue.TO:return{routerList:this.toDexRouterToList,tokenInfo:this.tokenInfo.toDexRouter};default:return{routerList:[],tokenInfo:this.tokenInfo.dexRouter}}});_(this,"currentMenu",Ue.DISMISS);_(this,"menuList",[]);_(this,"showMenuList",!0);_(this,"isCrossBridgeOnly",!1);_(this,"showXRouteModal",Zn.SWAP);_(this,"subRouterData",null);_(this,"subRouterModal",!1);_(this,"setSubRouterModal",r=>{this.subRouterModal=r});_(this,"dexQuoteInfoListData",[]);_(this,"setDexQuoteInfoListData",r=>{this.dexQuoteInfoListData=r});_(this,"oldRouterModal",!1);this.fromToStore=t||{},this.quoteStore=r.quoteStore||{},this.swapDappStore=n||{},Wn(this,{},{autoBind:!0}),qn(()=>({isFetchQuoting:this.quoteStore.quote?.isFetchQuoting,bestRoute:this.quoteStore.computedRouterForSmartRouterStore,quoteError:this.quoteStore.quote?.quoteError,quoteNull:this.quoteStore.quote?.quoteNull,fromToken:this.fromToStore.from,toToken:this.fromToStore.to,shouldPauseQuote:this.swapDappStore.computedSupportDappTradeByChain}),({isFetchQuoting:i,bestRoute:o,quoteError:a,quoteNull:s,shouldPauseQuote:d})=>{let f=d?{}:Ht(o);this.setStatusByQuote({isFetchQuoting:i,quoteError:a,bestRoute:f,quoteNull:s,shouldPauseQuote:d}),this.updateData(f||{})},{equals:Fn.shallow})}setShowEntryForPc(r){this.showEntryForPc=r}setStatus(r){let n=Hr(se).some(i=>i===r);this.status=n?r:se.DEFAULT}setStatusByQuote({isFetchQuoting:r,quoteError:t,bestRoute:n,quoteNull:i,shouldPauseQuote:o}){if(o){this.setStatus(se.NO_DATA);return}if(!t&&!n&&!i&&nr.BigNumber(this.fromToStore?.computedTypedValue).gt(0)){this.setStatus(se.LOADING);return}if(r&&this.status!==se.SHOW_DATA&&this.status!==se.NO_DATA){this.setStatus(se.LOADING);return}if(t){this.setStatus(se.DISCONNECTION);return}if(i&&ye(n?.dexRouterList)&&ye(n?.fromDexRouterList)&&ye(n?.bridge)&&ye(n?.toDexRouterToList)){this.setStatus(se.NO_DATA);return}if(!ye(n?.dexRouterList)||!ye(n?.fromDexRouterList)||!ye(n?.bridge)||!ye(n?.toDexRouterToList)){this.setStatus(se.SHOW_DATA);return}this.setStatus(se.DEFAULT)}switchPercentType(){this.percentType=this.percentType===ur.NORMAL_PERCENT?ur.EXACT_PERCENT:ur.NORMAL_PERCENT}setSwapType(r){this.swapType=r}updateTokenInfo(r){jt(this.tokenInfo,"dexRouter",{token0:this.fromToStore.from||{},token1:this.fromToStore.to||{}}),jt(this.tokenInfo,"fromDexRouter",{token0:V(r,"fromToken",{}),token1:V(r,"fromSwapToTokenInfo",{})}),jt(this.tokenInfo,"bridge",{token0:V(r,this.isCrossBridgeOnly?"fromToken":"bridge.crossFromToken",{}),token1:V(r,this.isCrossBridgeOnly?"toToken":"bridge.crossToToken",{})}),jt(this.tokenInfo,"toDexRouter",{token0:V(r,"toSwapFromTokenInfo",{}),token1:V(r,"toToken",{})})}setDexRouterList(r){this.dexRouterList=new Ye(r).data}setFromDexRouterList(r){this.fromDexRouterList=new Ye(r).data}setToDexRouterToList(r){this.toDexRouterToList=new Ye(r).data}setBridgeRouterList(r,t){let n=(i={},o)=>({...i,tokenSymbol:o,fromBridge:!0});this.bridgeRouterList=new Ye([{percent:V(t,"percent")||"100",subRouterList:[{dexQuoteInfoList:[{dexName:V(t,"bridgeName"),percent:"100",okLinkUrl:V(t,"fromPoolAddress")}],fromToken:{},toToken:n(V(t,"crossFromToken"),V(t,"fromPoolName"))},{dexQuoteInfoList:[{dexName:V(t,"bridgeName"),percent:"100",okLinkUrl:V(t,"toPoolAddress")}],fromToken:{},toToken:n(V(t,"crossToToken"),V(t,"toPoolName"))}]}],!0).data}checkIsManyQuote(r){if(r.length>1)return!1;let t=r.length>0?V(r,[0,"subRouterList"],[]):[];return t.length>1?!1:V(t,[0,"dexQuoteInfoList","length"])>5}checkIsFewRouter(r){return r.length===1&&V(r,[0,"subRouterList","length"])<3}get computedIsFewRouter(){let{routerList:r}=this.computedCurrentRouter;return this.checkIsFewRouter(r)}get computedIsManyQuoteInfo(){let{routerList:r}=this.computedCurrentRouter;return this.checkIsManyQuote(r)}get computedCurrentRouter(){return this.getInfoByMenuType(this.currentMenu)}setCurrentMenu(r){let n=Hr(Ue).some(i=>i===r);this.currentMenu=n?r:Ue.DISMISS}setMenuListAndCurrentMenu(r,t){if(!Array.isArray(r)||ye(r))this.showMenuList=!1,this.isCrossBridgeOnly=!1,this.setCurrentMenu(Ue.DISMISS);else{this.menuList=r;let n=V(r,[0,"smartRoutingMenuType"]);(!this.showMenuList||this.currentMenu===Ue.DISMISS||!r.some(i=>V(i,"smartRoutingMenuType")===this.currentMenu))&&this.setCurrentMenu(n),this.isCrossBridgeOnly=r.length===1&&n===Ue.BRIDGE&&t===Gr.CROSS_CHAIN,this.showMenuList=!this.isCrossBridgeOnly}}updateData(r){let{swapType:t,smartRoutingMenuVoList:n,dexRouterList:i,fromDexRouterList:o,bridge:a,toDexRouterToList:s}=r;this.setSwapType(t),this.setMenuListAndCurrentMenu(n,t),this.setDexRouterList(i),this.setFromDexRouterList(o),this.setBridgeRouterList(r,a),this.setToDexRouterToList(s),this.updateTokenInfo(r)}setXRouteModal(r){this.showXRouteModal=r}setSubRouterData(r){this.subRouterData=r}setOldRouterModal(r){this.oldRouterModal=r}};c();l();rr();c();l();var Bo=Q(No());c();l();c();l();c();l();c();l();c();l();var wr=()=>Boolean(typeof window>"u"||process.env.SSR_ENV);var on={PING:"ping",PONG:"pong"},Ot={CONNECTED:0,DISCONNECTED:1,PING_PENDING:2,PING_PENDING_OVER:3},Xe=!wr(),mr=Xe&&!window.inOKXExtension;var ou=/^\{|\[/,Ao="";Xe&&(Ao=window?.okGlobal?.socketBaseUrls?.trade);var yr={isPushingJSON(e){return ou.test(e)},getRealConnectUrl(e=Ao){return e}};c();l();var Co={decode(e){let r=0,t,n,i,o,a,s=[],d=e.length;for(;r<d;)t=e[r++],t<128?a=t:t<224?(n=e[r++],a=(t&31)<<6|n&63):t<240?(n=e[r++],i=e[r++],a=(t&15)<<12|(n&63)<<6|i&63):(n=e[r++],i=e[r++],o=e[r++],a=(t&7)<<18|(n&63)<<12|(i&63)<<6|o&63),s.push(String.fromCodePoint(a));return s.join("")}};var Do=Co;if(Xe&&mr){let{location:e,TextDecoder:r}=window;r&&(Do=new r("utf-8")),window.$has_debug_push_param$=e.href.indexOf("debug_push=true")>-1}var sn={};function an(e={}){let r=this,t=yr.getRealConnectUrl(e.connectUrl),n={maxPendingTime:5e3,maxReconnectTime:1e4,maxWaitingResponseTime:1e4,maxSleepRecoveringTime:3e3,...e,connectUrl:t},i=sn[n.connectUrl];if(i)return i;let o={isConnected:!1,isConnectPending:!1,isClosingByClient:!1,isKillingUnWakeUp:!1,isPingPending:!1},a,s={reconnectTimer:0,handlePendingTimer:0,discontinueTimer:0,killingUnWakeUpTimer:0,pingPendingTimer:0},d={currReconnectTime:0,lastReceivingTime:0},f=[],u=[],g=[],w=[],p=[],v=()=>{},O=()=>{this.isConnected()&&(v(),s.pingPendingTimer=setTimeout(()=>{o.isPingPending=!0,w.forEach(y=>{y(Ot.PING_PENDING)})},n.maxPendingTime))},S=(y,K)=>{for(let oe=0;oe<y.length;oe++)if(y[oe]===K){y.splice(oe,1);break}},b=()=>{o.isPingPending=!1,clearTimeout(s.pingPendingTimer)},A=()=>{clearInterval(s.handlePendingTimer)},L=()=>{d.currReconnectTime=0,s.reconnectTimer&&(clearTimeout(s.reconnectTimer),delete s.reconnectTimer)},k=()=>{!this.isConnected()&&!o.isConnectPending&&(L(),m())},m=function(){a=new WebSocket(n.connectUrl),o.isConnectPending=!0,a.onopen=C,a.onmessage=T,a.onclose=F,a.onerror=P,s.handlePendingTimer=setInterval(r.handleConnectPending,n.maxPendingTime)},C=function(){o.isConnected=!0,o.isConnectPending=!1,o.isClosingByClient=!1,L(),A(),u.forEach(y=>{y(),y.triggered=!0}),w.forEach(y=>{y(Ot.CONNECTED)})},I=function(){o.isPingPending&&w.forEach(y=>{y(Ot.PING_PENDING_OVER)}),b()},T=function(y){if(d.lastReceivingTime=Date.now(),clearTimeout(s.discontinueTimer),clearTimeout(s.killingUnWakeUpTimer),s.discontinueTimer=setTimeout(O,n.maxPendingTime),y.data instanceof Blob){let K=y.data,oe=new FileReader,at={done:!1,resultString:""};p.push(at),oe.onload=function(ut){if(ut.target.readyState==FileReader.DONE){let wt=(0,Bo.inflateRaw)(ut.target.result);for(at.done=!0,at.resultString=Do.decode(wt);p[0]&&p[0].done;){let{resultString:Dt}=p.shift();Dt===on.PONG&&I();let Bn=yr.isPushingJSON(Dt)?JSON.parse(Dt):Dt;ee(Bn),window.$has_debug_push_param$&&(console.log(Dt),window.$ok_debug_push_callback$&&window.$ok_debug_push_callback$(Bn))}}},oe.readAsArrayBuffer(K)}else{let K=y.data;K===on.PONG&&I(),ee(yr.isPushingJSON(K)?JSON.parse(K):K),window.$has_debug_push_param$&&console.log(K)}},R=function(){o.isConnected=!1,o.isConnectPending=!1,b(),u.forEach(y=>{y.triggered=!1})},F=function(){if(o.isKillingUnWakeUp){o.isKillingUnWakeUp=!1;return}o.isClosingByClient?R():s.reconnectTimer||P()},P=function(){R(),A(),f.forEach(K=>{K()}),w.forEach(K=>{K(Ot.DISCONNECTED)}),s.reconnectTimer=setTimeout(m,d.currReconnectTime);let y=d.currReconnectTime+1e3;y>n.maxReconnectTime&&(y=n.maxReconnectTime),d.currReconnectTime=y},ee=function(y){if(y.event==="error"&&Number(y.errorCode)===30026){a.close();return}g.forEach(oe=>oe(y))};if(this.setPushDataResolver=function(y){return g.push(y),()=>{S(g,y)}},this.connect=function(){if(Xe){if(this.isConnected()){u.forEach(y=>{y.triggered||(y(),y.triggered=!0)});return}!this.isConnected()&&!o.isConnectPending&&m()}},this.disconnect=function(){clearTimeout(s.reconnectTimer),clearTimeout(s.discontinueTimer),delete s.reconnectTimer,delete s.discontinueTimer,o.isClosingByClient=!0,a.close(),f.length=0,u.length=0,g.length=0,v=()=>{},delete sn[n.connectUrl];let{connection:y}=navigator;y&&y.removeEventListener&&y.removeEventListener("change",this.handleConnectionChange),mr&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)},this.isConnected=function(){return o.isConnected},this.sendChannel=function(y){a.readyState===WebSocket.OPEN?a.send(y):console.error("WebSocket is not in open state, can not send!")},this.onSocketConnected=function(y){return u.push(y),()=>{S(u,y)}},this.onSocketError=function(y){return f.push(y),()=>{S(f,y)}},this.onPushDiscontinue=function(y){return v=y,()=>{}},this.onStatusChange=function(y){return w.push(y),()=>{S(w,y)}},this.handleConnectPending=function(){o.isConnectPending&&f.forEach(y=>{y()})},this.handleConnectionChange=()=>{navigator.onLine===!0&&k()},this.handleVisibilityChange=()=>{if(!document.hidden){if(!this.isConnected()){k();return}Date.now()-d.lastReceivingTime>n.maxWaitingResponseTime&&(O(),s.killingUnWakeUpTimer=setTimeout(()=>{R(),L(),o.isKillingUnWakeUp=!0,a.close(),m()},n.maxSleepRecoveringTime))}},Xe){let{connection:y}=navigator;y&&y.addEventListener&&y.addEventListener("change",this.handleConnectionChange),mr&&document.addEventListener("visibilitychange",this.handleVisibilityChange)}return sn[n.connectUrl]=this,this}an.STATUS=Ot;Xe&&!window.WebSocketCore&&(window.WebSocketCore=an);var Lo=an;var Uo={DEX_PUSH_ENGINE:"dex-across-order-info",WALLET_ASSET:"wallet-asset"},su=e=>e.reduce((r,t)=>{let{channel:n}=t;return r.has(n)||r.set(n,new Set),r},new Map),Mo=e=>e?e.split(",").map(t=>({token:t})):[],un=class{constructor(){_(this,"initEventList",()=>{this.errorHandlerList=new Set,this.channelList=Object.keys(Uo).map(r=>({channel:Uo[r]})),this.eventList=su(this.channelList)});_(this,"connectUrl",()=>{let r="";return mt()?Kn.global.urlConfig.serverPushUrl:(r=Ln.socketBaseUrls?.dex||"",`${r}/ws/v5/iprivate`)});_(this,"init",r=>{if(!Dn()){if(this.isLoginDone=!1,!r){this.tokens="";return}if(this.tokens=r,this.isConnected()){this.connectedCallback();return}this.wsInstance||(this.wsInstance=new Lo({connectUrl:this.connectUrl(),reconnectTime:1e4,maxPendingTime:2e4}),this.setCallbacks(),this.wsInstance.connect())}});_(this,"getInstance",()=>this.wsInstance);_(this,"setCallbacks",()=>{this.wsInstance.onSocketConnected(this.connectedCallback),this.wsInstance.onSocketError(this.errorCallback),this.wsInstance.onPushDiscontinue(()=>{this.wsInstance.sendChannel("ping")}),this.wsInstance.setPushDataResolver(r=>this.dataCallback(r))});_(this,"connectedCallback",()=>{this.login(this.tokens).then(()=>(this.subscribe(),this.isLoginDone=!0,!0)).catch(()=>{Oi.stuff("ws login fail")})});_(this,"errorCallback",r=>{this.errorHandlerList.forEach(t=>{t(r)})});_(this,"dataCallback",r=>{this.isLoginDone?this.dataHandler(r):this.loginHandler(r)});_(this,"login",r=>new Promise((t,n)=>{this.isLoginDone=!1,this.wsInstance.sendChannel(JSON.stringify({op:"login",args:Mo(r)})),this.loginResolveFn=t,this.loginRejectFn=n}));_(this,"loginHandler",r=>{let{event:t,code:n}=r;if(t==="login"){if(Number(n)===0){this.loginResolveFn();return}this.loginRejectFn()}});_(this,"dataHandler",r=>{let{arg:t,data:n}=r,i=t?.channel,o=this.eventList.get(i);o?.size>0&&o.forEach(a=>{a(n)})});_(this,"logout",r=>{this.isConnected()&&this.wsInstance.sendChannel(JSON.stringify({op:"logout",args:Mo(r)}))});_(this,"subscribe",()=>{this.wsInstance.sendChannel(JSON.stringify({op:"subscribe",args:this.channelList}))});_(this,"unsubscribe",()=>{this.isConnected()&&this.wsInstance.sendChannel(JSON.stringify({op:"unsubscribe",args:this.channelList}))});_(this,"addListen",(r,t)=>{if(r==="error"){this.errorHandlerList.add(t);return}this.eventList.has(r)&&this.eventList.get(r).add(t)});_(this,"removeListen",(r,t)=>{if(r==="error"){this.errorHandlerList.delete(t);return}this.eventList.has(r)&&this.eventList.get(r).delete(t)});_(this,"removeAll",()=>{this.initEventList()});_(this,"isConnected",()=>!!this.wsInstance?.isConnected());_(this,"disconnect",()=>{this.wsInstance?.disconnect(),this.initEventList()});this.wsInstance=null,this.initEventList()}},_p=new un;c();l();var Ep="1",bp="2",Op="3",vp="0";c();l();var Ho=Q(we());var au=()=>{let{fromToStore:e,commonStore:r}=le(),{from:t={},to:n,computedIsSolanaChain:i}=e,{currentTab:o,computedIsMarket:a}=r,s=o===zn.SWAP,d=a,{chainId:f,tokenContractAddress:u,isHoneypot:g}=t,{chainId:w,tokenContractAddress:p,isHoneypot:v}=n;return(0,Ho.useMemo)(()=>!(!f||!u||!w||!p||g||v||f!==w||!i||!(s||d)),[f,u,w,p,g,v,i,s,d])},Rp=au;c();l();var aa=Q(sa()),ua=Q(pe());c();l();function Bt(e){return e.default||e}async function Cn(e){if(Ze(e,me.SOLANA_MAINNET)){let n=await import("./SolWallet-Y4MXHMR4.js"),{SolWallet:i}=Bt(n);return new i}else if(Ze(e,me.STARKNET_MAINNET)){let n=await import("./StarknetWallet-LVF55MIC.js"),{StarknetWallet:i}=Bt(n);return new i}else if(Ze(e,me.SUI_MAINNET)){let n=await import("./SuiWallet-US7XBA7B.js"),{SuiWallet:i}=Bt(n);return new i}else if(Ze(e,me.TRON_MAINNET)){let n=await import("./TrxWallet-W2SPCCKD.js"),{TrxWallet:i}=Bt(n);return new i}else if(Ze(e,me.TON_MAINNET)){let n=await import("./TonWallet-DVCJ2MRH.js"),{TonWallet:i}=Bt(n);return new i}let r=await import("./EthWallet-B3IT3ZVO.js"),{EthWallet:t}=Bt(r);return new t}function cc(e){let r=!1;try{(0,aa.toOutputScript)(e,ua.bitcoin)&&(r=!0)}catch{r=!1}return r}async function lc(e,r){return me.BTC_MAINNET===e?cc(r):(await(await Cn(e)).validAddress({address:r})).isValid}export{bi as a,Oi as b,Uo as c,_p as d,Pc as e,pi as f,mi as g,Il as h,Rp as i,lc as j,ze as k,$l as l,se as m,Gr as n,ur as o,Kr as p,Ep as q,bp as r,Op as s,vp as t};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-BLXNBD2M.js.map
