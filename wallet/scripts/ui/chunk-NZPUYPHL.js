import{a as y,b as x}from"./chunk-4QAFBCO2.js";import{b as P,c as v}from"./chunk-DY54SY5O.js";import{l as R,t as U}from"./chunk-6FOZGMAL.js";import{m as N}from"./chunk-X7YMANPZ.js";import{a as W}from"./chunk-6DDC4Y2S.js";import{f as h,m as t,o as r}from"./chunk-EQYVU4XP.js";t();r();var A=h(W()),L=h(N());t();r();var _=(n,d)=>{let{coinId:e,address:g}=n||{},m=y(),{ready:p=!0,...s}=d||{},o={retryCount:3,ready:!!p&&!!e&&!!g,...s},{data:i,loading:a,error:u}=R(async()=>await m(n),o);return[a,i,u]},D=_;t();r();var B=h(W());var b=h(N());t();r();var F=(n={})=>n?JSON.parse(JSON.stringify(n)):{};var k=7e3,E="wallet-gas-price",J=(n,d)=>{let{chainId:e,coinId:g,address:m,...p}=n||{},{onError:s,onSuccess:o,pollingInterval:i,ready:a=!0}=d||{},u=e!==void 0&&a,I=y(),S=v(E,{pollingInterval:i||k,onError:async()=>{let f=await I({coinId:g,address:m,...p});o?.(f),s?.()}});U(()=>{let f=S?.data?.[0]||{},l=F(f);!(0,b.isEmpty)(l)&&Number(l?.chainIndex)===Number(e)&&o?.(l)},[S]),(0,B.useEffect)(()=>{if(u)return P.sendChannel({op:"subscribe",args:[{chainId:e,channel:E}]}),()=>{P.sendChannel({op:"unsubscribe",args:[{chainId:e,channel:E}]})}},[u])},w=J;var T=(n,d)=>{let{coinId:e,chainId:g,address:m,...p}=n||{},[s,o]=(0,A.useState)({}),{onSuccess:i,pollingInterval:a,...u}=d||{},[I,,S]=D(n,{onSuccess:c=>{o(c),i?.(c)},...u}),f=s?.supportPush,l={coinId:e,address:m,...p};return x(l,{pollingInterval:a,ready:f===!1,onSuccess:c=>{o(c),i?.(c)}}),w(n,{pollingInterval:a,ready:f===!0,onSuccess:(c={})=>{let C=(0,L.merge)({},s,c);o(C),i?.(C)}}),[I,s,S]},un=T;export{un as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-NZPUYPHL.js.map
