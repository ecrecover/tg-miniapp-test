import{c as $,l as process,m as x,o as K}from"./chunk-REC7XVZY.js";var W=$((b,j)=>{x();K();(function(L,O){typeof b=="object"&&typeof j=="object"?j.exports=O():typeof define=="function"&&define.amd?define([],O):typeof b=="object"?b._prohibitedMonitor=O():L._prohibitedMonitor=O()})(b,function(){return function(){"use strict";var M={"./packages/monitor/src/amp/helper.js":function(v,g,l){l.r(g),l.d(g,{getAmplitudeAPIKey:function(){return n},getAmplitudeProject:function(){return t},isInstanceInitialized:function(){return c},logSignUpComplete:function(){return u},setInstanceIdentity:function(){return o}});var f=l("./packages/monitor/src/common/variables.js"),p=l("./packages/monitor/src/common/constants.js");let c=s=>{var m;let{amplitude:r}=window;if(!r)return!1;let i=r.getInstance(s);return i==null||(m=i.options)===null||m===void 0?void 0:m.apiKey},u=s=>{let{signUpCompleted:m}=sessionStorage;m&&(s.logEvent("signup_completed"),sessionStorage.removeItem("signUpCompleted"))},t=s=>s||(f.default.isOKLink()?p.default.AMPLITUDE_PROJECT.oklink:f.default.isOKEx()||f.default.isInExtension()?p.default.AMPLITUDE_PROJECT.okx:p.default.AMPLITUDE_PROJECT.okcoin),n=s=>{var m;let r=f.default.isProdEnv(),i=(m=p.default.AMPLITUDE_KEY_MAP)===null||m===void 0?void 0:m[s];return i?r?i?.prod:i?.dev:""},o=(s,m)=>{let{uid:r}=f.default.getEnv();return s.setDeviceId(r||""),m===p.default.AMPLITUDE_PROJECT.web3?s.setUserId(r||""):f.default.getTk().then(i=>{s.setUserId(i||"")}),s}},"./packages/monitor/src/amplitude.js":function(v,g,l){l.r(g);var f=l("./packages/monitor/src/monitor.js"),p=l("./packages/monitor/src/common/variables.js"),c=l("./packages/monitor/src/common/event-bus.js"),u=l("./packages/monitor/src/common/constants.js"),t=l("./packages/monitor/src/lib/libs-amplitude.js"),n=l("./packages/monitor/src/amp/helper.js");let o,s={RESOLVE:"RESOLVE",REJECT:"REJECT"},m={__initQueue__:Promise.resolve(!0),events:new c.default,getAmplitudeSDKInstance(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return new Promise((i,d)=>{this.events.on(s.RESOLVE,e=>{i(e)}),this.events.on(s.REJECT,e=>{d(e)}),this.getInstance(r)})},getInstance(r){let i=(0,n.getAmplitudeProject)(r);return o&&clearTimeout(o),new Promise((d,e)=>{if(!(0,n.isInstanceInitialized)(i)){this.__initQueue__=this.__initQueue__.then(()=>this.__initInstance__(i)).then(_=>{d(_)}).catch(_=>{e(_)});return}let{amplitude:a}=window;if(a){let _=a.getInstance(i);(0,n.logSignUpComplete)(_),_.options&&this.events.emit(s.RESOLVE,_),d(_)}})},__initInstance__(r){let i=(0,n.getAmplitudeProject)(r);return new Promise(d=>{window.amplitude||(0,t.default)();let e=window.amplitude.getInstance(i);if((0,n.isInstanceInitialized)(i))d(e);else{let a={includeUtm:!0,includeReferrer:!0,includeGclid:!0,logAttributionCapturedEvent:!0,language:p.default.getOkGlobal().locale};f.default.apiEndpoint?a.apiEndpoint=f.default.apiEndpoint:(p.default.isOKEx()||p.default.isOKLink())&&(a.apiEndpoint=`${window.location.host}/amplitude`,a.forceHttps=!1);let _=(0,n.getAmplitudeAPIKey)(i),{uid:E}=p.default.getEnv();a.headers={[u.default.REQUEST_HEADERS.deviceId]:E},e.init(_,null,a,h=>{this.events.emit(s.RESOLVE,h),(0,n.setInstanceIdentity)(h,i),sessionStorage.channelId&&h.setUserProperties({channel_id:sessionStorage.channelId}),sessionStorage.ampCacheEvents&&(JSON.parse(sessionStorage.ampCacheEvents).forEach(P=>{h.logEvent(...P)}),sessionStorage.ampCacheEvents=""),(0,n.logSignUpComplete)(h),d(h)})}})}};p.default.isInBrowser()&&!p.default.shouldIgnoreAmpEvent()&&(o=setTimeout(()=>{o=0,m.getInstance()},5e3)),g.default=m},"./packages/monitor/src/common/constants.js":function(v,g,l){l.r(g);var f=l("./packages/monitor/src/common/variables.js");let p="";if(f.default.isInBrowser()){let{cdnBaseUrl:t="//static.coinall.ltd"}=f.default.getOkGlobal();p=t}let c={okx:"okx",oklink:"oklink",web3:"web3",okcoin:"okcoin"},u={[c.okx]:{prod:"56bf9d43d57f079e506b4f26c70a698f",dev:"1baf4c48da921e60512f74d455f02da8"},[c.oklink]:{prod:"d77757dff7616a060069e378595de0f7",dev:"d77757dff7616a060069e378595de0f7"},[c.web3]:{prod:"669cbf122dec17ceb8e68a78c8240d24",dev:"2f69d358792107218343f78d2488e305"},[c.okcoin]:{prod:"21c676d501be3d648464d7ae0038cd53",dev:"69ec37219ff98b032d9e1a1d3bd81de7"}};g.default={Actions:{CLICK:"clk",EXPOSE:"xps"},Configs:{ATTR_CLICK:"data-clk",ATTR_EXPOSE:"data-xps",ATTR_LISTEN:"data-lsn",EXPOSE_DURATION:500},REQUEST_LONG_WAIT_TIME:1e3,PERF_REPORT_DEFER_TIME:5e3,AMPLITUDE_PROJECT:c,AMPLITUDE_KEY_MAP:u,CDN_BASE_URL:p,MILLISECONDS_OF_30_DAYS:2592e6,YESTERDAY:-864e5,WEB3CATEGORY:["onchain","web3_homepage","wallet","web3_trade","nft","web3_discover","web3_invest","okc","onchain_data"],REQUEST_HEADERS:{deviceId:"Devid"}}},"./packages/monitor/src/common/cookie.js":function(v,g,l){l.r(g);let f=c=>{try{let u=document.cookie.split(";"),t=null;for(let n=0;n<u.length;n++){let o=u[n];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(c)===0){t=o.substring(c.length+1,o.length);break}}return t}catch{return null}},p=function(c,u){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{expirationDays:365},n=u!==null?t.expirationDays:-1;if(n){let s=new Date;s.setTime(s.getTime()+n*24*60*60*1e3),n=s}let o=`${c}=${u}`;n&&(o+=`; expires=${n.toUTCString()}`),o+="; path=/",document.cookie=o};g.default={set:p,get:f}},"./packages/monitor/src/common/event-bus.js":function(v,g,l){l.r(g);class f{constructor(){this.listeners={}}on(c,u,t){let n=[],o=arguments.length;for(let s=0;s<o;s++)n.push(arguments[s]);n=n.length>3?n.splice(3,n.length-1):[],typeof this.listeners[c]<"u"?this.listeners[c].push({scope:t,callback:u,args:n}):this.listeners[c]=[{scope:t,callback:u,args:n}]}remove(c,u,t){if(typeof this.listeners[c]<"u"){let n=this.listeners[c].length,o=this.listeners[c].slice(0);for(let s=0;s<n;s++){let m=o[s];m.scope==t&&m.callback==u&&this.listeners[c].splice(s,1)}}}has(c,u,t){if(typeof this.listeners[c]<"u"){let n=this.listeners[c].length;if(u===void 0&&t===void 0)return n>0;for(let o=0;o<n;o++){let s=this.listeners[c][o];if((t?s.scope==t:!0)&&s.callback==u)return!0}}return!1}emit(c){if(typeof this.listeners[c]<"u"){let o=this.listeners[c].slice(),s=o.length;for(var u=arguments.length,t=new Array(u>1?u-1:0),n=1;n<u;n++)t[n-1]=arguments[n];for(let m=0;m<s;m++){let r=o[m];if(r&&r.callback){let i=t.concat(r.args);r.callback.apply(r.scope,i)}}}}}g.default=f},"./packages/monitor/src/common/seo.js":function(v,g,l){l.r(g);var f=l("./packages/monitor/src/common/utils.js");let p=[{keyword:"baidu.com",type:"BaiduSEO"},{keyword:"google",type:"GoogleSEO"},{keyword:"yandex.com",type:"yandexSEO"},{keyword:"yahoo",type:"yahooSEO"},{keyword:"so.com",type:"360SEO"},{keyword:"bing.com",type:"bingSEO"},{keyword:"sogou.com",type:"sogouSEO"},{keyword:"m.sm.cn",type:"smSEO"},{keyword:"naver.com",type:"naverSEO"}];g.default={getSeoType(){let c=f.default.getUrlDomain(document.referrer);for(let u=0;u<p.length;u++){let{keyword:t,type:n}=p[u];if(c.indexOf(t)>-1)return n}return""}}},"./packages/monitor/src/common/statex.js":function(v,g,l){l.r(g),l.d(g,{default:function(){return f}});function f(p){let c,u=new Set,t=(r,i)=>{let d=typeof r=="function"?r(c):r;if(d!==c){let e=c;c=i??typeof d!="object"?d:Object.assign({},c,d),u.forEach(a=>a(c,e))}},n=()=>c,m={setState:t,getState:n,subscribe:r=>(u.add(r),()=>u.delete(r)),destroy:()=>u.clear()};return c=p(t,n,m),m}},"./packages/monitor/src/common/utils.js":function(v,g,l){l.r(g);let f=/([^{]+)({.+})?/,p=/^{|}$/g,c=/^['"]|['"]$/g,u=/\/\/([^/]+)\//;g.default={serializeParams(t){let n=[],o=Object.keys(t);for(let s=0,m=o.length;s<m;s++){let r=o[s];n.push(`${encodeURIComponent(r)}=${encodeURIComponent(t[r])}`)}return n.join("&")},getUrlDomain(t){let n=t.match(u);return n?n[1]:""},getUrlQuery(t){return this.getParsedUrl(window.location.href).searchParams.get(t)||""},getParsedUrl(t){return new URL(t)},getChannelIdByUserAgent(){var t,n;let o=/channelId\/(\w+)/,s=(t=window.navigator.userAgent)===null||t===void 0||(n=t.match)===null||n===void 0?void 0:n.call(t,o);return s?.[1]},getChannelContext(t){let n={channelId:"",referralSrc:""};if(!t)return n;let o="",s="";if(t.searchParams.forEach((a,_)=>{let E=_.toLowerCase();E==="channelid"&&(o=a),E==="channelflag"&&(s=a)}),n.channelId=o||s,n.channelId)return n;let m="/join";if(t.pathname.endsWith(m)||!t.pathname.includes(m))return n;let r=t.pathname.split(`${m}/`)[1];if(!r)return n;let i=r.split("/")[0];if(i.startsWith("-"))return n;let d=i.split("-"),e=d[d.length-2]||"";return o=d[d.length-1],o&&(n.referralSrc=e,n.channelId=o),n},getOriginalUrl(t){return t.replace(/([?&])t=\d+(&)?/,(n,o,s)=>o&&s?o===s?"&":"?":"")},setCookie(t,n,o){let s=new Date;s.setTime(s.getTime()+o),document.cookie=`${t}=${encodeURIComponent(n)};expires=${s.toGMTString()};path=/`},getCookie(t){let n=new RegExp(`(^| )${t}=([^;]*)(;|$)`),o=document.cookie.match(n);return o?decodeURIComponent(o[2]):""},parseTarget(t){let n=t.match(f),o={key:"",data:{}};if(n){let s=n[1],m=n[2],r={};m&&m.replace(p,"").split(",").forEach(d=>{let e=d.split(":");e=e.map(E=>E.trim().replace(c,""));let[a,_]=e;r[a]=_}),o.key=s,o.data=r}return o},matchType(t,n){return Object.prototype.toString.call(t)===`[object ${n}]`},isArray(t){return this.matchType(t,"Array")},isObject(t){return this.matchType(t,"Object")},isInArray(t,n){if(Array.prototype.includes)return t.includes(n);for(let o=0,s=t.length;o<s;o++)if(t[o]===n)return!0;return!1},generateUUID(){let t=Date.now()+window.performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let o=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n==="x"?o:o&3|8).toString(16)})},valueExists(t){return t!=null&&t!==""},passedNamingCheck(t){return!/[^a-z0-9_]/.test(t)},toFixed(t){return Number(t.toFixed(4))},toUnderLineFormat(t){return t.replace(/([A-Z])/g,(n,o,s)=>s===0?`${o.toLowerCase()}`:`_${o.toLowerCase()}`)},filterXSS(t){let n=/</g,o=/>/g,s=/'/g,m=/"/g;return t.replace(n,"&lt;").replace(o,"&gt;").replace(s,"&#39;").replace(m,"&#34;")},merge(t,n){let o={};return Object.keys({...t,...n}).forEach(s=>{if(n[s]!=null||t[s]!=null){var m;o[s]=(m=n[s])!==null&&m!==void 0?m:t[s]}}),o},base64Id(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",n="";for(let o=0;o<22;++o)n+=t.charAt(Math.floor(Math.random()*64));return n},isTargetingCookiesRejected(){if(typeof window>"u"||typeof window.OnetrustActiveGroups>"u")return!1;try{return!window.OnetrustActiveGroups.includes("C0004")}catch{return!1}}}},"./packages/monitor/src/common/variables.js":function(v,g,l){l.r(g);var f=l("./packages/monitor/src/common/utils.js"),p=l("./packages/monitor/src/store.js");let c="oklink",u="okex",t="OKX_GLOBAL",n=typeof window<"u",o=Boolean(typeof window>"u"||typeof process<"u"&&{NODE_ENV:"production",ASSETS_BUILD_TYPE:void 0,ASSETS_BUILD_VERSION:void 0}.SSR_ENV),s=n?/OKApp\/\(\S+\/\S+\)/i.test(navigator.userAgent):!1,m=!0,r={_expires:{}},i={};if(n){i=window._okGlobal||window.okGlobal||{};let e=i.broker&&i.broker.is,a=localStorage.simulatedTrading==="1",{okjp:_}=i.site&&i.site.is||{};m=e||a||_===!0;let{ok_monitor:h='{ "_expires": {} }'}=localStorage;r=JSON.parse(h)}let d={};g.default={setEnv(e){var a,_;let{screen:E}=window,{_tk:h}=localStorage,S=(a=window.utils.ont)===null||a===void 0||(_=a.getDeviceId)===null||_===void 0?void 0:_.call(a),{deviceId:P}=p.default.getState(),{systemLanguage:A,language:D}=navigator,{referrer:I}=document;d.site=this.getSiteInfo(),d.lcl=f.default.getCookie("locale"),I&&(I.length>256&&(I=I.substr(0,256)),d.rf=I),h&&(d.tk=h),d.uid=P||S,d.lan=(A||D).toLowerCase();let T="0x0";if(E){let{width:y,height:R}=E;T=`${y}x${R}`}d.scr=T;let C=f.default.getCookie("first_ref");C&&(C.length>256&&(C=C.substr(0,256)),d.frf=C)},getEnv(){return d},isInApp(){return s},toLocalStorage(e){let{key:a,value:_,maxAge:E}=e;r[a]=_,r._expires[a]=Date.now()+E,localStorage.ok_monitor=JSON.stringify(r)},removeLocalStorage(e){delete r[e],delete r._expires[e],localStorage.ok_monitor=JSON.stringify(r)},getClientValue(e){let a=sessionStorage.getItem(e);return a||this.getValueFromLocalStorage(e)},getValueFromLocalStorage(e){return Date.now()<r._expires[e]&&r[e]||""},syncUpLocalStorageToSessionStorage(e){if(sessionStorage.getItem(e))return;let a=this.getValueFromLocalStorage(e);a&&sessionStorage.setItem(e,a)},shouldIgnoreAmpEvent(){return m},__getOkGlobalSite(){return i.site||{}},getSiteInfo(){let e=this.__getOkGlobalSite().sign,a=this.__getOkGlobalSite().subSite;return e===u?!a||a===t?u:a.toLowerCase():e},isOKEx(){return this.__getOkGlobalSite().sign===u},isOKLink(){let e=this.__getOkGlobalSite();return e.sign===c||e.sign===u&&e.linkInOKX},isInSSR(){return o},isInBrowser(){return n},isInExtension(){return window.inOKXExtension||window.inUIOKXExtension},isInDesktop(){var e;return(e=window)===null||e===void 0||(e=e.navigator)===null||e===void 0||(e=e.userAgent)===null||e===void 0||(e=e.toLocaleLowerCase())===null||e===void 0?void 0:e.includes("electron/")},isDevTestEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE!=="publish":["pre","prod"].indexOf(i.envSign)<0},isProdEnv(){return this.isInExtension()?window.ASSETS_BUILD_TYPE==="publish":i.envSign==="prod"},getOkGlobal(){return i},isEnableAMP(){return this.isProdEnv()||sessionStorage.getItem("monitor_amplitude_enable_for_test")==="true"},getTk(){return s&&window.jsbridge?window.jsbridge.getTK().then(e=>e||localStorage._tk||"").catch(()=>{}):Promise.resolve(localStorage._tk||"")}}},"./packages/monitor/src/de-duplicate.js":function(v,g,l){l.r(g),l.d(g,{shouldReport:function(){return u}});let f={},p,c=t=>{p!==void 0&&clearTimeout(p),p=setTimeout(()=>{f={},p=void 0},t+500)},u=function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,o=typeof t=="string"?t:t.action||t.anchor,s=+new Date,m=f[o]||0;return s-m<n?!1:(c(n),f[o]=s,!0)}},"./packages/monitor/src/error.js":function(v,g,l){l.r(g);var f=l("./packages/monitor/src/common/variables.js");let p=f.default.isInBrowser()?JSON.parse(localStorage.__error__||"[]"):[];g.default={getErrorInfo(c){let{message:u,filename:t,lineno:n,colno:o,error:s}=c,m="";s&&s.stack?(m=s.stack,m.indexOf("@")!==-1&&(m=`${u} 
\r ${m}`)):(s||u)&&(m=`ThrowError: ${JSON.stringify(s||u)} 
\r at ${t}: ${n}: ${o}`);let r=encodeURIComponent(window.location.href);return{msg:u,file:t,line:n,col:o,stack:m,url:r}},isReported(c){let{file:u,line:t,col:n}=c,o=`${u}__${t}__${n}`;return p.includes(o)},rememberError(c){let{file:u,line:t,col:n}=c,o=`${u}__${t}__${n}`;p.unshift(o),p.length>50&&p.pop(),setTimeout(()=>{localStorage.__error__=JSON.stringify(p)},0)}}},"./packages/monitor/src/global/attrs.js":function(v,g,l){l.r(g);var f=l("./packages/monitor/src/global/click.js"),p=l("./packages/monitor/src/global/expose.js"),c=l("./packages/monitor/src/common/constants.js");let{Configs:u}=c.default;g.default={listen(t){let n=o=>{t.logEvent({...o,category:"ok"})};this.preprocess(),f.default.listen(n,this),p.default.listen(n,this)},preprocess(){document.querySelectorAll(`[${u.ATTR_LISTEN}]`).forEach(n=>{let o=n.getAttribute(u.ATTR_LISTEN),s=o.indexOf(":");if(s>-1){let m=o.substring(0,s).trim(),r=o.substring(s+1).trim();m.split("+").forEach(d=>{n.setAttribute(`data-${d.trim()}`,r)}),n.removeAttribute(u.ATTR_LISTEN)}})}}},"./packages/monitor/src/global/click.js":function(v,g,l){l.r(g);var f=l("./packages/monitor/src/common/utils.js"),p=l("./packages/monitor/src/common/constants.js");let{Actions:c,Configs:u}=p.default;g.default={listen(t,n){document.addEventListener("click",o=>{let{target:s}=o;s.getAttribute(u.ATTR_LISTEN)&&n.preprocess();let r=s.getAttribute(u.ATTR_CLICK);if(r){let i=f.default.parseTarget(r),{key:d,data:e}=i;d&&t({target:d,action:c.CLICK,params:e,extras:{area:e.area}})}})}}},"./packages/monitor/src/global/expose.js":function(v,g,l){l.r(g);var f=l("./packages/monitor/src/common/utils.js"),p=l("./packages/monitor/src/common/constants.js");let c={},{Actions:u,Configs:t}=p.default;g.default={listen(n){this.trackFn=n;let o={threshold:[.5,1]},s=new window.IntersectionObserver(this.onSectionChange.bind(this),o);document.querySelectorAll(`[${t.ATTR_EXPOSE}]`).forEach(r=>{s.observe(r)}),this.observer=s},onSectionChange(n){n.forEach(o=>{let{target:s,isIntersecting:m}=o,r=s.getAttribute(t.ATTR_EXPOSE),i=f.default.parseTarget(r),{key:d,data:e}=i,a=Number(o.time.toFixed(2));if(m){let _=setTimeout(()=>{let E=c[d],h=s.getBoundingClientRect(),{innerHeight:S,innerWidth:P}=window,{top:A,bottom:D,left:I,right:T}=h;if((A>=0&&A<=S||D>=0&&D<=S)&&(I>=0&&I<=P||T>=0&&T<=P)){let{area:y,elementType:R,actionType:U}=e;delete e.area,delete e.elementType,delete e.actionType,this.trackFn({target:d,action:u.EXPOSE,params:{...e,time:a},extras:{area:y},actionType:U||"Show",elementType:R,anchor:R?d:""}),this.observer.unobserve(s),E.forEach(w=>{window.clearTimeout(w)}),delete c[d]}else E.shift()},t.EXPOSE_DURATION);c[d]||(c[d]=[]),c[d].push(_)}})}}},"./packages/monitor/src/lib/libs-amplitude.js":function(v,g,l){l.r(g),l.d(g,{default:function(){return p}});var f=l("./packages/monitor/src/common/variables.js");function p(){let{envSign:c,cdnBaseUrl:u}=f.default.getOkGlobal(),t=window.amplitude||{_q:[],_iq:{}},n=document.createElement("script");n.type="text/javascript",n.crossOrigin="anonymous",n.async=!0;let o="";switch(c){case"dev":o="cdndev";break;case"pre":o="cdnpre";break;case"daily":o="cdn";break;case"prod":o="cdn";break;default:o="cdn";break}f.default.isInExtension()?(n.integrity="sha384-pOU6BcU7Xl8BUN1qGu7OTKvbAUHiErbL8FdKEnAhCwR47UmKCyC5mOM9Nqxe02PR",n.src="./scripts/lib/amplitude-8.2.3-min.gz.js"):u?(n.src=`${u}/${o}/assets/okfe/libs/monitor/amplitude-okx-8.21.8.min.js`,n.integrity="sha384-ATgbJ2zDjulTgephpcvQJOOMESYqq8o5Ep+hws0LXCAm9qr07fUtUfvuYN52bSGI"):(n.src="https://cdn.amplitude.com/libs/amplitude-8.21.8-min.gz.js",n.integrity="sha384-QahB0HKETlcqjneomU3Ohs+UgJTinhUNFIKJitEl2Vo7DjvphO2jei64ZP5J2GA5"),n.onload=function(){window.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK")};let s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(n,s);function m(E,h){E.prototype[h]=function(){return this._q.push([h].concat(Array.prototype.slice.call(arguments,0))),this}}let r=function(){return this._q=[],this},i=["add","append","clearAll","prepend","set","setOnce","unset"];for(let E=0;E<i.length;E++)m(r,i[E]);t.Identify=r;let d=function(){return this._q=[],this},e=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"];for(let E=0;E<e.length;E++)m(d,e[E]);t.Revenue=d;let a=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","enableTracking","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"];function _(E){function h(S){E[S]=function(){E._q.push([S].concat(Array.prototype.slice.call(arguments,0)))}}for(let S=0;S<a.length;S++)h(a[S])}_(t),t.getInstance=function(E){return E=(!E||E.length===0?"$default_instance":E).toLowerCase(),t._iq.hasOwnProperty(E)||(t._iq[E]={_q:[]},_(t._iq[E])),t._iq[E]},window.amplitude=t}},"./packages/monitor/src/logger.js":function(v,g,l){l.r(g),l.d(g,{default:function(){return s}});var f=l("./packages/monitor/src/common/utils.js"),p=l("./packages/monitor/src/common/variables.js"),c=l("./packages/monitor/src/common/cookie.js"),u=l("./packages/monitor/src/common/constants.js");let t=null,n=!1;class o{constructor(r){p.default.setEnv(r)}logPV(){if(!n){let r={_act:"_pv",_ct:"_pv",_action_type:"Show",_element_type:"Page",...this._getCommonData()};this.sendLogs(r),n=!0}}logEvent(r){let i={},{category:d,action:e,target:a,params:_,extras:E,_m:h,anchor:S,elementType:P,actionType:A,tk:D}=r;if(Object.assign(i,{_ct:d,_act:e,_lb:encodeURIComponent(a||""),_anchor_en_name:encodeURIComponent(S||""),_element_type:encodeURIComponent(P||""),_action_type:encodeURIComponent(A||""),...this._getCommonData()}),i._tk=D||i._tk,f.default.isArray(_)){let I=0,T=0;_.forEach((C,y)=>{if(f.default.isObject(C)){let{value:R,random:U}=C,w=encodeURIComponent(R);U?i[`_unlist${T++}`]=w:i[`_reser${I++}`]=w}else i[`_reser${y}`]=encodeURIComponent(C)})}else if(f.default.valueExists(_)){let I=_;f.default.isObject(_)&&(I=JSON.stringify(_));let T=encodeURIComponent(I);i._v=T,i._reser0=T}if(E){E.page=encodeURIComponent(window.location.href);let I={};Object.keys(E).forEach(T=>{I[`__${T}`]=E[T]}),Object.assign(i,I)}return h&&(i._m=h),this.sendLogs(i)}_getCommonData(){let r={...p.default.getEnv()};localStorage._tk&&(r.tk=localStorage._tk);let{src:i,sessionId:d=""}=sessionStorage,e=p.default.getClientValue("pageId"),a=p.default.getClientValue("channelId"),{deviceId:_=f.default.base64Id(),eventId:E=1,sequenceNumber:h=1}=JSON.parse(c.default.get("_monitor_extras")||"{}");c.default.set("_monitor_extras",JSON.stringify({deviceId:_,eventId:E+1,sequenceNumber:h+1}));let S=JSON.stringify({_amp_rejected:f.default.isTargetingCookiesRejected(),_device_id:_,_event_id:E,_sequence_number:h,_uuid:f.default.generateUUID()}),P={_cid:a,_pgid:e,_source:i,_session_id:encodeURIComponent(d.slice(0,256)),_page_url:encodeURIComponent(window.location.href.slice(0,256)),_extras:S};return Object.keys(r).forEach(A=>{P[`_${A}`]=encodeURIComponent(r[A])}),P}sendLogs(r){let i=[];if(Object.keys(r).forEach(d=>{let e=r[d];f.default.valueExists(e)?i.push(`${d}=${e}`):delete r[d]}),p.default.isDevTestEnv()){let{console:d}=window;return d.groupCollapsed(`dev monitor: ${r._ct} > ${r._act}`),d.log(decodeURIComponent(JSON.stringify(r,null,2))),d.groupEnd(),Promise.resolve()}return p.default.isInApp()&&window.jsbridge?window.jsbridge.getTK().then(d=>{if(d){let e=`_tk=${encodeURIComponent(d)}`,a=i.findIndex(_=>/^_tk/.test(_));a>-1?i[a]=e:i.push(e)}return this.addClientInfo(i.join("&"))}).catch(()=>this.addClientInfo(i.join("&"))):this.addClientInfo(i.join("&"))}addClientInfo(r){let i=`&_ts=${Date.now()}&_r=${Math.floor(Math.random()*2147483648)}`,d=`?${r}${i}`;return p.default.isInApp()&&window.jsbridge?window.jsbridge.getClientInfo().then(e=>{let a=e?`&_app_info=${encodeURIComponent(e)}`:"";return d=`?${r}${a}${i}`,this.sendRequest(d)}).catch(e=>this.sendRequest(d)):this.sendRequest(d)}sendRequest(r){return new Promise((i,d)=>{if(navigator.sendBeacon&&!p.default.isInExtension())navigator.sendBeacon(`/jsstat/${p.default.isOKLink()?"oklink":"sb"}${r}`),i();else{let e=p.default.isInExtension()?`https://www.oklink.com/jsstat/s.gif${r}`:`/jsstat${p.default.isOKLink()?"/oklink":""}/s.gif${r}`,a=new XMLHttpRequest;a.open("GET",e);let{uid:_}=p.default.getEnv();a.setRequestHeader(u.default.REQUEST_HEADERS.deviceId,_),a.onload=()=>a.status!==200?d(new Error(`Error ${a.status}:${a.statusText}`)):i(),a.onerror=()=>{d(new Error(`Error ${a.status}: ${a.statusText}`))},a.send(),setTimeout(()=>{i()},150)}})}}function s(m){return t||(t=new o(m),t)}},"./packages/monitor/src/monitor.js":function(v,g,l){l.r(g),l.d(g,{default:function(){return i}});var f=l("./packages/monitor/src/common/utils.js"),p=l("./packages/monitor/src/common/constants.js"),c=l("./packages/monitor/src/common/variables.js"),u=l("./packages/monitor/src/error.js"),t=l("./packages/monitor/src/logger.js"),n=l("./packages/monitor/src/global/attrs.js"),o=l("./packages/monitor/src/amplitude.js"),s=l("./packages/monitor/src/store.js"),m=l("./packages/monitor/src/de-duplicate.js");let r=!1;class i{constructor(e){c.default.isInSSR()||(this.commonParams=e.commonParams||{},this._logger=(0,t.default)(e),this._category=e.product,e.withPV&&this.delayReportPV(),r||(this._initEventListener(),r=!0))}delayReportPV(){setTimeout(()=>{this.logPV()},1e3)}setApiEndpoint(e){if(/^https?:\/\//.test(e))throw new Error('The content of the URL can not include protocol type as a substring such as "http://" or "https://".');i.apiEndpoint=e}report(e){let{type:a,value:_}=e;if(c.default.isInSSR())return Promise.resolve();let E=_;return(f.default.isObject(E)||f.default.isArray(E))&&(E=JSON.stringify(E)),this._logger.logEvent({category:"performance",action:a,params:E})}logPV(){this._logger.logPV()}logAmplitudeEvent(e,a,_){if(c.default.isInSSR()||c.default.shouldIgnoreAmpEvent())return Promise.resolve();let E="",h=!1;f.default.isObject(_)&&(E=_.ampProject,h=_.ignoreBackUp);let S={};for(let P in a)Object.prototype.hasOwnProperty.call(a,P)&&(S[P]=a[P]);if(S.monitor_after_navigation){delete S.monitor_after_navigation;let P=JSON.parse(sessionStorage.ampCacheEvents||"[]");return P.push([e,S]),sessionStorage.ampCacheEvents=JSON.stringify(P),Promise.resolve()}return o.default.getInstance(E).then(P=>{P.logEvent(e,{...S,site:c.default.getSiteInfo()}),h||this.act(e,a,{isSyncAMP:!1})})}resetAmplitudeUser(){return c.default.isInSSR()?Promise.resolve():o.default.getInstance().then(e=>(e.setUserId(null),e.regenerateDeviceId(),Promise.resolve()))}track(e,a,_,E){if(c.default.isInSSR())return Promise.resolve();let h={category:this._category,action:_,target:a,params:E,extras:{area:e}};if(f.default.isObject(e)){let{area:S,action:P,target:A,params:D}=e;Object.assign(h,{action:P,target:A,params:D,extras:{area:S}})}return this._logger.logEvent(h)}act(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0};return c.default.isInSSR()||!(0,m.shouldReport)(e)?Promise.resolve():new Promise((E,h)=>{setTimeout(()=>{this._act(e,a,_).then(E,h)},0)})}async _act(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{isSyncAMP:!0},{user_id:E,...h}=this.commonParams||{},S={web_mode_okx:f.default.isInArray(p.default.WEB3CATEGORY,this._category)?"wallet":"exchange"},A=Object.assign({},c.default.isOKEx()?S:{}),D=_?.tk||E,I={category:this._category,params:a,_m:"1"};f.default.isObject(a)&&(I.params=f.default.merge({...h,...A},a),A=f.default.merge(c.default.isOKLink()?{...h,...A}:A,a));let T;typeof e=="string"?(T=e,I.action=e):(T=e.action||e.anchor,I.action=T,I.anchor=e.anchor,I.actionType=e.actionType,I.elementType=e.elementType,I={...I,params:f.default.merge(I.params,e.params||{})},D=e.tk||D,A=f.default.merge(A,e.params)),I.tk=D;let{needDurationActions:C,needDurationActionParams:y,actionTriggerTimes:R,setActionTriggerTimes:U,setNeedDurationActionParams:w}=s.default.getState();if(c.default.isEnableAMP()&&_!==null&&_!==void 0&&_.isSyncAMP){let B=e?.ampProject;this.logAmplitudeEvent(T,A,{ampProject:B,ignoreBackUp:!0})}return f.default.isInArray(C,T)?(R[T]=Date.now(),U(R),y[T]=I,w(y),Promise.resolve("The event will be reported when the page is closed")):this._logger.logEvent(I)}_initEventListener(){window.addEventListener("load",()=>{n.default.listen(this._logger)}),window.addEventListener("error",e=>{let a=u.default.getErrorInfo(e);u.default.isReported(a)||(this._logger.logEvent({category:"error",action:"report",extras:a}),u.default.rememberError(a))},!0),window.addEventListener("beforeunload",()=>{let{needDurationActions:e,needDurationActionParams:a,actionTriggerTimes:_,setNeedDurationActions:E,setNeedDurationActionParams:h,setActionTriggerTimes:S}=s.default.getState();e.length&&e.forEach(P=>{a[P].params.duration=Date.now()-_[P],this._logger.logEvent(a[P])}),E([]),h({}),S({})})}initABTest(e){let a="ab_experiment";e!=null&&e.exper_flagKey&&e!==null&&e!==void 0&&e.exper_variant&&(Object.assign(this.commonParams,e),this.act(a))}setCommonParams(e){this.commonParams={...this.commonParams,...e}}triggerReportDuration(e){let{needDurationActions:a,setNeedDurationActions:_}=s.default.getState();f.default.isInArray(a,e)||(a.push(e),_(a))}}},"./packages/monitor/src/store.js":function(v,g,l){l.r(g);var f=l("./packages/monitor/src/common/statex.js");let p=(0,f.default)(c=>({deviceId:"",needDurationActions:[],needDurationActionParams:{},actionTriggerTimes:{},setDeviceId:u=>c(()=>({deviceId:u})),setNeedDurationActions:u=>c(()=>({needDurationActions:u})),setNeedDurationActionParams:u=>c(()=>({needDurationActionParams:u})),setActionTriggerTimes:u=>c(()=>({actionTriggerTimes:u}))}));g.default=p},"./packages/monitor/src/web.js":function(v,g,l){l.r(g);var f=l("./packages/monitor/src/common/constants.js"),p=l("./packages/monitor/src/common/seo.js"),c=l("./packages/monitor/src/common/utils.js"),u=l("./packages/monitor/src/monitor.js"),t=l("./packages/monitor/src/common/variables.js"),n=l("./packages/monitor/src/amplitude.js"),o=l("./packages/monitor/src/store.js");let{MILLISECONDS_OF_30_DAYS:s}=f.default,m=(r,i)=>{if(t.default.isInSSR())return;let{pathname:d}=window.location;sessionStorage.channelId=r,t.default.toLocalStorage({key:"channelId",value:r,maxAge:s}),i?(sessionStorage.referralSrc=i,t.default.toLocalStorage({key:"referralSrc",value:i,maxAge:s})):(sessionStorage.removeItem("referralSrc"),t.default.removeLocalStorage("referralSrc")),sessionStorage.pageId=d,t.default.toLocalStorage({key:"pageId",value:d,maxAge:s})};g.default={monitor:{get amplitude(){return t.default.isInSSR()?{getAmplitudeSDKInstance(){return new Promise((i,d)=>{d("Currently not a browser environment!")})}}:n.default},newInstance(r){return t.default.isInSSR()?{setApiEndpoint(){},report(){return Promise.resolve()},logPV(){return Promise.resolve()},logAmplitudeEvent(){return Promise.resolve()},resetAmplitudeUser(){return Promise.resolve()},track(){return Promise.resolve()},act(){return Promise.resolve()},_initEventListener(){},initABTest(){return Promise.resolve()},setCommonParams(){},triggerReportDuration(){}}:new u.default(r)},saveChannelId(r){m(r)},getChannelId(){return sessionStorage.channelId},setDeviceId(r){let{setDeviceId:i}=o.default.getState();i(r)},getChannelContextFromUrl(r){return c.default.getChannelContext(c.default.getParsedUrl(r))}},parseUrl(){let r=c.default.getParsedUrl(window.location.href),i=r.searchParams.get("src");i&&sessionStorage.setItem("src",i),this.parseChannelId(r)},parseChannelId(r){let i=c.default.getChannelIdByUserAgent(),d=p.default.getSeoType(),e=c.default.getChannelContext(r),a=e.channelId,_=e.referralSrc;if(t.default.isInDesktop()&&i&&(a=i,_=""),!a&&d&&(a=d),a=c.default.filterXSS(a),a){m(a,_);return}t.default.syncUpLocalStorageToSessionStorage("channelId"),sessionStorage.getItem("channelId")&&(t.default.syncUpLocalStorageToSessionStorage("referralSrc"),t.default.syncUpLocalStorageToSessionStorage("pageId"))},init(){if(!t.default.isInSSR()){if(this.parseUrl(),!c.default.getCookie("first_ref")&&document.referrer&&c.default.setCookie("first_ref",document.referrer,s),sessionStorage.getItem("sessionId")||sessionStorage.setItem("sessionId",window.location.href),!window.IntersectionObserver){let r=document.createElement("script");r.src=`${f.default.CDN_BASE_URL}/cdn/assets/okfe/libs/polyfills/intersection-observer.js`,document.getElementsByTagName("head")[0].appendChild(r)}window.utils=window.utils||{},window.utils.monitor=this.monitor}},saveChannelId(r){m(r)}}}},L={};function O(v){var g=L[v];if(g!==void 0)return g.exports;var l=L[v]={exports:{}};return M[v](l,l.exports,O),l.exports}(function(){O.d=function(v,g){for(var l in g)O.o(g,l)&&!O.o(v,l)&&Object.defineProperty(v,l,{enumerable:!0,get:g[l]})}})(),function(){O.o=function(v,g){return Object.prototype.hasOwnProperty.call(v,g)}}(),function(){O.r=function(v){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})}}();var k={};return function(){O.r(k);var v=O("./packages/monitor/src/web.js");v.default.init(),k.default=v.default.monitor}(),k=k.default,k}()})});export{W as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-YITM3H6Z.js.map
