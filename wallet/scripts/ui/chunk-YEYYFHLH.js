import{a as Co}from"./chunk-7H2LDC2I.js";import{a as Fo}from"./chunk-NHHEXXPU.js";import{c as fo,d as _o}from"./chunk-RZ42FYW3.js";import{a as ho,b as wo}from"./chunk-B4ATV3GC.js";import{a as To,b as Eo}from"./chunk-Q7EMQCH4.js";import{a as De,c as Fe,d as xo,f as Me,g as vo,h as tt,k as go}from"./chunk-XHGDRCKN.js";import{a as yo}from"./chunk-EKXTRWYR.js";import{a as no,b as Ge,d as ro,e as co,g as mo,i as po,k as uo,m as fe}from"./chunk-JWIDJEDW.js";import{b as to}from"./chunk-2PVY7Q74.js";import{d as eo}from"./chunk-3LOAATWV.js";import{b as Xt}from"./chunk-OR3IMHNP.js";import{a as bo}from"./chunk-ITKK42YQ.js";import{a as so}from"./chunk-ERRJFVON.js";import{b as jt}from"./chunk-AGNEMUCC.js";import{d as Ce,e as et,f as io,g as lo}from"./chunk-SFY37WOS.js";import{a as $t,e as de}from"./chunk-JFCE4WMN.js";import{f as ao}from"./chunk-2CQDB45Y.js";import{b as Kt}from"./chunk-SWNKITDG.js";import{a as qt}from"./chunk-PCT6WF3F.js";import{c as Qt}from"./chunk-FSSAJWUE.js";import{e as se,g as Wt}from"./chunk-Z7MVEL6Q.js";import{b as zt}from"./chunk-BSJ5U7SB.js";import{b as Se}from"./chunk-RDUIYFM4.js";import{a as oo}from"./chunk-3OA7XW3I.js";import{a as Dt,b as Mt}from"./chunk-MVELXHVO.js";import{d as Xe}from"./chunk-RSZRDNEQ.js";import{d as Jt}from"./chunk-OL5PZGTP.js";import{a as Bt,d as Ot}from"./chunk-W3BHXSAD.js";import{f as Yt}from"./chunk-KWEOQTFQ.js";import{c as Ut,f as Rt}from"./chunk-ILYGYWTN.js";import{T as Zt,c as Vt}from"./chunk-WWF4GAYE.js";import{a as Ht}from"./chunk-V4V6C6NY.js";import{b as we}from"./chunk-ZQ5A3KPQ.js";import{a as Le}from"./chunk-BGUY7SH3.js";import{r as ht,s as wt,u as Ct,w as V}from"./chunk-MJYAUOKI.js";import{a as me,o as pe,y as Nt,z as Lt}from"./chunk-FCCCJLF6.js";import{Ta as Pt,qb as It,y as Tn}from"./chunk-FK3ETA6I.js";import{X as O,_ as Qe,aa as ne,b as bt,d as Et,k as kt}from"./chunk-QZDHFNHK.js";import{a as St}from"./chunk-KCITCUTL.js";import{a as L}from"./chunk-T2OWRX3Y.js";import{e as gt,i as Je}from"./chunk-C3FJ2D4V.js";import{g as Gt}from"./chunk-2FULUWWG.js";import{a as At}from"./chunk-SLEUZTBQ.js";import{c as P}from"./chunk-4QSQKIBZ.js";import{b as vt,c as yn}from"./chunk-OXVQDEZW.js";import{g as _t,m as fn}from"./chunk-X3G52GGX.js";import{Jc as Ft,Kb as $e,fc as xt,ib as je,jb as yt,jc as _n,kb as qe,lb as Ne,m as ge,o as ft,pb as he,yb as Tt,za as dn}from"./chunk-QG673PNL.js";import{A as Ke,F as ut,G as dt,c as J,d as Ze,g as Ae,n as oe}from"./chunk-6MTHEPGF.js";import{I as te,m as B,v as Ve,w as i}from"./chunk-ZQQ7HNWV.js";import{Y as k}from"./chunk-ZOQTSYT4.js";import{a as Y}from"./chunk-ADZWCU3Q.js";import{f as A,m as c,o as m}from"./chunk-REC7XVZY.js";c();m();c();m();te();c();m();var be=A(Y());c();m();c();m();var z=A(Y()),ko=A(Tn());te();$e();c();m();var Z={title:"_title_1xthp_1",subtitle:"_subtitle_1xthp_9",fee:"_fee_1xthp_15",feeTitle:"_feeTitle_1xthp_21",feeDetail:"_feeDetail_1xthp_26",speedDetail:"_speedDetail_1xthp_33",gasDetail:"_gasDetail_1xthp_36"};var xn=()=>{let e=Kt(),a=ao(),o=Yt(),t=(0,ko.useSelector)(It),r=to(),l=fo(),d=async(n,y,f,T=0)=>{let{baseCoin:x}=await e(f,!0),h=o?.[x.coinId]||"0",F=je(n,y),w=wt(qe(F,T),{symbol:x.symbol,decimals:x.decimals}),g=ht(je(yt(qe(F,T),10**x.decimals),h),{symbol:t.symbol});return`${w} ${g}`},s=(n,y)=>{let f=r(n);return i("wallet_extension_transaction_confirmation_gas_detail",{gasPrice:B.thousandFormat(f),gasLimit:B.thousandFormat(y)})},p=async(n,y)=>{try{return await l({...n,coinId:y})}catch{return""}},u=({userGasInfo:n,updateGasInfo:y,fetchParams:f})=>{let{gasPrice:T,maxFeePerGas:x,maxPriorityFeePerGas:h}=y,{supportEip1559:F,gasLimit:w,gasPrice:g,maxFeePerGas:I,maxPriorityFeePerGas:S}=n;return F?(delete f.gasPrice,{...f,value:f?.amount,maxFeePerGas:x||I,maxPriorityFeePerGas:h||S,gasLimit:w}):{...f,value:f?.amount,gasPrice:T||g,gasLimit:w}};return async({coinId:n,baseCoinAmountUse:y,userGasInfo:f,updateGasInfo:T,serverSignInfo:x,fetchParams:h})=>{let{gasPrice:F,maxFeePerGas:w}=T,{supportEip1559:g,gasLimit:I,gasPrice:S,maxFeePerGas:j}=f,U=0;x?.needExtFee&&(U=await p(u({userGasInfo:f,updateGasInfo:T,fetchParams:h}),n));let D=g?j:S,ae=await d(D,I,n),W=s(D,I),H=g?w:F,R=await d(H,I,n,U),Q=s(H,I);return new Promise((M,G)=>{let q=oe.prompt({hideCloseBtn:!1,alignBottom:!1,titleCenter:!1,infoType:null,confirmText:i("extension_toast_btn_confirmgasfee"),confirmBtnProps:{type:k.TYPE.highlight,size:k.SIZE.lg},onConfirm:async()=>{q.destroy();let{baseCoin:ie}=await e(n,!0),{coinAmountInt:Te}=a(ie.coinId),E=Ne(Te,y);uo({userGasInfo:f,updateGasInfo:T,baseCoinAmountAvailable:E,L1FEE:U})?(ut.error({title:i("extension_toast_text_insufficient_balance")}),G(new Error(fe))):M(T)},onClose:()=>{q.destroy(),G(new Error(fe))},renderContent:ie=>z.default.createElement(ie,null,z.default.createElement("div",{className:Z.title},i("extension_toast_title_transaction_replace")),z.default.createElement("div",{className:Z.subtitle},i("extension_toast_subtitle_gasincrease")),z.default.createElement("div",{className:Z.feeTitle},i("extension_toast_title_current_transaction")),z.default.createElement("div",{className:Z.fee},z.default.createElement("div",{className:Z.feeDetail},ae),z.default.createElement("div",{className:Z.gasDetail},W)),z.default.createElement("div",{className:Z.feeTitle},i("extension_toast_title_gasprice")),z.default.createElement("div",{className:Z.fee},z.default.createElement("div",{className:Z.speedDetail},R),z.default.createElement("div",{className:Z.gasDetail},Q)))})})}},Po=xn;var vn=()=>{let e=Po();return async({coinId:o,baseCoinAmountUse:t,userGasInfo:r,serverGasInfo:l,serverSignInfo:d,originTxGasInfo:s,fetchParams:p})=>{let u=po({userGasInfo:r,serverGasInfo:l,originTxGasInfo:s});return u?.gasPrice||u?.maxFeePerGas?(await e({coinId:o,baseCoinAmountUse:t,userGasInfo:r,updateGasInfo:u,serverSignInfo:d,fetchParams:p}),Promise.resolve(u)):Promise.resolve()}},Io=vn;c();m();var Be={content:"_content_18w99_1",title:"_title_18w99_4",text:"_text_18w99_10"};var gn=()=>{let e=Io();return async({coinId:o,baseCoinAmountUse:t="0",showSelectNonceDialog:r=!1,onChainNonce:l="0",newNonce:d="0",userGasInfo:s={},serverGasInfo:p={},serverSignInfo:u={},originTxGasInfo:_={},fetchParams:n={},title:y="",text:f="",confirmText:T="",cancelText:x=""})=>new Promise((h,F)=>{if(r){let w=oe.prompt({hideCloseBtn:!0,alignBottom:!1,titleCenter:!1,infoType:null,cancelBtnProps:{category:k.CATEGORY.outline,size:k.SIZE.lg},confirmBtnProps:{type:k.TYPE.highlight,size:k.SIZE.lg},confirmText:T,cancelText:x,onConfirm:async()=>{w.destroy();try{let g=await e({coinId:o,baseCoinAmountUse:t,userGasInfo:s,serverGasInfo:p,serverSignInfo:u,originTxGasInfo:_,fetchParams:n});h(g?{nonce:l,updateGasInfo:g}:{nonce:l})}catch(g){F(g)}},onCancel:()=>{w.destroy(),h({nonce:d})},renderContent:g=>be.default.createElement(g,null,be.default.createElement("div",{className:Be.content},be.default.createElement("div",{className:Be.title},y),be.default.createElement("div",{className:Be.text},f)))})}else h({nonce:d})})},Oe=gn;var hn=()=>{let e=Oe();return async({coinId:o,baseCoinAmountUse:t,hasFailedTx:r,onChainNonce:l,newNonce:d,userGasInfo:s,serverGasInfo:p,originTxGasInfo:u,serverSignInfo:_,fetchParams:n})=>e({coinId:o,baseCoinAmountUse:t,showSelectNonceDialog:r,onChainNonce:l,newNonce:d,userGasInfo:s,serverGasInfo:p,serverSignInfo:_,originTxGasInfo:u,fetchParams:n,title:i("wallet_extension_transaction_popup_failed_transaction"),text:i("wallet_extension_transaction_popup_replace_failed_transaction"),confirmText:i("wallet_extension_transaction_popup_btn_replace"),cancelText:i("wallet_extension_transaction_popup_btn_skip")})},Ao=hn;c();m();te();var wn=()=>{let e=Oe();return async({coinId:o,baseCoinAmountUse:t,hasPendingTx:r,onChainNonce:l,newNonce:d,userGasInfo:s,serverGasInfo:p,originTxGasInfo:u,serverSignInfo:_,fetchParams:n})=>e({coinId:o,baseCoinAmountUse:t,showSelectNonceDialog:r,onChainNonce:l,newNonce:d,userGasInfo:s,serverGasInfo:p,serverSignInfo:_,fetchParams:n,originTxGasInfo:u,title:i("wallet_extension_transaction_popup_pending_transaction"),text:i("wallet_extension_transaction_popup_replace_pending_transaction"),confirmText:i("wallet_extension_transaction_popup_btn_replace"),cancelText:i("wallet_extension_transaction_popup_btn_continue_wait")})},No=wn;c();m();te();var Lo=A(ge());var Cn=()=>async({isRepeat:a,onCancel:o})=>new Promise((t,r)=>{if(a){let l=oe.prompt({alignBottom:!1,hideCloseBtn:!0,infoType:oe.Prompt.INFO_TYPE.warn,confirmBtnProps:{type:k.TYPE.highlight,size:k.SIZE.lg},cancelBtnProps:{category:k.CATEGORY.outline,size:k.SIZE.lg},title:i("wallet_extension_popup_repeat_order"),confirmText:i("wallet_extension_popup_repeat_order_btn_continue"),cancelText:o?i("wallet_extension_popup_repeat_order_btn_viewhistory"):null,text:i("wallet_extension_popup_repeat_order_desc"),onConfirm:()=>{l.destroy(),t()},onCancel:()=>{l.destroy(),(0,Lo.isFunction)(o)&&o(),r(new Error(fe))}})}else t()}),Go=Cn;var So="FetchError";var Do=()=>{let e=Ao(),a=No(),o=Go(),t=async({coinId:d,from:s,to:p,amount:u,gasPrice:_})=>{let[{data:n=[]},{data:y={}}]=await Promise.all([Rt({checkTypes:[ne.REPEAT,ne.OVERWRITTEN],coinId:d,from:s,to:p,amount:u,gasPrice:_}),Ut({coinId:d,address:s},{fromAddr:s,scenario:kt.SCENARIO_SEND_COIN})]);return{txToastCheckData:n,signInfoData:y}},r=d=>{let{hasFailedTx:s,hasPendingTx:p,nonce:u,newNonce:_,originGasPrice:n,originPriorityFee:y}=mo(d),f=co(d,ne.REPEAT);return{hasFailedTx:s,hasPendingTx:p,nonce:u,newNonce:_,originGasPrice:n,originPriorityFee:y,isRepeat:f}};return async({coinId:d,from:s,to:p,amount:u,gasPrice:_,baseCoinAmountUse:n,userGasInfo:y,whetherCheckRepeat:f,onRepeatCancel:T})=>{let x=[],h={};try{let R=await t({coinId:d,from:s,to:p,amount:u,gasPrice:_});if(!Array.isArray(R.txToastCheckData)||typeof R.signInfoData!="object")throw new Error(So);x=R.txToastCheckData,h=R.signInfoData?.info||{}}catch{throw new Error(So)}let F=r(x),{nonce:w,newNonce:g,originGasPrice:I,originPriorityFee:S,hasFailedTx:j,hasPendingTx:U,isRepeat:D}=F,ae={originGasPrice:I,originPriorityFee:S},W={coinId:d,baseCoinAmountUse:n,onChainNonce:w,newNonce:g,userGasInfo:y,serverGasInfo:h.gasPrice,serverSignInfo:h,originTxGasInfo:ae,fetchParams:{amount:u,coinId:d,from:s,gasPrice:_,to:p}},H={nonce:g};return j?H=await e({...W,hasFailedTx:j}):U&&(H=await a({...W,hasPendingTx:U})),f&&await o({isRepeat:D,onCancel:T}),H}};c();m();var Uo=A(Y());c();m();c();m();var He=A(Y());fn();yn();var Fn=()=>{let[e,{setFalse:a}]=pe(!0),[o,t]=(0,He.useState)([]),r=async()=>{try{let l=await _t(vt.getMevList,{},{});return t(l.data),l.data}catch{return[]}finally{a()}};return(0,He.useEffect)(()=>{r()},[]),[e,o]},Mo=Fn;var ue=A(Y()),bn=e=>{let[a,o]=Mo(),[t,r]=(0,ue.useState)(""),[l,d]=(0,ue.useState)([]);(0,ue.useEffect)(()=>{let p=o.find(n=>window.localStorage.getItem("mevCheckedName")===n.name&&n.chainIds.includes(Number(e))),u=o.find(n=>n.chainIds.includes(Number(e))),_=o.filter(n=>n.chainIds.includes(Number(e)));d(_),r(p||u)},[o,e]);let s=(0,ue.useMemo)(()=>t&&o.length>0&&!a,[t,o,a]);return[t,l,s,r]},Bo=bn;c();m();var v=A(Y());te();c();m();var N={"mev-control-enter":"_mev-control-enter_1l6py_1",mevControlEnter:"_mev-control-enter_1l6py_1","mev-control-content":"_mev-control-content_1l6py_6",mevControlContent:"_mev-control-content_1l6py_6","mev-control-content-title":"_mev-control-content-title_1l6py_9",mevControlContentTitle:"_mev-control-content-title_1l6py_9","mev-control-content-desc":"_mev-control-content-desc_1l6py_14",mevControlContentDesc:"_mev-control-content-desc_1l6py_14","list-content":"_list-content_1l6py_18",listContent:"_list-content_1l6py_18","list-item":"_list-item_1l6py_21",listItem:"_list-item_1l6py_21","item-icon":"_item-icon_1l6py_24",itemIcon:"_item-icon_1l6py_24","list-item-text":"_list-item-text_1l6py_28",listItemText:"_list-item-text_1l6py_28","mev-control-title":"_mev-control-title_1l6py_32",mevControlTitle:"_mev-control-title_1l6py_32","mev-control-sub-title":"_mev-control-sub-title_1l6py_37",mevControlSubTitle:"_mev-control-sub-title_1l6py_37","mev-control-picture":"_mev-control-picture_1l6py_42",mevControlPicture:"_mev-control-picture_1l6py_42","mev-control-divider":"_mev-control-divider_1l6py_46",mevControlDivider:"_mev-control-divider_1l6py_46","mev-control-text-content":"_mev-control-text-content_1l6py_50",mevControlTextContent:"_mev-control-text-content_1l6py_50"};c();m();var K=A(Y());var En=({mevList:e,mevChecked:a,setMevChecked:o,...t})=>{let r=(0,K.useRef)(null);if(!e.length)return null;let l=Lt(r),d=p=>{o(p)},s=p=>K.default.createElement(Bt,{icon:{size:we.SIZE.lg,src:p.vendorIcon||gt,type:we.TYPE.image},className:N["list-item"],onClick:()=>{d(p)},...t},K.default.createElement(P.FlexBox,{direction:P.DIRECTION.vertical},K.default.createElement(P.FlexBox,{align:P.ALIGN.center},K.default.createElement(V.Text,{className:N["list-item-text"]},p.name))),p.name===a.name&&K.default.createElement(P.FlexBox,{className:N["item-icon"],justify:"flex-end"},K.default.createElement(we,{icon:"okds-success-circle-fill",size:we.SIZE.sm})));return K.default.createElement("div",{ref:r,className:N["list-content"]},K.default.createElement(Ot,{itemKey:"id",height:l?.height??408,searchable:!1,dataSource:e,renderItem:s}))},Oo=En;var Ho="mevOperated",kn=2e3,Pn=({isMev:e,isShowBlockSwapMevTooltip:a,onMevChange:o,mevChecked:t,mevList:r,setMevChecked:l})=>{let[d,{setFalse:s,setTrue:p}]=pe(!1),[u,{toggle:_}]=pe(!1),n=At(),[y,f]=(0,v.useState)(""),[T]=(0,v.useState)(e);(0,v.useEffect)(()=>{let w=!e&&a,g=!e&&Ve.get(Ho)===void 0,I=()=>{s()},S=()=>{Ve.set(Ho,1)};return w?(f("wallet_extension_trade_tooltip_enable_mev"),p(),document.addEventListener("click",I,!1)):g&&(f("wallet_extension_mev_pop_turnon_mev"),p(),document.addEventListener("click",I,!1),document.addEventListener("click",S,!1)),()=>{document.removeEventListener("click",I,!1),document.removeEventListener("click",S,!1)}},[]);let x=()=>{window.localStorage.setItem("mevCheckedName",t.name)};(0,v.useEffect)(()=>{T&&t&&(x(),o(T,t))},[T,t]);let h=me(w=>{w.stopPropagation(),typeof o=="function"&&(x(),o(!e,t)),Zt({mev:!e}),f(e?"wallet_extension_mev_pop_mev_off":"wallet_extension_mev_pop_mev_on"),_(),p(),setTimeout(()=>{s()},kn)}),F=Gt({dark:"/cdn/assets/imgs/245/127CAD27DF691613.png",light:"/cdn/assets/imgs/2311/700F36AE20EC394E.png"});return t?v.default.createElement(v.default.Fragment,null,v.default.createElement(Ke,{show:d,title:i(y),placement:Ke.DIRECTION.bottomRight},v.default.createElement(Ze,{onClick:_,className:N["mev-control-enter"],src:`${n}${e?"/cdn/assets/imgs/2311/18FBF293424BC832.png":"/cdn/assets/imgs/2311/06B1F3EF7FDBD381.png"}`})),v.default.createElement(oe,{visible:u,onClose:_,onCancel:_,alignBottom:!0,isFull:!1,noContentPadding:!0,noMargin:!0},v.default.createElement(P.Box,{className:N["mev-control-content"]},v.default.createElement(P.FlexBox,{justify:"space-between",align:P.ALIGN.center},v.default.createElement(P.Space,{direction:P.DIRECTION.vertical,space:12},v.default.createElement(V.Text,{className:N["mev-control-title"]},i("wallet_extension_mev_grouptitle_mev_protection")),v.default.createElement(V.Text,{style:{color:e?"var(--okd-color-semantic-positive)":"var(--okd-color-content-primary)"},className:N["mev-control-sub-title"]},i(e?"wallet_extension_mev_label_enabled":"wallet_extension_mev_label_disabled"))),v.default.createElement(Ze,{className:N["mev-control-picture"],src:F})),v.default.createElement(Ct,{className:N["mev-control-divider"]}),v.default.createElement(P.Space,{className:N["mev-control-text-content"],direction:P.DIRECTION.vertical,space:24},v.default.createElement(P.Box,null,v.default.createElement(V.Text,{className:N["mev-control-content-title"]},i("wallet_extension_mev_title_mev_attack")),v.default.createElement(V.Text,{className:N["mev-control-content-desc"]},i("wallet_extension_mev_subtitle_mev_attack"))),v.default.createElement(P.Box,null,v.default.createElement(V.Text,{className:N["mev-control-content-title"]},i("wallet_extension_mev_title_prevent_attacks")),v.default.createElement(V.Text,{className:N["mev-control-content-desc"]},i("wallet_extension_mev_subtitle_prevent_attacks"))),v.default.createElement(P.Box,null,v.default.createElement(V.Text,{className:N["mev-control-content-desc"]},i("wallet_extension_mev_subtitle_mev_reset"))),v.default.createElement(P.Box,null,v.default.createElement(V.Text,{className:N["mev-control-content-title"]},i("wallet_extension_mev_title_provider")),v.default.createElement(Oo,{mevList:r,mevChecked:t,setMevChecked:l})))),v.default.createElement(Le.FooterActions,{affixStyle:{position:"absolute",bottom:0,left:0}},v.default.createElement(k,{onClick:h,category:e?k.CATEGORY.outline:k.CATEGORY.fill,type:e?k.TYPE.primary:k.TYPE.highlight,size:k.SIZE.lg},i(e?"wallet_extension_mev_btn_disable_mev":"wallet_extension_mev_btn_activate_protection"))))):null},Yo=Pn;var In=({isMev:e,chainId:a,isShowBlockSwapMevTooltip:o,onMevChange:t})=>{let[r,l,d,s]=Bo(a);return d&&Uo.default.createElement(Yo,{isMev:e,isShowBlockSwapMevTooltip:o,onMevChange:t,mevChecked:r,mevList:l,setMevChecked:s})},Ro=In;c();m();var C=A(Y());var nt=A(ge());te();c();m();var zo=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"isPauser",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renouncePauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"}],name:"addPauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"decimals",type:"uint8"},{name:"totalSupply",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"PauserAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"PauserRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"}];c();m();var re=A(Y());te();var Wo=A(ge());var An=3,Vo=({address:e,coins:a,baseCoinId:o})=>{if(Array.isArray(a))return a.find(t=>t?.baseCoinId===o&&St(t?.address,e,{baseCoinId:o})||Vo({address:e,baseCoinId:o,coins:t?.childrenCoin}))},Nn=({to:e,chainInfo:a,baseCoinId:o})=>{let t=bo(),r=(0,re.useCallback)(async(l=0)=>{if(!Vo({address:e,coins:t,baseCoinId:o}))try{let s=await Dt({contractAddress:e,chainInfo:a});await Mt(s)}catch(s){++l<An?r(l):dt.error({title:s?.msg||i("wallet_home_toast_network_error")})}},[o,a,t,e]);return r},Ln=({txType:e,walletId:a,txParams:o,analyzeRet:t,coinId:r})=>{let[l,d]=(0,re.useState)({}),[s,p]=(0,re.useState)("0"),u=se(r),{to:_}=o||{},n=zt({},a),y=(0,re.useMemo)(()=>n?.find(x=>x.localType===u?.localType),[u?.localType,n?.length]),f=Nn({to:_,chainInfo:y,baseCoinId:r}),T=(0,Wo.get)(t,"approveList.0",{});return(0,re.useEffect)(()=>{if(T?.asset?.address&&De(e)){f();let{approvalRaw:x}=T,{decimals:h=0,symbol:F,imageUrl:w}=T.asset;p(B.div(L(x),B.pow(10,h))),d({symbol:F,decimals:h,address:_,image:w,chainId:u?.chainId})}},[T?.asset?.address,e]),[{...l,authAmount:s},p]},Zo=Ln;c();m();var Ye=A(Y());var Ko=A(ge());dn();var Gn=({txId:e,coinId:a,txType:o,txParams:t,isMev:r,mevInfo:l,localType:d,preExecuteError:s,verifyGasLimitRet:p,modifiedData:u,walletAccount:_,customGasInfo:n,isSufficientGas:y,isSufficientBalance:f,gasReturnActivity:T,modifiedDataError:x,baseCoinBalanceInt:h,reportGasReturnActivityDataInConfirm:F,onCancel:w,onConfirm:g,onConfirmReplace:I})=>{let{walletId:S,address:j}=_||{},{isPreExecuteNonGasError:U}=p||{},D=Do(),{networkFee:ae,gasType:W,gasPrice:H}=n||{},R=_o({coinId:a,walletId:S,localType:d,fromAddr:t?.from}),Q=eo({coinId:a,toAddr:t?.to,fromAddr:t?.from,txSource:Ft.DAPP,coinAmount:(Se(t?.value)?L(t?.value):t?.value)||0,serviceCharge:ae,inputData:u,mev:r?l?.name:"",activityId:T?.activityId}),M=(0,Ye.useMemo)(()=>n?.isNetworkFeeLoading||Ge(n,o)||U||!!s||(0,Ko.isNil)(h)||x,[s,n,o,U,h,x]),G=me(async()=>{if(I&&typeof g=="function")return g({isMev:r,coinId:a,mevInfo:l,txParams:t,customGasInfo:n,modifiedData:u,gasReturnActivity:T,reportGasReturnActivityDataInConfirm:F});let{nonce:ie,updateGasInfo:Te}=await D({to:t?.to,from:t?.from,coinId:a,gasPrice:H,userGasInfo:n,amount:L(t?.value)||0,baseCoinAmountUse:L(t?.value||0)});F();let E={...t,...n,...Te||{},nonce:ie,data:u};try{let X=await R(E),le=await $t(ft,X);return await Q(X,{txHash:le,extJson:JSON.stringify({to:E?.to,gasType:W,from:E?.from,value:Se(E?.value)?L(E?.value):E?.value,nonce:Se(E?.nonce)?L(E?.nonce):E?.nonce,data:E?.data,gas:E?.gasLimit,oldTxHash:"",gasPrice:E?.supportEip1559?E?.maxFeePerGas:E?.gasPrice,repeatTxType:Et.CONFIRMING,priorityFee:E?.supportEip1559?E.maxPriorityFeePerGas:0})}),g?.({txHash:le})}catch(X){return g?.({error:X})}}),q=(0,Ye.useMemo)(()=>!f||!y?{txId:e,coinId:a,address:j,walletId:S,receiveOnly:y,actionType:de.ACTION_TYPE.FILL_UP}:{disabled:M,actionType:de.ACTION_TYPE.CONFIRM,onClick:G},[j,a,M,G,f,y,e,S]);return(0,Ye.useMemo)(()=>[{onClick:w,actionType:de.ACTION_TYPE.CANCEL},q],[q,w])},jo=Gn;c();m();var Ue=A(Y());te();var Sn=e=>{let[a,o]=(0,Ue.useState)({isNetworkFeeLoading:!0,gasLimit:"0",gasPrice:"0",maxFeePerGas:"0",maxPriorityFeePerGas:"0",supportEip1559:!1,gasType:O.STANDARD}),{gasLimitInfo:t={},gasLimit:r,gasPrice:l,maxFeePerGas:d,gasType:s,supportEip1559:p,customConfirmed:u,isGasLimitLoading:_,isNetworkFeeLoading:n,networkFee:y,maxPriorityFeePerGas:f,gasPriceInfo:T,extFee:x}=a,{minGasFee:h}=no({gasLimit:r,gasPrice:l,maxPriorityFeePerGas:f,maxFeePerGas:d,supportEip1559:p,extFee:x,gasPriceInfo:T,gasLimitInfo:t,gasType:s}),F=(0,Ue.useMemo)(()=>s===O.CUSTOM&&!u?i("extension_send_mid_text_dapps_suggested_fee"):s||O.STANDARD,[u,s]),w=Ge(a,e),g=n&&_&&!t?.gasLimit;return{level:F,estimateFailed:w,customGasInfo:a,loading:n,networkFee:g?void 0:h,maxNetworkFee:g?void 0:y,onCustomGasInfoChange:o}},qo=Sn;c();m();var _e=A(Y());_n();$e();var Dn=({txType:e,walletId:a,coinId:o,txParams:t,customGasInfo:r,preExecuteLoading:l})=>{let[d,s]=(0,_e.useState)(""),p=se(o),{from:u,to:_}=t||{},[n,y]=(0,_e.useState)("");(0,_e.useEffect)(()=>{l||(Fe(e)||Me(e)?(s(Xe.approval),y(Fe(e)?"approve":"revoke_approve")):(s(Xe.dapp),y("Contract interaction")))},[l,e]);let f=jt({walletId:a,coinId:o,fromAddress:u,toAddress:_,txType:d,fee:Tt(r?.networkFee),disabled:!_,unavailable:r.gasType===O.CUSTOM&&r.customConfirmed}),{status:T,activity:x,activityId:h,tip:F,clear:w}=f,g=()=>{xt({activityId:h,activity:x,status:T,tip:F,walletId:a,address:u})},I=x?.errorCode;return(0,_e.useEffect)(()=>{!n||I===0&&Vt({wallet_address:u,interactive_address:_,chain_id:p?.chainId,transaction_type:n})},[I,n,u,_,p?.chainId]),{gasReturnActivity:f,clearGasReturnInfo:w,reportGasReturnActivityDataInConfirm:g}},$o=Dn;c();m();var ye=A(Y()),Re=A(ge());te();var Mn=(e,a)=>e?.isPreExecuteNonGasError||a?{type:J.TYPE.error,message:e?.msg||i("wallet_extension_toast_text_unknown_error")}:null,Bn=(e,a)=>{let o=e?.approveList?.[0]||{},t=o?.asset||{},r=tt(o?.name||Je),l=tt(t?.symbol||t?.name||Je);return Fe(a)||xo(a)?De(a)&&Jt(B.div(o?.approvalRaw,B.pow(10,t?.decimals||0)))?{type:J.TYPE.warn,message:i("wallet_extension_popup_unlimited_transfer",{contract:r,asset:l})}:{type:J.TYPE.warn,message:i("extension_approve_alert_authorized_tips",{contract:r,asset:l})}:Me(a)?{type:J.TYPE.info,message:i("extension_revoke_approval_alert_evoke_authorization",{contract:r,asset:l})}:null},On=({coinId:e,txType:a,analyzeRet:o,estimateFailed:t,preExecuteError:r,preExecuteLoading:l,isDappCustomIllegal:d,isSufficientBalance:s,isSufficientGas:p,verifyGasLimitRet:u})=>{let _=qt(),n=se(e),y=Eo({loading:l,kysRet:o});return(0,ye.useMemo)(()=>{if((0,Re.isNil)(n?.coinId))return null;let f=Mn(u,r);if(f)return f;if(!p)return{type:J.TYPE.warn,message:i("wallet_extension_popup_insufficient_for_net",{Symbol:n?.symbol})};if(!s)return{type:J.TYPE.warn,message:i("wallet_extension_popup_dapp_insufficient_balance")};if(t)return{type:io.FEE_ERROR};if(!(0,Re.isEmpty)(o?.blackAddress))return{type:J.TYPE.error,message:ye.default.createElement(ye.default.Fragment,null,o.blackAddress.msg,ye.default.createElement(Ae,{underline:!0,type:Ae.TYPE.secondary,size:Ae.SIZE.sm,onClick:()=>{globalThis.platform.openTab({url:_?.scamsUrl})}},i("wallet_extension_scam_toast_link_view_scams")))};let T=Bn(o,a);if(T)return T;if(d===Qe[O.SLOW])return{type:J.TYPE.normal,message:i("wallet_extension_popup_text_dapp_fee_low")};if(d===Qe[O.FAST])return{type:J.TYPE.normal,message:i("wallet_extension_dapp_toast_high_network_fee")};let x=y();return x||null},[n?.coinId,n?.symbol,u,r,p,s,t,o,a,d,_?.scamsUrl,y])},Jo=On;c();m();$e();var Hn=e=>{let{txParams:a={},type:o}=e,{gasPrice:t,maxFeePerGas:r,maxPriorityFeePerGas:l}=a,d=a.gas||a.gasLimit,s=O.STANDARD,p,u,_,n=L(d),y=L(t),f=L(r),T=L(l);return he(y,0)&&(s=O.CUSTOM,p=y),he(f,0)&&he(T,0)&&he(f,T)&&(s=O.CUSTOM,u=f,_=T),o===oo.DEPLOY_CONTRACT&&(s=O.CUSTOM),{initialGasType:s,initialCustomMaxPriorityFee:_,initialCustomGasLimit:n,initialCustomGasPrice:p,initialCustomMaxBaseFee:Ne(u,_)}},Qo=Hn;c();m();var ot={"data-input":"_data-input_1k4cq_1",dataInput:"_data-input_1k4cq_1","data-input-error-tip":"_data-input-error-tip_1k4cq_5",dataInputErrorTip:"_data-input-error-tip_1k4cq_5"};var Yn=e=>Number(e)===bt.INCREASE_ALLOWANCE?zo:[],Un=e=>{let{txId:a,chainId:o,walletId:t,txParams:r,dappInfo:l={},showDappInfo:d=!0,needMev:s=!1,openMev:p=!1,coinId:u,isShowBlockSwapMevTooltip:_,txType:n,onMevChange:y,onConfirm:f,onConfirmReplace:T,onCancel:x}=e||{},{host:h}=l,[F,w]=(0,C.useState)(""),[g,I]=Nt({mevInfo:{},isMev:p}),[S,{toggle:j}]=pe(!1),{from:U,to:D,value:ae="0x0",data:W}=r||{},[H,R]=(0,C.useState)(""),Q=se(u,void 0,{chainId:o}),M=Q?.coinId,G=Qt(Q?.localType,t),q=L(ae),ie={to:D,from:U,coinId:M,chainId:Q?.chainId,amount:q,checkTypes:[ne.KYS,ne.VERIFY_GAS_LIMIT],domain:h,tokenAddress:D,inputData:W||"0x"},[Te,E,X]=Xt(ie,{ready:!!D}),le=Te||!E&&!X&&!!D,$=E?.[ne.KYS]||{},Ee=E?.[ne.VERIFY_GAS_LIMIT]||{},ce=Wt(M,G?.walletId)?.coinAmountInt||0,ee=(0,C.useMemo)(()=>$?.txType?$?.txType:n,[$?.txType,n]),Xo=Qo({txParams:r,type:ee}),en=To($?.intention,ee),ze=yo(G.walletId),ke=(0,C.useMemo)(()=>wo(H),[H]),{isMev:Pe,mevInfo:We}=g,rt=H||W||"",tn=me((ve,Ie)=>{I({isMev:ve,mevInfo:Ie}),y?.(ve,Ie)}),{level:on,networkFee:nn,maxNetworkFee:xe,customGasInfo:at,estimateFailed:st,loading:rn,onCustomGasInfoChange:an}=qo(ee),{gasReturnActivity:it,reportGasReturnActivityDataInConfirm:sn}=$o({txType:ee,coinId:M,txParams:r,customGasInfo:at,preExecuteLoading:le,walletId:G.walletId}),lt=(0,C.useMemo)(()=>(0,nt.isNil)(ce)||B.gte(ce,xe)&&!Ee?.isPreExecuteGasError,[ce,xe,Ee?.isPreExecuteGasError]),ct=(0,C.useMemo)(()=>!B.eq(q,0)&&!(0,nt.isNil)(ce)?B.lte(q,B.sub(ce,xe)):!0,[ce,xe,q]),ln=Jo({txType:ee,coinId:M,analyzeRet:$,preExecuteError:X,preExecuteLoading:le,estimateFailed:st,isSufficientGas:lt,verifyGasLimitRet:Ee,isDappCustomIllegal:F,isSufficientBalance:ct}),cn=jo({txId:a,coinId:M,txType:ee,txParams:r,isMev:Pe,mevInfo:We,analyzeRet:$,verifyGasLimitRet:Ee,walletAccount:G,customGasInfo:at,isSufficientGas:lt,isSufficientBalance:ct,gasReturnActivity:it,modifiedDataError:ke,preExecuteError:X,localType:Q?.localType,modifiedData:rt,walletId:G?.walletId,baseCoinBalanceInt:ce,reportGasReturnActivityDataInConfirm:sn,onCancel:x,onConfirm:f,onConfirmReplace:T}),[mt,mn]=Zo({coinId:M,txType:ee,txParams:r,analyzeRet:$,walletId:G?.walletId}),pn=me(ve=>{let Ie=Yn(ee),pt=Pt(r?.data,Ie);if(pt){let un=vo(r?.data,{customPermissionAmount:ve,decimals:mt?.decimals},pt);mn(ve),R(un)}});return go({kysRet:$,handleCancel:x}),C.default.createElement(P.Container,null,C.default.createElement(Ht,{closeable:!1,backable:!1,title:en,loading:le},!!s&&C.default.createElement(Ro,{isMev:Pe,chainId:Q?.chainId,onMevChange:tn,isShowBlockSwapMevTooltip:_})),C.default.createElement(Fo,{coinId:M,txType:ee,dappInfo:l,showDappInfo:d,loading:le,analyzeRet:$,approveToken:mt,walletId:G?.walletId,onAuthTokenAmountChange:pn}),C.default.createElement(Ce,null,C.default.createElement(so,{level:on,coinId:M,networkFee:nn,loading:rn,maxNetworkFee:xe,estimateFailed:st,onClick:()=>{j(),ze({trade:"contract_interaction",all_confirmation:"network_fee"})}})),C.default.createElement(Ce,null,C.default.createElement(et,{address:G.address,walletId:G?.walletId,title:i("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{ze({trade:"contract_interaction",all_confirmation:"wallet_used_address"})}}),!!D&&C.default.createElement(et,{title:i("wallet_extension_popup_text_interact_with"),address:D,onCopyCallback:()=>{ze({trade:"contract_interaction",all_confirmation:"contract_address"})}})),W?C.default.createElement(Ce,{bordered:!1},C.default.createElement(Co,{data:W,kysRet:$,copyable:{hideDesc:!0},tooltipZIndex:101})):C.default.createElement(Ce,{bordered:!1},C.default.createElement(ho,{value:H,error:ke,onChange:R,className:ot["data-input"],errorTipClass:ot["data-input-error-tip"]})),C.default.createElement(Le,{placeholder:!0,offsetBottom:0,style:{zIndex:205},borderTop:!0},!ke&&C.default.createElement(lo,{...ln}),C.default.createElement(de,{buttonGroup:cn})),C.default.createElement(ro,{visible:S,coinId:M,address:U,inputData:rt,tokenAddress:D,value:L(ae),onBack:j,onClose:null,initialGasData:Xo,onGasChange:an,minimumGasLimit:Pe?We.gas:0,isMev:Pe,mevInfo:We,gasReturn:it,onDappGasIllegal:w,gasLimitOptions:{disabled:ke}}))},Zi=Un;export{Do as a,Ro as b,Zi as c};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-YEYYFHLH.js.map
