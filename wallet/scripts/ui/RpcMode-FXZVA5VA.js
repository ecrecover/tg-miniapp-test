import{b as pt,f as ct,g as ft}from"./chunk-HUKAPP2O.js";import{a as ut,b as _t,d as ht,e as gt}from"./chunk-3PTPKHLI.js";import{n as st,p as mt,q as lt}from"./chunk-RONUZVEW.js";import"./chunk-CQ2K3QEZ.js";import{a as dt}from"./chunk-J7WTXBCA.js";import"./chunk-DTYLEM3V.js";import"./chunk-PSJFSVFM.js";import"./chunk-MYKMM3H4.js";import{a as at}from"./chunk-5DJMMPGG.js";import{a as it}from"./chunk-JBMGRO5O.js";import"./chunk-UMBG4UN5.js";import"./chunk-Z223YH2S.js";import"./chunk-KZUQM6PE.js";import"./chunk-3G5IAADG.js";import{a as Xo,b as Ro}from"./chunk-B4ATV3GC.js";import{b as rt}from"./chunk-WUFX5FIX.js";import{a as ot}from"./chunk-5WLVDQXN.js";import{h as j,t as nt}from"./chunk-XHGDRCKN.js";import"./chunk-MJY6W4GC.js";import{d as tt,e as et}from"./chunk-5KKHZTOM.js";import{a as Qo}from"./chunk-EKXTRWYR.js";import"./chunk-AQEDLRCW.js";import"./chunk-OR3IMHNP.js";import"./chunk-G2LUKHAZ.js";import"./chunk-FC47KHHQ.js";import"./chunk-IPY7DOYN.js";import"./chunk-IF7RTFSM.js";import"./chunk-NWBT27VI.js";import{a as Jo}from"./chunk-ERRJFVON.js";import"./chunk-AGNEMUCC.js";import{d as O,e as fo,g as oo}from"./chunk-SFY37WOS.js";import"./chunk-7GRBMPLB.js";import"./chunk-H2MP374E.js";import{e as S}from"./chunk-JFCE4WMN.js";import"./chunk-2CQDB45Y.js";import{b as $o}from"./chunk-TCY2QN26.js";import"./chunk-TAMFXRQS.js";import"./chunk-SWNKITDG.js";import"./chunk-PCT6WF3F.js";import{e as qo,m as Ko}from"./chunk-7G3IOU2S.js";import"./chunk-FSSAJWUE.js";import{a as L}from"./chunk-EYUJFPID.js";import"./chunk-QXSGLFJ4.js";import"./chunk-LTVFH3JK.js";import{c as Vo}from"./chunk-UX45LV4J.js";import"./chunk-S2L2SUZT.js";import"./chunk-WAOH7NV4.js";import"./chunk-Z7MVEL6Q.js";import"./chunk-EQQ4TY26.js";import"./chunk-BSJ5U7SB.js";import"./chunk-RQ4URFJV.js";import"./chunk-A7QDOMG2.js";import"./chunk-PCN4TJH3.js";import"./chunk-UV4CBWDM.js";import"./chunk-JZYFGUUR.js";import"./chunk-55MBPFME.js";import"./chunk-ITV6J4J2.js";import"./chunk-E4R5GU2A.js";import"./chunk-QKNMCEFG.js";import"./chunk-7XFWBKEO.js";import"./chunk-GFKALINB.js";import"./chunk-FOB36UC7.js";import"./chunk-W5VVGPTJ.js";import"./chunk-6JC2JFPK.js";import"./chunk-RDUIYFM4.js";import"./chunk-3OA7XW3I.js";import"./chunk-MVELXHVO.js";import"./chunk-QAD7XKBR.js";import"./chunk-FSHQROIB.js";import"./chunk-RSZRDNEQ.js";import{b as Do}from"./chunk-LWWOGE47.js";import"./chunk-PNKC4I7V.js";import"./chunk-OBDMMZ5P.js";import"./chunk-AWV3UGPG.js";import{a as D,b as Go}from"./chunk-ZFY6KTVJ.js";import"./chunk-LQ6EG3M7.js";import"./chunk-EFXUUWZM.js";import"./chunk-SXT2HSEA.js";import"./chunk-X6MJ7FAJ.js";import"./chunk-4QGZMEGU.js";import"./chunk-JGVOOQUI.js";import{c as Wo,d as R,g as jo}from"./chunk-OL5PZGTP.js";import"./chunk-T6BAWHSV.js";import"./chunk-NZFRZUU7.js";import"./chunk-GKPU7ZYD.js";import{e as Zo}from"./chunk-IY5XPXLD.js";import"./chunk-N6T7YZKN.js";import"./chunk-CE2I3GSK.js";import"./chunk-SPMBQ3GG.js";import"./chunk-W3BHXSAD.js";import"./chunk-KWEOQTFQ.js";import"./chunk-MYLTZKPJ.js";import"./chunk-RAK5MQVM.js";import"./chunk-ILYGYWTN.js";import"./chunk-HOK5U34D.js";import"./chunk-XPB5VA3I.js";import"./chunk-XSNWL3NI.js";import"./chunk-IOMWHGY3.js";import"./chunk-EDYYUNM2.js";import"./chunk-FOI3TQUA.js";import"./chunk-Y3W2FGGC.js";import"./chunk-6SKAHEOE.js";import"./chunk-QYGNKIL6.js";import{R as Yo}from"./chunk-WWF4GAYE.js";import"./chunk-YITM3H6Z.js";import"./chunk-IQFXZKFW.js";import"./chunk-7BFUGHAL.js";import"./chunk-JVN7YJ6W.js";import"./chunk-VSX7BSN7.js";import{a as Ho}from"./chunk-V4V6C6NY.js";import"./chunk-ZQ5A3KPQ.js";import{a as X}from"./chunk-BGUY7SH3.js";import{w as $}from"./chunk-MJYAUOKI.js";import"./chunk-LI3NFLG3.js";import{a as J,o as Q}from"./chunk-FCCCJLF6.js";import{a as Oo,h as Mo}from"./chunk-4Z4GXCHB.js";import{$a as zo,y as co}from"./chunk-FK3ETA6I.js";import{b as V}from"./chunk-QZDHFNHK.js";import"./chunk-24PQFN5C.js";import"./chunk-6KPQELH2.js";import{a as jt}from"./chunk-EJQOS3F4.js";import{k as uo,o as Zt}from"./chunk-LHHZ5TAA.js";import"./chunk-PI6QLVMS.js";import"./chunk-QY4HIIR3.js";import"./chunk-XFWUEPSK.js";import"./chunk-MNNY2ODL.js";import"./chunk-VCAWL4NW.js";import"./chunk-XVIU24G2.js";import"./chunk-2LDYLNUY.js";import"./chunk-KCITCUTL.js";import"./chunk-YZ3HCB4K.js";import"./chunk-EZ7VUFME.js";import{b as Uo}from"./chunk-T2OWRX3Y.js";import{f as Fo,i as W}from"./chunk-C3FJ2D4V.js";import"./chunk-C5ZJZEPI.js";import"./chunk-LGHM3MOC.js";import"./chunk-2FULUWWG.js";import"./chunk-SLEUZTBQ.js";import"./chunk-4X6ZAX3L.js";import{c as z}from"./chunk-4QSQKIBZ.js";import"./chunk-OXVQDEZW.js";import"./chunk-X3G52GGX.js";import"./chunk-WUKT6J7S.js";import"./chunk-FTJCOLFJ.js";import{Kb as po,ac as Po,ib as q,jc as Wt,kb as K,lb as bo,m as Z,nb as So,o as vo,pb as lo,qb as No,sb as Lo,yb as Bo,za as Yt}from"./chunk-QG673PNL.js";import"./chunk-ZUFARSFM.js";import{E as Eo,G as Io,c as Y,n as Co,p as mo,q as wo}from"./chunk-6MTHEPGF.js";import{I as F,m as Ao,w as r}from"./chunk-ZQQ7HNWV.js";import"./chunk-Y62GSKHT.js";import"./chunk-2BXFMFMK.js";import{M as ko,Y as I,c as Ht}from"./chunk-ZOQTSYT4.js";import{a as b}from"./chunk-ADZWCU3Q.js";import"./chunk-AXQY4CD5.js";import"./chunk-ZPRPROG4.js";import"./chunk-FDI7TLXH.js";import"./chunk-L4HTIIR6.js";import"./chunk-733NI6T7.js";import"./chunk-5TB3ZTAO.js";import"./chunk-EYWGNJVY.js";import"./chunk-PIGJQYQ3.js";import"./chunk-YSXN7JDZ.js";import"./chunk-TBVIGR5T.js";import"./chunk-FHQVMQUK.js";import"./chunk-XNS2NFYY.js";import{f as _,m as e,o as n}from"./chunk-REC7XVZY.js";e();n();var N=_(b()),no=_(jt()),ro=_(co());var go=_(Z());e();n();var eo=_(b());e();n();var c=_(b());F();po();e();n();var Tt=_(b());F();var qt=({chainGasLoadFailed:o,isSufficientBalance:t,transaction:u,actions:m,modifiedDataError:a,walletInfo:i,unapprovedTx:l})=>{let{extensionConfig:p}=L("rpc_info"),{chain:s,nonce:f,loading:d,gas:h}=u,{sign:w,cancel:y}=m,{chainGasLoading:C}=h,E=(0,Tt.useCallback)(async()=>{await y()},[y]),A={actionType:S.ACTION_TYPE.CANCEL,onClick:E},g=async()=>{try{if(!await $o({walletId:i?.walletId,callback:y}))return}catch(v){console.error(v)}let H=v=>{let io=Zo[i?.keyringIdentityType];Yo({tx_source:"dapp",from_addr:l.from,to_addr:l.to,main_token_symbol:p?.symbol,token_symbol:v?.extraParams?.coinSymbol||"",contract_address:l?.to,volume_token:l?.value,volume_usdt:"",tx_hash_unique:v?.txHash,wallet_type:io,chain_id:parseInt(s.chainId,16)})};w(i?.walletId,H)},G=()=>{globalThis.open(p.faucetUrl)},P={disabled:C||o||!t&&!p.faucetUrl||f.pending||d.sign||d.token||a,actionType:S.ACTION_TYPE.CONFIRM,onClick:g};return!t&&p.faucetUrl&&(P.actionType=S.ACTION_TYPE.FILL_UP,P.onClick=G,P.btnText=r("wallet_extension_transfer_btn_via_faucet")),[A,P]},xt=qt;e();n();F();var yt=_(Z());var Kt=({chainGasLoadFailed:o,modifiedDataError:t,isSufficientBalance:u,isRevokeTx:m,transaction:a,loading:i})=>{let{auth:l,chain:p}=a,s=j(l.name||W),f=j(l.symbol||W),d=()=>t?{}:null,h=()=>u?null:{type:Y.TYPE.warn,message:r("wallet_extension_popup_insufficient_network_fee",{token:p.symbol})},w=()=>o?{type:oo.TIP_TYPE.FEE_ERROR}:null,y=()=>m?{type:Y.TYPE.info,message:r("extension_revoke_approval_alert_evoke_authorization",{contract:s,asset:f})}:null,C=()=>R(l.customApproveAmount)?{type:Y.TYPE.warn,message:r("wallet_extension_popup_unlimited_transfer",{contract:s,asset:f})}:(0,yt.gt)(l.customApproveAmount,0)?{type:Y.TYPE.warn,message:r("extension_approve_alert_authorized_tips",{contract:s,asset:f})}:null;if(i)return null;let E=[d,h,y,C,w];for(let A=0;A<E.length;A++){let g=E[A],G=g();if(G)return G}return null},At=Kt;e();n();var M=_(b());var ho=_(Ht());po();var kt=_(Z());F();e();n();var U={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",content:"_content_1jypd_1",inner:"_inner_1jypd_5","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",warningText:"_warningText_1jypd_9",icon:"_icon_1jypd_13"};function Vt({nonce:o,suggestedNonce:t,setNonce:u}){let m=i=>{u(i)},a;return o&&(lo(o,t)?a=r("developer_mode_send_tooltip_higher",{num:t}):So(o,t)&&(a=r("developer_mode_send_tooltip_lower",{num:t}))),M.default.createElement(at.Row,{className:U.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},M.default.createElement("div",{className:U.content},M.default.createElement("div",{className:U.inner},M.default.createElement(mo.Number,{innerClassName:(0,ho.default)({"rpc-evm-send-edit-nonce__warning-input":!!a}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:r("developer_mode_send_maintitle_nonce"),placeholder:`${(0,kt.isNil)(t)?"":Ao.thousandFormat(t)}`,size:mo.SIZE.xl,value:o,onAdd:()=>!o&&t!==null?(m(K(t,1)),!1):!0,onSub:()=>!o&&lo(t,0)?(m(bo(t-1)),!1):!0,onChange:m})),a&&M.default.createElement("div",{className:U.warningText},M.default.createElement(ko,{className:(0,ho.default)(U.icon,"okx-wallet-plugin-warning-circle")}),a)))}var Ct=Vt;e();n();var k=_(b());F();Wt();po();e();n();var x=_(b());F();e();n();var B={AuthorizationToken:"_AuthorizationToken_g68hx_1",authorizationToken:"_AuthorizationToken_g68hx_1",title:"_title_g68hx_1",content:"_content_g68hx_4",unlimited_text:"_unlimited_text_g68hx_13",unlimitedText:"_unlimited_text_g68hx_13",balance:"_balance_g68hx_17",amount:"_amount_g68hx_22",checkAll:"_checkAll_g68hx_26",checkAll__text:"_checkAll__text_g68hx_30",checkAllText:"_checkAll__text_g68hx_30",footerActions:"_footerActions_g68hx_33"};var $t=({onClose:o,onConfirm:t,approveToken:u})=>{let{symbol:m,decimals:a,customApproveAmount:i}=u,l=j(m,10),p=R(i),[s,f]=(0,x.useState)(!1),[d,h]=(0,x.useState)(p?"0":i),w=g=>{h(g)},[y,{set:C}]=Q(!1),E=(0,x.useMemo)(()=>rt(s,d),[s,d]),A=J(async()=>{try{C(!0),await t?.(s?Wo:d),o?.()}catch(g){console.log(g)}finally{C(!1)}});return x.default.createElement(z.FlexBox,{className:B.AuthorizationToken,direction:z.DIRECTION.vertical,align:z.ALIGN.center},x.default.createElement($.Text,{strong:700,className:B.title},r("wallet_contract_interaction_approval_permission_authorized_amount")),x.default.createElement(z.Box,{className:B.content},s?x.default.createElement($.Text,{strong:500,size:$.SIZE.xl,className:B.unlimited_text},r("wallet_extension_transfer_title_unlimited_amount",{token:l})):x.default.createElement(Vo,{symbol:l,autoSize:jo,placeholder:"0",decimals:a||0,value:d,onChange:w,style:{fontWeight:500,height:"48px"}})),x.default.createElement(wo,{className:B.checkAll,checked:s,textClass:B.checkAll__text,onChange:({target:{checked:g}})=>{f(g)}},r("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),x.default.createElement(X.FooterActions,{affixStyle:{position:"none"},placeholder:!1,className:B.footerActions},x.default.createElement(I,{loading:y,disabled:E,category:I.CATEGORY.fill,type:I.TYPE.primary,size:I.SIZE.lg,onClick:A},r("commonall_filter_btn_save"))))},wt=$t;e();n();var to={edit_btn:"_edit_btn_rw6lw_1",editBtn:"_edit_btn_rw6lw_1",authorization_token_dialog:"_authorization_token_dialog_rw6lw_5",authorizationTokenDialog:"_authorization_token_dialog_rw6lw_5",authorization_token_dialog__content:"_authorization_token_dialog__content_rw6lw_5",authorizationTokenDialogContent:"_authorization_token_dialog__content_rw6lw_5"};var Jt=({onUpdateAuthAmount:o,dappInfo:t,isOffline:u,approveToken:m})=>{let{isApprove:a,isRevoke:i,address:l,customApproveAmount:p=0,symbol:s=W,decimals:f=0,icon:d=Fo}=m,h=(0,k.useMemo)(()=>{let A=i?V.CANCEL_AUTHORIZATION:V.AUTHORIZATION,g=Po(Uo(q(p,Lo.pow(10,f))));return{approvalType:A,asset:{symbol:s,decimals:f,address:l,imageUrl:d},approvalRaw:g}},[s,f,l,p,i,d]),[w,{set:y}]=Q(!1),C=J(()=>{y(!1)}),E=()=>{y(!0)};return u?k.default.createElement(et,null):a?k.default.createElement(k.default.Fragment,null,k.default.createElement(nt,{approveInfo:h,editBtnSlot:!i&&k.default.createElement(I,{size:I.SIZE.xs,type:I.TYPE.primary,category:I.CATEGORY.outline,className:to.edit_btn,onClick:E},r("wallet_extension_transfer_text_edit"))}),k.default.createElement(Co,{className:to.authorization_token_dialog,alignBottom:!0,noContentPadding:!0,onClose:C,visible:w,windowClass:to.authorization_token_dialog__content},k.default.createElement(wt,{txType:V.AUTHORIZATION,onConfirm:o,approveToken:m,onClose:C}))):k.default.createElement(O,null,k.default.createElement(tt,{...t}))},Et=Jt;var It=({unapprovedTx:o})=>{let[t,u]=(0,c.useState)(""),[m,a]=(0,c.useState)(!1),i=Ro(t),{extensionConfig:l}=L("rpc_info"),p=ut(o.origin,o.from),[s,f]=st({...o,walletId:p?.walletId}),{title:d,auth:h,meta:w,nonce:y,gas:C,loading:E,data:A}=s,{setNonce:g,setAuthAmount:G}=f,{chainGasInfo:To,customGasInfo:P,chainGasLoading:H,chainGasLoadFailed:v,stopPollingGasPrice:io,updateCustomGasInfo:Ot,chainGasLimitLoadFailed:Mt}=C,ao=qo(),xo=pt(P);it(),ft(o.from);let yo=No(ao?.balance,K(xo,Bo(o.value||0))),Gt=At({chainGasLoadFailed:v,isSufficientBalance:yo,isRevokeTx:h.isRevoke,modifiedDataError:i,transaction:s,loading:H}),Dt=xt({chainGasLoadFailed:v,isSufficientBalance:yo,transaction:s,actions:f,modifiedDataError:i,walletInfo:p,unapprovedTx:o}),Ut=so=>{Ot(so),a(!1)};return c.default.createElement(z.Container,null,c.default.createElement(Ho,{title:d,closeable:!1,backable:!1}),c.default.createElement(Et,{confirmBuryPointFn:()=>{},onUpdateAuthAmount:so=>{G(so)},dappInfo:w.originInfo,isOffline:E.token,approveToken:h}),c.default.createElement(O,null,c.default.createElement(Jo,{onClick:()=>{a(!0)},injectCoin:ao,loading:H,estimateFailed:v,networkFee:H?void 0:q(xo,10**ao?.decimals)})),c.default.createElement(O,null,c.default.createElement(fo,{title:r("wallet_extension_network_address_title_walletused"),address:p.address,walletId:p.walletId}),!!o.to&&c.default.createElement(fo,{title:r("wallet_extension_popup_text_interact_with"),address:o.to})),c.default.createElement(Ct,{nonce:y.custom,suggestedNonce:y.suggested,setNonce:g}),A?c.default.createElement(O,{bordered:!1},c.default.createElement(ot,{data:A,copyable:{hideDesc:!0}})):c.default.createElement(O,{bordered:!1},c.default.createElement(Xo,{value:t,error:i,onChange:u})),c.default.createElement(X,{placeholder:!0,offsetBottom:0,borderTop:!0},!i&&c.default.createElement(oo,{...Gt}),c.default.createElement(S,{buttonGroup:Dt})),m?c.default.createElement(ct,{onBack:()=>{a(!1)},rpcInfo:l,chainGasInfo:To,customGasInfo:P,updateCustomGasInfo:Ut,stopPollingGasPrice:io,chainGasLimitLoadFailed:Mt}):null)};var vt=({unapprovedTxList:o})=>{let t=o[o.length-1];return eo.default.createElement(eo.default.Fragment,null,eo.default.createElement(It,{unapprovedTx:t}))};e();n();var Nt=_(b());e();n();var bt=_(co());F();Zt();var Qt=o=>{let t=(0,bt.useDispatch)(),{address:u}=o,m=_t(),a=Qo(),i={actionType:S.ACTION_TYPE.CANCEL,btnText:r("wallet_dapp_connection_btn_reject"),async onClick(){a({all_confirmation:"cancel",trade:"add_token"}),await m(u,!1),await uo(t)}},{extensionConfig:l}=L("rpc_info"),{url:p,chainId:s}=l,f=Ko(p),d={actionType:S.ACTION_TYPE.CONFIRM,async onClick(){try{a({all_confirmation:"confirm",trade:"add_token"}),await f(s,o.address),await m(u,!0),await uo(t)}catch{Io.error(r("wallet_extenshion_toast_add_failed"))}}};return[i,d]},St=Qt;var Xt=({unapproved:o})=>{let{extensionConfig:t}=L("rpc_info"),u=lt(o),m=St(u);return Nt.default.createElement(dt,{token:u,provider:t,buttonGroup:m})},Lt=Xt;e();n();var Bt=_(b()),Pt=_(Z()),Ft=_(co());Yt();var zt=()=>{let o=(0,Ft.useSelector)(zo),t=(0,Pt.last)(o);return Bt.default.createElement(ht,{unapproved:{...t,localType:vo}})};e();n();var Dr=()=>{let{unapprovedTxList:o,unapprovedTxCount:t,unapprovedStList:u,unapprovedStCount:m,unapprovedSnList:a,unapprovedSnCount:i,unapprovedPermissionsRequestId:l,unapprovedRequestCount:p,unapprovedPermissionCount:s}=mt(),f=(0,ro.useDispatch)(),d=(0,no.useHistory)(),h=(0,ro.useSelector)(Go);switch((0,N.useEffect)(()=>{(async()=>{p===0&&(await f(Do()),d.push(Oo))})()},[p]),!0){case(h===D.connect&&s>0):return N.default.createElement(no.Redirect,{to:`${Mo}/${l}`});case h===D.msg:return N.default.createElement(zt,null);case(h===D.addToken&&m>0):return N.default.createElement(Lt,{unapproved:(0,go.last)(u)});case(h===D.addChain&&i>0):return N.default.createElement(gt,{unapproved:(0,go.last)(a)});case(h===D.transaction&&t>0):return N.default.createElement(vt,{unapprovedTxList:o});default:return N.default.createElement(Eo,{delayTime:5e3})}};export{Dr as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=RpcMode-FXZVA5VA.js.map
