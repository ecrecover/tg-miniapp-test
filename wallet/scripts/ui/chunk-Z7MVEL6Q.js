import{a as Q}from"./chunk-EQQ4TY26.js";import{a as z,b as E,c as me}from"./chunk-A7QDOMG2.js";import{a as G}from"./chunk-UV4CBWDM.js";import{h as _}from"./chunk-JZYFGUUR.js";import{a as We,e as I}from"./chunk-KWEOQTFQ.js";import{a as ue,b as ae,d as le}from"./chunk-MYLTZKPJ.js";import{J as fe,N as L,O as H,a as Ie}from"./chunk-ILYGYWTN.js";import{d as V,e as ce}from"./chunk-XPB5VA3I.js";import{f as ie}from"./chunk-XSNWL3NI.js";import{d as De}from"./chunk-EDYYUNM2.js";import{r as j}from"./chunk-MJYAUOKI.js";import{a as N,c as P,d as D,l as v,m as se}from"./chunk-FCCCJLF6.js";import{Ba as re,ha as ke,ia as qe,qb as oe,y as ne}from"./chunk-FK3ETA6I.js";import{Kb as K,ib as w,jb as U,ta as ee,xc as te,za as Se}from"./chunk-QG673PNL.js";import{I as $,m as B,q as Z}from"./chunk-ZQQ7HNWV.js";import{a as O}from"./chunk-ADZWCU3Q.js";import{c as W,f as x,m as l,o as m}from"./chunk-REC7XVZY.js";var pe=W((tn,Ce)=>{l();m();var Ee=ie(),Le=ke(),Oe=qe();function Ue(e){return function(n,t,r){var o=Object(n);if(!Le(n)){var s=Ee(t,3);n=Oe(n),t=function(i){return s(o[i],i,o)}}var u=e(n,t,r);return u>-1?o[s?n[u]:u]:void 0}}Ce.exports=Ue});var de=W((cn,ye)=>{l();m();var Ke=De(),je=ie(),Ve=We(),ze=Math.max;function He(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var o=t==null?0:Ve(t);return o<0&&(o=ze(r+o,0)),Ke(e,je(n,3),o)}ye.exports=He});var ge=W((ln,he)=>{l();m();var Qe=pe(),_e=de(),Ge=Qe(_e);he.exports=Ge});var be=W((Cn,Pe)=>{l();m();function Je(e){return e==null}Pe.exports=Je});l();m();var R=x(O());var Y=x(ge()),we=x(Ie()),Ne=x(be());$();l();m();var Te=x(O());K();function Ae(){let e=E();return(0,Te.useCallback)(async n=>{let t=await ue(n),r={};return t&&Object.entries(t).forEach(([o,s])=>{let u=[];s.forEach(i=>{let c;"childrenCoin"in i&&i.childrenCoin?.length&&(c=i.childrenCoin?.map(f=>({...f,currencyAmount:w(f.currencyAmountUSD,e.usdToThisRate)}))),u.push({...i,childrenCoin:c,currencyAmount:w(i.currencyAmountUSD,e.usdToThisRate)})}),r[o]=u}),r},[e.usdToThisRate])}l();m();var xe=x(O()),Me=x(ne());K();var J=()=>{let e=(0,Me.useSelector)(oe),n=I();return P(()=>{let t={},{symbol:r}=e;return Object.keys(n).forEach(o=>{t[o]={currencySymbol:r,usdPrice:n?.[o]?.coinToUSDRate,currencyPrice:w(n?.[o]?.coinToUSDRate,e?.usdToThisRate),priceChangePercent24h:n?.[o]?.coinPriceChangePercent24h}}),t},[n,e])},Be=e=>{let n=J(),t=E(),{data:r,run:o}=v(L,{manual:!0,ready:!0,retryCount:3,staleTime:36e5,cacheTime:864e5});return(0,xe.useEffect)(()=>{!n[e]&&fe(e)&&o(+e)},[n,e]),P(()=>{let s=n[e];if(s)return s;if(r&&t){let{currencyAmount:u,priceChangePercent24h:i}=r;return{currencySymbol:t.symbol,usdPrice:u,currencyPrice:w(u,t.usdToThisRate),priceChangePercent24h:i}}return null},[n,e,t,r])};l();m();var Re=x(ne());function X(){return(0,Re.useSelector)(re)}Se();K();var Fe=e=>!!e&&!Number.isNaN(e),S=(e={})=>{let n=Q(),t=z(),r=X(),o=J(),s=I(),u=D(n),i=D(o),c=D(s),{withPrice:f=!1,withPriceChangePercent24h:d=!1}=e||{},[h,p]=(0,R.useState)(void 0),{runAsync:g}=v(H,{manual:!0,cacheKey:h,retryCount:3,staleTime:36e5,cacheTime:864e5});return(0,R.useCallback)(async a=>{if(!r||!Fe(a))return null;let y,b=u?.current?.[a];if(b)y=b;else{let C={coinId:a};p(V(C)),y=await g(C)}if(!y)return null;let A;if((f||d)&&!b&&(A=await L(y.coinId)),f){let{currencySymbol:C,usdPrice:M,currencyPrice:k}=i?.current?.[a]??A??{};y={...y,currencySymbol:C,usdPrice:M,currencyPrice:k}}if(d){let C=c?.current?.[a]?.coinPriceChangePercent24h??A?.priceChangePercent24h;y={...y,priceChangePercent24h:C}}return y},[f,d,n,t,g,r])},Xe=(e,n,t)=>P(()=>{let r;if(!(t||e===0)&&(typeof e<"u"&&!Number.isNaN(e)?r={coinId:e}:r=(0,we.default)(n)?null:n,r))return V(r)},[e,n,t]),F=(e,n={},t)=>{let r=z(),o=Q(),s=X(),{withPrice:u,withPriceChangePercent24h:i}=n,c=me(t),f=[e,o,r,c,s],d=[],h=P(()=>{let C;if(e===0||!s||Number.isNaN(e))return null;if(typeof e<"u")C=o?.[e];else if(c){let M=Object.values(o);if(c.aggregation&&c.symbol)return r[c.symbol]?{...r[c.symbol][0],childrenCoin:r[c.symbol]}:null;if(ce(c)){let q=Z(M,c);q.length>0&&(C=q[0])}}return C||null},f),p=!!h,g=Xe(e,c,p),{data:a,run:y}=v(H,{manual:!0,ready:!0,cacheKey:g,retryCount:3,staleTime:36e5,cacheTime:864e5});(0,R.useEffect)(()=>{if(!p&&s&&!!g){let C=Fe(e)?{coinId:e}:c;y(C)}},[p,s,g,e,c]);let b=h||a,A=Be(u||i?b?.coinId:null);return d.push(b,A),P(()=>{if(!b)return null;let C=b;if(u&&A){let{currencySymbol:M,usdPrice:k,currencyPrice:q}=A;C={...C,currencySymbol:M,usdPrice:k,currencyPrice:q}}if(i){let{priceChangePercent24h:M}=A;C={...C,priceChangePercent24h:M}}return C},d)};var Ye=e=>{let n=S(e),t=_(),r=le(),o=Ae();return N(async(s,u)=>{let i=await n(s);if(!i)return null;let c;u&&u!==t?c=(await o({walletIds:[u],coinId:s,chainId:i.chainId,flatten:!0}))[u]??[]:c=r;let{coinAmountInt:f="0",currencyAmount:d="0",currencyAmountUSD:h="0"}=(0,Y.default)(c,p=>p?.coinId===s)||{};return{...i,coinAmountInt:f,currencyAmount:d,currencyAmountUSD:h,coinAmount:U(f,10**i?.decimals)}},[r,t,n])},Ze=(e,n,t)=>{let{addressType:r,key:o}=t||{},s=F(e,t,o?{key:o}:void 0),u=_(),i=n||u,c=ae(i),f=!!c,d=c?.coins??[],h=P(()=>(0,Y.default)(d,a=>{let y;if(o?y=a.key===o:y=a.coinId===e,r){let b=te[s?.localType]?.[r];y=y&&b===a?.addressType}return y}),[d,i,e,r,o]),{coinAmountInt:p,currencyAmount:g}=h||{};return P(()=>{let a;return s?(a={...s,coinAmountInt:p,currencyAmount:g},(0,Ne.default)(p)?f?(a.coinAmountInt="0",a.coinAmount="0",a.currencyAmount="0",a.currencyAmountUSD="0"):a.coinAmount=void 0:a.coinAmount=U(p,10**s.decimals)):a=null,a},[s,p,f])},$e=(e,n)=>{let t=F(e,n),r=F(t?.baseCoinId,n);return[t,r||t]},ve=e=>{let n=S(e);return N(async t=>{let r=await n(t),o=await n(r?.baseCoinId);return[r,o||r]},[n])};var en=(e={})=>{let n=ve(e);return N(async t=>{let[,r]=await n(t),o=r?.coinId;return ee.indexOf(o)!==-1},[n])},er=(e,n={})=>{let t=en(n),[r,o]=(0,R.useState)(!1);return se(async()=>{let s=await t(e);o(s)},[t]),r};l();m();l();m();$();var nn=(e={})=>{let{currencyId:n,formatted:t=!0,useApproximate:r}=e||{},o=G(n),{symbol:s,usdToThisRate:u}=o,i=S({withPrice:!0});return N(async(c,f)=>{let d=await i(c),h=B.div(f,10**d?.decimals),p=B.mul(d?.usdPrice,u),g=B.mul(h,p);return t?j(g,{useApproximate:r,symbol:s}):g},[s,t,i,u,r])},rn=(e,n,t={})=>{let{currencyId:r,formatted:o=!0,useApproximate:s,useMinPrecision:u=!0}=t||{},i=F(e,{withPrice:!0}),{usdToThisRate:c,symbol:f}=G(r);return P(()=>{if(!i||!i?.usdPrice)return null;let d=u?B.div(n,10**i?.decimals):n,h=B.mul(i?.usdPrice,c),p=B.mul(d,h);return o?j(p,{useApproximate:s,symbol:f}):p},[f,o,c,n,s,i?.usdPrice,i?.decimals])};export{be as a,Ae as b,X as c,S as d,F as e,Ye as f,Ze as g,$e as h,er as i,nn as j,rn as k};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-Z7MVEL6Q.js.map
