import{a as j,b as T,d as B}from"./chunk-3HN2WM7L.js";import{b as f}from"./chunk-HP4KI3UG.js";import{d as k}from"./chunk-CE2I3GSK.js";import{a as M,b as U,c as K}from"./chunk-6SKAHEOE.js";import{B as b,C as Z,D as X,db as D,za as v}from"./chunk-FK3ETA6I.js";import{b as S}from"./chunk-C5ZJZEPI.js";import{Sa as x,Ta as O,hb as E,m as J}from"./chunk-QG673PNL.js";import{f as H,m as s,o as n}from"./chunk-REC7XVZY.js";s();n();var C=H(X());s();n();var R=H(J());s();n();var V="nft_list_filters";s();n();var I={hideNoValue:"hideNoValue",hideManualHidden:"hideManualHidden",hideUnverifiedCollection:"hideUnverifiedCollection"},d={[I.hideNoValue]:!0,[I.hideManualHidden]:!0,[I.hideUnverifiedCollection]:!1};s();n();var P={SHOW:0,MANUAL:1,AUTO:2};function W(t){if(!t)return d;try{let e=localStorage.getItem(V);if(!e)return d;let r=JSON.parse(e);return r?r[t]??d:d}catch{return d}}var $=t=>({projectCertificated:t.hideUnverifiedCollection,hiddenStatus:[t.hideManualHidden?void 0:P.MANUAL,t.hideNoValue?void 0:P.AUTO].filter(Boolean).join(",")}),Y=t=>{let e=W(t);return $(e)},mt=(t,e)=>{let r=W(t);return e?r[e]!==d[e]:!(0,R.isEqual)(r,d)};s();n();E();s();n();E();async function Ft(t){try{return await(await S.networks).set(t,{clear:!0}),!0}catch{return!1}}async function tt(t){try{return await(await S.networks).query(t)}catch{return[]}}async function w(){let t;try{let e=await tt();t=e?.length?e:x()}catch{t=x()}return v(t)}var q=(t,e)=>{let r=O({netWorkId:String(t.chain)})?.localType,{coinId:o,key:a}=e.get(r)??{},i="";return t.coverUrl?i=t.coverUrl:t.resourceType===1&&(i=t.resourceUrl),{...t,id:t.id,tokenId:t.tokenId,contractAddress:t.contractAddress,name:t.name,image:i,lastPrice:t.lastPrice,bestOfferPrice:t.bestOffer,salePrice:t.sale,floorPrice:t.floorPriceDetail,chain:t.chain,tokenStandard:B[t.tokenStandard]||j.UNKNOWN,isIdentification:t.certificateFlag===1,isNew:t.newNft===!0,collectionName:t.projectName,totalBalance:t.lookerNftCount,chainName:t.chainName,chainIcon:t.chainIcon,localType:r,accountAddress:t.ownerAddress,baseCoinId:o,baseCoinKey:a}},G=async({projects:t="",chainIds:e="",saleStatus:r="",pageNo:o=1,pageSize:a=10,projectCertificated:i=!0,hiddenStatus:m="",address:g=""}={})=>{let c;if(!g)c={list:[],total:0,pageNo:o,pageSize:a};else{let N;try{N=await M({address:g,project:t,chain:e,saleStatus:r,pageNo:o,pageSize:a,projectCertificated:i,hiddenStatus:m});let L=await w(),F=new Map(L.map(u=>[u.localType,u]));c={list:N?.data?.list?.map(u=>q(u,F)),total:N.data.total,pageNo:o,pageSize:a}}catch{c={list:[],total:0,pageNo:o,pageSize:a,error:!0}}}return c},Q=async({chainId:t,contractAddress:e,tokenId:r,looker:o})=>{if(!o)return{};let a;t==="0"?a=await K({inscriptionIdProtocol:r,looker:o}):a=await U({chain:t,contractAddress:e,tokenId:r,looker:o});let m=await w(),g=new Map(m.map(c=>[c.localType,c]));return a?.data?q(a?.data,g):null};var A={list:[],total:0,pageNo:1,pageSize:T},et={nftFilterChain:[],nftListCatch:[],computedNftCurrency:!1,testNftCurrency:100,nftFilterInfo:{collectionFilter:[],saleStatusFilter:[]},firstSet:!1,nftFilterStatus:!1,nftCollectionLoadingStatus:!1,activeId:1,nftListData:{},listLoading:!0,listLoadingError:!1,hasHiddenNft:!1},p=b({name:"Nft",initialState:et,reducers:{setHasHiddenNft(t,{payload:e}){t.hasHiddenNft=e},setNftFilterChian(t,{payload:e}){t.nftFilterChain=e.list},setNftListCatch(t,{payload:{list:e}}){t.nftListCatch=e},setComputedNftCurrency(t,{payload:{computedNftCurrency:e}}){t.computedNftCurrency=e},setNftFilterInfo(t,{payload:e}){t.nftFilterInfo=e},setFirstSet(t,{payload:e}){t.firstSet=e},setActiveId(t,{payload:{id:e}}){t.activeId=e},setNftListData(t,{payload:{nftListData:e,walletId:r}}){t.nftListData[r]=e},setNftListLoading(t,{payload:e}){t.listLoading=e},setNftListLoadingError(t,{payload:e}){t.listLoadingError=e},setNftFilterStatus(t,{payload:{nftFilterStatus:e}}){t.nftFilterStatus=e},setNftCollectionLoadingStatus(t,{payload:{nftCollectionLoadingStatus:e}}){t.nftCollectionLoadingStatus=e},updateNftData(t,{payload:{newData:e={},walletId:r,id:o}}){t.nftListData?.[r]||(t.nftListData[r]={list:[],total:0});let a=t.nftListData[r],i=a.list.findIndex(m=>m.id===o);i!==-1?a.list[i]={id:o,...a.list[i]??{},...e}:(a.list.push({id:o,...e}),a.total+=1)},removeNftData:(t,{payload:{walletId:e,id:r}})=>{if(t.nftListData[e]){let o=t.nftListData[e],a=o.list.findIndex(i=>i.id===r);a!==-1&&(o.list.splice(a,1),o.total-=1)}}}}),Kt=t=>t[p.name].hasHiddenNft;var _=(0,C.createSelector)(t=>t[p.name].nftListData,t=>D(t),(t,e)=>t[e]??A),jt=(0,C.createSelector)(t=>t[p.name].listLoading,_,(t,e)=>e===A?!0:t),Bt=(0,C.createSelector)(t=>t[p.name].listLoadingError,_,(t,e)=>e===A?!1:t),Vt=t=>t[p.name].nftFilterInfo;var Rt=t=>t[p.name].activeId;var Wt=p.reducer,{actions:l}=p,z=t=>({...t,lastPrice:f(t.lastPrice),bestOfferPrice:f(t.bestOffer),salePrice:f(t.sale),floorPrice:f(t.floorPriceDetail)}),Yt=l.setHasHiddenNft,qt=l.updateNftData,Gt=l.removeNftData,Qt=l.setNftFilterInfo,zt=l.setNftListData;function Jt(t){return async(e,r)=>{let o=r(),a=D(o),{list:i}=_(o),m=Y(a),{currentNetworkUniqueId:g=""}=k(o),c={projects:"",chainIds:g,pageNo:1,pageSize:T,saleStatus:"",...m},N=Object.assign(c,t);e(l.setNftListLoading(!0));let L=await G(Object.assign(c,t)),F=i.map(u=>z(u)),y=[];N.pageNo>1&&y.push(...F),L.error?e(l.setNftListLoadingError(!0)):(e(l.setNftListLoadingError(!1)),y.push(...L.list.map(u=>z(u)))),e(l.setNftListData({nftListData:{list:y,total:L.total,pageNo:N.pageNo,pageSize:N.pageSize},walletId:a})),e(l.setNftListLoading(!1))}}function Zt(t){return t.metamask.preferences.showNftAmount}async function Xt(t){let e=await Q(t);return e?(e.lastPrice&&(e.lastPrice=f(e?.lastPrice)),e.salePrice&&(e.salePrice=f(e?.salePrice)),e.bestOfferPrice&&(e.bestOfferPrice=f(e?.bestOfferPrice)),e.floorPriceDetail&&(e.floorPriceDetail=f(e?.floorPriceDetail)),e):{}}export{V as a,I as b,d as c,P as d,W as e,$ as f,mt as g,Ft as h,tt as i,Kt as j,_ as k,jt as l,Bt as m,Vt as n,Rt as o,Wt as p,l as q,Yt as r,qt as s,Gt as t,Qt as u,zt as v,Jt as w,Zt as x,Xt as y};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-GME4UYVP.js.map
