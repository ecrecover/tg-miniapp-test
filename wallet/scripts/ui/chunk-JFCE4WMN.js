import{c as _o}from"./chunk-TAMFXRQS.js";import{a as rt}from"./chunk-SWNKITDG.js";import{rc as Se,sc as de,tc as $o}from"./chunk-LTVFH3JK.js";import{f as st}from"./chunk-UX45LV4J.js";import{e as tt}from"./chunk-Z7MVEL6Q.js";import{a as et,b as ot}from"./chunk-BSJ5U7SB.js";import{b as Ee,c as Le}from"./chunk-UV4CBWDM.js";import{h as Qo,i as Ro}from"./chunk-JZYFGUUR.js";import{a as nt}from"./chunk-55MBPFME.js";import{a as co}from"./chunk-FSHQROIB.js";import{m as Yo}from"./chunk-RSZRDNEQ.js";import{a as Zo}from"./chunk-AWV3UGPG.js";import{p as at,q as it}from"./chunk-OL5PZGTP.js";import{d as ee}from"./chunk-W3BHXSAD.js";import{R as Ko,S as Xo,T as Jo,U as mo,b as Wo,e as qo,t as jo}from"./chunk-ILYGYWTN.js";import{a as Re}from"./chunk-V4V6C6NY.js";import{b as P}from"./chunk-ZQ5A3KPQ.js";import{a as Qe}from"./chunk-BGUY7SH3.js";import{m as so,w as m}from"./chunk-MJYAUOKI.js";import{a as De,c as Ho,l as Vo,o as lo}from"./chunk-FCCCJLF6.js";import{Xa as Je}from"./chunk-4Z4GXCHB.js";import{db as Do,pb as Uo,qb as Mo,y as Xe}from"./chunk-FK3ETA6I.js";import{k as Go,la as O,m as zo,ma as ze,na as R}from"./chunk-QZDHFNHK.js";import{a as Oo}from"./chunk-EJQOS3F4.js";import{d as Ge,f as Bo}from"./chunk-MNNY2ODL.js";import{a as Ue,b as ke}from"./chunk-T2OWRX3Y.js";import{f as Ae}from"./chunk-C3FJ2D4V.js";import{c as _}from"./chunk-4QSQKIBZ.js";import{b as Fo,c as rr}from"./chunk-OXVQDEZW.js";import{j as Lo,m as er}from"./chunk-X3G52GGX.js";import{Kb as or,Ta as ao,ac as be,hb as Rt,ib as vo,jc as tr,lb as Po,m as Ao,nc as io,o as Eo,za as Qt}from"./chunk-QG673PNL.js";import{D as Ie,F as Ce,c as ne,n as fe,p as So,x as no}from"./chunk-6MTHEPGF.js";import{I as M,m as B,w as o}from"./chunk-ZQQ7HNWV.js";import{M as ko,S as Oe,Y as A,c as we}from"./chunk-ZOQTSYT4.js";import{a as L}from"./chunk-ADZWCU3Q.js";import{a as Jt}from"./chunk-TBVIGR5T.js";import{f as x,m as r,o as n}from"./chunk-REC7XVZY.js";r();n();var w=x(L()),Ut=x(Xe());M();r();n();var E=x(L()),Ot=x(Oo());M();r();n();var eo=x(L());r();n();var oe=x(L()),ct=x(Xe()),_t=x(we());M();r();n();var Me=x(L()),lt=x(Xe());function mt({chainId:t,walletId:e}){let[a,s]=(0,Me.useState)(!1),[i,l]=(0,Me.useState)([]),p=(0,lt.useSelector)(Do);e=e||p;let y=De(async()=>{s(!0),l([]);try{let f=await Xo({chainId:t,walletId:e}),{data:h=[]}=f;l(h)}catch{l([])}finally{s(!1)}});return(0,Me.useEffect)(()=>{t&&y()},[y,t]),{loading:a,coinList:i}}r();n();var K={container:"_container_unn00_1",scrollable:"_scrollable_unn00_7",wrapContainer:"_wrapContainer_unn00_12",icon:"_icon_unn00_20",tokenLogo:"_tokenLogo_unn00_23",tokenLogoLarger:"_tokenLogoLarger_unn00_30",chainLogo:"_chainLogo_unn00_37",tab:"_tab_unn00_52",list:"_list_unn00_55",chainSmall:"_chainSmall_unn00_58",chainLarge:"_chainLarge_unn00_62"};var nr=({iconUrl:t,chainUrl:e})=>oe.default.createElement(_.Box,{className:(0,_t.default)(K.icon,e?K.chainSmall:K.chainLarge)},oe.default.createElement(Ie,{className:e?K.tokenLogo:K.tokenLogoLarger,alt:"coin-icon",errorImg:Ae,src:t}),!!e&&oe.default.createElement(Ie,{className:K.chainLogo,alt:"coin-icon",errorImg:Ae,src:e,width:16,height:16}));function po({onSelect:t,onBack:e,chainId:a,walletId:s,chainName:i}){let{usdToThisRate:l}=(0,ct.useSelector)(Mo),{coinList:p}=mt({chainId:a,walletId:s}),y=f=>{t({...f}),e()};return oe.default.createElement(_.Container,{className:K.container},oe.default.createElement(Qe,{offsetTop:0},oe.default.createElement(Re,{title:o("wallet_extension_swapforgas_dialog_header_chain_token",{chain:i}),onBack:e,closeable:!1,sticky:!1})),oe.default.createElement(ee,{className:K.list,loading:!p.length&&{size:Oe.SIZE.lg},dataSource:p,renderItem:f=>{let{amountNum:h,tokenSymbol:d,tokenLogoUrl:T,currencyAmount:c,tokenName:b}=f;return oe.default.createElement(ee.Coin,{icon:oe.default.createElement(nr,{iconUrl:T}),symbol:d,balance:h,name:b,market:B.mul(c,l),onClick:()=>{y(f)}})}}))}var pt=({visible:t,closeCallback:e,onSelect:a,chainId:s,walletId:i,chainName:l})=>eo.default.createElement(_.Portal,{noStyle:!0},t&&eo.default.createElement(_.Box,{className:K.wrapContainer},eo.default.createElement(po,{onSelect:a,onBack:e,chainId:s,chainName:l,walletId:i})));r();n();var ft=x(we()),uo=x(L());r();n();var ut={errorContainer:"_errorContainer_12hl2_1"};var dt=({errorText:t,onClick:e,btnText:a,className:s})=>uo.default.createElement("div",{className:(0,ft.default)(ut.errorContainer,s)},uo.default.createElement(no.State,{type:no.State.TYPE.noNetwork,title:t,onButtonClick:e,buttonText:a}));r();n();var He=x(L()),gt=x(Ao());M();var yt=({visible:t,checkFlag:e,code:a,enoughFlag:s,onCancel:i,onConfirm:l,onClose:p,chainName:y,reminderInfo:f})=>{let h=[{message:o("swaptrade_dialog_text_irregular_operations"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:O.BLACK_LIST,code:R.BLACK_LIST},{message:o("swaptrade_dialog_modal_service_closed"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:O.CLOSE,code:R.CLOSE},{message:o("swaptrade_dialog_text_daily_orderlimit"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:O.LIMIT,code:R.LIMIT},{message:o("swaptrade_extension_dialog_desc_swapgas_inprogress"),confirmName:o("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),title:o("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:O.PENDING_GAS_STATION,code:R.PENDING_GAS_STATION},{message:o("swaptrade_extension_dialog_desc_similar_order_processing"),confirmName:o("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:o("swaptrade_extension_dialog_btn_continue_submit_swap"),title:o("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:O.PENDING_SWAP,enoughFlag:ze.ENOUGH,code:R.PENDING_SWAP},{message:o("swaptrade_extension_dialog_desc_swap_order_processing"),confirmName:o("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),title:o("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:O.PENDING_SWAP,enoughFlag:ze.NOT_ENOUGH,code:R.PENDING_SWAP},{message:o("swaptrade_swapforgas_desc_in_progress",{chain:y}),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:O.WALLET_HAS_PENDING_ORDER},{message:o("defi_dextrade_errormsg_tron_change"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:O.TRON_PERMISSION,code:R.TRON_PERMISSION},{title:o("wallet_extension_swapforgas_dialog_title_high_payment"),message:o("wallet_extension_swapforgas_dialog_desc_high_payment"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:O.PAY_TOO_LARGE,code:R.PAY_TOO_LARGE},{title:o("wallet_extension_swapforgas_dialog_title_low_payment"),message:o("wallet_extension_swapforgas_dialog_desc_low_payment"),confirmName:o("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:O.PAY_TOO_SMALL,code:R.PAY_TOO_SMALL}],{needReminder:d,reminderContent:T,reminderTitle:c}=f||{},{confirmName:b,cancelName:u,message:v,title:G}=(0,He.useMemo)(()=>d?{confirmName:o("swaptrade_extension_dialog_btn_continue_submit_swap"),cancelName:o("wallet_extension_btn_general_cancel"),message:T,title:c}:h.find(I=>(0,gt.isUndefined)(e)?I.code===+a:I.checkFlag===O.PENDING_SWAP?I.checkFlag===+e&&I.enoughFlag===+s:I.checkFlag===+e)||h[1],[e,a,s,d,T,c]);return He.default.createElement(fe.Tip,{visible:t,title:G,confirmText:b,cancelText:u,onConfirm:l,onCancel:i,onClose:p,btnFull:!1},He.default.createElement("div",null,v))};r();n();M();var Ye=x(L());r();n();var Ve={alert:"_alert_1txjs_1"};r();n();var Tt=({priceInfo:t})=>{let{fromTokenSymbol:e,toTokenSymbol:a,currencyAbnormalType:s}=t;switch(s){case"1":return Ye.default.createElement(ne,{className:Ve.alert,title:o("swaptrade_top_reminder_paysymbol_failed",{paySymbol:e}),type:ne.TYPE.error,closable:!1});case"2":return Ye.default.createElement(ne,{className:Ve.alert,title:o("swaptrade_top_reminder_receivesymbol_failed",{receiveSymbol:a}),type:ne.TYPE.error,closable:!1});case"3":return Ye.default.createElement(ne,{className:Ve.alert,title:o("swaptrade_top_reminder_payreceive_failed",{paySymbol:e,receiveSymbol:a}),type:ne.TYPE.error,closable:!1});default:break}return t.isQuoteAvailable==="0"?Ye.default.createElement(ne,{className:Ve.alert,title:o("wallet_extension_swapforgas_error_gas_price_flux"),type:ne.TYPE.error,closable:!1}):null};r();n();var fo=x(L()),Ze=x(Xe()),It=x(Oo()),go=x(Jt());M();r();n();var ht={min:"0",max:"0",normal:"0",minGasPrice:"0",supportEip1559:!1,suggestBaseFee:"0",safePriorityFee:"0",proposePriorityFee:"0",fastPriorityFee:"0",baseFee:"0"};tr();Qt();or();r();n();Rt();async function Nt(t,e){try{let s=ao({localType:t})?.coinType,{wallet:i}=await io(s);return await i?.calcTxHash({data:e})}catch{throw new Error(co(t,e))}}async function Fn(t,e){try{e=e||[];let s=ao({localType:t})?.coinType,{wallet:i}=await io(s);return await Promise.all(e.map(p=>i?.calcTxHash({data:p})))}catch{throw new Error(co(t,e.toString()))}}Bo();var Ct=({priceInfo:t,setLoading:e,loading:a,setErrorInfo:s,coinId:i,toChainId:l,chainList:p,txId:y,amount:f,isValidateAmount:h})=>{let d=(0,Ze.useDispatch)(),T=(0,It.useHistory)(),{toTokenSymbol:c,fromTokenValue:b,fromTokenContractAddress:u,toTokenAddress:v,currencyAbnormalType:G,fromChainName:I,fromTokenSymbol:V,balance:z,fromChainId:D,balanceAbnormalType:X,isQuoteAvailable:me}=t,{allAddress:ce,currentAddress:Z}=(0,Ze.useSelector)(C=>_o(C,D)),{currentAddress:_e}=(0,Ze.useSelector)(C=>_o(C,l)),J=()=>me==="0"||G!=="0"||X!=="0"?!1:z&&f&&h?+z>=+f:!1,$=()=>G!=="0"||X!=="0"?o("swaptrade_footer_btn_fill_up",{nativeToken:c}):z&&f?+z>=+f?o("swaptrade_footer_btn_fill_up",{nativeToken:c}):o("swaptrade_bot_btn_insufficient_balance",{token:V}):o("swaptrade_footer_btn_fill_up",{nativeToken:c}),pe=async()=>{let C={amount:f,chainId:D,currentUserWalletAddress:Z,fromTokenAddress:u,toChainId:l,toTokenAddress:v,walletAddresses:ce},{data:N}=await Jo(C);return N},ve=async()=>{let{data:C}=await Wo({coinId:i,address:Z});return C},je=async({from:C,to:N,data:U,value:W},Q)=>{let ue={address:Z,inputData:U,coinId:i,value:W,tokenAddress:N},{data:j}=await qo(ue),ge=Q?.info?.gasPrice||ht,Ne=Q?.info?.newNonce,{normal:Pe}=ge,Fe={chainId:D,from:C,to:N,data:U,gasPrice:be(ke(Pe)),value:be(ke(W)),nonce:be(ke(Ne)),gas:be(ke(j.gasLimit)),gasLimit:be(ke(j.gasLimit))},Be=await Ge().signTransaction(Fe,Fe.from),Ke=await Nt(Eo,Be);return{rawTx:Be,txHash:Ke,txParams:Fe,gasLimitInfo:j}},Zt=async C=>await Ge().silentOfflineSignTron(C),Co=C=>({chainId:D,fromAmount:f,fromTokenAddress:u,payValue:b,toChainId:l,userWalletAddress:Z,walletAddresses:ce,receiveWalletAddress:_e,...C}),$t=async(C,N)=>{let{txID:U,signedTx:W}=C,{to:Q,data:ue}=N,{info:{fee:j}}=await jo({coinId:i,address:Z},{fromAddr:Z,scenario:Go.SCENARIO_INTERACTION,inputData:ue,toAddr:Q,dataLength:ue.length}),ge=JSON.stringify({chainId:D,serviceCharge:j,inputData:N.data,toAdr:N.to,coinAmount:N.value,signedTx:W,txSource:3,fromAdr:N.from,txHash:U,extJson:JSON.stringify({nonce:"",priorityFee:"",feeType:"",oldTxHash:"",maxBaseFee:"",gasPrice:"",gas:"",decimal:6})}),Ne=Co({inputData:ge,approveTransactionHash:U,signedTx:W});return await mo(Ne)},Wt=async(C,N,U)=>{let{txHash:W,rawTx:Q,gasLimitInfo:ue,txParams:j}=C,{gasPrice:ge,nonce:Ne,gas:Pe}={...j,nonce:Ue(j.nonce),gasPrice:Ue(j.gasPrice),value:Ue(j.value),gas:Ue(j.gas)},{normal:Fe,proposePriorityFee:Be,supportEip1559:Ke}=U.info.gasPrice,ro=Pe;ue?.originGasLimit&&N.approveGasLimitCoefficient&&(ro=B.floorMul(ue.originGasLimit,N.approveGasLimitCoefficient,0).toString());let jt=vo(ge,Pe),Kt=JSON.stringify({chainId:D,serviceCharge:jt,inputData:N.data,toAdr:N.to,coinAmount:N.value,signedTx:Q,txSource:3,fromAdr:N.from,txHash:W,extJson:JSON.stringify({nonce:Ne,priorityFee:Be||"",feeType:Ke?zo.FEE_MARKET:"",oldTxHash:"",maxBaseFee:Ke?Po(Fe,Be):"",gasPrice:ge,gas:ro})}),Xt=Co({inputData:Kt,approveTransactionHash:W,approveGasLimit:ro,approveGasPrice:ge,approveNonce:Ne});return await mo(Xt)},bo=async C=>{let N;if(+D==+go.Currency.TRX){let U=await Zt(C);N=await $t(U,C)}else{C.networkType=p.find(Q=>+Q.netWorkId==+D)?.chain;let U=await ve(),W=await je(C,U);N=await Wt(W,C,U)}N.code!==0?s({...N,visible:!0}):T.replace(`${Je}/${N.data}`)},qt=async()=>{if(a)return;e(!0);let C=await pe(),{checkFlag:N,approveInfo:U,reminderInfo:W}=C,Q=W?.needReminder??!1;N===0&&y&&(d(at.setKeepOpen({show:!0})),await d(Yo({id:y},!1)),+l==+go.Currency.TRX&&await d(it(y)));try{N!==0||Q?s({...C,visible:!0,chainName:I,reConfirm:()=>{bo(U)}}):await bo(U),e(!1)}catch{Ce.error({title:o("wallet_extension_toast_asset_error_try_again"),duration:1,placement:Ce.DIRECTION.top}),e(!1)}finally{e(!1)}};return fo.default.createElement(Qe.FooterActions,null,fo.default.createElement(A,{block:!0,category:A.CATEGORY.fill,type:A.TYPE.highlight,size:A.SIZE.lg,onClick:qt,disabled:!J()},$()))};r();n();M();var ho=x(we()),S=x(L());r();n();var ae=x(L()),bt=x(we());r();n();var te={container:"_container_1hqzh_1",textContainer:"_textContainer_1hqzh_10",tokenName:"_tokenName_1hqzh_17",chainName:"_chainName_1hqzh_21",imgContainer:"_imgContainer_1hqzh_26",tokenImg:"_tokenImg_1hqzh_31",chainImg:"_chainImg_1hqzh_36",arrowIcon:"_arrowIcon_1hqzh_44",disabled:"_disabled_1hqzh_47"};var ar=({onClick:t,token:e,chain:a,disabled:s,className:i})=>ae.default.createElement(_.Box,{onClick:t,className:(0,bt.default)(te.container,i,{[te.disabled]:s})},ae.default.createElement(_.Box,{className:te.imgContainer},ae.default.createElement(Ie,{className:te.tokenImg,alt:"token-img",errorImg:Ae,src:e.imgSrc}),ae.default.createElement(Ie,{className:te.chainImg,alt:"chain-img",errorImg:Ae,src:a.imgSrc})),ae.default.createElement(_.Box,{className:te.textContainer},ae.default.createElement(m.Text,{strong:700,className:te.tokenName,ellipsis:{tooltip:e.name}},e.name),ae.default.createElement(m.Text,{size:"sm",className:te.chainName,ellipsis:{tooltip:a.name}},a.name)),!s&&ae.default.createElement(P,{size:P.SIZE.xxs,className:`okx-wallet-plugin-select-unfold ${te.arrowIcon}`})),xo=ar;r();n();var k=x(L());M();r();n();var xe=x(L());M();r();n();var Y=x(L());M();r();n();var ye={"text-color":"_text-color_3kntd_1",textColor:"_text-color_3kntd_1","tips-content":"_tips-content_3kntd_4",tipsContent:"_tips-content_3kntd_4"};var At=({approveAmount:t,approveAmountUsd:e,transferFee:a,transferFeeUsd:s,swapFee:i,swapFeeUsd:l,gasTokenSymbol:p})=>Y.default.createElement(Y.default.Fragment,null,Y.default.createElement(_.Box,null,Y.default.createElement(m.Text,{size:m.SIZE.sm,className:ye.textColor},o("wallet_extension_swapforgas_dialog_desc_netfee_details1"))),Y.default.createElement("ul",{className:ye.tipsContent},Y.default.createElement("li",null,Y.default.createElement(m.Text,{size:m.SIZE.sm,className:ye.textColor},o("wallet_extension_swapforgas_dialog_desc_netfee_details",{value1:e,approveFee:t,token1:p}))),Y.default.createElement("li",null,Y.default.createElement(m.Text,{size:m.SIZE.sm,className:ye.textColor},o("wallet_extension_swapforgas_dialog_desc_netfee_detaila",{value2:s,transferFee:a,token2:p}))),Y.default.createElement("li",null,Y.default.createElement(m.Text,{size:m.SIZE.sm,className:ye.textColor},o("wallet_extension_swapforgas_dialog_desc_netfee_detailb",{value3:l,swapFee:i,token3:p})))),Y.default.createElement(_.Box,null,Y.default.createElement(m.Text,{size:m.SIZE.sm,className:ye.textColor},o("wallet_extension_swapforgas_dialog_desc_netfee_details2"))));var oo=({amount:t,usdPrice:e,usdToThisRate:a,symbol:s})=>{if(t&&e&&a){let i=B.mul(B.mul(t,e),a);return`${Se(i,s)}`}return""},ir=({amount:t,symbol:e,usdPrice:a,usdToThisRate:s,usdSymbol:i})=>{if(!t)return"";let l=de(t);if(!l)return"";let p=oo({amount:t,usdPrice:a,usdToThisRate:s,symbol:i});return`${l} ${e} (${p})`},kt=t=>{let[{symbol:e,usdToThisRate:a}]=Le(Ee.selectedCurrency),{approveTokenAmount:s,gasTokenPriceUSD:i,gasTokenSymbol:l,swapGasFeeAmount:p,totalGasFeeAmount:y,transferApproveTokenGasFeeAmount:f}=t||{},{approveAmount:h,approveAmountUsd:d,transferFee:T,transferFeeUsd:c,swapFee:b,swapFeeUsd:u}=(0,xe.useMemo)(()=>({approveAmount:de(s),approveAmountUsd:oo({amount:s,usdPrice:i,usdToThisRate:a,symbol:e}),transferFee:de(f),transferFeeUsd:oo({amount:f,usdPrice:i,usdToThisRate:a,symbol:e}),swapFee:de(p),swapFeeUsd:oo({amount:p,usdPrice:i,usdToThisRate:a,symbol:e})}),[s,i,p,e,f,a]),v=(0,xe.useCallback)(()=>{let G=fe.show({hideCloseBtn:!0,title:o("wallet_extension_swapforgas_label_est_netfee"),children:xe.default.createElement(At,{approveAmount:h,approveAmountUsd:d,transferFee:T,transferFeeUsd:c,swapFee:b,swapFeeUsd:u,gasTokenSymbol:l}),confirmText:o("commonall_text_btn_ok_active"),onConfirm:()=>{G.destroy()}})},[h,d,l,b,u,T,c]);return(0,xe.useMemo)(()=>({totalAmount:ir({amount:y,symbol:l,usdPrice:i,usdToThisRate:a,usdSymbol:e}),handleNetworkFeeTips:v}),[y,l,i,a,e,v])};r();n();var F={container:"_container_dngvz_1",infoIcon:"_infoIcon_dngvz_6",exchangeRate:"_exchangeRate_dngvz_9",exchangeRateValue:"_exchangeRateValue_dngvz_19",contentTertiary:"_contentTertiary_dngvz_24",finalReceive:"_finalReceive_dngvz_27",finalReceiveValue:"_finalReceiveValue_dngvz_28",max:"_max_dngvz_32",rangeAmount:"_rangeAmount_dngvz_38",amountText:"_amountText_dngvz_41",receiveText:"_receiveText_dngvz_44",displayAmount:"_displayAmount_dngvz_47",tradeTimes:"_tradeTimes_dngvz_50"};var $e="--",St=({priceInfo:t,pay:e})=>{let[{symbol:a,usdToThisRate:s}]=Le(Ee.selectedCurrency),{toTokenSymbol:i,toAmount:l,rate:p,tradeTimes:y,currencyAbnormalType:f,toTokenValue:h,dexGasStationFeeDetailVO:d}=t,{totalAmount:T,handleNetworkFeeTips:c}=kt(d),b=()=>!p||f!=="0"?$e:m.formatCryptoNumbericalValue(p),u=`1 ${e.token.name} \u2248 ${b()} ${i}`;return k.default.createElement(_.Box,{className:F.container},k.default.createElement(ee.Line,{size:"sm",label:k.default.createElement(_.FlexBox,{align:_.ALIGN.center},k.default.createElement("div",{className:F.exchangeRate},o("swaptrade_list_title_reference")),k.default.createElement(so,{title:o("swaptrade_intro_text_gassation_reference_explained")},k.default.createElement(P,{size:P.SIZE.xs,className:`okx-wallet-plugin-information-circle ${F.infoIcon}`})))},k.default.createElement(_.FlexBox,{align:_.ALIGN.center,className:F.exchangeRateValue},k.default.createElement(m.Text,{size:m.SIZE.sm,ellipsis:{tooltip:`${u} ${i}`},className:F.contentTertiary},`1 ${e.token.name} \u2248 ${b()} ${i}`))),k.default.createElement(ee.Line,{size:"sm",className:F.receiveText,label:k.default.createElement(_.FlexBox,{align:_.ALIGN.center},k.default.createElement("div",{className:F.exchangeRate},o("wallet_extension_swapforgas_label_est_netfee")),k.default.createElement(P,{onClick:c,size:P.SIZE.xs,className:`okx-wallet-plugin-information-circle ${F.infoIcon}`}))},k.default.createElement(_.FlexBox,{align:_.ALIGN.center,className:F.exchangeRateValue},k.default.createElement(m.Text,{size:m.SIZE.sm,ellipsis:{tooltip:T},className:F.contentTertiary},T))),k.default.createElement(ee.Line,{className:F.receiveText,size:"sm",label:k.default.createElement(_.FlexBox,{align:_.ALIGN.center},k.default.createElement("div",{className:F.finalReceive},o("swaptrade_list_title_you_receive")),k.default.createElement(so,{title:o("swaptrade_list_tooltip_receive_describe")},k.default.createElement(P,{size:P.SIZE.xs,className:`okx-wallet-plugin-information-circle ${F.infoIcon}`}))),value:k.default.createElement(_.FlexBox,{align:"center",className:F.finalReceiveValue},k.default.createElement(m.DisplayAmount,{className:F.displayAmount,size:"lg",strong:700,mode:m.CRYPTO,symbol:i},l))}),k.default.createElement(_.FlexBox,{justify:"flex-end",className:F.tradeTimes},k.default.createElement(m.Text,{size:m.SIZE.sm},o("wallet_extension_swapforgas_label_num_transactions",{num:y||$e})),k.default.createElement(m.Text,{type:m.TYPE.secondary,size:m.SIZE.sm},`${Se(B.mul(h,s),a)}`)))};r();n();var ie=x(L());M();var To=x(we());r();n();var re={swapInput:"_swapInput_6oxu1_1",inputWrapper:"_inputWrapper_6oxu1_8",input:"_input_6oxu1_8",inputInner:"_inputInner_6oxu1_15",inputClass:"_inputClass_6oxu1_22",symbol:"_symbol_6oxu1_31",currency:"_currency_6oxu1_34",currencyError:"_currencyError_6oxu1_38",error:"_error_6oxu1_41"};var sr=12,Et=({priceInfo:t,setAmount:e,amount:a,error:s})=>{let{fromTokenValue:i,fromTokenSymbol:l,currencyAbnormalType:p,fromTokenDecimals:y}=t,f=Math.min(sr,Number(y)),h,[{symbol:d,usdToThisRate:T}]=Le(Ee.selectedCurrency),c=(0,ie.useMemo)(()=>p==="1"||p==="3",[p]),b=(0,ie.useMemo)(()=>c?`${d}0.0`:Number(a)?`${Se(B.mul(i,T),d)}`:"",[a,i,c,d,T]);return ie.default.createElement(_.FlexBox,{className:(0,To.default)(re.swapInput,{[re.error]:s}),direction:_.DIRECTION.vertical,onClick:()=>{h?.focus()}},ie.default.createElement(_.FlexBox,{className:re.inputWrapper,align:_.ALIGN.center},ie.default.createElement(So.Number,{onRef:u=>{h=u},placeholder:"0.0",precision:f,inputMode:"decimal",className:re.input,inputClassName:re.inputClass,innerClassName:re.inputInner,onChange:u=>{u!==a&&e(u)},value:a}),ie.default.createElement(m.Text,{strong:700,className:re.symbol},l)),ie.default.createElement(m.Text,{size:m.SIZE.sm,className:(0,To.default)(re.currency,{[re.currencyError]:c}),type:m.TYPE.secondary},b))};r();n();var H={container:"_container_khgyn_1",swapTokenContainer:"_swapTokenContainer_khgyn_4",swapToken:"_swapToken_khgyn_4",swapIcon:"_swapIcon_khgyn_12",rightArrow:"_rightArrow_khgyn_16",walletIcon:"_walletIcon_khgyn_19",rate:"_rate_khgyn_22",flex:"_flex_khgyn_25",infoIcon:"_infoIcon_khgyn_29",exchangeRate:"_exchangeRate_khgyn_32",exchangeRateValue:"_exchangeRateValue_khgyn_42",finalReceive:"_finalReceive_khgyn_47",finalReceiveValue:"_finalReceiveValue_khgyn_48",max:"_max_khgyn_52",rangeAmount:"_rangeAmount_khgyn_58",error:"_error_khgyn_61",disabled:"_disabled_khgyn_64",textContainer:"_textContainer_khgyn_69",selectCoinText:"_selectCoinText_khgyn_76",selectAmountText:"_selectAmountText_khgyn_79",rateText:"_rateText_khgyn_82",receiveText:"_receiveText_khgyn_85",displayAmount:"_displayAmount_khgyn_88"};var lr=({coinInfo:t,priceInfo:e,clickPayToken:a,setAmount:s,amount:i,isValidateAmount:l})=>{let{toTokenSymbol:p,toTokenLogoUrl:y,toChainName:f,toChainLogoUrl:h,fromTokenSymbol:d,fromTokenLogoUrl:T,balance:c,fromChainLogoUrl:b,fromChainName:u,minimumAmount:v,maximumAmount:G,currencyAbnormalType:I,balanceAbnormalType:V,isQuoteAvailable:z}=e,D=t?{token:{name:t.tokenSymbol,imgSrc:t.tokenLogoUrl},chain:{name:t.chainName,imgSrc:t.chainLogoUrl}}:{token:{name:d,imgSrc:T},chain:{name:u,imgSrc:b}},X={token:{name:p,imgSrc:y},chain:{name:f,imgSrc:h}},me=(0,S.useMemo)(()=>{let $=z==="1",pe=o("wallet_extension_swapforgas_label_amount_range",{minAmount:$?de(v):$e}),ve=o("wallet_extension_swapforgas_label_amount_limit",{maxAmount:$?de(G):$e});return`${pe} \uFF5E ${ve}`},[z,G,v]),ce=()=>{let $=$o(c,{ifFromMax:!0,noNeedThousandth:!0});s($)},Z=(0,S.useMemo)(()=>I!=="0"||V!=="0"?!1:l,[V,I,l]),_e=(0,S.useMemo)(()=>V!=="0",[V]),J=(0,S.useMemo)(()=>i!==""&&!l,[i,l]);return S.default.createElement(_.Box,{className:H.container},S.default.createElement(ee.Line,{className:H.selectCoinText,size:"sm",label:o("swaptrade_function_title_select_token")}),S.default.createElement(_.Box,{className:H.swapTokenContainer},S.default.createElement(xo,{...D,onClick:a,className:H.swapToken}),S.default.createElement(P,{size:P.SIZE.md,className:`okx-wallet-plugin-to ${H.rightArrow}`}),S.default.createElement(xo,{disabled:!0,...X,className:H.swapToken})),S.default.createElement(ee.Line,{className:H.selectAmountText,size:"sm",label:S.default.createElement("div",{className:H.flex},o("wallet_extension_swapforgas_label_pay_amount"),S.default.createElement(P,{size:P.SIZE.xs,className:(0,ho.default)("okx-wallet-plugin-wallet",H.walletIcon,{[H.error]:_e})}),_e?S.default.createElement(m.Text,{className:H.error,size:m.SIZE.sm},o("wallet_extension_swapforgas_error_unknown_balance")):S.default.createElement(S.default.Fragment,null,S.default.createElement(m.DisplayAmount,{noStyle:!0,mode:m.CRYPTO},c),c&&B.BigNumber(c).gt(0)&&S.default.createElement(m.Text,{className:H.max,onClick:ce,size:m.SIZE.sm},o("wallet_extension_transaction_input_max"))))}),S.default.createElement(Et,{priceInfo:e,setAmount:s,amount:i,error:J}),S.default.createElement(m.Text,{type:m.TYPE.secondary,size:m.SIZE.sm,className:(0,ho.default)(H.rangeAmount,{[H.error]:J})},me),Z&&S.default.createElement(St,{priceInfo:e,pay:D}))},Lt=lr;r();n();var le=x(L());M();r();n();var se=x(L());M();r();n();var We={container:"_container_klk6c_1",title:"_title_klk6c_5",content:"_content_klk6c_9",footer:"_footer_klk6c_14"};var vt=({visible:t,closeCallback:e})=>se.default.createElement(fe.Action,{onClose:()=>{e()},visible:t,maskClosable:!0,hideCloseBtn:!0,noTopRadius:!1,windowStyle:{overflow:"hidden"}},se.default.createElement(se.default.Fragment,null,se.default.createElement("div",{className:We.container},se.default.createElement(m.Text,{strong:700,className:We.title},o("swaptrade_intro_title_swap_forgas")),se.default.createElement(m.Text,{size:m.SIZE.sm,className:We.content},o("swaptrade_intro_text_swap_forgas_desc"))),se.default.createElement("div",{className:We.footer},se.default.createElement(A,{block:!0,category:A.CATEGORY.fill,type:A.TYPE.highlight,size:A.SIZE.lg,onClick:()=>e(!1)},o("swaptrade_intro_btn_ok")))));r();n();var No={title:"_title_vcieq_1",infoIcon:"_infoIcon_vcieq_5"};var Pt=({onClose:t=()=>{}})=>{let[e,a]=(0,le.useState)(!1);return le.default.createElement(le.default.Fragment,null,le.default.createElement(Re,{title:le.default.createElement("div",{className:No.title},o("swaptrade_header_title_swap_forgas"),le.default.createElement(P,{size:P.SIZE.sm,className:`okx-wallet-plugin-information-circle ${No.infoIcon}`,onClick:()=>a(!0)})),closeable:!1,onBack:t}),le.default.createElement(vt,{visible:e,closeCallback:a}))};r();n();Bo();M();rr();er();var Ft=x(Ao()),Te=x(L());var Bt=({coinInfo:t,chainId:e,walletId:a,setLoading:s})=>{let[i,l]=(0,Te.useState)({tradeTimes:"",balance:"",balanceAbnormalType:"0",currencyAbnormalType:"0"}),p=Qo(),y=a||p,f=(0,Te.useCallback)(T=>{l({...T,...i})},[]),h=(0,Te.useCallback)(async T=>{if(B.BigNumber(T).isZero())return;let c;t?c={fromChainId:t.chainId,fromTokenContractAddress:t.tokenContractAddress,toChainId:e}:c={toChainId:e};try{let b=await Ge().getUserUniqueId(),{data:u}=await Lo(Fo.getPriceInfoUrl,{...c,userUniqueId:b,walletId:y,amount:T===""?"":B.BigNumber(T).toString(10)});s(!1),l(u)}catch{f({error:!0}),s(!1)}},[e,t,y,f,s]),d=(0,Te.useMemo)(()=>(0,Ft.debounce)(h,500),[h]);return{priceInfo:i,fetchPriceInfo:d}};r();n();var qe={container:"_container_1g0r0_1",contentContainer:"_contentContainer_1g0r0_8",loaderContainer:"_loaderContainer_1g0r0_14",errorContainer:"_errorContainer_1g0r0_17"};var mr=t=>{let e=(0,Ot.useHistory)(),a=nt(),s=t.chainId||a.get("chainId"),i=t.txId||a.get("txId"),l=t.walletId||a.get("walletId"),[p,y]=(0,E.useState)(!0),[f,h]=(0,E.useState)(!1),[d,T]=(0,E.useState)(null),[c,b]=(0,E.useState)(""),[u,v]=(0,E.useState)({orderId:"",checkFlag:-1,enoughFlag:0,visible:!1,code:0,reConfirm:()=>{}}),G=et(),{priceInfo:I,fetchPriceInfo:V}=Bt({coinInfo:d,chainId:s,walletId:l,setLoading:y});(0,E.useEffect)(()=>{d&&I.error&&Ce.error({title:o("wallet_extension_toast_asset_error_try_again"),placement:Ce.DIRECTION.top})},[I.error,d]);let z=Zo(),{coinId:D}=Ho(()=>z.find(J=>+J.chainId==+I.fromChainId)||{},[z,I?.fromChainId]);(0,E.useEffect)(()=>{let J=setInterval(()=>{V(c)},1e4);return V?.(c),()=>clearInterval(J)},[c,V]);let X=!d&&I.error,me=(0,E.useMemo)(()=>Number(c)>=Number(I?.minimumAmount)&&Number(c)<=Number(I?.maximumAmount),[c,I]),ce=()=>X?E.default.createElement(dt,{className:qe.errorContainer,errorText:o("swaptrade_mid_title_network_error"),btnText:o("swaptrade_mid_btn_reload"),onClick:()=>{y(!0),V(c)}}):null,Z=()=>X?null:E.default.createElement("div",{className:qe.contentContainer},E.default.createElement(Lt,{coinInfo:d,priceInfo:I,amount:c,setAmount:b,isValidateAmount:me,clickPayToken:()=>h(!0)}),E.default.createElement(Tt,{priceInfo:I})),_e=()=>E.default.createElement(_.Box,{className:qe.loaderContainer},E.default.createElement(Oe.Circle,{hasMask:!0,maskColor:"var(--okd-color-background-base-primary)",size:Oe.SIZE.xl}));return E.default.createElement("div",{className:qe.container},E.default.createElement(Pt,{onClose:t.onClose}),ce(),p?_e():Z(),!X&&E.default.createElement(Ct,{priceInfo:I,setLoading:y,loading:p,setErrorInfo:v,coinId:D,toChainId:s,chainList:G,txId:i,amount:c,isValidateAmount:me}),E.default.createElement(yt,{...u,onConfirm:()=>{(u.checkFlag===O.PENDING_GAS_STATION||u.checkFlag===O.PENDING_SWAP)&&e.replace(`${Je}/${u.orderId}`),u.reminderInfo?.needReminder&&u.reConfirm(),v({...u,visible:!1})},onCancel:()=>{u.checkFlag===O.PENDING_SWAP&&u.enoughFlag===ze.ENOUGH&&u.reConfirm(),v({...u,visible:!1})},onClose:()=>{v({...u,visible:!1})}}),E.default.createElement(pt,{visible:f,closeCallback:()=>h(!1),chainName:t.chainName,onSelect:T,chainId:s,walletId:l}))},Gt=mr;r();n();var zt=x(L());var cr="DEX_CHAIN_LIST";function _r({toChainId:t}){let e=ot(),a=Ro(),s=(0,zt.useMemo)(()=>[...new Set(Object.values(a?.account||{}))].filter(Boolean),[a?.account]),{data:i,loading:l,error:p}=Vo(async()=>{if(!t)return Promise.reject();try{let{data:y,code:f}=await Ko({deviceId:"",userWalletAddresses:s,toChainId:t});if(Number(f)===0){let{gasStationSupportChainList:h=[],isInBlackList:d}=y;return d===1?[]:h.filter(T=>!!e.find(c=>Number(c.chainId)===Number(T.chainId)))}return Promise.reject()}catch{return Promise.reject()}},{cacheKey:cr,onError:()=>{},ready:!!t});return{chainList:i||[],isError:!!p,loading:l}}var Dt=_r;r();n();var Mt=({visible:t,closeCallback:e,receiveOnly:a,walletId:s,coinId:i,txId:l,address:p})=>{let[y,f]=(0,w.useState)(!1),[h,d]=(0,w.useState)(!1),[T,c]=(0,w.useState)(!1),b=(0,Ut.useSelector)(Uo),{coin:u}=rt(i,!1),{chainList:v,loading:G,isError:I}=Dt({toChainId:u?.chainId}),V=(0,w.useMemo)(()=>{if(a||b||I)return!1;let{chainId:$}=u;return!!v.find(pe=>`${pe.chainId}`==`${$}`)},[b,u,v,a,I]);(0,w.useEffect)(()=>{t&&!G?V?c(!0):d(!0):(d(!1),c(!1),f(!1))},[t,V,G]);let z={GAS_STATION:"gas-station",GAS_RECEIVE:"gas-receive"},D=[{title:o("swaptrade_transfer_title_swap_forgas"),label:o("swaptrade_transfer_tag_recommend"),desc:o("swaptrade_transfer_text_swap_forgasdesc",{token:u?.symbol}),type:z.GAS_STATION},{title:o("swaptrade_transfer_title_receive_gas"),label:null,desc:o("swaptrade_transfer_text_receive_gasdesc",{token:u?.symbol}),type:z.GAS_RECEIVE}],X=()=>{f(!0)},me=()=>{f(!1)},ce=()=>{d(!0)},Z=()=>{d(!1),T||e()},_e=$=>{switch($){case z.GAS_STATION:X();break;case z.GAS_RECEIVE:default:ce();break}},J=()=>w.default.createElement("div",{className:"supply-gas"},w.default.createElement("div",{className:"supply-gas__nav"},w.default.createElement("div",null,o("swaptrade_header_title_fillup_gas",{token:u?.symbol})),w.default.createElement(ko,{className:"supply-gas__nav-icon okx-wallet-plugin-close",onClick:e})),D.map(({title:$,label:pe,desc:ve,type:je})=>w.default.createElement("div",{className:"supply-gas__item",key:je,onClick:()=>{_e(je)}},w.default.createElement("div",{className:"supply-gas__main"},w.default.createElement("div",{className:"supply-gas__title"},w.default.createElement("div",{className:"supply-gas__title-text"},$),pe&&w.default.createElement("div",{className:"supply-gas__title-label"},pe)),w.default.createElement("div",{className:"supply-gas__desc"},ve)))));return G||I?null:w.default.createElement(w.default.Fragment,null,w.default.createElement(fe.Action,{onClose:()=>{e()},visible:T,maskClosable:!0,hideCloseBtn:!0,noTopRadius:!1,windowStyle:{overflow:"hidden"},zIndex:1e3,alignBottom:!0,noContentPadding:!0},J()),w.default.createElement(_.Portal,{noStyle:!0},y?w.default.createElement(_.Box,{className:"supply-gas__container"},w.default.createElement(Gt,{walletId:s,onClose:me,chainId:u?.chainId,chainName:u?.chainName,txId:l})):null),w.default.createElement(_.Portal,{noStyle:!0},h?w.default.createElement(_.Box,{className:"supply-gas__container"},w.default.createElement(st,{coinId:i,address:p,onBack:Z,onClose:Z,closeable:!1,showTop:!0})):null))};r();n();var q=x(L());var Ht=x(we());M();r();n();var he={FILL_UP:"FILL_UP",CONFIRM:"CONFIRM",CANCEL:"CANCEL",ETH_SIGN:"ETH_SIGN"},wo=t=>{t&&typeof t!="string"&&(t=String(t));let e=t?.length;return e<14?16:e<16?14:12},pr=t=>{t&&typeof t!="string"&&(t=String(t));let e=t?.length;return e<8?16:e<9?14:12},Io={[he.ETH_SIGN]:{size:A.SIZE.lg,type:A.TYPE.red,category:A.CATEGORY.fill,btnText:"extension_transactions_btn_confirm",autoSize:wo},[he.CONFIRM]:{size:A.SIZE.lg,type:A.TYPE.highlight,category:A.CATEGORY.fill,btnText:"extension_transactions_btn_confirm",autoSize:wo},[he.CANCEL]:{size:A.SIZE.lg,type:A.TYPE.primary,category:A.CATEGORY.outline,autoSize:pr,btnText:"wallet_extension_btn_general_cancel"},[he.FILL_UP]:{size:A.SIZE.lg,type:A.TYPE.highlight,category:A.CATEGORY.fill,autoSize:wo,btnText:"wallet_extension_placeorder_textbtn_replenish"}};r();n();var to={"action-buttons":"_action-buttons_j3bvq_1",actionButtons:"_action-buttons_j3bvq_1","action-button":"_action-button_j3bvq_1",actionButton:"_action-button_j3bvq_1","action-button__content":"_action-button__content_j3bvq_12",actionButtonContent:"_action-button__content_j3bvq_12"};var Vt=({coinId:t,onClick:e,onAction:a,actionType:s,btnText:i,children:l,autoSize:p,...y})=>{let[f,{toggle:h}]=lo(!1),{btnText:d,autoSize:T,...c}=Io[s]||{},b=(0,q.useMemo)(()=>i||o(d),[i,d]),u=De(async()=>{if(typeof e=="function"||typeof a=="function")try{h(),e&&await e?.(s),!e&&a&&await a?.(s)}catch(v){console.log(v)}finally{h()}},[s,e,a]);return q.default.createElement(A,{loading:f,...c,...y,className:to["action-button"],contentClassName:to["action-button__content"],onClick:u},q.default.createElement(m.AdaptiveText,{inherit:!0,autoSize:p||T,ellipsis:{tooltip:!0},style:{lineHeight:"20px"}},b))},ur=({txId:t,coinId:e,walletId:a,address:s,actionType:i,onClick:l,receiveOnly:p,...y})=>{let f=tt(e),[h,{toggle:d}]=lo(),{btnText:T}=Io[i],c=De(async()=>{d(),l&&await l()},[]);return q.default.createElement(q.default.Fragment,null,q.default.createElement(Vt,{onClick:c,actionType:i,btnText:o(T,{token:f?.symbol}),...y}),q.default.createElement(Mt,{walletId:a,address:s,visible:h,closeCallback:d,coinId:e,txId:t,receiveOnly:p}))},Yt=({className:t,buttonGroup:e,children:a,onAction:s})=>q.default.createElement(_.FlexBox,{className:(0,Ht.default)(to["action-buttons"],t)},(e||[])?.map((i,l)=>i?i?.children?i?.children:i?.actionType===he.FILL_UP?q.default.createElement(ur,{...i,key:l}):q.default.createElement(Vt,{...i,key:l,onCallback:s}):null),a);Yt.ACTION_TYPE=he;var Ml=Yt;export{Nt as a,Fn as b,ht as c,Mt as d,Ml as e};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-JFCE4WMN.js.map
