import{a as ce,c as me,h as pe,i as ue,j as le,k as de}from"./chunk-2N725U3P.js";import{a as ie}from"./chunk-44RHJNWT.js";import{a as se}from"./chunk-SCZBCO2U.js";import{a as oe,b as ne,c as et,d as re}from"./chunk-REIQGNZB.js";import{a as jt}from"./chunk-CDLW656Z.js";import{b as te}from"./chunk-5EZVDCYS.js";import{b as X,d as Qt,f as Xt}from"./chunk-IHPHPUUG.js";import{a as L}from"./chunk-QVA4WXOQ.js";import{b as tt}from"./chunk-NHGZUGLZ.js";import{a as Jt}from"./chunk-QKBD2KSL.js";import{a as I,b as E,d as fe}from"./chunk-VTOQBCNE.js";import{b as ae}from"./chunk-KUI26AZJ.js";import{c as ee}from"./chunk-7PVSIZ6H.js";import{a as x}from"./chunk-H7DITLB3.js";import{a as Vt,b as Tt}from"./chunk-WNQ6F6VV.js";import{d as $t}from"./chunk-LEADLFDQ.js";import{b as Yt,h as Wt}from"./chunk-MTMUCMTY.js";import{b as lt}from"./chunk-6HXVFU7V.js";import{a as gt,j as zt}from"./chunk-5GMHHIH5.js";import{a as k,d as ut,q as Kt}from"./chunk-6FOZGMAL.js";import{R as qt}from"./chunk-2MV3WEYP.js";import{Ta as z,_a as kt,bb as Gt,lb as bt,pb as Ut,ub as Ht,vb as Mt,y as Y}from"./chunk-HPXM6RSK.js";import{B as Ft,m as W}from"./chunk-IUIJ46C3.js";import{a as Bt,c as Zt}from"./chunk-XRXUVH6X.js";import{a as qe}from"./chunk-NJ5CWPUY.js";import{k as ft,l as J,p as dt}from"./chunk-UMJMJOW4.js";import{d as O,f as j}from"./chunk-MAIAJ7GD.js";import{a as V,b as D}from"./chunk-RIMU4JTV.js";import{c as Ke}from"./chunk-TXKWPME2.js";import{a as Q}from"./chunk-XCAARJ7Q.js";import{Cb as St,Ib as Lt,Kb as pt,a as Nt,b as He,cc as Dt,jc as Me,lb as wt,m as Ct,o as Rt,p as vt,pb as U,yb as Ot,za as It}from"./chunk-X7YMANPZ.js";import{F as b}from"./chunk-SOHTSUTI.js";import{I as ht,w as S}from"./chunk-RPZQDAIQ.js";import{a as q}from"./chunk-6DDC4Y2S.js";import{f as C,m as d,o as T}from"./chunk-EQYVU4XP.js";d();T();var B=C(Y());function po(){let t=(0,B.useSelector)(Wt),e=t&&t.metadata?t.metadata.id:null,n=e?1:0,o=(0,B.useSelector)(Gt),r=o.length,s=(0,B.useSelector)(kt),a=(0,B.useSelector)(Mt),i=a.length,c=(0,B.useSelector)(Ht),m=c.length;return{unapprovedTxList:o,unapprovedTxCount:r,unapprovedSmCount:s,unapprovedStList:a,unapprovedStCount:i,unapprovedPermissionCount:n,unapprovedPermissionsRequestId:e,unapprovedSnList:c,unapprovedSnCount:m,unapprovedRequestCount:r+s+i+m+n}}d();T();d();T();var P=C(q()),At=C(Y()),Le=C(qe());ht();d();T();dt();j();var Te=C(q()),ge=C(Y()),Ye=()=>{let t=(0,ge.useDispatch)();return(0,Te.useCallback)(async({id:e})=>{await O().finishRequest({id:e,type:Ft.REJECTED}),await J(t)},[t])},_e=Ye;d();T();var nt=C(Y());var H=C(Ke()),M=C(Ct());He();j();Me();It();d();T();j();var Pe=async t=>await O().rpcEvmAddTransaction(t),_t=async t=>await O().rpcEvmUpdateTransaction(t),Ee=async t=>await O().rpcEvmConfirmTransaction(t),xe=async t=>await O().rpcEvmFindTransaction(t),ye=async t=>await O().rpcEvmPublishTransaction(t);d();T();var Ae=C(q());ht();var We=()=>{let t=pe();return e=>{if(e){let{type:n,status:o,txHash:r,extraParams:s}=e,a={[E.TRANS_OUT]:{key:"wallet_transfer_notif_send_success",params:{first:s?.value,second:s?.coinSymbol}},[E.CONTRACT_CALL]:{key:"wallet_transfer_notif_contract_interaction_success"},[E.AUTHORIZATION]:{key:"wallet_transfer_notif_approval_success",params:{first:s?.coinSymbol}},[E.CANCEL_AUTHORIZATION]:{key:"wallet_transfer_notif_cancel_approval_success",params:{first:s?.coinSymbol}},[E.CONTRACT_DEPLOY]:{key:"developer_mode_dapp_toast_deployed_successfully"}},i={[E.TRANS_OUT]:{key:"wallet_transfer_notif_send_fail",params:{first:s?.value,second:s?.coinSymbol}},[E.CONTRACT_CALL]:{key:"wallet_transfer_notif_contract_interaction_fail"},[E.AUTHORIZATION]:{key:"wallet_transfer_notif_approval_fail",params:{first:s?.coinSymbol}},[E.CANCEL_AUTHORIZATION]:{key:"wallet_transfer_notif_cancel_approval_fail",params:{first:s?.coinSymbol}},[E.CONTRACT_DEPLOY]:{key:"developer_mode_dapp_toast_deployfailed"}},c,m,p,l,u;o===I.PENDING?(c=b.TYPE.success,n===E.CANCEL_AUTHORIZATION?(m="wallet_transfer_notif_cancel_approval_submit",p={first:s?.coinSymbol}):m="wallet_transfer_notif_transaction_submit"):(o===I.SUCCEED?(c=b.TYPE.success,m=a[n]?.key,p=a[n]?.params):(c=b.TYPE.error,m=i[n]?.key,p=i[n]?.params),o!==I.DROPPED&&(l=t(r),u="wallet_transfer_notif_view_on_explorer")),b[c]({title:S(m,p)||m,desc:l?Ae.default.createElement(Jt,{url:l,urlText:S(u)}):null,duration:3})}}},Ne=We;function Ve(t){let e={to:t.to,value:(0,H.addHexPrefix)(D(t.value)),gasLimit:(0,H.addHexPrefix)(D(t.gasLimit)),nonce:(0,H.addHexPrefix)(D(t.nonce))};return t.type===W.FEE_MARKET?(e.maxFeePerGas=(0,H.addHexPrefix)(D(t.maxFeePerGas)),e.maxPriorityFeePerGas=(0,H.addHexPrefix)(D(t.maxPriorityFeePerGas)),e.type=t.type):(e.gasPrice=(0,H.addHexPrefix)(D(t.gasPrice)),t.type=W.LEGACY),t.data&&(e.data=t.data),e}function Pt(){let{extensionConfig:t}=L("rpc_info"),e=tt();return k(n=>{let{type:o,txParams:r,extraParams:s}=n,a=o;return a||(r.to?a=E.CONTRACT_CALL:a=E.CONTRACT_DEPLOY),{id:Dt(),type:a,txParams:{...Ve(r),from:r.from||e,chainId:t.chainId},status:I.UNAPPROVED,createTime:+new Date,txPool:[],isCanceling:!1,isSpeeding:!1,extraParams:s||{}}})}function Et(){let t=Ne(),e=(0,nt.useSelector)(Ut),n=gt();return k(async(o,{walletId:r=n,signedCallback:s=M.noop}={})=>{if(!o)throw new Error("tx meta error");let a;if(o.txParams.result)a=o.txParams.result;else{let{from:c}=o.txParams;a=await O().signRpcEvmTransaction(o.txParams,c,e,r)}let i=await jt(Rt,a);return await s({rawTx:a,txHash:i,status:I.PENDING}),new Promise((c,m)=>{ye({txId:o.id,rawTx:a}).then(({error:p,data:l,tx:u})=>{if(p){(u?.status===I.PENDING||u?.status===I.DROPPED)&&t(u),m(p);let{type:f,txParams:g,extraParams:h}=o,{from:A,to:_,value:y,gasLimit:R,gasPrice:v,nonce:N,chainId:K}=g||{},{approvedAmount:rt,coinSymbol:st,tokenAddress:at,approvedAddress:it,value:ct,toAddress:mt}=h||{};Nt.captureEvent({tags:{address:A},message:"API_ERROR_evm_rpc_send_tx",contexts:{report:{info:JSON.stringify({type:f,txParams:{from:A,to:_,value:y,gasLimit:R,gasPrice:v,nonce:N,chainId:K},extraParams:(0,M.omitBy)({approvedAmount:rt,coinSymbol:st,tokenAddress:at,approvedAddress:it,value:ct,toAddress:mt},M.isNil)})}},exception:{values:[{type:"API_ERROR_evm_rpc_send_tx",value:p?.message}]},level:"info"})}else t(u),c({id:o.id,txHash:l.result})}).catch(async p=>{await Ee({txId:o.id,tx:{status:I.DROPPED,finishTime:+new Date,errorMessage:p?.message},checkPoolEmpty:!0}),m(p)})})})}var xt=()=>{let t=(0,nt.useDispatch)(),e=gt();return async(n,o=e)=>{await t($t({walletId:o,txParams:n.txParams,isRpcMode:!0}));let{id:r}=n,s=await xe(r);if(s&&(s.status===I.SUCCEED||s.status===I.DROPPED||s.status===I.DROPPED))throw Error(Q)}};function he(){let t=Pt(),e=Et(),n=xt();return k(async(o,r,s)=>{if(!await te({walletId:r}))return M.noop;let i=t(o);return await n(i,r),e(i,{walletId:r,signedCallback:c=>{let m={...i,...c};try{s&&s(m)}catch(p){console.log(p)}return Pe(m)}})})}function Xo(){let t=Pt(),e=Et(),n=xt();return k(async(o,r)=>{let{type:s,txParams:a,extraParams:i}=o,c=t({type:s,txParams:{...a,...r},extraParams:i}),{id:m,txPool:p}=o;return o.id=c.id,c.id=m,o.txPool=[],await n(c),e(c,{signedCallback:l=>_t({txId:m,tx:{...c,status:I.PENDING,isSpeeding:!0,txPool:[o,...p],...l}})})})}function tn(){let t=Qt(!0),e=Pt(),n=Et(),o=xt();return k(async(r,s)=>{let{txParams:a,extraParams:i}=r,{from:c,nonce:m,type:p,chainId:l}=a,u=t.find(({address:A})=>!A),f=e({type:E.TRANS_OUT,txParams:{to:c,value:"0x0",nonce:m,chainId:l,type:p,...s},extraParams:i}),{id:g,txPool:h}=r;return r.id=f.id,f.id=g,r.txPool=[],await o(f),n(f,{signedCallback:A=>_t({txId:g,tx:{...f,status:I.PENDING,isCanceling:!0,txPool:[r,...h],extraParams:{toAddress:c,tokenAddress:"",coinSymbol:u?.symbol,value:"0"},...A}})})})}d();T();var Z=C(q()),Ce=C(Y());function Be(t){let e=t.map(o=>{let{nonce:r}=o.txParams;return parseInt(r,16)}),n=Math.max.apply(null,e);return Number.isInteger(n)?n+1:0}function Re(t){let e=X(),n=tt(),o=t||n,r=(0,Ce.useSelector)(ae),s=ut(ce()),a=ut(me()),[i,c]=(0,Z.useState)(!1),[m,p]=(0,Z.useState)(null),[l,u]=(0,Z.useState)(null),f=k(async()=>{let g;try{c(!0),g=await(await e()).eth.getTransactionCount(o,"latest")}finally{c(!1)}let h=Be(s.current),A=Math.max(g,h),_=a.current.map(R=>{let{nonce:v}=R.txParams;return ee(v)}),y=A;for(;_.includes(y);)y+=1;return p(g),u(y),{nonce:g,suggestedNonce:y}});return(0,Z.useEffect)(()=>{(async()=>(await e())?.eth&&f())()},[e,o,r]),{loadingNonce:i,nonce:m,suggestedNonce:l,request:f}}pt();d();T();d();T();var $=C(q());pt();var Ze=({txParams:t={},dappInjectedGasInfo:e={}})=>{let{to:n,from:o,value:r,data:s,tokenAddress:a}=t,[i,c]=(0,$.useState)(""),[m,p]=(0,$.useState)(!0),[l,u]=(0,$.useState)(!1),{extensionConfig:f}=L("rpc_info"),g=ue(f?.rpcUrl),{run:h}=Kt(async()=>{try{p(!0);let A=await g({to:n,from:o,value:r,data:s},a);c(A),u(!1)}catch{u(!0)}finally{p(!1)}},{wait:500});return(0,$.useEffect)(()=>{U(e.gasLimit,0)?(c(e.gasLimit),p(!1)):h()},[n,o,r,s,a,e.gasLimit]),{chainGasLimit:i,chainGasLimitLoading:m,chainGasLimitLoadFailed:l}},ve=Ze;d();T();var F=C(q()),yt=C(Ct());pt();var $e=({dappInjectedGasInfo:t={}})=>{let[e,n]=(0,F.useState)({}),[o,r]=(0,F.useState)(!0),[s,a]=(0,F.useState)(!1),{extensionConfig:i}=L("rpc_info"),{rpcUrl:c,chainId:m}=i,p=le(c),l=7e3,u=(0,F.useRef)(),f=(0,F.useRef)(!0),g=()=>{f.current=null,clearTimeout(u.current)},h=_=>{if((0,yt.isEmpty)(t))n(_);else{let{gasPrice:y,maxFeePerGas:R,maxPriorityFeePerGas:v}=t,{isSupportEip1559:N}=_;if(N){delete _.gasPrice;let K=wt(R,v);U(R,0)&&U(K,0)&&U(v,0)?(n({..._,maxFeePerGas:R,baseFeePerGas:K,maxPriorityFeePerGas:v}),g()):n(_)}else delete _.maxFeePerGas,delete _.baseFeePerGas,delete _.maxPriorityFeePerGas,U(y,0)?(n({..._,gasPrice:y}),g()):n(_)}},A=async(_=!1)=>{try{_&&r(!0);let R=(await p(m)).find(({level:v})=>v===fe.MEDIUM)||{};delete R.level,(_||f.current)&&(h(R),a(!1))}catch{_&&a(!0)}finally{r(!1),f.current&&(u.current=setTimeout(()=>{A()},l))}};return(0,F.useEffect)(()=>((async()=>{if(!c)return;let _=i?.defaultGasForRpc?.[de.singleTx];(0,yt.isEmpty)(_)?A(!0):(n(_),r(!1))})(),()=>{g()}),[i]),{chainGasPrice:e,stopPollingGasPrice:g,chainGasPriceLoading:o,chainGasPriceLoadFailed:s}},Ie=$e;var ze=(t={},e={})=>{let{chainGasPrice:n,stopPollingGasPrice:o,chainGasPriceLoading:r,chainGasPriceLoadFailed:s}=Ie({dappInjectedGasInfo:e}),{chainGasLimit:a,chainGasLimitLoading:i,chainGasLimitLoadFailed:c}=ve({txParams:t,dappInjectedGasInfo:e});return{chainGasPrice:n,chainGasLimit:a,chainGasLoading:r||i,chainGasLoadFailed:s||c,stopPollingGasPrice:o,chainGasPriceLoading:r,chainGasLimitLoading:i,chainGasPriceLoadFailed:s,chainGasLimitLoadFailed:c}},we=ze;d();T();var Oe=async(t,e)=>{let n;try{n=await e.eth.getCode(t)}catch{n=null}return{isContractAddress:n&&n!=="0x"&&n!=="0x0"}};d();T();function Se(t,{customPermissionAmount:e,decimals:n}){let o=z(t);if(o){if(o.name!==x.TOKEN_METHOD_APPROVE)throw new Error(`Invalid data; should be 'approve' method, but instead is '${o.name}'`)}else throw new Error("Invalid data");let r=et(o);r.startsWith("0x")&&(r=r.substring(2));let[s,a]=t.split(r);if(!s||!a)throw new Error("Invalid data");if(a.length!==64)throw new Error("Invalid token value; should be exactly 64 hex digits long (u256)");let i=D(ne(e,n));if(i.length>64)throw new Error("Custom value is larger than u256");return i=i.padStart(a.length,"0"),`${s}${r}${i}`}function Je({data:t,to:e}){let n=X(),[o,r]=(0,P.useState)(""),[s,a]=(0,P.useState)(!1);return(0,P.useEffect)(()=>{(async()=>{if(t&&!e){r(x.DEPLOY_CONTRACT);return}try{let l=z(t)?.name,u=[x.TOKEN_METHOD_APPROVE,x.TOKEN_METHOD_TRANSFER,x.TOKEN_METHOD_TRANSFER_FROM].find(f=>f.toLowerCase()===l.toLowerCase());if(u){r(u);return}}catch{}a(!0);let c=await n(),{isContractAddress:m}=await Oe(e,c);r(m?x.CONTRACT_INTERACTION:x.SENT_ETHER),a(!1)})()},[t,e,n]),[o,s]}function je({data:t,type:e}){let n,o,r,s;try{let a=z(t),i=re(a);n=et(a),s=i,o=e===x.TOKEN_METHOD_APPROVE,r=o&&Number(s)===0}catch{}return{address:n,isApprove:o,isRevoke:r,amount:s}}function Qe(t){let e=Xt(),[n,o]=(0,P.useState)({}),[r,s]=(0,P.useState)(!1),a=async()=>{try{s(!0);let{symbol:i,decimals:c}=await e(t);o({symbol:i,decimals:c}),s(!1)}catch{s(!1)}};return(0,P.useEffect)(()=>{t&&a()},[t]),[n,r]}function Xe(t){let[n,o]=(0,P.useState)(-1),{isApprove:r,formattedAmount:s,decimals:a,symbol:i}=t;(0,P.useEffect)(()=>{r&&o(s)},[r,s]);let c=(0,P.useMemo)(()=>n>=1e13?S("wallet_dapp_connection_subtitle_approval_amount_unlimitied"):`${Lt(St(n,a))}${i||""}`,[n,a,i,1e13]);return[{...t,customApproveAmount:n,approveAmountDisplay:c,INFINITY:1e13},o]}function to({origin:t,isApprove:e,isRevoke:n,symbol:o,walletId:r}){let s=zt(r),a=(0,At.useSelector)(bt),i=r?s:a,m=(0,At.useSelector)(Yt)[t]||{},[p,l]=(0,P.useState)({});return(0,P.useEffect)(()=>{let u=null,f=null,g=null;e?(u=null,f=o,g=n?S("wallet_approval_subtitle_revoke_approval_desc",{tokenSymbol:o}):S("wallet_dapp_conncetion_alert_approve_tip",{name:m.name,tokenSymbol:o})):(u=m.icon,g=m.host,f=m.name),l({icon:u,host:g,name:f})},[n,o]),{...p,originInfo:m,wallet:`${i.keyringName} - ${i.walletName}`}}function eo(t){let{nonce:e,suggestedNonce:n}=Re(t),[o,r]=(0,P.useState)(0),[s,a]=(0,P.useState)(!0);return(0,P.useEffect)(()=>{r(n),a(!1)},[n]),[{suggested:e,custom:o,pending:s},r]}var oo=({tx:t,nonce:e,txData:n,tokenInfo:o,chain:r,customGasInfo:s,approvedAmount:a,formattedAmount:i,txType:c})=>{let{from:m,to:p,value:l,data:u}=t,{isSupportEip1559:f,maxFeePerGas:g,maxPriorityFeePerGas:h,gasPrice:A,gasLimit:_}=s,y={from:m,to:p,value:l,gasLimit:_,nonce:e,data:u};f?(y.maxFeePerGas=g,y.maxPriorityFeePerGas=h,y.type=W.FEE_MARKET):(y.gasPrice=A,y.type=W.LEGACY);let v={[x.DEPLOY_CONTRACT]:E.CONTRACT_DEPLOY,[x.CONTRACT_INTERACTION]:E.CONTRACT_CALL,[x.TOKEN_METHOD_APPROVE]:E.AUTHORIZATION,[x.SENT_ETHER]:E.TRANS_OUT,[x.TOKEN_METHOD_TRANSFER]:E.TRANS_OUT,[x.TOKEN_METHOD_TRANSFER_FROM]:E.TRANS_OUT}[c]||E.CONTRACT_CALL;n.isRevoke&&(v=E.CANCEL_AUTHORIZATION);let N={};return c===x.TOKEN_METHOD_APPROVE&&(N.approvedAmount=a,N.coinSymbol=o.symbol,N.tokenAddress=p,N.approvedAddress=n.address),c===x.SENT_ETHER&&(N.value=Ot(V(l)),N.toAddress=p,N.coinSymbol=r.symbol),(c===x.TOKEN_METHOD_TRANSFER||c===x.TOKEN_METHOD_TRANSFER_FROM)&&(N.value=i,N.tokenAddress=p,N.toAddress=n.address,N.coinSymbol=o.symbol),{type:v,txParams:y,extraParams:N}};function no(t,e){let n=(0,Le.useHistory)(),o=ie(),r=_e(),s=he(),[a,i]=(0,P.useState)(!1);return[{sign:async(p,l)=>{i(!0),s(t,p,l).then(async({txHash:u})=>{o({id:e,result:u}),n.push(qt)}).catch(u=>{u.message!==Q&&b.error({title:u?.message}),o({id:e,error:u?.message||"Transaction failed"}),i(!1)}).finally(()=>{n.go(0)})},cancel:async()=>{await r({id:e}),n.go(0)}},a]}function _r(t){let[e]=Je(t),n=je({data:t.data,type:e}),[o,r]=Qe(t?.to),s=to({walletId:t?.walletId,origin:t.origin,...n,...o}),a=(0,P.useMemo)(()=>oe(n?.amount||0,o?.decimals),[n?.amount,o?.decimals]),[i,c]=Xe({...n,...o,formattedAmount:a}),[m,p]=(0,P.useState)(t.data);(0,P.useEffect)(()=>{if(e===x.TOKEN_METHOD_APPROVE&&i.customApproveAmount>=0&&i.customApproveAmount<=i.INFINITY)try{let G=Se(t.data,{customPermissionAmount:i.customApproveAmount,decimals:o?.decimals});p(G)}catch{}},[i.customApproveAmount,i.INFINITY,t.data,o?.decimals,n,e]);let{extensionConfig:l}=L("rpc_info"),u={...l,name:l.name||l.chainName},[f,g]=eo(t.from),[h,A]=(0,P.useState)(null),[_,y]=(0,P.useState)({}),{chainGasPrice:R,chainGasLimit:v,chainGasLoading:N,chainGasLoadFailed:K,stopPollingGasPrice:rt,chainGasLimitLoadFailed:st}=we({to:t.to,from:t.from,value:t.value||"0x0",data:m},{gasLimit:V(t.gas||t.gasLimit),gasPrice:V(t.gasPrice),maxFeePerGas:V(t.maxFeePerGas),maxPriorityFeePerGas:V(t.maxPriorityFeePerGas)}),at=G=>{A(Ue=>({...Ue,...G}))};(0,P.useEffect)(()=>{y(G=>({...G,...R}))},[R]),(0,P.useEffect)(()=>{y(G=>({...G,gasLimit:v}))},[v]);let it=oo({tx:{...t,data:m},nonce:f.custom||f.suggested,txData:n,tokenInfo:o,chain:u,customGasInfo:h||_,approvedAmount:i.customApproveAmount,formattedAmount:a,txType:e}),[{sign:ct,cancel:mt},Ge]=no(it,t.id),be=(0,P.useMemo)(()=>{switch(e){case x.DEPLOY_CONTRACT:return S("developer_mode_history_title_contract_eployment");case x.TOKEN_METHOD_APPROVE:return n?.isRevoke?S("wallet_extension_popup_btn_revoke_approval"):S("wallet_extension_popup_btn_approve");default:return S("wallet_extension_popup_title_contract_interaction")}},[e,n?.isRevoke]);return[{type:e,title:be,auth:{...i,...o,formattedAmount:a},meta:s,chain:u,nonce:f,gas:{chainGasInfo:_,customGasInfo:h||_,chainGasLoading:N,chainGasLoadFailed:K,updateCustomGasInfo:at,stopPollingGasPrice:rt,chainGasLimitLoadFailed:st},loading:{sign:Ge,token:r},data:m},{sign:ct,cancel:mt,setNonce:g,setAuthAmount:c}]}d();T();var ke=C(Y());d();T();dt();j();function De(t,e,n){return async o=>{await O().resolvePendingApproval(t,e);let{pendingApprovals:r}=await ft(o);Object.values(r).length===0&&!n&&o(Tt())}}function Fe(t){return async e=>{await O().rejectPendingApproval(t);let{pendingApprovals:n}=await ft(e);Object.values(n).length===0&&e(Tt())}}dt();It();function kr(t){let e=(0,ke.useDispatch)(),o=(c=>{let{id:m,origin:p,requestData:l,type:u,requestData:{chainId:f}}=c;return{id:m,origin:p,...l,requestData:l,chainIdToDisplay:parseInt(f,16),switchType:u,explorers:l.blockExplorerUrl}})(t),{addRpcNetwork:r}=se(),{setExtensionConfig:s}=L("rpc_info");return[o,{cancel:async()=>{await e(Fe(o.id)),await J(e)},approve:async()=>{let{rpcUrl:c,ticker:m,blockExplorerUrl:p,chainId:l,faucetUrl:u,chainName:f}=o,g=await r({chainId:l,explorerUrl:p,faucetUrl:u,name:f,rpcUrl:c,symbol:m}),{uniqueId:h}=g;await s(g),await e(lt("isRpcMode",!0)),await e(lt("currentNetworkUniqueId",h)),await e(Vt(vt,c,m,f,l,{},!0,h)),await e(De(o.id,o.requestData)),await J(e)}}]}d();T();function Mr(t){return Bt(t?.image)?t.image=t.image[0]:Zt(t?.image)&&(t.image=null),t}export{_e as a,Ee as b,xe as c,Ne as d,he as e,Xo as f,tn as g,Re as h,we as i,Je as j,je as k,Qe as l,oo as m,_r as n,kr as o,po as p,Mr as q};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-T4GCTTFD.js.map
