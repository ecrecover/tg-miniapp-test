import{a as ce}from"./chunk-A7BL4T7A.js";import{a as ue}from"./chunk-IF7RTFSM.js";import{a as L}from"./chunk-SWNKITDG.js";import{k as pe}from"./chunk-Z7MVEL6Q.js";import{B as ie,C as me}from"./chunk-ILYGYWTN.js";import{s as _}from"./chunk-MJYAUOKI.js";import{a as ne,t as k}from"./chunk-FCCCJLF6.js";import{qb as ae,y as be}from"./chunk-FK3ETA6I.js";import{X as u}from"./chunk-QZDHFNHK.js";import{Kb as re,ib as ee,m as R,nb as te,ob as se,qb as oe}from"./chunk-QG673PNL.js";import{p as F}from"./chunk-6MTHEPGF.js";import{I as Q,m as H,w as G}from"./chunk-ZQQ7HNWV.js";import{a as I}from"./chunk-ADZWCU3Q.js";import{f as y,m as n,o as i}from"./chunk-REC7XVZY.js";n();i();var m=y(I());Q();var de=y(R());re();n();i();var le=y(I());n();i();Q();var N=y(R());re();var V=e=>(0,N.isNil)(e)||(0,N.lte)(e,0),T=(e,t)=>String(Math.ceil(ee(e,t))),d=(e,t)=>oe(e,1)?`${H.ceilShort(e||0,0,!1,0,!1)} ${t}`:_(e||0,{symbol:t});var Ie={initLoading:!0,loading:!1,error:!1,denom:"",gasAmount:"0",gasPriceStep:{slow:"0",fast:"0",standard:"0"},gasFee:{slow:"0",fast:"0",standard:"0"}},U=0,_e=7e3;function O({coinId:e,address:t,value:o="0",inputData:p="",to:a=""}){let[c,r]=(0,le.useState)(Ie);async function g(){try{if(!e||!t)return;r(A=>({...A,loading:!0,error:!1}));let[f,l]=await Promise.all([ie({coinId:e,from:t,value:o??"0",to:a??""}),me({coinId:e,from:t,value:o??"0",inputData:p})]),{min:P,normal:C,max:x,feeDemon:s}=f,E={denom:s,gasAmount:l,gasPriceStep:{slow:P,fast:x,standard:C},gasFee:{slow:T(P,l),fast:T(x,l),standard:T(C,l)},error:!1,initLoading:!1,loading:!1};r(E)}catch{r(l=>({...l,error:!0,initLoading:!1,loading:!1}))}}return k(()=>(clearInterval(U),g(),U=setInterval(g,_e),()=>{clearInterval(U)}),[a,o,p]),c}n();i();var ge=y(be());function h({coinId:e,symbol:t,decimals:o,currencyId:p,fee:a}){let c=_(a,{symbol:t,decimals:o}),r=pe(e,a,{currencyId:p,useApproximate:!0,useMinPrecision:!0,formatted:!0});return`${c} ${r}`}function $({coinId:e,fee:t}){let{baseCoin:o}=L(Number(e),!0),p=(0,ge.useSelector)(ae),{currencyId:a}=p,{symbol:c,decimals:r}=o,g=h({coinId:e,symbol:c,decimals:r,currencyId:a,fee:t.slow}),f=h({coinId:e,symbol:c,decimals:r,currencyId:a,fee:t.fast}),l=h({coinId:e,symbol:c,decimals:r,currencyId:a,fee:t.standard}),P=h({coinId:e,symbol:c,decimals:r,currencyId:a,fee:t.custom});return{slow:g,fast:f,standard:l,custom:P}}n();i();var fe=y(I());function z({feeInfo:e,feeDisplay:t,onClick:o}){return(0,fe.useMemo)(()=>[{typeKey:u.SLOW,gasFee:e.gasFee.slow,unitPrice:d(e.gasPriceStep.slow,e.denom),totalPrice:t.slow,estimatedTime:"",onClick:()=>{o({gasType:u.SLOW,gasPriceStep:e.gasPriceStep.slow,gasAmount:e.gasAmount,gasFee:e.gasFee.slow})}},{typeKey:u.STANDARD,gasFee:e.gasFee.standard,unitPrice:d(e.gasPriceStep.standard,e.denom),totalPrice:t.standard,estimatedTime:"",onClick:()=>{o({gasType:u.STANDARD,gasPriceStep:e.gasPriceStep.standard,gasAmount:e.gasAmount,gasFee:e.gasFee.standard})}},{typeKey:u.FAST,gasFee:e.gasFee.fast,unitPrice:d(e.gasPriceStep.fast,e.denom),totalPrice:t.fast,estimatedTime:"",onClick:()=>{o({gasType:u.FAST,gasPriceStep:e.gasPriceStep.fast,gasAmount:e.gasAmount,gasFee:e.gasFee.fast})}}],[e])}n();i();var v=y(I());function K({feeInfo:e,feeDisplay:t,customGasPriceStep:o,customGasAmount:p,customGasFee:a,canConfirm:c,onClick:r,onConfirm:g}){return(0,v.useMemo)(()=>({unitPrice:d(o,e.denom),totalPrice:v.default.createElement(ue,{text:t.custom,maxWidth:"160px",className:void 0,style:void 0}),estimatedTime:"",onClick:r,canConfirm:c,onConfirm:()=>{g({gasType:u.CUSTOM,gasPriceStep:o,gasAmount:p,gasFee:a})}}),[o,p])}n();i();var W={customGasPriceStep:"_customGasPriceStep_1drur_1",customGasPriceStepDenom:"_customGasPriceStepDenom_1drur_4"};function ke({coinId:e,address:t,to:o,inputData:p,visible:a,gasType:c=u.STANDARD,gasPriceStep:r,gasAmount:g,onConfirm:f,onBack:l,onClose:P,onChange:C}){let{baseCoin:x}=L(Number(e),!0),s=O({coinId:e,address:t,to:o,inputData:p}),[E,A]=(0,m.useState)(c),[D,ye]=(0,m.useState)(c),[B,Fe]=(0,m.useState)(),Pe=(V(r)?void 0:r)||s.gasPriceStep.standard,w=typeof B=="string"?B:Pe,[J,Se]=(0,m.useState)(),Te=(V(g)?void 0:g)||s.gasAmount,b=typeof J=="string"?J:Te,X=te(w,s.gasPriceStep.slow)?G("wallet_extension_cosmos_alert_morethan",{num:d(s.gasPriceStep.slow,s.denom)}):"",Y=se(b,0)?G("wallet_extension_cosmos_alert_limitmorethan"):"",Ce=!X&&!Y,Z=T(w,b),j=$({coinId:e,fee:{...s.gasFee,custom:Z}}),q=ne(({gasType:M,gasAmount:xe,gasPriceStep:Ae,gasFee:we})=>{A(M),ye(M),C({gasType:M,gasPriceStep:Ae,gasAmount:xe,gasFee:we,denom:s.denom,loading:!1,error:!1,initLoading:!1}),f&&f()}),De=z({feeInfo:s,feeDisplay:j,onClick:q}),Ge=K({feeInfo:s,feeDisplay:j,customGasPriceStep:w,customGasAmount:b,customGasFee:Z,canConfirm:Ce,onClick:()=>{A(u.CUSTOM)},onConfirm:q});return k(()=>{D!==u.CUSTOM&&C({gasType:D,gasAmount:s.gasAmount,gasPriceStep:s.gasPriceStep[D],gasFee:s.gasFee[D],denom:s.denom,loading:s.loading,error:s.error,initLoading:s.initLoading})},[D,s,o,p]),a?m.default.createElement(ce,{feeType:E,feeDataList:De,onBack:l,onClose:P,onChange:de.noop,custom:{...Ge,components:()=>m.default.createElement(m.default.Fragment,null,m.default.createElement(F.Number,{className:W.customGasPriceStep,size:F.SIZE.sm,title:m.default.createElement(m.default.Fragment,null,G("wallet_extension_cosmos_title_gasfee")),value:w,onChange:Fe,errorType:F.TIP_TYPE.always,error:X,enableMinus:!1,min:0,precision:x?.decimals??6,suffix:m.default.createElement("span",{className:W.customGasPriceStepDenom},s.denom)}),m.default.createElement(F.Number,{size:F.SIZE.sm,title:G("wallet_extension_cosmos_title_gasamount"),value:b,onChange:Se,errorType:F.TIP_TYPE.always,error:Y,enableMinus:!1,min:0,precision:0}))}}):null}export{ke as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-XTO3LHA3.js.map
