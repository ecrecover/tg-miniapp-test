import{a as se,b as ie}from"./chunk-OH7CEFVK.js";import{a as Jt}from"./chunk-ZH3DHMKC.js";import{a as kt,b as Qt,c as te}from"./chunk-MYJ7BCPU.js";import{a as gt}from"./chunk-5O2OS6J2.js";import{c as ae}from"./chunk-JOCR5D47.js";import{h as ee,i as oe,p as re,q as ne}from"./chunk-XJYYUVAC.js";import{a as Xt}from"./chunk-RFNFDJHV.js";import"./chunk-IQFXZKFW.js";import{a as ht,b as wt}from"./chunk-7BFUGHAL.js";import{b as Gt,c as $t}from"./chunk-SXPHI5ON.js";import"./chunk-YWOLA2WT.js";import{e as Rt,f as jt}from"./chunk-JVN7YJ6W.js";import{a as ft}from"./chunk-V4V6C6NY.js";import{b as at}from"./chunk-ZQ5A3KPQ.js";import{a as tt}from"./chunk-BGUY7SH3.js";import{w as z}from"./chunk-MJYAUOKI.js";import{a as Ut}from"./chunk-LI3NFLG3.js";import{a as pt,e as Ht,j as ct}from"./chunk-FCCCJLF6.js";import{C as ut,F as Yt,Qa as qt,Y as dt,a as _t}from"./chunk-4Z4GXCHB.js";import{Eb as Zt,pa as zt,y as mt}from"./chunk-FK3ETA6I.js";import{ka as Vt}from"./chunk-QZDHFNHK.js";import"./chunk-6KPQELH2.js";import"./chunk-EJQOS3F4.js";import"./chunk-LHHZ5TAA.js";import"./chunk-PI6QLVMS.js";import"./chunk-QY4HIIR3.js";import"./chunk-XFWUEPSK.js";import{d as Wt,f as Ae}from"./chunk-MNNY2ODL.js";import"./chunk-C3FJ2D4V.js";import"./chunk-C5ZJZEPI.js";import"./chunk-LGHM3MOC.js";import{a as Ft,c as q}from"./chunk-4QSQKIBZ.js";import"./chunk-OXVQDEZW.js";import"./chunk-X3G52GGX.js";import"./chunk-WUKT6J7S.js";import"./chunk-FTJCOLFJ.js";import{I as Bt,m as Nt,nc as Dt,rc as Kt,za as ke}from"./chunk-QG673PNL.js";import"./chunk-ZUFARSFM.js";import{G as Q,L as rt,o as lt,p as bt,w as It}from"./chunk-6MTHEPGF.js";import{I as ot,w as r,x as Pt}from"./chunk-ZQQ7HNWV.js";import"./chunk-Y62GSKHT.js";import"./chunk-2BXFMFMK.js";import{M as Ot,Y as C,c as Ne}from"./chunk-ZOQTSYT4.js";import{a as J,g as be}from"./chunk-ADZWCU3Q.js";import"./chunk-FDI7TLXH.js";import"./chunk-L4HTIIR6.js";import"./chunk-733NI6T7.js";import"./chunk-EYWGNJVY.js";import{a as Ie}from"./chunk-TBVIGR5T.js";import"./chunk-FHQVMQUK.js";import"./chunk-XNS2NFYY.js";import{f as g,m as p,o as c}from"./chunk-REC7XVZY.js";p();c();var V=g(J()),xe=g(mt());ot();p();c();var f=g(J()),Tt=g(mt());var me=g(Ut()),pe=g(Nt());ot();ke();Ae();p();c();var A=g(J()),le=g(mt()),et=g(be());ot();p();c();function yt({visible:e,setVisible:u,confirm:y,chooseNetworkList:x,supportChainsList:d,setChooseNetWorkList:I}){let h=(0,le.useSelector)(Zt),[_,k]=(0,A.useState)(!1),P=(0,A.useMemo)(()=>d.map(n=>n.chainName),[d]),D=(0,A.useMemo)(()=>d.filter(n=>!gt.includes(n.chainName)).map(n=>({...h.find(T=>T.baseChain===n.chainName),imported:n.imported})),[h,d]),S=(0,A.useMemo)(()=>te.map(({chain:n,...v})=>P.includes(n)?{chain:n,config:v,allChains:h.filter(T=>T.baseChain===n),imported:d.find(T=>T.chainName===n)?.imported}:null),[h,d]);return e?A.default.createElement("div",{className:"chains-choose-network-modal__wrap"},A.default.createElement(ft,{title:r("wallet_transfer_multichain_coin_maintitle_select_network"),className:"chains-choose-network-modal__navigator",onBack:()=>u(),closeable:!1}),A.default.createElement("div",{className:"chains-choose-network-modal__chains-list__wrap"},A.default.createElement("div",{className:"chains-choose-network-modal__chains-list__container"},S.map(n=>{if(!n)return null;let{chain:v,imported:T,allChains:w,config:N}=n,{titleKey:U,remindKey:O,networkCountKey:Z,importPrivateKeyConfig:{supportNetworksKey:E}}=N;return A.default.createElement(kt,{imported:T,selected:x.includes(v),handleClick:()=>{T||I(v)}},A.default.createElement(Qt,{titleKey:U,remindKey:O,networkCountKey:Z,descriptionKey:E,chainsList:w,imported:T}))}),D.map(n=>A.default.createElement(kt,{key:n.chainName,selected:x.includes(n.baseChain),handleClick:()=>{n.imported||I(n.baseChain)},...n}))),A.default.createElement("div",{className:"chains-choose-network-modal__confirm-button-wrap"},A.default.createElement(C,{block:!0,loading:_,category:C.CATEGORY.fill,type:C.TYPE.highlight,size:C.SIZE.lg,onClick:async n=>{try{k(!0),n.preventDefault(),n.stopPropagation(),await y(),k(!1)}catch{k(!1)}},className:"chains-choose-network-modal__confirm-button"},r("wallet_set_password_btn_confirm"))))):null}yt.propTypes={visible:et.default.bool.isRequired,setVisible:et.default.func.isRequired,confirm:et.default.func.isRequired,chooseNetworkList:et.default.array.isRequired,supportChainsList:et.default.array.isRequired,setChooseNetWorkList:et.default.func.isRequired};p();c();var nt={root:"_root_o5han_1",title:"_title_o5han_4",input:"_input_o5han_7",link:"_link_o5han_12",bulk:"_bulk_o5han_18"};var ce=e=>{let{history:u}=e,y=(0,Tt.useDispatch)(),x=(0,Tt.useSelector)(zt),[d,I]=(0,f.useState)(!1),[h,_]=(0,f.useState)(""),[k,P]=(0,f.useState)(""),[D,S]=(0,f.useState)(!1),[n,v]=(0,f.useState)(!1),[T,w]=(0,f.useState)(!1),[N,U]=(0,f.useState)([]),[O,Z]=(0,f.useState)([]);ct(()=>{I(u.location.pathname===dt)}),Ht(()=>{S(!1),_(""),P(""),v(!1)});let E=s=>{w(!!s)},G=s=>{U([s])},H=async s=>{let{keyringName:a="",walletName:B=""}=s||{},l=`${a}-${B}`;u.push({pathname:`${Yt}/key`,state:{walletName:l,anim:"1",next:_t}})},$=pt(async()=>{let s="",a=!0;h&&!await ie(h,x)&&(a=!1,s=r("wallet_import_errortip_wrong_private_key")),S(!1),U([]),P(s),v(a)},[h]),Y=(0,pe.debounce)($,200),X=async s=>{S(!0),_(s),P(""),v(!1),await Y()},m=async s=>{if(s.preventDefault(),!n)return;let B=(await se(h,x))?.filter(W=>W!==Bt),l=[];for(let W=0,vt=B.length;W<vt;W++)l.push(Wt().checkPrivateKeyIsImported({baseChains:[B[W]],wallets:[{privateKey:h}]}));let L=(await Promise.allSettled(l)).map((W,vt)=>{let{value:xt}=W;return xt===void 0&&(xt=!0),{chainName:B[vt],imported:xt}}),j=L.filter(({imported:W})=>!W).map(({chainName:W})=>W),it=gt.find(W=>j.includes(W))||j[0];it?(U([it]),Z(L),E(!0)):Q.error({title:r("wallet_extension_imported_toast_wallet_existes"),top:0}),await(0,me.default)("")},o=async()=>{if(!n)return;let s;try{d?s=await y(jt(N,h)):(await y(oe(h)),await y(re(N))),d?H(s,N):u.push(ut)}catch(a){a.message===ht&&Q.error(r("wallet_home_toast_network_error")),a.message===wt&&(Q.error(r("extension_wallet_addwallet_toast_wallets_added",{amount:500})),P(r("extension_wallet_addwallet_toast_wallets_added",{amount:500})))}},i=r("wallet_import_subtitle_import_private_key_desc");return f.default.createElement(f.default.Fragment,null,f.default.createElement(q.Container,{className:nt.root},f.default.createElement("form",{onSubmit:m},f.default.createElement(z.Text,{size:z.SIZE.sm,className:nt.title},r("wallet_addwallet_btn_import_private_key")),f.default.createElement($t,{elementName:"ipk"},f.default.createElement(bt.TextArea,{inputClassName:nt.input,value:h,type:"password",size:bt.SIZE.lg,placeholder:i,onChange:s=>X(s.target.value),errorType:"blur",error:k,autoComplete:"off",cleanable:!0})),f.default.createElement(tt.FooterActions,{direction:Ft.vertical},f.default.createElement(z.Text,{size:z.SIZE.sm,align:z.ALIGN.center,className:nt.link,onClick:()=>{Jt(qt)}},r("wallet_extension_private_key_maintitle_bulk_import"),f.default.createElement(Ot,{className:`okds-arrow-pointer-right-md ${nt.bulk}`})),f.default.createElement(C,{htmlType:"submit",disabled:!n,loading:D,category:C.CATEGORY.fill,type:C.TYPE.highlight,size:C.SIZE.lg,onClick:m,block:!0},r("wallet_set_password_btn_confirm"))))),f.default.createElement(yt,{visible:T,chooseNetworkList:N,supportChainsList:O,setVisible:E,setChooseNetWorkList:G,confirm:o}))};p();c();var b=g(J()),ye=g(mt());var Te=g(Xt()),Ee=g(Ut()),Ce=g(Nt());ot();p();c();var _e=g(Ie());async function ue(e=""){try{let{wallet:u}=await Dt(_e.Currency.TON);return await u.validateMnemonicOfTon({mnemonicArray:e.split(" "),password:""})}catch(u){return console.log("error:",u),!1}}p();c();var t=g(J()),St=g(Ne()),Lt=g(Xt()),fe=g(Nt());ot();p();c();var Et=g(J());function At(e,u=[]){let y=(0,Et.useRef)(!1);(0,Et.useEffect)(()=>{if(y.current)return e();y.current=!0},u)}p();c();p();c();var de={topWrapper:"_topWrapper_c7vcn_1"};var Se=({onWordsChange:e,onAnyWordError:u,onEditStateChange:y,onClear:x,error:d})=>{let[I,h]=(0,t.useState)("12"),[_,k]=(0,t.useState)(new Array(12).fill(null)),[P,D]=(0,t.useState)(!1),[S,n]=(0,t.useState)(-1),[v,T]=(0,t.useState)(!1),w=(0,t.useRef)(new Array(12).fill(null)),N=({text:o})=>t.default.createElement("div",{className:"mnemonic-words-menu-item"},o),U=(0,t.useMemo)(()=>[{label:t.default.createElement(N,{text:r("wallet_extension_import_seedphrase_dropdown_text_12word",{length:"12"})}),value:"12"},{label:t.default.createElement(N,{text:r("wallet_extension_import_seedphrase_dropdown_text_15word",{length:"15"})}),value:"15"},{label:t.default.createElement(N,{text:r("wallet_extension_import_seedphrase_dropdown_text_18word",{length:"18"})}),value:"18"},{label:t.default.createElement(N,{text:r("wallet_extension_import_seedphrase_dropdown_text_21word",{length:"21"})}),value:"21"},{label:t.default.createElement(N,{text:r("wallet_extension_import_seedphrase_dropdown_text_24word",{length:"24"})}),value:"24"}],[r]),[O,Z]=(0,t.useState)(!1),E=(0,t.useMemo)(()=>(0,fe.debounce)(o=>{Z(o)},300),[]),G=(0,t.useCallback)(({value:o})=>{h(o),D(!0);let i=parseInt(o,10);if(i===_.length)return;let s=[..._],a=s.length;a<i?(s.length=i,w.current.length=i,s.fill(null,a,i),w.current.fill(!1,a,i)):(w.current.length=i,s.length=i),k(s),e&&e(s)},[_,e]),H=(0,t.useCallback)((o,i)=>{k(s=>{s[i]=o;let a=[...s];return e&&e(a),a}),T(!1)},[e]),$=(0,t.useCallback)((o,i)=>{let a=(o.trim().toLowerCase().match(/\w+/gu)?.join(" ")||"").split(/\s/u);if(a.length===0)return;if(P===!1&&_.every(l=>!l)&&[12,15,18,21,24].includes(a.length)){h(`${a.length}`),k(a),e&&e(a);return}let B=[..._];for(let l=0;l<a.length;l++){let K=i+l;if(K>=B.length)break;B[K]=a[l]}k(B),e&&e(B)},[e,_]),Y=(0,t.useCallback)((o,i)=>{w.current[i]||(w.current[i]={}),w.current[i].error=o;let s=w.current.filter(a=>a&&a.error===!0).length;u&&u(s>0)},[u]),X=(0,t.useCallback)((o,i)=>{w.current[i]||(w.current[i]={}),w.current[i].focus=o;let s=w.current.filter(a=>a&&a.focus===!0).length>0;E(s),n(i)},[E]);At(()=>{y&&y(O)},[O,y]);let m=()=>{let o=_.map(()=>null);k(o),e&&e(o),x&&x(),T(!0)};return t.default.createElement("div",{className:"mnemonic-words-inputs"},t.default.createElement(q.FlexBox,{className:de.topWrapper,align:q.ALIGN.center,justify:"space-between"},t.default.createElement("span",{className:"mnemonic-words-inputs__length-type__text"},Pt("wallet_extension_import_seed_phrase_dropdown_text_ihave2",{words:t.default.createElement(It,{align:It.DIRECTION.right,isPcShowCheck:!0,options:U,onChange:G,value:I,optionContClassName:"mnemonic-words-inputs__length-type-dropdown-list",optionItemClassName:"mnemonic-words-inputs__length-type-item"})})),_.some(o=>o)&&t.default.createElement("div",{className:"mnemonic-words-inputs__clear"},t.default.createElement("div",{className:"mnemonic-words-inputs__clear-button",onClick:m},t.default.createElement("span",null,r("wallet_extension_import_seed_phrase_button_clear"))))),t.default.createElement("div",{className:"mnemonic-words-inputs__container"},_.map((o,i)=>t.default.createElement(Le,{key:i,word:_[i]?_[i]:"",onWordChange:H,onFocusChange:X,onPaste:$,onValidate:Y,index:i,focusIndex:S,cleared:v}))),d&&t.default.createElement("span",{className:"mnemonic-words-inputs__error"},d))},Le=({index:e,onWordChange:u,onPaste:y,word:x,onValidate:d,onFocusChange:I,focusIndex:h,cleared:_})=>{let[k,P]=(0,t.useState)(!1),[D,S]=(0,t.useState)(!0),[n,v]=(0,t.useState)(!1),[T,w]=(0,t.useState)(""),N=(0,t.useCallback)(m=>{let o=(m.target.value||"").trim().toLowerCase();u(o,e),w(o)},[e,u]),U=(0,t.useCallback)(m=>{m.preventDefault(),m.stopPropagation();let o=m.clipboardData.getData("text");y(o,e),S(!0),I(!1,e)},[e,y]),O=(0,t.useCallback)(m=>{let o=Boolean(m)&&!Lt.wordlists.english.includes(m);P(o),d&&d(o,e)},[e,d]),Z=(0,t.useCallback)(()=>{S(!0),I(!1,e)},[e,I]);At(()=>{D&&O(x)},[x,D,O]);let E=(0,t.useMemo)(()=>{if(!T)return[];let m=T.replace(/[^a-zA-Z]/gm,"");if(!m)return[];let o=Lt.wordlists.english.filter(i=>new RegExp(`^${m}`).test(i));return o.length===1&&o[0]===m?[]:(o.length>6&&(o.length=6),o)},[T]),G=(0,t.useCallback)(()=>{S(!1),v(!0),I(!0,e),d&&d(!1,e)},[e,I,d]),H=m=>{N({target:{value:m}}),v(!1),P(!1),d&&d(!1,e),S(!0),I(!1,e),setTimeout(()=>{let o=document.querySelectorAll(".mnemonic-words-inputs__container__input");o[e+1]&&o[e+1].focus()})},$=(0,t.useCallback)(({key:m})=>{m==="Enter"&&E.length===1&&H(E[0])},[E]),Y=(0,t.useRef)(null),X=D&&x&&!k;return(0,t.useEffect)(()=>{function m(o){Y.current&&!Y.current.contains(o.target)&&v(!1)}return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[Y]),(0,t.useEffect)(()=>{h!==e&&(v(!1),O(x))},[h,e]),(0,t.useEffect)(()=>{O(x)},[_]),t.default.createElement("div",{className:"mnemonic-words-inputs__container__input-item"},t.default.createElement("div",{className:"mnemonic-words-inputs__container__input-index"},e+1),t.default.createElement(lt,{className:"mnemonic-words-inputs__container__input-popup",arrowSize:lt.SIZE.lg,arrowStyle:{backgroundColor:"var(--okd-color-background-base-primary)"},gutter:"8px",disabled:E.length===0,content:t.default.createElement("div",{ref:Y,className:(0,St.default)("mnemonic-words-inputs__container__candidate",{"columns-3":E.length>=3,"columns-2":E.length===2,"columns-1":E.length===1})},E.map(m=>t.default.createElement("div",{key:m,className:"mnemonic-words-inputs__container__candidate-word",onClick:()=>H(m)},m))),show:n,placement:lt.DIRECTION.bottom,smartMode:!0,modifiers:[{name:"preventOverflow",options:{padding:16}}]},t.default.createElement(Gt,{elementName:"m"},t.default.createElement("input",{className:(0,St.default)("mnemonic-words-inputs__container__input",{"mnemonic-words-inputs__container__input-error":k}),value:x,onBlur:Z,onFocus:G,onPaste:U,onChange:N,onKeyDown:$,autoComplete:"off",type:X?"password":"text"}))))},he=Se;p();c();var F=g(J());ot();p();c();var R={root:"_root_57stu_1",fixBox:"_fixBox_57stu_10",closeBox:"_closeBox_57stu_14",textBox:"_textBox_57stu_19",iconBox:"_iconBox_57stu_27",icon:"_icon_57stu_27",tonTitle:"_tonTitle_57stu_36",text:"_text_57stu_19"};var Me=({onClose:e=()=>{},onConfirm:u=()=>{}})=>F.default.createElement(q.Box,{className:R.root},F.default.createElement(tt.FooterActions,{className:R.fixBox},F.default.createElement("div",{className:R.closeBox},F.default.createElement(at,{size:at.SIZE.xl,icon:"okx-wallet-plugin-close",className:R.icon,onClick:e})),F.default.createElement(q.Box,{className:R.textBox},F.default.createElement("div",{className:R.iconBox},F.default.createElement(at,{size:at.SIZE.xxl,icon:"okx-wallet-plugin-warning-circle",className:R.icon})),F.default.createElement(z.Text,{warp:!0,strong:!0,size:z.SIZE.lg,className:R.tonTitle},r("wallet_extension_import_title_being_imported")),F.default.createElement(z.Text,{warp:!0,strong:!0,size:z.SIZE.sm,className:R.text},r("wallet_extension_import_subtitle_being_imported")),F.default.createElement(tt.FooterActions,null,F.default.createElement(C,{htmlType:"submit",category:C.CATEGORY.fill,type:C.TYPE.highlight,size:C.SIZE.lg,onClick:u,block:!0},r("commonall_text_btn_ok_passive")))))),we=Me;p();c();var ge={root:"_root_v31gt_1"};var ve=e=>{let{history:u}=e,y=(0,ye.useDispatch)(),[x,d]=(0,b.useState)(!1),[I,h]=(0,b.useState)(!1),[_,k]=(0,b.useState)([]),[P,D]=(0,b.useState)(!1),[S,n]=(0,b.useState)(""),[v,T]=(0,b.useState)(!1),[w,N]=(0,b.useState)(!1),[U,O]=(0,b.useState)(!1),[Z,E]=(0,b.useState)(!1);ct(()=>{h(u.location.pathname===dt)});let G=()=>{u.replace(_t)},H=pt(async()=>{let l=_.length>0,K=!1;for(let j=0;j<_.length;j++){let it=_[j];(!it||!Te.wordlists.english.includes(it))&&(l=!1)}let L=!1;if(l){let{ethers:j}=await Kt();l=j.utils.isValidMnemonic(_.join(" ")),!l&&_.length===Vt.TWENTYFOUR&&(L=await ue(_.join(" ")),l=L),w||(K=!l)}return w&&(K=!1),D(l),O(K),{isValid:l,isTonMnemonic:L}},[_,w]),$=(0,Ce.debounce)(H,500),Y=async l=>{k(l),n(""),await $()},X=l=>{T(l)},m=l=>{N(l),H()},o=()=>v?r("wallet_import_wallet_errortip_seed_phase_wrong"):U?r("wallet_import_wallet_errortip_seed_phase_order_wrong"):S||"",i=async()=>{let l=_.join(" "),K;try{d(!0),I?K=await y(Rt(l,!0,{isTonMnemonic:Z})):await y(ee(l)),I?G(K):u.push(ut)}catch(L){console.log("error:",L),L.message===ht&&Q.error(r("wallet_home_toast_network_error")),L.message===wt&&(Q.error(r("extension_wallet_addwallet_toast_wallets_added",{amount:500})),n(r("extension_wallet_addwallet_toast_wallets_added",{amount:500}))),L.message===ae&&n(r("wallet_import_private_key_errortip_wallet_repeat",{amount:500}))}finally{d(!1)}await(0,Ee.default)("")},s=async()=>{E(!1),await i()},a=async l=>{l.preventDefault();let{isValid:K,isTonMnemonic:L}=await H();if(L){await y(ne(L)),E(!0);return}!K||await i()},B=o();return b.default.createElement(q.Container,{className:ge.root},b.default.createElement("form",{onSubmit:a},b.default.createElement(he,{onEditStateChange:m,onAnyWordError:X,onWordsChange:Y,onClear:()=>{D(!1)},error:B}),b.default.createElement(tt.FooterActions,null,b.default.createElement(C,{loading:x,htmlType:"submit",disabled:!P||B,category:C.CATEGORY.fill,type:C.TYPE.highlight,size:C.SIZE.lg,onClick:a,block:!0},r("wallet_set_password_btn_confirm"))),Z&&b.default.createElement(we,{onClose:()=>{E(!1)},onConfirm:s})))};p();c();var Ct={connect:"_connect_1lqck_1",tabs:"_tabs_1lqck_4","tabs-header":"_tabs-header_1lqck_7",tabsHeader:"_tabs-header_1lqck_7"};var Mt=class extends V.PureComponent{render(){return this.props?V.default.createElement("div",null,V.default.createElement(ft,{title:r("wallet_extension_import_card_title_import"),closeable:!1,stickyStyle:{zIndex:10}}),V.default.createElement("div",{className:Ct.connect},V.default.createElement(rt.Segmented,{average:!0,className:Ct.tabs,headerClassName:Ct.tabsHeader,size:rt.SIZE.sm,color:rt.COLOR.grey},V.default.createElement(rt.TabPane,{id:"1",tab:r("wallet_extension_import_tab_seed_phrase")},V.default.createElement(ve,{...this.props})),V.default.createElement(rt.TabPane,{id:"2",tab:r("wallet_extension_import_tab_private_key")},V.default.createElement(ce,{...this.props}))))):null}},en=(0,xe.connect)(null,null)(Mt);export{en as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=ImportSeedPhraseAndPrivateKey-WX6MNL2Z.js.map
