import{a as R,b as T,c as w}from"./chunk-PWJF5RRQ.js";import"./chunk-7CHHD7YT.js";import"./chunk-HKLZAYYN.js";import"./chunk-E4R5GU2A.js";import{b as f}from"./chunk-ROVVMPCE.js";import"./chunk-5PP4KT6B.js";import"./chunk-LHHZ5TAA.js";import"./chunk-PI6QLVMS.js";import"./chunk-QY4HIIR3.js";import"./chunk-XFWUEPSK.js";import"./chunk-MNNY2ODL.js";import"./chunk-VCAWL4NW.js";import"./chunk-2FULUWWG.js";import"./chunk-SLEUZTBQ.js";import{a as u,u as y}from"./chunk-4X6ZAX3L.js";import"./chunk-4QSQKIBZ.js";import"./chunk-OXVQDEZW.js";import"./chunk-X3G52GGX.js";import"./chunk-WUKT6J7S.js";import"./chunk-FTJCOLFJ.js";import{m as K}from"./chunk-QG673PNL.js";import"./chunk-ZUFARSFM.js";import"./chunk-6MTHEPGF.js";import"./chunk-ZQQ7HNWV.js";import"./chunk-Y62GSKHT.js";import"./chunk-ZOQTSYT4.js";import"./chunk-ADZWCU3Q.js";import{a as M}from"./chunk-GNMGGUN4.js";import"./chunk-EYWGNJVY.js";import"./chunk-2U2UJUF7.js";import"./chunk-W426TRRH.js";import"./chunk-BDEVQ2S7.js";import"./chunk-EWYZZSY3.js";import"./chunk-7K7BCLRD.js";import"./chunk-WELSRPTB.js";import"./chunk-7TSJ7C24.js";import"./chunk-DW2DZMT3.js";import"./chunk-C672KFBI.js";import"./chunk-YSXN7JDZ.js";import"./chunk-TBVIGR5T.js";import"./chunk-FHQVMQUK.js";import"./chunk-XNS2NFYY.js";import{f as n,m as l,o as h}from"./chunk-REC7XVZY.js";l();h();var W=n(R()),E=n(M()),a=n(K());var b=W.default.HardwareWebSdk,s=class extends w{async signTransaction(o,e){if(!(0,a.isUndefined)(e.memo)&&!(0,a.isUndefined)(e.memoPos))throw Error(y);return new Promise((g,t)=>{(async()=>{let{address:i}=e,{onekeyInfo:c}=o,d;try{d=await this.initOneKey({onekeyInfo:c,onUiCancel(){t(new Error(u))}})}catch(r){return t(this.handleErrors(r))}let k=f(i,o?.accountsMap||o?.addressType),{path:m}=k,S=e.inputs.map(r=>({...r,address:i,nonWitnessUtxo:r.rawTransaction,derivationPath:m})),B=(0,E.oneKeyBuildBtcTx)({...e,inputs:S,derivationPath:m}),{success:H,payload:p}=await b.btcSignTransaction(c?.connectId,d,B);if(T.closeModal(),H){let{serializedTx:r}=p;return g(r)}return t(this.handleErrors(p))})()})}},z=new s;export{z as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=btcAdapter-2NMXQRFF.js.map
