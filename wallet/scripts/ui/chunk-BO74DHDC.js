import{a as Cr}from"./chunk-7ENG4K63.js";import{a as z}from"./chunk-2DFF4YBY.js";import{a as yr}from"./chunk-DSYZP5KR.js";import{b as ur,c as ae,l as cr,m as pr,n as lr}from"./chunk-JMAKZZHS.js";import{a as Lo}from"./chunk-FA3U5YIB.js";import{a as wo}from"./chunk-RNB3JHFL.js";import{a as vo}from"./chunk-UFQZJGJ2.js";import{a as Po}from"./chunk-NZPUYPHL.js";import{e as Oo}from"./chunk-4QAFBCO2.js";import{a as dr}from"./chunk-WCH23YYN.js";import{a as mt,b as fr,d as dt,e as _r,f as me,g as _t}from"./chunk-35PGDXR7.js";import{A as ee,B as oe,F as nr,I as sr,J as ir,N as re,O as ar,Q as mr,S as ne,T as se,Y as ie,b as Qo,c as tr,d as er,e as wt,f as W,g as or,i as Lt,k as Qt,l as rr,q as te,v as vt}from"./chunk-PUO23DIP.js";import{a as ho,b as bo,d as Bo,e as M}from"./chunk-CDLW656Z.js";import{a as Fo}from"./chunk-RC5IAFKK.js";import{e as No}from"./chunk-OQOFXHGC.js";import{e as j,h as Eo,k as Pt}from"./chunk-VTLNAOHG.js";import{a as Un,l as So,m as Ao}from"./chunk-7DP5LYUM.js";import{A as xr,da as Tr}from"./chunk-IHPHIDUQ.js";import{D as Le,E as Ho,F as Yo,G as Go,I as zo,J as Vo,L as Xo,M as Zo,N as Ko,O as qo,P as Jo,Q as jo,b as jt,f as Mo,j as Do,k as ko,n as Uo,q as Ro,t as $o,x as Wo}from"./chunk-VQBK6IHT.js";import{i as Co}from"./chunk-DXRBY5MU.js";import{a as Jt,g as To}from"./chunk-5GMHHIH5.js";import{I as Io,j as go}from"./chunk-7KCWBFQ2.js";import{a as Ot}from"./chunk-KZ2PCELG.js";import{b as we}from"./chunk-C7ZG4INB.js";import{a as Bt}from"./chunk-J5ANWCEO.js";import{r as no,s as so,w as S}from"./chunk-VMO2INN3.js";import{a as bt,c as uo,j as co,l as po,o as Nt}from"./chunk-6FOZGMAL.js";import{Za as yo,a as lo,f as fo,la as _o}from"./chunk-2MV3WEYP.js";import{h as ro,qb as qt,y as G}from"./chunk-HPXM6RSK.js";import{V as Zt,X as F,Z as Kt,_ as mo,b as N,fa as J,j as ao}from"./chunk-IUIJ46C3.js";import{b as xo}from"./chunk-XRXUVH6X.js";import{a as Pe}from"./chunk-NJ5CWPUY.js";import{d as Xt,f as oo}from"./chunk-MAIAJ7GD.js";import{c as E}from"./chunk-JXCCIV3J.js";import{b as Vt,c as eo}from"./chunk-AOA7NX2Y.js";import{j as Yt,m as je}from"./chunk-HXZH2DHB.js";import{Eb as zt,Hb as ft,Jc as io,Kb as at,ba as Y,ib as q,jb as Be,kb as it,m as be,nb as Gt,ob as Qe,pb as Oe,q as Wt,za as lt,zb as to}from"./chunk-X7YMANPZ.js";import{B as qe,G as Je,c as Ze,n as Ke,p as pt}from"./chunk-SOHTSUTI.js";import{I as L,m as ct,w as f}from"./chunk-RPZQDAIQ.js";import{Y as K,c as Ne}from"./chunk-V4F2JFTP.js";import{a as y}from"./chunk-6DDC4Y2S.js";import{f as c,m as r,o as n}from"./chunk-EQYVU4XP.js";r();n();var gr=c(y());function Rn({children:t,...e}){return gr.default.createElement(Qo.Provider,{value:e},t)}var Os=Rn;r();n();var le=c(y()),Fr=c(G());r();n();var ue=c(y());at();var ve=(0,ue.createContext)({signInfo:null,currencyId:null,params:{walletId:null,inscriptions:[],from:"",to:"",utxoType:1,txType:null,protocolId:null,mintType:Zt.parallel},feeData:{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{},canTransferAmount:"0"},lifecycle:{beforePostTx:null},onFeeDataChange:()=>{}});function Q(){return(0,ue.useContext)(ve)}function Mt(){let{signInfo:t}=Q();return t}function ce(){let{currencyId:t}=Q();return t}function ot(){let{params:t}=Q();return t}function Me(){let{feeData:t}=Q();return t}function pe(){let{onFeeDataChange:t}=Q();return t}function tt(){let t=Mt(),{inscriptions:e}=ot(),{inscriptionOutput:o}=Me(),i=o||t?.inscriptionOutput||"0";return{inscriptionOutput:i,inscriptionsCount:e.length,total:q(i,e.length)}}function yt(){let{feeData:t}=Q();return{fees:t.revealTxFees,totalFee:(t.revealTxFees||[]).reduce((e,o)=>it(e,o),"0")}}function xt(){let{feeData:t}=Q();return t.commitTxFee}function Z(){let{feeData:{feeSelectedSat:t={}}}=Q(),{type:e}=t,o=Mt(),i;return e===F.CUSTOM?i=t.satBytes:i=o?.[mo[e]],{...t,satBytes:i||o?.normal||0}}function Ir(){let{feeData:t}=Q();return t.canTransferAmount}function Sr(){let{lifecycle:t}=Q();return t}r();n();var Ar=c(y());lt();function $n(t,e){let o=j(e||Y),[,i]=Po({coinId:e||Y,address:t,chainId:o?.chainId},{pollingInterval:20*1e3});return(0,Ar.useMemo)(()=>i||{},[i])}var Er=$n;function Wn({defaultFeeData:t,currencyId:e,params:o,lifecycle:i,children:s}){let{from:m,to:a,netWorkCoinId:u,...p}=o,l=(0,Fr.useSelector)(qt),_=Er(m,u),[g,C]=(0,le.useState)(t||{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{satBytes:0,type:F.STANDARD},canTransferAmount:"0"}),w=bt((I,x)=>{C(A=>({...A,[I]:x}))});return le.default.createElement(ve.Provider,{value:{signInfo:_,currencyId:e??l.currencyId,params:{...p,from:m,to:a||m},lifecycle:i,feeData:g,onFeeDataChange:w}},s)}var De=Wn;r();n();r();n();var P=c(y());L();r();n();var Tt=c(y()),ke=c(Ne());r();n();var Dt={root:"_root_1mbnk_1","send-page-base-container":"_send-page-base-container_1mbnk_7",sendPageBaseContainer:"_send-page-base-container_1mbnk_7","send-page-base-container__header":"_send-page-base-container__header_1mbnk_13",sendPageBaseContainerHeader:"_send-page-base-container__header_1mbnk_13","send-page-base-container__wrapper":"_send-page-base-container__wrapper_1mbnk_16",sendPageBaseContainerWrapper:"_send-page-base-container__wrapper_1mbnk_16","send-page-base-container__inner-wrapper":"_send-page-base-container__inner-wrapper_1mbnk_17",sendPageBaseContainerInnerWrapper:"_send-page-base-container__inner-wrapper_1mbnk_17","send-page-base-container__content":"_send-page-base-container__content_1mbnk_25",sendPageBaseContainerContent:"_send-page-base-container__content_1mbnk_25","send-page-base-container__footer":"_send-page-base-container__footer_1mbnk_30",sendPageBaseContainerFooter:"_send-page-base-container__footer_1mbnk_30"};function Hn({className:t,loading:e,slot:o={},children:i,contentClassName:s}){let{header:m,footer:a,top:u}=o;return Tt.default.createElement(E.Container,{loading:e,className:(0,ke.default)(Dt.root,t)},Tt.default.createElement(E.Box,{className:Dt["send-page-base-container__header"]},m),Tt.default.createElement(E.Box,{className:Dt["send-page-base-container__wrapper"]},u,Tt.default.createElement(E.Box,{className:Dt["send-page-base-container__inner-wrapper"]},Tt.default.createElement(E.Box,{className:(0,ke.default)(Dt["send-page-base-container__content"],s)},i),Tt.default.createElement(Bt,{offsetBottom:0,placeholder:!0},a))))}var fe=Hn;r();n();var Re=c(y()),Br=c(be());r();n();var V=c(y());L();r();n();var hr=c(y()),Ue=c(G());at();var br=(t,e)=>{let o=t.coinId,i=Co(o),s=(0,Ue.useSelector)(qt),m=(0,Ue.useSelector)(({metamask:p})=>p.currencies),a=(0,hr.useMemo)(()=>e&&m?.find(p=>p.currencyId===e)||s,[e]),u=q(i,a?.usdToThisRate);return vo(to,p=>{let l=so(p,{symbol:t.symbol}),_=no(q(p,u),{useApproximate:!1,symbol:a.symbol});return`${l}(${_})`})};lt();at();var Nr=({bytes:t,value:e,signInfo:o={},coinId:i,currencyId:s,onChange:m})=>{let a=Lo(),{coin:u,baseCoin:p}=Fo(i,!0),[l,_]=(0,V.useState)(e?.customSatBytes),g=br(p,s),C=f("extension_wallet_transaction_text_minute");(0,V.useEffect)(()=>{!l&&o?.normal&&_(o?.normal)},[o]);let w=(0,V.useCallback)(T=>{_(T)},[]),I=(0,V.useCallback)(()=>{m?.({customSatBytes:l,type:F.CUSTOM,satBytes:l})},[l]),x=u.localType===Wt?f("wallet_extension_transfer_unit_sat_b"):"",A=(0,V.useMemo)(()=>{let{min:T,mempoolMin:v}=o,h=v||T||0;return Gt(l,h)?f("extension_btc_minmum_alert_fee_lowerthan",{feerate:h}):""},[l,o]);return(0,V.useMemo)(()=>[F.SLOW,F.STANDARD,F.FAST,F.CUSTOM].map(T=>{switch(T){case F.SLOW:return{data:{type:F.SLOW,satBytes:o.min,estimatedTime:`${ft(o.maxCost)} ${C}`},unitPrice:`${o.min} ${x}`,totalPrice:g(q(o.min,t),s),type:f(Kt[F.SLOW]),typeKey:F.SLOW,estimatedTime:`${ft(o.maxCost)} ${C}`};case F.STANDARD:return{data:{type:F.STANDARD,satBytes:o.normal,estimatedTime:`${ft(o.normalCost)} ${C}`},unitPrice:`${o.normal} ${x}`,totalPrice:g(q(o.normal,t),s),type:f(Kt[F.STANDARD]),typeKey:F.STANDARD,estimatedTime:`${ft(o.normalCost)} ${C}`};case F.FAST:return{data:{type:F.FAST,satBytes:o.max,estimatedTime:`${ft(o.minCost)} ${C}`},unitPrice:`${o.max} ${x}`,totalPrice:g(q(o.max,t),s),type:f(Kt[F.FAST]),typeKey:F.FAST,estimatedTime:`${ft(o.minCost)} ${C}`};default:return{unitPrice:`${o.max} ${x}`,totalPrice:g(q(l,t),s),estimatedTime:a(o,l),canConfirm:!A,onConfirm:I,components:()=>V.default.createElement(pt.Number,{enableMinus:!1,precision:0,error:A,errorType:pt.TIP_TYPE.always,onChange:w,value:l,size:pt.SIZE.sm,title:x,className:"custom-network-fee__satb"})}}}),[t,o,l])};var Yn=({value:t,coinId:e,bytes:o,signInfo:i,onChange:s,currencyId:m,onClose:a})=>{let u=Nr({bytes:o,value:t,coinId:e,onChange:s,signInfo:i,currencyId:m});return Re.default.createElement(wo,{feeType:t?.type,feeDataList:u?.slice(0,3),onBack:a,custom:(0,Br.last)(u),onChange:({data:p})=>{s?.(p)}})},Or=Re.default.memo(Yn);lt();r();n();var rt=c(y());lt();L();r();n();L();var O=c(y());r();n();var Ct={"output-panel":"_output-panel_1mdhy_1",outputPanel:"_output-panel_1mdhy_1","output-panel__content":"_output-panel__content_1mdhy_4",outputPanelContent:"_output-panel__content_1mdhy_4","output-panel__compare":"_output-panel__compare_1mdhy_7",outputPanelCompare:"_output-panel__compare_1mdhy_7","output-panel-slider__content":"_output-panel-slider__content_1mdhy_13",outputPanelSliderContent:"_output-panel-slider__content_1mdhy_13","output-tag":"_output-tag_1mdhy_16",outputTag:"_output-tag_1mdhy_16"};var de=330,_e=1e4,Gn=({coinId:t,visible:e,outputValue:o,currencyId:i,onClose:s,onChange:m})=>{let[a,u]=(0,O.useState)(String(o));(0,O.useEffect)(()=>{u(String(o))},[o]),(0,O.useEffect)(()=>{e&&u(String(o))},[o,e]);let p=Pt(t,a,{currencyId:i,useApproximate:!1});return e?O.default.createElement(E.Portal,{component:E.Container,className:Ct["output-panel"]},O.default.createElement(Ot,{onBack:s,onClose:s,title:f("wallet_header_title_inscription_sats")}),O.default.createElement(E.Box,{className:Ct["output-panel__content"]},O.default.createElement(pt.Number,{precision:0,value:a,max:_e,min:de,size:pt.SIZE.xl,onChange:l=>{u(l)},suffix:O.default.createElement(S.Text,{size:S.SIZE.sm},"sats")}),O.default.createElement(S.Text,{className:Ct["output-panel__compare"],type:S.TYPE.secondary,size:S.SIZE.sm},p),O.default.createElement(E.Space,{space:4,direction:E.DIRECTION.vertical},O.default.createElement(qe,{value:a,min:de,max:_e,contentClassName:Ct["output-panel-slider__content"],onChange:l=>{u(String(l))}}),O.default.createElement(E.FlexBox,{justify:"space-between"},O.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs},`${de} sats`),O.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs},`${_e} sats`)))),O.default.createElement(Bt.FooterActions,null,O.default.createElement(K,{disabled:!a||!a?.trim(),category:K.CATEGORY.fill,type:K.TYPE.highlight,size:K.SIZE.lg,onClick:()=>{m?.(Math.min(Math.max(a,de),_e)),s?.()}},f("extension_transactions_btn_confirm")))):null},Pr=Gn;var zn=({txType:t,currencyId:e,inscriptionsCount:o,inscriptionOutput:i,coinId:s=Y,totalInscriptionCoinAmount:m,onInscriptionOutputChange:a})=>{let[u,{toggle:p}]=Nt(!1),l=ct.gt(m,0)?m:"0",_=Pt(s,l,{currencyId:e,useApproximate:!0}),g=(0,rt.useMemo)(()=>ao(t),[t]);return rt.default.createElement(rt.default.Fragment,null,rt.default.createElement(mt,{clickable:t===N.RUNES_ETCH?!1:void 0,onClick:()=>{ct.gt(i,0)&&p()},title:f(g)},rt.default.createElement(E.FlexBox,{align:E.ALIGN.center},`${i} sats`,!!o&&o>1&&rt.default.createElement(S.Text,{className:Ct["output-tag"]},"x",o),_)),rt.default.createElement(Pr,{coinId:s,visible:u,currencyId:e,outputValue:i,onClose:p,onChange:a}))},wr=zn;r();n();L();var ye=c(y()),Vn=({coinId:t,currencyId:e,totalCoinAmount:o})=>{let i=j(t),s=Pt(t,o,{currencyId:e,useApproximate:!0});return ye.default.createElement(mt,{title:f("extension_wallet_transaction_item_inscribe_totalfee")},ye.default.createElement(S.Text,{inherit:!0,strong:700},ye.default.createElement(S.DisplayAmount,{noStyle:!0,symbol:i?.symbol,decimals:i?.decimals},o),s))},Lr=Vn;r();n();var kr=c(y()),Ur=c(Pe());var Rr=c(Un());L();r();n();L();oo();r();n();oo();je();eo();lt();var vr=c(be());function Xn({walletId:t,utxoType:e=1,coinId:o=Y}={}){let i=Jt();return async({from:s,coinAmount:m,serviceCharge:a,feeRate:u})=>{let p=await Xt().getRequestHeaders({walletId:t||i,needSign:!0,currency:"usd"}),l={address:s,coinAmount:m,serviceCharge:a,utxoType:e};(0,vr.isNil)(u);let _={coinId:o,utxoRequests:[l]};try{let{data:g}=await Yt(Vt.getBTCUTXO,_,{headers:p});return g?.[0]||{}}catch(g){return{error:!0,errorResp:g}}}}var xe=Xn;lt();at();r();n();var Mr=c(y());function Zn(t){let{inscriptionOutput:e}=tt(),{satBytes:o}=Z(),{walletId:i,from:s,to:m,inscriptions:a,txType:u,mintType:p}=ot(),l=pr(t),_=lr();return(0,Mr.useCallback)(async g=>{let C={};return u===N.RUNES_ETCH?(C={input:g.map(({txHash:x,vout:A,coinAmount:T})=>({vOut:A,txId:x,amount:T})),address:s,feePerB:o,outValue:e,inscriptions:(a||[]).map(({body:x})=>JSON.parse(x))},await _({walletId:i,address:s,tx:C,txType:u,mintType:p})):(C={commitTxPrevOutputList:g.map(({txHash:I,vout:x,coinAmount:A})=>({vOut:x,txId:I,amount:A})),commitFeeRate:o,revealFeeRate:o,inscriptionDataList:(a||[]).map(({contentType:I,body:x})=>({contentType:I,body:x})),revealOutValue:e,changeAddress:s,toAddr:m},await l({walletId:i,address:s,tx:C,txType:u}))},[s,m,a,e,o])}var Te=Zn;function Kn(t=Y){let{walletId:e,from:o,to:i,utxoType:s,inscriptions:m,txType:a,protocolId:u,mintType:p}=ot(),l=Mt(),_=ce(),g=cr({address:o,coinId:t,currencyId:_,txType:a,protocolId:u}),C=Te(ae.CONFIRM),w=xe({walletId:e,utxoType:s}),{beforePostTx:I}=Sr(),{inscriptionOutput:x,total:A}=tt(),{totalFee:T}=yt(),v=xt(),{satBytes:h}=Z(),k=async D=>{let{commitTx:b,revealTxs:B,commitAddrs:R,commitTxFee:At,revealTxFees:Et}=await C(D.utxoList||[]),et=await ho(Wt,b),$=await bo(Wt,B),Ft=[et,...$],ht={signedTx:b,fromAdr:o,serviceCharge:At,toAdr:i||o,itemId:"commitTx",txHash:et,txType:a,extJson:JSON.stringify({protocolId:u,broadcastType:1,nftIds:[]})},Rt=B.map((Fe,st)=>({signedTx:Fe,fromAdr:R?.[st]||o,serviceCharge:Et?.[st],toAdr:i||o,itemId:`revealTx${st}`,txHash:$[st],dependTx:p===Zt.serial?[Ft[st]]:[et],txType:a,extJson:JSON.stringify({protocolId:u,broadcastType:1,nftIds:[]})}));I&&I(ht,Rt);let $t=await Xt().getRequestHeaders({walletId:e,needSign:!0,currency:"usd"});return{txIds:await go({txList:[ht,...Rt]},{headers:$t}),commitTx:b,revealTxs:B,commitAddrs:R,commitTxFee:At,revealTxFees:Et,feeRate:parseInt(h,10),size:parseInt(x,10)}},U=async()=>{let D=await w({from:o,coinAmount:it(A,T),serviceCharge:v,feeRate:h}),b=D.utxoList||[];return await g(b,()=>{}),await k(D)};return()=>new Promise((D,b)=>{if(typeof l?.txSizeLimit=="number"&&m.length>l.txSizeLimit){let B=Ke.warn({alignBottom:!1,maskClosable:!1,title:f("wallet_header_dialog_header_reminder"),text:f("wallet_info_dialog_too_much_inscription"),confirmText:f("wallet_btn_dialog_btn_cancel"),cancelText:f("wallet_bot_dialog_btn_continue"),onCancel:async()=>{try{let R=await U();D(R)}catch(R){b(R)}B.destroy()},onConfirm:()=>{b(new Error(ie)),B.destroy()}})}else(async()=>{try{let B=await U();D(B)}catch(B){b(B)}})()})}var Dr=Kn;var qn=({txId:t,coinId:e,walletId:o,feeError:i,address:s,onConfirm:m,onCancel:a,disabled:u,addressType:p,useTipMessageFillUp:l,onFillUp:_,netWorkCoinId:g},C)=>{let w=(0,Ur.useHistory)(),I=Dr(g),x=Oo(o,a),A=bt(async()=>{try{await x();let T=await I();m&&await m(T)}catch(T){if(!(T?.message===ie)){let h=T?.data?.msg||T?.msg||T?.data?.originalError?.msg||f("wallet_home_toast_network_error");Je.error({title:h})}}},[m]);return(0,kr.useMemo)(()=>{let T=a?{actionType:M.ACTION_TYPE.CANCEL,onClick:a}:null,v={disabled:u,actionType:M.ACTION_TYPE.CONFIRM,onClick:A};return!i&&[J.BALANCE_INSUFFICIENT,J.FEE_BALANCE_INSUFFICIENT].includes(C)&&(T=T||{actionType:M.ACTION_TYPE.CANCEL,onClick:()=>{w.goBack()}},l?v={actionType:M.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_mid_textbtn_manage_utxo"),onClick:async()=>{_&&await _();let h=Rr.default.stringify({addressType:p,coinId:e},{skipEmptyString:!0,skipNull:!0}),k=h?`?${h}`:"";w.push(yo+k)}}:v={txId:t,coinId:e,address:s,walletId:o,actionType:M.ACTION_TYPE.FILL_UP}),[T,v]},[a,u,A,i,C,l,w,p,t,e,s,o,_])},$r=qn;r();n();L();r();n();var Wr=c(y());at();function Hr(){let{totalFee:t}=yt(),{satBytes:e}=Z();return zt(Be(t,e),0)}function Yr(){let t=xt(),{satBytes:e}=Z();return zt(Be(t,e),0)}function Gr(){let{totalFee:t}=yt(),e=xt();return(0,Wr.useMemo)(()=>it(t,e),[t,e])}r();n();r();n();var gt=c(y());at();function Jn(t){let{disabled:e=!1}=t||{},{walletId:o,from:i,utxoType:s}=ot(),[m,a]=(0,gt.useState)(!0),[u,p]=(0,gt.useState)(!0),[l,_]=(0,gt.useState)(null),[g,C]=(0,gt.useState)([]),w=xe({walletId:o,utxoType:s}),I=Te(ae.CAL_FEE),{satBytes:x}=Z(),{total:A}=tt(),T=pe(),{totalFee:v}=yt(),h=xt();return(0,gt.useEffect)(()=>{!e&&(async()=>{if(!Qe(A,0))try{p(!0);let U=await w({from:i,coinAmount:it(A,v),serviceCharge:h,feeRate:x});if(!U?.utxoList?.length){_(z.BALANCE_NOT_ENOUGH);return}if(U.error){let B=U.errorResp.code,R=z.COMMON_ERROR;[z.BALANCE_NOT_ENOUGH,z.PURE_UTXO_NOT_ENOUGH].includes(B)&&(R=B),_(R);return}T("canTransferAmount",U.canTransferAmount||"0"),_(null);let{commitTxFee:D,revealTxFees:b}=await I(U.utxoList);C(U.utxoList),T("commitTxFee",D),T("revealTxFees",b)}catch{_(z.COMMON_ERROR),T("commitTxFee","0"),T("revealTxFees",[])}finally{a(!1),p(!1)}})()},[i,x,A,v,h,I,e]),{isInitLoading:m,isLoading:u,error:l,utxoList:g}}var zr=Jn;function jn(t){let{disabled:e=!1}=t||{},o=Gr(),{total:i}=tt(),s=Ir(),m=Me(),{isInitLoading:a,isLoading:u,error:p,utxoList:l}=zr({disabled:e});return{isInitLoading:a,isLoading:u,error:p,canTransferAmount:s,fee:o,inscriptionOutput:i,feeData:m,utxoList:l}}var Ce=jn;var Qn=()=>{let{utxoList:t,fee:e,error:o,canTransferAmount:i,isLoading:s}=Ce(),m=Mt(),a=Yr(),u=Hr(),p=ct.add(a,u),l=Z(),_=pe();return{bytes:p,signInfo:m,feeError:o,selectedSat:l,feeLoading:s,networkFee:e,canTransferAmount:i,utxoListCount:t?.length||0,onFeeDataChange:_}},Vr=Qn;r();n();var Zr=c(y());L();r();n();var ts=[N.BRC20_DEPLOY,N.BRC20_MINT,N.BRC20_INSCRIBE,N.ORDINAL_NFT,N.ORDINAL_TEXT,N.EARN_BRC30_DEPLOY,N.EARN_BRC30_APPLY,N.EARN_BRC30_REDEEM,N.EARN_BRC30_CLAIM,N.BRC30_INSCRIBE,N.RUNES_ETCH];function Xr(t){return ts.indexOf(t)>-1}var es=({txType:t,feeError:e,isHardware:o,isMpcWallet:i,utxoListCount:s,transferReminder:m,coin:a})=>(0,Zr.useMemo)(()=>Xr(t)?i&&t===N.RUNES_ETCH?{type:_t.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_mpc_not_support")}:o?{type:_t.TIP_TYPE.COMMON_ERROR,message:f("wallet_extension_top_toast_dapp_comingsoon")}:e===z.COMMON_ERROR?{type:_t.TIP_TYPE.FEE_ERROR}:e===z.BALANCE_NOT_ENOUGH?{type:me.FEE_BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_btc_icu",{chainName:a?.chainName})}:e===z.PURE_UTXO_NOT_ENOUGH?{type:me.BALANCE_INSUFFICIENT,message:f("extension_defi_errortip_not_enough_pure_utxo")}:s>100?{type:me.BALANCE_INSUFFICIENT}:{message:m}:{type:_t.TIP_TYPE.COMMON_ERROR,message:f("extension_defi_bot_alert_wallet_upgrade")},[t,e,o,i,s,m]),Kr=es;r();n();var $e={"free-tag":"_free-tag_7hgbl_1",freeTag:"_free-tag_7hgbl_1",actions:"_actions_7hgbl_5"};function os({txId:t,headerProps:e={},slot:o={},confirmButtonProps:i={},netWorkCoinId:s=Y}){let{from:m,walletId:a,txType:u}=ot(),p=Ao(a),l=So(a),[_,{toggle:g}]=Nt(!1),C=ce(),I=To()[m],{bytes:x,signInfo:A,feeError:T,selectedSat:v,feeLoading:h,networkFee:k,canTransferAmount:U,utxoListCount:D,onFeeDataChange:b}=Vr(),{title:B,...R}=e,{inscriptionOutput:At,inscriptionsCount:Et,total:et}=tt(),$=(0,P.useMemo)(()=>ct.add(k,et),[k,et]),Ft=j(s),{showManageUTXO:ht}=Cr(Ft||{},I,!0),Rt=ht&&T!==z.PURE_UTXO_NOT_ENOUGH,{type:$t,message:Xe}=Kr({txType:u,feeError:T,feeLoading:h,utxoListCount:D,isHardware:p,isMpcWallet:l,canTransferAmount:U,networkFee:k,totalUsedCoinAmount:$,coin:Ft}),Fe=$r({txId:t,walletId:a,coinId:s,addressType:I,disabled:!!$t||!!T||!!h||p||D>100,useTipMessageFillUp:Rt,netWorkCoinId:s,...i},$t),st=yr(a),Mn=bt(he=>{b("commitTxFee","0"),b("revealTxFees",[]),b("inscriptionOutput",he)},[]),{top:Dn,footer:kn}=o;return P.default.createElement(fe,{slot:{header:P.default.createElement(Ot,{title:B||f("extension_wallet_header_maintitle_inscribe"),...R}),footer:kn||P.default.createElement("div",{className:$e.actions},P.default.createElement(_t,{type:$t||Ze.TYPE.warn,address:m,message:Xe,coinId:s,walletId:a,fillUpAble:Rt}),P.default.createElement(M,{buttonGroup:Fe}))}},Dn,P.default.createElement(dt,null,P.default.createElement(mt,{title:f("wallet_info_title_inscribe_service_fee")},P.default.createElement(S.Text,{className:$e["free-tag"]},f("wallet_info_tag_inscribe_free_tag"))),P.default.createElement(dr,{coinId:s,loading:h,currencyId:C,networkFee:h&&k==="0"?void 0:k,estimateFailed:!h&&!Number(k),onClick:()=>{g?.(),st({trade:"brc20",all_confirmation:"network_fee"})}}),P.default.createElement(wr,{txType:u,currencyId:C,inscriptionsCount:Et,inscriptionOutput:At,totalInscriptionCoinAmount:et,onInscriptionOutputChange:Mn,coinId:s})),P.default.createElement(dt,null,P.default.createElement(Lr,{coinId:s,currencyId:C,totalCoinAmount:$})),P.default.createElement(dt,{bordered:!1},P.default.createElement(_r,{address:m,walletId:a,title:f("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{st({trade:"brc20",all_confirmation:"wallet_used_address"})}})),_&&P.default.createElement(Or,{bytes:x,currencyId:C,value:v,coinId:s,onClose:g,signInfo:A,onChange:he=>{b("commitTxFee","0"),b("revealTxFees",[]),b("feeSelectedSat",he)}}))}var We=os;r();n();var St=c(y());L();r();n();var jr=c(y()),Qr=c(G());lt();r();n();var qr=c(y());function rs(){let{coin:t}=W(),e=Lt();return(0,qr.useMemo)(()=>[{body:JSON.stringify({p:"brc-20",op:"transfer",tick:t.symbol,amt:e})}],[t.symbol,e])}var Jr=rs;function ns({walletId:t,txSource:e,children:o}){let i=Jr(),s=te(),m=Qt(),{coin:a}=W(),u=vt(),p=Jt(),_=ro(a)?N.BRC20_INSCRIBE:N.BRC30_INSCRIBE,g=(0,Qr.useSelector)(xr),C=(I,x)=>{I.coinAmount=m,I.coinId=x?Y:a.coinId,I.txSource=e||io.NORMAL},w=(I,x)=>{I&&C(I,!0),Array.isArray(x)&&x.forEach(A=>{C(A,!1)})};return jr.default.createElement(De,{defaultFeeData:g,currencyId:s,params:{walletId:t||p,from:u,inscriptions:i,utxoType:ur.INSCRIPTION_USE_NFT_UTXO,txType:_,protocolId:a?.protocolId},lifecycle:{beforePostTx:w}},o)}var ge=ns;r();n();var H=c(y());L();var Ut=c(G()),Sn=c(Ne());var An=c(be());r();n();at();var ss=()=>{let t=se();return Gt(t,0)&&(t="0"),t},tn=ss;r();n();var on=c(y()),rn=c(Ne()),nn=c(Pe()),sn=c(G());r();n();var en={root:"_root_ryl3e_1"};function is({onBack:t,onClose:e,...o}){let i=(0,nn.useHistory)(),s=(0,sn.useSelector)(jt),m=()=>{t&&t(),i.goBack()},a=()=>{e&&e(),i.push(s)};return on.default.createElement(Ot,{className:(0,rn.default)(en.root,o.className),onClose:a,onBack:m,...o})}var an=is;r();n();var He={content:"_content_11o8q_1",totalAmountWrap:"_totalAmountWrap_11o8q_7"};r();n();var ut=c(y());L();r();n();var kt={container:"_container_djh56_1",totalAmount:"_totalAmount_djh56_5","totalAmount-content":"_totalAmount-content_djh56_9",totalAmountContent:"_totalAmount-content_djh56_9","totalAmount-title":"_totalAmount-title_djh56_18",totalAmountTitle:"_totalAmount-title_djh56_18","totalAmount-amount":"_totalAmount-amount_djh56_25",totalAmountAmount:"_totalAmount-amount_djh56_25"};r();n();var as=(t,e)=>{let{coin:o}=W(),i=er(),s=mr(),m=ne(),a=se(),p={total:s,amount:m,available:a}[t];return`${i(e||p,o,{useApproximate:!1,zero:{decimals:!1}})} ${o.symbol}`},mn=as;function ms(t){t||(t=""),typeof t!="string"&&(t=t.toString());let e=t?.length;return e<=20?"15px":e<=22?"14px":e<=24?"13px":"12px"}function us({type:t="total",title:e,maxBtnText:o,maxAmount:i,hiddenMaxButton:s,onMax:m,slot:a={},...u}){let{coin:p}=W(),l=mn(t,i),{bottom:_}=a;return ut.default.createElement(E.Box,{className:kt.container},ut.default.createElement(E.FlexBox,{align:E.ALIGN.center,className:kt.totalAmount,...u},ut.default.createElement(we,{size:we.SIZE.lg,src:p?.image,text:p?.symbol}),ut.default.createElement(E.Box,{className:kt["totalAmount-content"]},ut.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs,className:kt["totalAmount-title"]},e||f("wallet_extension_send_item_total_amount")),ut.default.createElement(S.Text,{ellipsis:{tooltip:!0},className:kt["totalAmount-amount"],style:{fontSize:ms(l)}},l)),!s&&ut.default.createElement(K,{category:K.CATEGORY.fill,type:K.TYPE.gray,size:K.SIZE.xs,onClick:m},o||f("wallet_extension_send_text_max"))),_)}var un=us;r();n();var yn=c(y()),xn=c(G());r();n();var It=c(y());L();r();n();var ln=c(y());r();n();var nt=c(y());L();r();n();var cn={root:"_root_1k6ce_1"};var cs=({coin:t={},onVisible:e,receiveOnly:o,address:i,style:s})=>{let[m,{setTrue:a,setFalse:u}]=Nt();(0,nt.useEffect)(()=>{e&&e(m)},[m]);let p=t.symbol.length>12?`${t.symbol.slice(0,12)}...`:t.symbol;return nt.default.createElement(nt.default.Fragment,null,nt.default.createElement("div",{className:cn.root,onClick:a,style:s},f("wallet_extension_placeorder_textbtn_replenish",{token:p})),nt.default.createElement(Bo,{address:i,visible:m,closeCallback:u,coinId:t.coinId,receiveOnly:o}))},pn=(0,nt.memo)(cs);var fn=c(G());function ps(t){let e=(0,fn.useDispatch)(),o=vt();return ln.default.createElement(pn,{address:o,...t,onVisible:s=>{e(qo(s))}})}var Ye=ps;var ls=()=>{let{coin:t}=W(),e=or();return i=>{let s="";return i.text?s=i.text:i.key&&(s=f(i?.key,i?.args)),i?.type===J.BALANCE_INSUFFICIENT?It.default.createElement(It.default.Fragment,null,s," ",It.default.createElement(Ye,{coin:t,receiveOnly:!0,style:{width:"100%","word-wrap":"break-word"}})):i?.type===J.FEE_BALANCE_INSUFFICIENT?It.default.createElement(It.default.Fragment,null,s," ",It.default.createElement(Ye,{coin:e,style:{width:"100%","word-wrap":"break-word"}})):s}},dn=ls;r();n();var _n={root:"_root_g697e_1"};function fs({renderError:t}){let e=(0,xn.useSelector)(Do),o=dn(),i=t||o;if(!e.key)return null;let s=i(e);return yn.default.createElement("div",{className:_n.root},s)}var Tn=fs;r();n();var Cn=c(Pe()),Ge=c(G());function ds(t){let e=(0,Cn.useHistory)(),o=(0,Ge.useSelector)(jt),i=wt(),{coin:s}=W(),m=(0,Ge.useSelector)(Mo),a=tr();co(()=>{if(!!t){if(xo(s))e.replace(o||lo);else if(!m){let u={pathname:`${fo}/${i}${_o}`};a&&(u.search=`?from=${a}`),e.replace(u)}}})}var gn=ds;r();n();L();var _s=({loading:t,disabled:e,onClick:o,...i})=>uo(()=>[{loading:!e&&t,disabled:e,onClick:o,actionType:M.ACTION_TYPE.CONFIRM,btnText:f("wallet_extension_send_btn_continue"),...i}],[e,t,o,i]),ys=({disabled:t,onClick:e,...o})=>{let i=ar(),s=re();return _s({...o,disabled:t||s,onClick:e||i})},In=ys;function xs({isGlobalLoading:t,renderError:e,headerProps:o={},confirmButtonProps:i={},inputProps:s={},totalAmountProps:m={},slot:a={},classes:u={},checkEmpty:p=!0,inputAmount:l}){let _=(0,Ut.useDispatch)(),{content:g}=u,{header:C,bottom:w,footer:I}=a,x=(0,H.useRef)(),A=(0,Ut.useSelector)($o),T=wt(),v=Lt(),h=(0,Ut.useSelector)(ko),k=(0,Ut.useSelector)(Ro),U=te(),D=rr(),b=tn(),B=(0,H.useRef)(!!v),R=$=>{_(Xo($))},At=()=>{_(Le(b)),R(!0)},Et=m.onMax||At;gn(p),(0,H.useEffect)(()=>{(0,An.isNil)(l)||x.current?.setInputAmount(l.toString())},[l]);let et=In(i);return H.default.createElement(fe,{loading:t,slot:{header:C||H.default.createElement(an,{title:f("wallet_extension_send_title_send"),...o}),footer:t?null:I||H.default.createElement(M,{buttonGroup:et})}},H.default.createElement("div",{className:(0,Sn.default)(g,He.content)},H.default.createElement(No,{ref:x,...s,autoFocus:!A,coinId:T,maximumMode:D,maximumAmount:D?b:null,initialValue:{value:[v||"0",h||"0"],mode:k,flatCurrencyId:U},onAmountChange:([$,Ft],ht)=>{_(Yo(Ft)),_(Le($)),ht&&(R(!1),B.current=!0)},onModeChnage:$=>{_(Go($))},onFlatChange:$=>{$&&_(Zo($.currencyId))}}),B.current&&H.default.createElement(Tn,{renderError:e}),H.default.createElement(Bt,{offsetBottom:m?.fixBottom?80:104,className:He.totalAmountWrap},H.default.createElement(un,{...m,onMax:()=>{Et(),B.current=!0}})),w))}var En=xs;r();n();var Fn=c(y());at();var hn=c(G());function ze(){let t=ne();return(0,Fn.useCallback)(e=>Oe(e,t)?{key:"extension_wallet_send_text_insufficient_balance",args:{},type:J.COMMON_ERROR}:null,[t])}function Ts(){let t=(0,hn.useDispatch)(),e=nr(),o=ze(),i=[e,o],{runErrorFns:s}=oe(i);ee(s,m=>{t(Ho(m))})}var bn=Ts;r();n();var Nn=c(G()),Ie=c(y());je();eo();function Cs(){let t=(0,Nn.useDispatch)(),e=vt(),{coin:o}=W(),[i,s]=(0,Ie.useState)(!0);return(0,Ie.useEffect)(()=>{(async()=>{try{if(!o.coinId)return;let a=await Yt(Vt.postPendingBalanceDetail,{address:e,coinId:o.coinId});a?.data&&t(Jo(a.data.availableWithoutSpending))}finally{s(!1)}})()},[e,o.coinId]),i}var Bn=Cs;r();n();var Ht=c(y());var On=c(G());function gs(){let t=(0,On.useDispatch)(),{isInitLoading:e,error:o,fee:i,feeData:s,canTransferAmount:m}=Ce();return(0,Ht.useEffect)(()=>{t(jo(m))},[m]),(0,Ht.useEffect)(()=>{t(zo(i))},[i]),(0,Ht.useEffect)(()=>{t(Tr(s))},[s]),(0,Ht.useEffect)(()=>{t(Vo(!!o))},[o]),e}var Se=gs;function Is({amount:t,onCancel:e,onConfirm:o,slot:i,...s}){let m=re(),a=Se(),u=Bn(),p=(0,St.useMemo)(()=>{let l=null;return typeof e=="function"&&(l={actionType:M.ACTION_TYPE.CANCEL,onClick:e}),[l,{actionType:M.ACTION_TYPE.CONFIRM,onClick:o,disabled:m,loading:a,btnText:f("wallet_extension_send_btn_continue")}]},[a,m,e,o]);return bn(),St.default.createElement(En,{...s,inputAmount:t,isGlobalLoading:u,slot:{...i||{},footer:St.default.createElement(M,{buttonGroup:p})},checkEmpty:!1,headerProps:{title:f("extension_wallet_header_maintitle_inscribe"),...s.headerProps||{}},totalAmountProps:{...s?.totalAmountProps||{},title:f("extension_defi_bot_textarea_inscribe_balance"),type:"amount"},inputProps:{...s.inputProps||{},disabled:{input:!1,switch:!0}}})}function Ss({walletId:t,...e}){return St.default.createElement(ge,{walletId:t},St.default.createElement(Is,{...e}))}var Yl=Ss;r();n();var X=c(y()),vn=c(G());L();r();n();var Ae=c(y());L();r();n();var Pn={"preview-json":"_preview-json_xaani_1",previewJson:"_preview-json_xaani_1"};var As=({coinId:t,amount:e})=>{let o=j(t),{loading:i,data:s}=po(async()=>{let m={op:"transfer",amount:e,tick:o.symbol};return(await Io(m))?.brcJson||""});return Ae.default.createElement(mt,{title:f("extension_wallet_transaction_item_inscribe_preview")},Ae.default.createElement(E.Spin,{loading:i},Ae.default.createElement(S.Text,{className:Pn["preview-json"]},s)))},wn=As;r();n();var Ve=c(y()),Ee=c(G());function Es(t){let e=(0,Ee.useSelector)(Uo);return(0,Ve.useCallback)(()=>e?{key:"extension_wallet_btc_error_notif_insufficient_btc_icu",args:{chainName:t?.chainName},type:J.FEE_BALANCE_INSUFFICIENT}:null,[e,t])}function Fs(){let t=ze();return(0,Ve.useCallback)(e=>{let o=t(e);return o?{...o,highlight:sr.AMOUNT}:null},[t])}function hs(t,e){let o=(0,Ee.useDispatch)(),i=j(e),s=Es(i),m=ir(),a=Fs(),u=[s,m,a],{runErrorFns:p}=oe(u);ee(p,l=>{o(Ko(l))},t)}var Ln=hs;function bs({headerProps:t={},onCancel:e,onConfirm:o,walletId:i}){let s=(0,vn.useDispatch)(),m=Lt(),a=wt(),[,u]=Eo(a),p=Qt(),l=Se(),_=(0,X.useCallback)(async()=>{await s(Wo(!1))},[s]);return Ln(l,a),X.default.createElement(We,{walletId:i,slot:{top:X.default.createElement(X.default.Fragment,null,X.default.createElement(dt,null,X.default.createElement(fr,{summaryList:[{coinId:a,coinAmount:p}],title:f("extension_wallet_transaction_item_inscribe")})),X.default.createElement(dt,null,X.default.createElement(wn,{coinId:a,amount:m})))},headerProps:t,confirmButtonProps:{onCancel:e,onConfirm:o,onFillUp:_},netWorkCoinId:u?.coinId})}function Ns({txSource:t,walletId:e,...o}){return X.default.createElement(ge,{txSource:t,walletId:e},X.default.createElement(bs,{walletId:e,...o}))}var wf=Ns;export{fe as a,an as b,Ye as c,gn as d,_s as e,En as f,Os as g,xe as h,Or as i,ot as j,We as k,De as l,Yl as m,wf as n};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-BO74DHDC.js.map
