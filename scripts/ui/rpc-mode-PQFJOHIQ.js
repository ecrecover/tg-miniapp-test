import{a as hs,b as xs,c as Cs}from"./chunk-IEIFSDGG.js";import{a as Ts,b as gs}from"./chunk-DLBVTMBN.js";import{d as y,e as kt,g as Ee,h as Se,i as po,j as Mn,k as Un,l as Hn,m as Gn}from"./chunk-TIUK4KJW.js";import{a as Fn}from"./chunk-6Q5IIHLM.js";import"./chunk-5TSSPPXG.js";import{a as uo,b as Po,c as Do,d as St,e as Pt,f as fs,g as _s}from"./chunk-4EURYJGL.js";import{b as Wn,c as It,d as qn,e as Zn,f as Qn,g as Xn,j as jn,k as Jn,l as Rn,m as es,p as os}from"./chunk-T4GCTTFD.js";import{a as Vn,b as zn,c as Pe,d as $n,e as vt,f as Kn,h as Yn}from"./chunk-2N725U3P.js";import"./chunk-44RHJNWT.js";import{a as Ae}from"./chunk-DOBZVR54.js";import{a as Ga}from"./chunk-6E4O4E52.js";import{a as In,b as Nn,c as bn,e as An,f as Sn,g as Pn,h as Ln,i as On}from"./chunk-UWXUUXNE.js";import"./chunk-67PQZKPC.js";import"./chunk-FBJV5UC3.js";import"./chunk-3RTGY6DW.js";import"./chunk-MMZCTKQ6.js";import"./chunk-VTZB4ESB.js";import{a as wn}from"./chunk-LOPAQTXH.js";import{a as kn}from"./chunk-AD5PQ5FU.js";import"./chunk-Z5ROTYBJ.js";import{a as yt,b as En}from"./chunk-C37LCWNI.js";import"./chunk-GEIVS32O.js";import"./chunk-HSXLZU4O.js";import"./chunk-H3SRG5PM.js";import"./chunk-GRLVWTBK.js";import"./chunk-XZRYRRSY.js";import"./chunk-BUD3WOZZ.js";import{a as Bn}from"./chunk-JNNUDHDZ.js";import{a as Dn}from"./chunk-RAXLMNUX.js";import"./chunk-XOAHEW4N.js";import"./chunk-FWLIR37N.js";import{a as vn}from"./chunk-SCZBCO2U.js";import"./chunk-ZZGZKS3R.js";import"./chunk-KPD5HBWY.js";import"./chunk-UNBL3DJE.js";import"./chunk-5Z7DXNIK.js";import"./chunk-TH64D43G.js";import{a as yn}from"./chunk-37OBG2P3.js";import"./chunk-REIQGNZB.js";import{a as Cn}from"./chunk-DSYZP5KR.js";import"./chunk-2XG4UAIK.js";import"./chunk-2K7DYI6B.js";import{a as un,d as fn}from"./chunk-UFQZJGJ2.js";import"./chunk-NZPUYPHL.js";import"./chunk-4QAFBCO2.js";import"./chunk-B553FNEQ.js";import"./chunk-6QKWDR6X.js";import"./chunk-7XFZKU6W.js";import"./chunk-ZJHJYBLR.js";import{a as xn}from"./chunk-5DVBM2WJ.js";import{a as pr,b as _n}from"./chunk-I3U7CKFC.js";import"./chunk-ZPDRUAGN.js";import{a as hn}from"./chunk-WCH23YYN.js";import"./chunk-NZZFB6IS.js";import{a as Tn,b as gn,d as So,e as dr,g as ur}from"./chunk-35PGDXR7.js";import"./chunk-PUO23DIP.js";import"./chunk-O2J764NL.js";import{e as cr}from"./chunk-CDLW656Z.js";import"./chunk-3K3KMGWB.js";import"./chunk-5EZVDCYS.js";import"./chunk-475E6NBR.js";import"./chunk-RC5IAFKK.js";import"./chunk-4VLUHY4K.js";import{b as xt,c as tn,d as ue,e as A,f as an,h as mn,j as ln,k as cn,l as Ct,n as pn}from"./chunk-IHPHPUUG.js";import"./chunk-ZEWK7OGU.js";import{a as D}from"./chunk-QVA4WXOQ.js";import"./chunk-EX22SDGB.js";import"./chunk-4RARGC4D.js";import{a as dn}from"./chunk-OQOFXHGC.js";import"./chunk-3QA2SYRR.js";import"./chunk-3SC55VQ2.js";import"./chunk-VTLNAOHG.js";import"./chunk-Y7YPG2EJ.js";import"./chunk-7R67VE77.js";import{b as de}from"./chunk-NHGZUGLZ.js";import"./chunk-G5LEAVCY.js";import"./chunk-ACHWU2H6.js";import"./chunk-ZPFBKNRM.js";import{a as lr,i as ht}from"./chunk-7DP5LYUM.js";import{a as te}from"./chunk-BVXKJJ4A.js";import"./chunk-TBBE7OKY.js";import"./chunk-7HJDVUH5.js";import{b as go,c as re,d as Lo,e as ys}from"./chunk-FUQYZ7CU.js";import{b as X,c as ke,d as Nt,e as fo,f as ts,g as wt,h as rs,i as fr,j as _o,k as bt,l as To,m as _r,n as ns,o as ss,p as is,q as as,r as ms,s as ls,t as Tr,u as cs,v as ps,w as ds,y as us,z as At}from"./chunk-JBYIJGSA.js";import"./chunk-QKBD2KSL.js";import{a as w,b as N,c as Ze}from"./chunk-VTOQBCNE.js";import"./chunk-5TLQ2D7N.js";import"./chunk-ISL2MCWJ.js";import"./chunk-NEFFYVGA.js";import"./chunk-OUTTG7YQ.js";import"./chunk-LBJYBJBE.js";import{b as Et}from"./chunk-KUI26AZJ.js";import{c as co}from"./chunk-E2XQ2FKN.js";import"./chunk-GLID42E7.js";import"./chunk-VDMZHNTV.js";import"./chunk-2E742IIC.js";import{a as Ha}from"./chunk-R53OLZPP.js";import"./chunk-7PVSIZ6H.js";import"./chunk-H7DITLB3.js";import"./chunk-2GMLPDYZ.js";import"./chunk-DY54SY5O.js";import"./chunk-REOQ3O2A.js";import{X as lo}from"./chunk-VQBK6IHT.js";import"./chunk-CTT7GD4C.js";import"./chunk-LQAOHG2H.js";import{b as Xr}from"./chunk-WNQ6F6VV.js";import"./chunk-LEADLFDQ.js";import"./chunk-DGK7TBBE.js";import"./chunk-6Y7ULJF6.js";import"./chunk-3YH3AGVS.js";import"./chunk-3LB7TUPB.js";import"./chunk-TK6JYPIW.js";import"./chunk-OS6E6KVM.js";import"./chunk-GZRBUDXF.js";import"./chunk-WY46TT4P.js";import"./chunk-MTMUCMTY.js";import"./chunk-S6N4IJX7.js";import"./chunk-ZD4EJWX6.js";import{c as on}from"./chunk-WGCZSWYA.js";import"./chunk-IINHHLHP.js";import{e as rn,k as nn,l as sn}from"./chunk-DY2YURLY.js";import"./chunk-KXZSXP3G.js";import{d as mo}from"./chunk-6HXVFU7V.js";import"./chunk-D5FMQLJG.js";import{d as mr}from"./chunk-3I7UBQEQ.js";import"./chunk-DXRBY5MU.js";import"./chunk-6FR2UIE7.js";import{a as Jr}from"./chunk-5GMHHIH5.js";import"./chunk-7KCWBFQ2.js";import"./chunk-QLUP7GYN.js";import"./chunk-7Y44NCE5.js";import"./chunk-BKPOG6ZD.js";import"./chunk-OZMVWMFO.js";import"./chunk-KTO7CPX7.js";import"./chunk-P3XTPXPO.js";import"./chunk-S6TPD26J.js";import"./chunk-4IY6P5HR.js";import"./chunk-FQWGOLDH.js";import{R as en,p as Rr}from"./chunk-QEPBNPHF.js";import"./chunk-3JLS3TGD.js";import"./chunk-KDP5Z4RF.js";import"./chunk-W234FNSM.js";import"./chunk-DDO6HXRN.js";import"./chunk-CLWWTOKP.js";import{a as M}from"./chunk-KZ2PCELG.js";import{b as mt}from"./chunk-C7ZG4INB.js";import{a as be}from"./chunk-J5ANWCEO.js";import{f as ro,s as no,w as Ce}from"./chunk-VMO2INN3.js";import"./chunk-J4TF3RT7.js";import{A as zr,a as ye,d as lt,e as ct,j as oe,q as Vr}from"./chunk-6FOZGMAL.js";import{$ as qr,Aa as pe,Ba as dt,Ca as ut,Da as ft,Ea as _t,Fa as Tt,Ga as ao,Ha as gt,R as Kr,S as Yr,_a as Qr,a as Q,i as $r,xa as Zr,ya as pt,za as io}from"./chunk-2MV3WEYP.js";import{Bb as at,lb as Hr,n as V,pb as Gr,qb as Wr,y as b}from"./chunk-HPXM6RSK.js";import{e as Ao,m as so}from"./chunk-IUIJ46C3.js";import"./chunk-XRXUVH6X.js";import"./chunk-KZ3ZU675.js";import{a as z}from"./chunk-NJ5CWPUY.js";import"./chunk-UMJMJOW4.js";import"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import{a as Da}from"./chunk-O5JCC6KG.js";import{d as Mr,f as Ma}from"./chunk-MAIAJ7GD.js";import"./chunk-4PGNX6E2.js";import"./chunk-DBHB6SUD.js";import"./chunk-6UYK5TIR.js";import"./chunk-I56VJWE4.js";import"./chunk-PS3S6BG3.js";import"./chunk-RT4Y2U5N.js";import"./chunk-2VHH444P.js";import{a as ae,b as jr}from"./chunk-RIMU4JTV.js";import{f as Ur}from"./chunk-MGLVPWSV.js";import{c as Ua}from"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import"./chunk-AMVK42SC.js";import"./chunk-D6RIE45O.js";import"./chunk-XCAARJ7Q.js";import{c as qe}from"./chunk-JXCCIV3J.js";import"./chunk-AOA7NX2Y.js";import"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import{Db as it,Kb as ee,Kc as ar,Lb as Br,Wb as Ba,Zb as Fr,ib as $,jc as Fa,kb as Or,lb as $e,m as ze,nb as nt,o as Lr,ob as st,pb as Ke,qb as bo,rb as to,xb as Ye,yb as ie,za as Oa}from"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import{A as xe,C as W,F as oo,G as Dr,n as Sr,p as P,x as Pr}from"./chunk-SOHTSUTI.js";import{I as v,f as eo,m as U,o as Ar,w as l}from"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-E24EBHFY.js";import{M as F,S as ir,Y as O,c as R}from"./chunk-V4F2JFTP.js";import{a as _,g as La}from"./chunk-6DDC4Y2S.js";import"./chunk-TEY24VZN.js";import"./chunk-RKHQOOTU.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-F4JTGWJH.js";import"./chunk-YUXYCITH.js";import"./chunk-RMV3AS5X.js";import"./chunk-SF2LTPAC.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{f as m,h as sr,m as n,o as s}from"./chunk-EQYVU4XP.js";n();s();var et=m(_()),Na=m(b()),vo=m(z());n();s();var q=m(_()),J=m(z());n();s();var I=m(_()),Bo=m(b()),Bs=m(z());v();Ba();Fa();n();s();var me=m(_()),Es=m(z()),ks=m(R()),Is=m(lr());v();n();s();var Oo={button:"_button_l2q1y_1",showButton:"_showButton_l2q1y_5",editIcon:"_editIcon_l2q1y_11"};var Wa=190,vs=({dataSource:e,backupHeight:t,scrollTop:o})=>{let r=(0,me.useMemo)(()=>e.length>=8&&o>Wa,[e.length,o]),{paddingBottom:i,buttonPaddingBottom:a,absoluteBottom:c}=Pn({isButtonAbsolute:r,backupHeight:t});return me.default.createElement("div",{className:Oo.wrapper},me.default.createElement("div",{style:{paddingBottom:i}},me.default.createElement(mr,{className:"rc-mode-home__tokens",dataSource:e,renderItem:p=>me.default.createElement(mr.Coin,{name:p?.name,symbol:p?.symbol,to:`${ao}?${Is.default.stringify({address:p?.address})}`,balance:p.balance||"0",market:!1})})),me.default.createElement("div",{className:`${r?Oo.showButton:""} ${Oo.button}`,style:{bottom:c,paddingBottom:a}},me.default.createElement(Es.Link,{to:ft},me.default.createElement(O,{circle:!0,type:O.TYPE.primary,category:O.CATEGORY.outline},me.default.createElement(F,{className:(0,ks.default)("okx-wallet-plugin-edit-wallet",Oo.editIcon)}),l("developer_mode_home_maintitle_managecpt")))))};n();s();var De=m(_()),ws=m(b()),bs=m(z()),As=m(lr());n();s();var Ns=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"developer_mode_home_btn_faucet",icon:"okx-wallet-plugin-faucet-1",type:"FAUCET",disabledText:"extension_wallet_home_tooltip_no_faucet"},{text:"developer_mode_home_btn_t_tradinghistory",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var Ss=()=>{let e=(0,ws.useSelector)(at),t=yt(),o=(0,bs.useHistory)(),r=ue(),{extensionConfig:i}=D("rpc_info"),a=(0,De.useMemo)(()=>r.filter(({balance:k})=>!!Number(k)),[r]),c=(0,De.useCallback)(()=>{a.length===1?o.push(`${pe}?${As.default.stringify({address:a[0]?.address})}`):o.push(ut)},[a]),p=(0,De.useCallback)(()=>{e?t():o.push(io)},[e]),d=()=>{o.push(Tt)},f=(0,De.useCallback)(()=>{i.faucetUrl&&globalThis.open(i.faucetUrl)},[i.faucetUrl]),{hasNewFeature:T}=An(),g=()=>{Rr({button_name:"more",site:""})},h=()=>{o.push($r)},x=(0,De.useCallback)(k=>{switch(k.type){case"SEND":c();break;case"RECEIVE":p();break;case"HISTORY":d();break;case"FAUCET":f();break;case"DAPP_CONNECT":h();break;case"MORE":g();break;default:break}},[h,f,d,p,c]),E=(0,De.useMemo)(()=>Ns.map(k=>k.type==="FAUCET"?{...k,disabled:!i?.faucetUrl}:k.type==="MORE"?{...k,hasNewFeature:T}:k),[T,i]);return{clickHandle:x,iconOptions:E}};n();s();var Dt=m(_()),gr=m(b()),Ds=m(z());v();n();s();var Ka=m(_()),Ya=m(b());n();s();var za=m(_()),$a=m(R());var Ps="SHOW-SWITCH";var Ls=()=>{let e=te(),t=(0,Ds.useHistory)(),o=ue(),{extensionConfig:r}=D("rpc_info"),i=de(),[a,c]=Dt.default.useState(!0),p=(0,gr.useSelector)(at),d=(0,gr.useSelector)(Hr);oe(()=>{e.get("from")==="setting"&&(c(!1),t.replace({search:""}),Ar.listen(Ps,()=>{c(!0)}))});let f=(0,Dt.useMemo)(()=>o.find(({address:T})=>!T)||{},[o]);return{rpcInfo:r,mainToken:f,chainTokens:o,walletAccount:d,ethereumAccount:i,isNotBackupWallet:p,switchVisible:a}};n();s();var Os={wrapper:"_wrapper_11hdl_1"};var Fs=()=>{let e=(0,Bs.useHistory)(),t=yt(),o=(0,Bo.useDispatch)(),{rpcInfo:r,chainTokens:i,isNotBackupWallet:a,mainToken:c,ethereumAccount:p}=Ls(),d=ht(),f=(0,I.useRef)(null),[T,g]=(0,I.useState)(0),[h,x]=(0,I.useState)(0),E=(0,I.useRef)(null),{unapprovedRequestCount:k,unapprovedPermissionsRequestId:ne}=os(),Z=In();(0,I.useEffect)(()=>{a&&k!==0?t({text:l("wallet_dapp_conncetion_alert_backup_wallet")},ne):k>0&&e.push(Kr)},[a,k]),(0,I.useEffect)(()=>{(async()=>{k===0&&await o(Xr())})()},[k]);let{isRpcMode:H}=(0,Bo.useSelector)(mo);(0,I.useEffect)(()=>{H||e.replace(Q)},[H]);let Re=(0,Bo.useSelector)(Gr),se=Fr()===Br;(0,I.useEffect)(()=>{Re&&se&&globalThis.platform.openExtensionInPopup(pt)},[]);let er=no(c.balance),{clickHandle:No,iconOptions:Ve}=Ss(),{isNeedShowDisconnectUpgrade:ot,setDisconnectUpgrade:tt}=kn(),or=(0,I.useCallback)(()=>{ot&&(oo.success({title:l("wallet_extension_card_subtitle_disconnect_update")}),tt())},[ot,tt]),[tr,wo]=(0,I.useState)(co.init),rr=Dn(),{run:G}=Vr(()=>{x(E.current?.scrollTop||0)},{wait:50,maxWait:50}),rt=()=>{!r.rpcUrl||(wo(co.loading),Ts(r.rpcUrl).then(()=>{console.log("rpc success"),wo(co.success)}).catch(()=>{console.log("rpc failed"),wo(co.failed)}))};return(0,I.useEffect)(()=>{rt()},[r]),(0,I.useLayoutEffect)(()=>{f.current&&a&&g(f.current?.clientHeight||0)},[a]),I.default.createElement("div",{className:Os.wrapper,ref:E,onScroll:()=>{G()}},I.default.createElement("div",null,I.default.createElement(Ln,{titleLeft:d?.keyringName,titleRight:d?.walletName,subTitle:V(p),address:p,chainName:r?.name}),I.default.createElement(bn,{balance:er,symbol:c.symbol}),I.default.createElement(Sn,{clickHandle:No,iconOptions:Ve}),I.default.createElement(vs,{dataSource:i,scrollTop:h,backupHeight:a?T+24:0})),I.default.createElement(Nn,{disconnectCallback:or}),I.default.createElement("div",{ref:f},I.default.createElement(En,{offsetBottom:24})),I.default.createElement(On,{showBackup:()=>{}}),I.default.createElement(gs,{visible:tr===co.failed,onRetry:rt,onChangeNet:()=>{e.push(`${Yr}?tab=${rr?.networkType??"1"}`)}}),Z&&I.default.createElement(wn,{actionMap:{["RECOVER"]:()=>{e.push(`${Qr}?action=${on.RECOVER}`)},["SWITCH_WALLET"]:()=>{e.push(`${qr}?fromHome=1`)}}}))};n();s();var Ys=m(_());n();s();var Fo=m(_()),Ms=m(b());var Us=m(ze()),Hs=m(Ha());ee();var hr=class extends Hs.default{constructor(){super();sr(this,"DROPPED_BUFFER_COUNT",3);sr(this,"droppedBlocksBufferByTxHash",new Map);this.confirmedTxs=[],this.web3=null}setWeb3(o){this.web3=o}setConfirmedTxs(o){this.confirmedTxs=o}async checkPendingTx(o,r,i){let a=[o,...o.txPool],c=0,p;(await Promise.allSettled(a.map(f=>this.checkOnePendingTx(f)))).forEach(f=>{if(f.status==="fulfilled"){let{value:T={}}=f;if(T.status==="dropped")c++;else if(T.status==="confirmed"){let{txId:g,transactionReceipt:h}=T;p={id:g,transactionReceipt:h}}}}),p?r(p,o.id):c===a.length&&i(o.id)}async checkOnePendingTx(o){let{id:r,txHash:i}=o;if(!i||o.status===w.DROPPED||this.checkIfNonceIsTaken(o))return{status:"dropped"};try{let a=await this.web3.eth.getTransactionReceipt(i);if(a?.blockNumber)return{status:"confirmed",txId:r,transactionReceipt:a}}catch(a){throw new Error(a)}return await this.checkIfTxWasDropped(o)?{status:"dropped"}:{}}checkIfNonceIsTaken(o){return this.confirmedTxs.some(r=>r.id!==o.id&&to(ae(r.txParams.nonce),ae(o.txParams.nonce)))}async checkIfTxWasDropped(o){let{id:r,txHash:i,txParams:{nonce:a,from:c}}=o,p=`${r}-${i}`,d;try{d=await this.web3.eth.getTransactionCount(c)}catch{return!1}if((0,Us.isNil)(d)||bo(ae(a),d))return!1;this.droppedBlocksBufferByTxHash.has(p)||this.droppedBlocksBufferByTxHash.set(p,0);let f=this.droppedBlocksBufferByTxHash.get(p);return f<this.DROPPED_BUFFER_COUNT?(this.droppedBlocksBufferByTxHash.set(p,f+1),!1):(this.droppedBlocksBufferByTxHash.delete(p),!0)}};function Gs(){let e=xt(),t=qn(),o=(0,Ms.useSelector)(Et),r=lt(de()),i=lt(Pe()),a=lt(Vn()),c=(0,Fo.useRef)(!1),p=(0,Fo.useRef)(new hr),d=async(g,h,x)=>{let E=await Wn({txId:g,replaceTxId:h,tx:x});t(E)},f=g=>{d(g,null,{status:w.DROPPED,finishTime:+new Date})},T=({id:g,transactionReceipt:h},x)=>{let E={blockNumber:h.blockNumber,gasUsed:h.gasUsed,finishTime:+new Date,extraParams:{contractAddress:h.contractAddress}};h.status?E.status=w.SUCCEED:E.status=w.FAILED,d(x,g,E)};(0,Fo.useEffect)(()=>{(async()=>{if(!(i.current.length===0||c.current)){c.current=!0;try{let h=await e();p.current.setWeb3(h),p.current.setConfirmedTxs(a.current);let x=null;try{x=await h.eth.getTransactionCount(r.current,"latest")}catch{}await Promise.all(i.current.map(E=>x!==null&&bo(ae(E.txParams.nonce),x)?null:p.current.checkPendingTx(E,T,f)))}finally{c.current=!1}}})()},[o,e])}n();s();var Lt=m(ze()),ho=m(_()),Ot=m(b());var Ws=m(Da());var qa=3*60*1e3,Za={mainTokens:[],chainTokens:[]},Vs=()=>{let e=(0,Ot.useDispatch)(),t=(0,ho.useRef)(null),o=mn(),r=(0,ho.useRef)(Za),i=cn(),{isRpcMode:a}=(0,Ot.useSelector)(mo);(0,ho.useEffect)(()=>{let{chainId:d,chainTokens:f}=i,T=(0,Lt.map)((0,Lt.uniqBy)(f,"address"),({address:g})=>g||"");r.current={chainId:d,tokenAddresses:T}},[i]);let c=()=>{clearInterval(t.current),t.current=null},p=async()=>{try{let{chainId:d,tokenAddresses:f}=r.current;f.length&&(await o(d,f))?.forEach(({price:g="0",address:h})=>{e(sn({chainId:d,address:h,price:g}))})}catch(d){Ws.default.debug(`fetch coin price failed 
${d}`)}};oe(()=>{p()}),(0,ho.useEffect)(()=>(a?t.current=setInterval(()=>{p()},qa):c(),()=>{c()}),[a])};n();s();var zs=m(_()),$s=m(ze());var Ks=()=>{let e=Ct(),t=pn(),{rpcNetworks:o=[]}=vn(),r=tn(()=>o,o,(i,a)=>!(0,$s.isEqual)(i,a));zs.default.useEffect(()=>{let i=t?.reduce((a,{walletIdentities:c})=>[...a,...c.map(({account:{mainnet:p}})=>p)],[]);r.forEach(async a=>{i.forEach(c=>{let p=a.chainId;e(p,void 0,{...a,account:c})})})},[t,r])};var Qa=()=>(Bn(),_s(),Vs(),Gs(),Ks(),null),qs=(0,Ys.memo)(Qa);n();s();var Bt=m(_()),Zs=m(z());var Xa=()=>{let e=(0,Zs.useHistory)(),t=te(),o=t.get("showClose"),r=t.get("address"),{extensionConfig:i}=D("rpc_info"),a=A(r),c=de(),p=`ethereum:${c}`;return Bt.default.createElement(dn,{navigator:{bordered:!1,onClose:o?()=>{e.push(Q)}:null,closeable:!0},content:{symbol:a?.symbol,coinLogo:a?.icon,chainName:i?.name,walletAddress:c,aggregation:!1,QRCodeAddress:p}})},Qs=(0,Bt.memo)(Xa);n();s();var _e=m(_());var pi=m(b());n();s();var Xs=m(_());var js=m(z()),Mo=m(b());var ja=()=>{let e=(0,js.useHistory)(),t=(0,Mo.useDispatch)(),r=te().get("showClose"),i=(0,Mo.useSelector)(bt),a=(0,Mo.useSelector)(X),c=A(a),p=()=>{setTimeout(()=>{t(At())},200)},d=()=>{p(),e.goBack()},f=r?()=>{p(),e.push(i||Q)}:null;return Xs.default.createElement(M,{title:c?.symbol,icon:{text:c?.symbol},onBack:d,onClose:f})},Js=ja;n();s();var Qe=m(_()),Uo=m(b());v();function Ja(){let e=(0,Uo.useDispatch)(),t=(0,Uo.useSelector)(ke),o=(0,Uo.useSelector)(Nt),r=(0,Qe.useRef)(null),i=c=>{let{value:p}=c.target,d=null;p?p&&!lo(p,{allowNonPrefixed:!1})&&(d={key:"wallet_manage_crypto_errortip_invalid_address_tips"}):d={key:"wallet_transfer_errortip_receive_address_empty"},e(is(p)),e(as(d))};(0,Qe.useLayoutEffect)(()=>{r.current.focus()},[]);let a=l("wallet_extension_transaction_placeholder_input_address");return Qe.default.createElement(Ae.Row,null,Qe.default.createElement(P.TextArea,{onRef:c=>{r.current=c},value:t,label:l("wallet_extension_transaction_input_label_to"),placeholder:a,size:P.SIZE.xl,autoResize:!0,errorType:P.TIP_TYPE.always,error:o&&l(o.key,o.args),onChange:i}))}var Rs=Ja;n();s();var fe=m(_()),Le=m(b());v();ee();n();s();var Ft={"max-button":"_max-button_5lu07_1",maxButton:"_max-button_5lu07_1",balance:"_balance_5lu07_12","balance-wrap":"_balance-wrap_5lu07_16",balanceWrap:"_balance-wrap_5lu07_16"};function Ra(){let e=(0,Le.useDispatch)(),t=(0,Le.useSelector)(X),o=A(),r=A(t),i=o?.balance,a=Po(),c=!t,{run:p,cancel:d}=zr(f=>{let T=null,g=$e(i,a);nt(g,0)?T={key:"wallet_transfer_errortip_mainchain_coin_insufficient",args:{chainSymbol:o?.symbol}}:Ke(f,c?g:r?.balance)&&(T={key:"wallet_transfer_errortip_insufficient_balance"}),e(ls(T))},{wait:100});return ct(d),p}function em(){let e=(0,Le.useDispatch)(),t=A(),o=(0,Le.useSelector)(X),r=(0,Le.useSelector)(fo),i=(0,Le.useSelector)(wt),a=A(o),c=a?.balance,p=uo(c,{symbol:a?.symbol,decimals:a?.decimals}),d=Ra(),f=Po(),T=(0,fe.useRef)(!!r),g=x=>{T.current=!0,e(ms(x))},h=()=>{if(o)g(c);else{let x=$e(c,f);g(st(x,0)?"0":x)}};return(0,fe.useEffect)(()=>{T.current&&d(r)},[r,f,t?.balance]),fe.default.createElement(Ae.Row,null,fe.default.createElement(P.Number,{placeholder:U.showFloorTruncation(0,6,{needZero:!0}),title:l("wallet_extension_send_subtitle_amount"),size:P.SIZE.xl,enableMinus:!1,precision:a?.decimals,value:r,error:i&&l(i.key,i.args),errorType:P.TIP_TYPE.always,onChange:g,action:fe.default.createElement(Ce.Text,{size:Ce.SIZE.xs,type:Ce.TYPE.secondary,className:Ft["balance-wrap"],onClick:h},`${l("wallet_extension_send_text_balance")}:`,fe.default.createElement(Ce.Text,{inherit:!0,ellipsis:{tooltip:!0},className:Ft.balance},p)),suffix:fe.default.createElement(Ce.Text,{className:Ft["max-button"],onClick:h},l("wallet_extension_send_text_max"))}))}var ei=em;n();s();var Oe=m(_()),ve=m(b()),oi=m(Ua()),ti=m(ze());v();ee();n();s();function om(){let e=(0,ve.useDispatch)(),t=(0,ve.useSelector)(X),o=A(t),r=(0,ve.useSelector)(ke),i=(0,ve.useSelector)(fo);(0,Oe.useEffect)(()=>{if(t&&lo(r)&&o?.decimals){let a=!i||(0,ti.isNaN)(Number(i));e(Tr(xn(r,a?"0":(0,oi.addHexPrefix)(jr($(i,10**o?.decimals))))))}},[t,o?.decimals,r,i])}function tm(){let e=(0,ve.useDispatch)(),o=!(0,ve.useSelector)(X),r=(0,ve.useSelector)(rs);return om(),o?Oe.default.createElement(Ae.Row,null,Oe.default.createElement(P,{title:Oe.default.createElement("div",{className:"rpc-evm-send-edit-input-data__title"},l("developer_mode_send_maintitle_gasprice"),Oe.default.createElement(xe,{title:l("developer_mode_send_tooltip_additional_data"),placement:xe.DIRECTION.topRight},Oe.default.createElement(F,{className:"okx-wallet-plugin-information-circle rpc-evm-send-edit-input-data__info-icon"}))),placeholder:l("developer_mode_select_a_token_input_optional"),errorType:P.TIP_TYPE.always,size:P.SIZE.xl,value:r,onChange:i=>{e(Tr(i.target.value))}})):null}var ri=tm;n();s();var xo=m(_()),Ho=m(b()),ni=m(R()),si=m(ze());v();ee();n();s();function rm(){let e=(0,Ho.useDispatch)(),t=(0,Ho.useSelector)(_o),o=(0,Ho.useSelector)(To),r=p=>{e(cs(p))},i;t&&(Ke(t,o)?i=l("developer_mode_send_tooltip_higher",{num:o}):nt(t,o)&&(i=l("developer_mode_send_tooltip_lower",{num:o})));let a=l("developer_mode_send_maintitle_nonce1"),c=`${(0,si.isNil)(o)?"":U.thousandFormat(o)}`;return xo.default.createElement(Ae.Row,{className:"rpc-evm-send-edit-nonce",noMargin:!0},xo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__inner"},xo.default.createElement(P.Number,{innerClassName:(0,ni.default)({"rpc-evm-send-edit-nonce__warning-input":!!i}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:a,placeholder:c,size:P.SIZE.xl,value:t,onAdd:()=>!t&&o!==null?(r(Or(o,1)),!1):!0,onSub:()=>!t&&Ke(o,0)?(r($e(o-1)),!1):!0,onChange:r})),i&&xo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__warning-text"},xo.default.createElement(F,{className:"okx-wallet-plugin-warning-circle rpc-evm-send-edit-nonce__warning-icon"}),i))}var ii=rm;n();s();var ai=m(_()),mi=m(z());v();var Go=m(b());function nm(){let e=(0,Go.useSelector)(ke),t=(0,Go.useSelector)(Nt),o=(0,Go.useSelector)(wt);return!e||!!t||!!o}function sm({loading:e}){let t=(0,mi.useHistory)(),o=(0,Go.useSelector)(X),r=nm(),i=()=>{let a=dt;o&&(a+=`?address=${o}`),t.push(a)};return ai.default.createElement(O,{category:O.CATEGORY.fill,type:O.TYPE.highlight,size:O.SIZE.lg,loading:e,block:!0,disabled:r,onClick:i},l("wallet_extension_send_btn_next"))}var li=sm;n();s();var ci={"rpc-evm-send-edit__inner":"_rpc-evm-send-edit__inner_3qvkv_1",rpcEvmSendEditInner:"_rpc-evm-send-edit__inner_3qvkv_1"};function im(){let e=(0,pi.useDispatch)(),t=te(),{chainGasLimitLoading:o}=St();return Pt(),oe(()=>{e(ss(t.get("address")))}),_e.default.createElement(qe.Container,null,_e.default.createElement(Js,null),_e.default.createElement(qe.Box,{className:ci["rpc-evm-send-edit__inner"]},_e.default.createElement(Rs,null),_e.default.createElement(ei,null),_e.default.createElement(ri,null),_e.default.createElement(ii,null)),_e.default.createElement(be.FooterActions,null,_e.default.createElement(li,{loading:o})))}var di=im;n();s();var S=m(_()),L=m(b()),ui=m(z());var fi=m(ze());v();Oa();function am({requestNonce:e}){let t=(0,L.useDispatch)(),[o,r]=(0,S.useState)(!1),i=(0,L.useSelector)(_o),a=(0,L.useSelector)(To);return{loading:o,onChecker:ye(()=>{let c=[];return i===""&&a===null&&c.push(e().then(({suggestedNonce:p})=>{t(ds(p))})),c.length===0?Promise.resolve():(r(!0),Promise.all(c).finally(()=>{setTimeout(()=>{r(!1)})}))})}}function mm(){let e=(0,L.useSelector)(_r),t=(0,L.useSelector)(X),o=!t,r=de(),i=(0,L.useSelector)(ke),a=(0,L.useSelector)(fr),c=(0,L.useSelector)(ts),p=(0,L.useSelector)(_o),d=(0,L.useSelector)(To),{extensionConfig:f}=D("rpc_info"),T={from:r,to:o?i:t,value:o?c:"0x0",data:a},[g,h]=jn(T),x=Jn({data:T.data,type:g}),[E,k]=Rn(T.to),ne=no(x?.amount||0,{decimals:E?.decimals||6});return{txMeta:es({tx:T,customGasInfo:e,nonce:p||d,txData:x,tokenInfo:E,chain:f,approvedAmount:ne,formattedAmount:ne,txType:g}),loadingTxData:h||k}}var lm=()=>{let e=(0,ui.useHistory)(),t=(0,L.useDispatch)(),o=(0,L.useSelector)(bt),r=(0,L.useSelector)(X),i=A(r),a=A(),c=(0,L.useSelector)(fo),p=Jr(),d=ht(p),f=(0,L.useSelector)(ke),T=Po(),g=(0,L.useSelector)(_o),h=(0,L.useSelector)(To),x=(0,L.useSelector)(fr),{extensionConfig:E}=D("rpc_info"),k=Zn(),ne=Cn(p),[Z,H]=(0,S.useState)(!1),[Re,se]=(0,S.useState)(!1),{request:er}=Pt(),{chainGasLoading:No,chainGasLoadFailed:Ve,stopPollingGasPrice:ot,chainGasLimitLoadFailed:tt}=St(),or=(0,L.useSelector)(_r),tr=(0,L.useSelector)(ns),{loading:wo,onChecker:rr}=am({requestNonce:er}),{txMeta:G,loadingTxData:rt}=mm();oe(()=>{if(!f){let ce=pe;r&&(ce+=`?address=${r}`),e.replace(ce)}});let nr=(0,S.useMemo)(()=>[N.AUTHORIZATION,N.CANCEL_AUTHORIZATION].includes(G.type)?!1:G.type===N.TRANS_OUT?G.extraParams?.value:c,[c,G]),wa=(0,S.useMemo)(()=>G.type===N.TRANS_OUT?G.extraParams?.coinSymbol:[N.AUTHORIZATION,N.CANCEL_AUTHORIZATION].includes(G.type)?l(Ze[G.type],{symbol:G.extraParams?.coinSymbol}):l(Ze[G.type]),[G]),br=()=>{setTimeout(()=>{t(At())},200),e.push(o||Q)},ba=ce=>{t(us(ce)),H(!1)},Aa=async()=>{try{se(!0),await rr(),await k(G,"",ce=>{let Pa=rn[d?.keyringIdentityType];en({tx_source:"transfer",from_addr:ce?.txParams?.from,to_addr:f,main_token_symbol:E?.symbol,token_symbol:ce?.extraParams?.coinSymbol||"",contract_address:r||"",volume_token:c,volume_usdt:"",tx_hash_unique:ce?.txHash,wallet_type:Pa,chain_id:parseInt(E?.chainId,16)})}),br()}catch(ce){(0,fi.noop)(ce)}finally{se(!1)}},Sa=(0,S.useMemo)(()=>Ve?{type:ur.TIP_TYPE.FEE_ERROR}:null,[Ve]);return S.default.createElement(qe.Container,null,S.default.createElement(M,{icon:G.type===N.TRANS_OUT&&{text:G.extraParams?.coinSymbol},title:wa,onClose:br}),nr&&S.default.createElement(So,null,S.default.createElement(gn,{summaryList:[{useMinPrecision:!1,coinAmount:nr,injectCoin:i,displayEstimate:!1}],title:l("wallet_extension_send_colored_send")})),S.default.createElement(So,null,S.default.createElement(dr,{localType:Lr,title:l("extension_send_mid_text_from"),walletId:p,onCopyCallback:()=>{ne({trade:"send",all_confirmation:"wallet_used_address"})}}),S.default.createElement(dr,{address:f,title:l("extension_send_mid_text_to"),onCopyCallback:()=>{ne({trade:"send",all_confirmation:"to_address"})}})),S.default.createElement(So,null,S.default.createElement(hn,{onClick:()=>{H(!0)},injectCoin:a,estimateFailed:!!Ve,networkFee:No?void 0:U.mul(T,10**a?.decimals),loading:No})),S.default.createElement(So,{bordered:!1},S.default.createElement(Tn,{title:l("developer_mode_send_maintitle_nonce1")},S.default.createElement(Ce.Text,{size:Ce.SIZE.sm},g||h)),!!x&&S.default.createElement(yn,{copyable:!0,defaultExpanded:!0,data:x})),S.default.createElement(be,{placeholder:!0,offsetBottom:0},S.default.createElement(ur,{...Sa}),S.default.createElement(cr,{buttonGroup:[{disabled:!!Ve,onClick:Aa,actionType:cr.ACTION_TYPE.CONFIRM,loading:(wo||rt||Re||No)&&!Ve}]})),Z&&S.default.createElement(fs,{onBack:()=>H(!1),rpcInfo:E,chainGasInfo:tr,customGasInfo:or,stopPollingGasPrice:ot,updateCustomGasInfo:ba,chainGasLimitLoadFailed:tt}))},_i=lm;n();s();var Ue=m(_());v();var Hi=m(b());n();s();var Ti=m(_()),Mt=m(b());v();function cm(){let e=(0,Mt.useDispatch)(),t=(0,Mt.useSelector)(re),o=Pe(),r=[{text:l("wallet_extension_history_option_pending",{num:o.length}),value:go.PENDING},{text:l("wallet_extension_history_tab_completed"),value:go.COMPLETE}];return oe(()=>{o.length===0&&e(Lo({status:go.COMPLETE}))}),Ti.default.createElement(y.FilterTabs,{tabs:r,value:t.status,onSelect:i=>{e(Lo({status:i}))}})}var gi=cm;n();s();var Wo=m(_()),Ht=m(b()),hi=m(R());v();Ma();n();s();var Ut={root:"_root_1iqyp_1",resetNonceIcon:"_resetNonceIcon_1iqyp_12",disabledResetNonceIcon:"_disabledResetNonceIcon_1iqyp_16"};function pm(){let e=(0,Ht.useDispatch)(),t=(0,Ht.useSelector)(re),o=Pe(),r=()=>{o.length!==0&&Sr.warn({alignBottom:!1,title:l("extension_wallet_advanced_title_clear_confirm"),text:l("extension_wallet_advanced_subtitle_clear_confirm"),cancelText:l("wallet_extension_btn_general_cancel"),confirmText:l("wallet_extension_btn_general_confirm"),onConfirm:async()=>{await Mr().rpcEvmClearPendingTransaction(),Dr.success({title:l("extension_wallet_advanced_notification_cleared")})}})};return Wo.default.createElement("div",{className:Ut.root},Wo.default.createElement(y.DateRangeSelection,{dates:t.dates,onChange:(i,a)=>{e(Lo({dates:a}))}}),Wo.default.createElement(xe,{title:l("wallet_extension_settings_tooltips_reset_nonce"),placement:xe.DIRECTION.bottomRight},Wo.default.createElement(F,{className:(0,hi.default)("okx-wallet-plugin-brush-20",Ut.resetNonceIcon,{[Ut.disabledResetNonceIcon]:o.length===0}),onClick:r})))}var xi=pm;n();s();var Me=m(_()),Mi=m(b());n();s();n();s();var Fe=m(_());n();s();var xr=m(_());v();var dm=({tx:e,onBack:t})=>{let{type:o,extraParams:r}=e,i=Ze[o],a=o===N.AUTHORIZATION||o===N.CANCEL_AUTHORIZATION?l(i,{symbol:r?.coinSymbol||""}):l(i);return xr.default.createElement(M,{title:a,onBack:t})},Ci=xr.default.memo(dm);n();s();var Be=m(_());v();n();s();var Cr=m(_()),yr=m(R());n();s();var um={lightBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},deepBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},lightGray:{background:"var(var(--okd-color-content-contrast))",color:"var(--okx-wallet-color-white)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--okx-wallet-color-white)"},black:{background:"var(--okx-wallet-color-black)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(var(--okd-color-content-tertiary))",color:"var(--okx-wallet-color-white)"}},fm={larger:{size:56,fontSize:30},large:{size:32,fontSize:20},normal:{size:24,fontSize:14},small:{size:20,fontSize:12}};function _m({icon:e,className:t,text:o,size:r="normal",fontSize:i,theme:a,color:c,background:p}){if(!o)return null;let d=o[0].toUpperCase(),f,T,g;if(a){let k=um[a];f=k?.color,T=k?.background,g=k?.border}let h,x;if(typeof r=="string"){let k=fm[r];h=k?.size,x=k?.fontSize}else h=r.size;let E={width:`${h}px`,height:`${h}px`};return e?Cr.default.createElement("img",{alt:"icon",src:e,style:E,className:(0,yr.default)("capitalize-letter",t)}):(E={...E,fontSize:`${i||x}px`,color:c||f,background:p||T,border:g},Cr.default.createElement("div",{style:E,className:(0,yr.default)("capitalize-letter",t)},d))}var K=_m;ee();n();s();var j=m(_()),Gt=m(R()),yi=m(La());v();n();s();function Tm({className:e,label:t,children:o}){return j.default.createElement("div",{className:(0,Gt.default)("rpc-evm-coin-flow__label",e)},j.default.createElement("div",{className:"rpc-evm-coin-flow__label-text"},t),j.default.createElement("div",null,o))}function gm({isNFT:e,icon:t,title:o,address:r}){let i=typeof t=="string"?j.default.createElement(_n,{className:(0,Gt.default)({"rpc-evm-coin-flow__record-icon-nft":e}),src:t,alt:""}):t;return j.default.createElement("div",{className:"rpc-evm-coin-flow__record"},j.default.createElement("div",{className:"rpc-evm-coin-flow__record-icon"},i),j.default.createElement("div",{className:"rpc-evm-coin-flow__record-right"},j.default.createElement("div",{className:"rpc-evm-coin-flow__record-title"},o),r&&j.default.createElement(Se,{className:"rpc-evm-coin-flow__record-address",label:V(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})))}function Er({data:e}){if(e=(e||[]).filter(Boolean),e.length===0)return null;let t=e.length===1,o=r=>{if(!r)return null;let{items:i,label:a,...c}=r;return j.default.createElement(Tm,{...c,label:a,key:r},i.map((p,d)=>j.default.createElement(gm,{...p,key:d})))};return j.default.createElement("div",{className:(0,Gt.default)("rpc-evm-coin-flow",{"rpc-evm-coin-flow__hidden-label":t})},e.map(o))}var Ei=Er;Er.propTypes={data:yi.default.array};Er.defaultProps={data:[]};var{TRANS_OUT:ki,CONTRACT_CALL:Ii,AUTHORIZATION:Wt,CANCEL_AUTHORIZATION:Vt,CONTRACT_DEPLOY:vi}=N,hm={[Wt]:"wallet_extension_header_approval_title_approve",[Vt]:"wallet_extension_header_approval_title_cancel_approval"},xm={[Wt]:"wallet_extension_header_approval_title_for",[Vt]:"wallet_extension_header_approval_title_for"},Cm="/static/images/tx-history/default-protocol.svg";function ym(e){let{type:t}=e,o=A("",!0);switch(t){case ki:{let{value:r,coinSymbol:i}=e.extraParams||{},a=`- ${U.thousandFormat(r)} ${i||l("wallet_extension_history_text_unknown_token")}`;return{items:[{icon:Be.default.createElement(K,{icon:!i&&Ur,text:i,size:"large",theme:"black"}),title:Be.default.createElement(pr,{maxWidth:"284px",text:a})}]}}case Ii:{let{value:r}=e.txParams||{},i=ae(r);if(to(i,0))return null;let a=`- ${uo(ie(i),{symbol:o.symbol,decimals:o?.decimals})}`;return{items:[{icon:Be.default.createElement(K,{text:o.symbol,size:"large",theme:"black"}),title:Be.default.createElement(pr,{text:a,maxWidth:"284px"})}]}}case Wt:case Vt:{let{coinSymbol:r}=e.extraParams||{};return r?{label:l(hm[t]),items:[{icon:Be.default.createElement(K,{text:r,size:"large",theme:"black"}),title:r}]}:null}case vi:default:return null}}function Em(e){let{type:t,extraParams:o}=e;switch(t){case Wt:case Vt:{let{approvedAddress:r}=o||{};return{label:l(xm[t]),items:[{icon:Cm,title:Be.default.createElement(Se,{className:"rpc-mode-evm-tx-detail-flow__authorization",label:V(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})}]}}case ki:case Ii:case vi:default:return null}}function km({tx:e}){let t=ym(e),o=Em(e);return Be.default.createElement(Ei,{data:[t,o]})}var Ni=km;n();s();var C=m(_()),kr=m(b()),wi=m(R());v();ee();function Im({status:e,isCanceling:t,isSpeeding:o,isShowPending:r}){let i,a="";return e===w.SUCCEED?(i=po.TxStatusInfoEnum.SUCCESS,a=l("wallet_extension_history_status_completed")):e===w.FAILED||e===w.DROPPED?(i=po.TxStatusInfoEnum.FAILED,a=l("wallet_extension_history_status_failed")):e===w.PENDING&&(r?(i=po.TxStatusInfoEnum.PENDING,t?a=l("wallet_extension_send_status_canceling"):o?a=l("wallet_extension_send_status_speedingup"):a=l("wallet_extension_history_list_status_pending")):(i=po.TxStatusInfoEnum.WAITING,a=l("wallet_extension_history_list_status_waiting"))),C.default.createElement(po,{label:l("wallet_extension_mid_text_status"),status:i,statusText:a})}function vm({status:e,sendTime:t,finishTime:o}){let r=(0,kr.useSelector)(ro);return C.default.createElement(Ee,{label:l("wallet_extension_mid_text_time"),value:eo(e===w.PENDING?t:o,{format:"yyyyMMddHHmmss",locale:r})})}function Nm({type:e,extraParams:t}){let{approvedAmount:o}=t||{};return e!==N.AUTHORIZATION?null:C.default.createElement(Ee,{label:l("wallet_extension_mid_text_approved_amount"),value:o>=10**13?l("wallet_extension_mid_text_unlimited"):U.thousandFormat(o||"0")})}function wm({status:e,blockNumber:t}){let o=(0,kr.useSelector)(Et),r=$e(o,t);return e===w.PENDING||e===w.DROPPED||st(r,0)||bo(r,14)?null:C.default.createElement(Ee,{label:l("wallet_extension_mid_text_block_confirmation"),value:r})}function bm(){let{extensionConfig:e}=D("rpc_info");return C.default.createElement(Ee,{label:l("wallet_extension_mid_text_network"),value:C.default.createElement(C.default.Fragment,null,C.default.createElement(K,{className:"rpc-mode-evm-tx-detail-info__network-icon",icon:e.icon,text:e.name,size:"small",theme:"lightGray"}),e.name)})}function Am({txParams:e}){let{from:t}=e;return C.default.createElement(Ee,{label:l("wallet_extension_mid_text_from"),value:C.default.createElement(Se,{label:V(t),value:t,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function Sm({status:e,type:t,extraParams:o,txParams:r}){let{toAddress:i,tokenAddress:a,contractAddress:c}=o||{},{to:p}=r,d,f;if(t===N.TRANS_OUT)d=l("wallet_extension_mid_text_to"),f=i;else if(t===N.CONTRACT_DEPLOY)if(e===w.SUCCEED)d=l("developer_mode_history_subtitle_developer"),f=c;else return null;else d=l("wallet_extension_mid_text_interaction_address"),t===N.AUTHORIZATION||t===N.CANCEL_AUTHORIZATION?f=a:f=p;return C.default.createElement(Ee,{label:d,value:C.default.createElement(Se,{label:V(f),value:f,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function Pm({status:e,gasUsed:t,txParams:o}){let{extensionConfig:r}=D("rpc_info"),{gasLimit:i,maxFeePerGas:a,gasPrice:c}=o,p=un($,ie),d=c||a,f=uo(p(d,t||i),{symbol:r?.symbol,decimals:r?.decimals});return C.default.createElement(Mn,{label:l("wallet_extension_mid_text_network_fee"),value:f,tip:e===w.PENDING&&l("wallet_extension_popup_cancle_transaction_gasprice_gaslimit",{gasPrice:U.thousandFormat(Ye(d)),gasLimit:U.thousandFormat(i)})})}function Dm({txParams:e}){let{data:t}=e,[o,r]=(0,C.useState)(!1);return t?C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data"},C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__inner"},C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__title",onClick:()=>{r(i=>!i)}},l("developer_mode_history_title_transaction_data"),C.default.createElement(F,{className:(0,wi.default)("okx-wallet-plugin-arrow-small-down rpc-mode-evm-tx-detail-info-data__arrow",{"rpc-mode-evm-tx-detail-info-data__arrow--spread":o})})),o&&C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__data"},t))):null}function Lm({tx:e}){let{txHash:t,txParams:{nonce:o}}=e;return C.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info"},C.default.createElement(Im,{...e}),C.default.createElement(vm,{...e}),C.default.createElement(Nm,{...e}),C.default.createElement(wm,{...e}),C.default.createElement(bm,{...e}),C.default.createElement(Am,{...e}),C.default.createElement(Sm,{...e}),C.default.createElement(Pm,{...e}),C.default.createElement(Ee,{label:l("developer_mode_history_title_nonce"),value:ae(o)}),C.default.createElement(Ee,{label:l("wallet_extension_mid_text_transaction_hash"),value:C.default.createElement(Se,{label:V(t),value:t,message:l("wallet_extension_popup_title_transaction_hash_copied")})}),C.default.createElement(Dm,{...e}))}var bi=Lm;n();s();var Te=m(_());v();n();s();n();s();var $t=m(_());ee();n();s();ee();var zt=e=>{if(!e?.txParams)return{};let{gasPrice:t,maxFeePerGas:o,maxPriorityFeePerGas:r,gasLimit:i,type:a}=e.txParams,c={gasLimit:i};return a===so.FEE_MARKET?(c.maxFeePerGas=it($(o,1.2),0),c.maxPriorityFeePerGas=it($(r,1.2),0)):c.gasPrice=it($(t,1.2),0),c};function Om({txId:e,onClose:t}){let o=vt(e),r=Qn(),[i,a]=(0,$t.useState)(!1),c=zt(o),p=async()=>{if(i)return;a(!0);let H=await It(o.id);if(!H||H.status!==w.PENDING){a(!1),t();return}r(o,c).catch(Re=>{console.log(Re)}).finally(()=>{a(!1),t()})},{gasPrice:d,maxFeePerGas:f,gasLimit:T,type:g}=o?.txParams||{},h="",x="";g===so.FEE_MARKET?(h=f,x=c.maxFeePerGas):(h=d,x=c.gasPrice);let E=Do(ie($(h,T))),k=`=Gas Price(${Ye(h)})`,ne=Do(ie($(x,c.gasLimit))),Z=`=Gas Price(${Ye(x)})`;return $t.default.createElement(y.EthereumTxSpeedDialogBase,{visible:!!o,onConfirm:p,loading:i,onClose:t,oldGasFeeDisplay:E,oldGasDetailDisplay:k,newGasFeeDisplay:ne,newGasDetailDisplay:Z})}var Vo=Om;n();s();var Kt=m(_());ee();function Bm({txId:e,onClose:t}){let o=vt(e),r=Xn(),i=A(),[a,c]=(0,Kt.useState)(!1),p=zt(o),d=async()=>{if(a)return;if(c(!0),(await It(o.id)).status!==w.PENDING){c(!1),t();return}r(o,p).catch(E=>{console.log(E)}).finally(()=>{t(),c(!1)})},{type:f}=o?.txParams||{},T="";f===so.FEE_MARKET?T=p.maxFeePerGas:T=p.gasPrice;let g=Do(ie($(T,p.gasLimit))),h=`Gas Price (${Ye(T)} GWEI) *Gas Limit(${p.gasLimit}) `;return Kt.default.createElement(y.EthereumTxCancelDialogBase,{visible:!!o,onConfirm:d,loading:a,onClose:t,chainSymbol:i?.symbol,newGasFeeDisplay:g,newGasDetailDisplay:h})}var zo=Bm;n();s();var Ne=m(_());n();s();var Xe=m(_()),Pi=m(b());v();n();s();var $o=m(_());v();var Ai=({onClick:e,children:t})=>$o.default.createElement(O,{className:"rpc-evm-tx-actions__button",category:O.CATEGORY.outline,type:O.TYPE.primary,size:O.SIZE.xs,onClick:o=>{o.stopPropagation(),e&&e(o)}},t);function Fm({tx:e,onCancel:t,onSpeed:o}){let{isShowPending:r,isCanceling:i}=e,a=i?l("wallet_extension_history_list_status_btn_speed_up_cancellation"):l("wallet_extension_history_list_status_btn_cancel_transaction");return r?$o.default.createElement("div",{className:"rpc-evm-tx-actions"},$o.default.createElement(Ai,{onClick:t},a),!i&&$o.default.createElement(Ai,{onClick:o},l("wallet_extension_history_list_status_btn_speed_up"))):null}var Si=Fm;n();s();v();ee();function Yt({type:e,extraParams:t}){let o=Ze[e],r,i=l(o);return e===N.TRANS_OUT?r="okx-wallet-plugin-pointer-up":e===N.AUTHORIZATION||e===N.CANCEL_AUTHORIZATION?(r="okx-wallet-plugin-lock-1",i=l(o,{symbol:t?.coinSymbol})):e===N.CONTRACT_CALL?r="okx-wallet-plugin-report-centre":e===N.CONTRACT_DEPLOY&&(r="okx-wallet-plugin-futures-20"),{icons:[r],title:i}}function qt({type:e,txParams:t,extraParams:o}){let{extensionConfig:r}=D("rpc_info");if(e===N.TRANS_OUT){let c=o?.value;return c&&(c=U.thousandFormat(c)),[{direction:ar.OUT,coinAmount:`${c||""} ${o?.coinSymbol||""}`}]}let{value:i}=t||{},a=ae(i);return Ke(a,0)?[{direction:ar.OUT,coinAmount:`${U.thousandFormat(ie(a))} ${r.symbol||""}`}]:[]}function Zt(e){let t;return e.type===N.TRANS_OUT?t=`${l("wallet_extension_history_list_send_to")}   ${V(e.extraParams.toAddress)}`:e.type===N.AUTHORIZATION||e.type===N.CANCEL_AUTHORIZATION?t=V(e.extraParams?.approvedAddress):t=V(e.txParams.to),t}function Mm({isShowPending:e,isSpeeding:t,isCanceling:o}){let r="",i="";return e?(r=Ao.PENDING,t?i=l("wallet_extension_send_status_speedingup"):o?i=l("wallet_extension_send_status_canceling"):i=l("wallet_extension_history_list_status_pending")):(r=Ao.WAITING,i=l("wallet_extension_history_list_status_waiting")),{labelType:r,labelText:i}}function Um(e){let t=Zt(e),o=(0,Pi.useSelector)(ro),r=[t],i=eo(e.sendTime,{format:"yyyyMMddHHmmss",locale:o});return r.push(i),r}function Hm({tx:e,onClick:t,onCancel:o,onSpeed:r}){let{icons:i,title:a}=Yt(e),{labelType:c,labelText:p}=Mm(e),d=qt(e),f=Um(e),T=kt(f,d),g=Xe.default.createElement(y.Label,{className:"tx-history-ml4",type:c,text:p});return Xe.default.createElement(y.ItemContainer,{onClick:h=>{t&&t(e,h)}},Xe.default.createElement(y.Row,{assets:d,align:T},Xe.default.createElement(y.Info,{icons:i,title:a,label:g,details:f}),Xe.default.createElement(y.Assets,{assets:d})),Xe.default.createElement(Si,{tx:e,onCancel:o,onSpeed:r}))}var Ko=Hm;function Gm({txs:e,onClick:t}){let[o,r]=(0,Ne.useState)(null),[i,a]=(0,Ne.useState)(null);return Ne.default.createElement(Ne.default.Fragment,null,e.map(c=>Ne.default.createElement(Ko,{key:c.id,tx:c,onClick:t,onSpeed:()=>{r(c.id)},onCancel:()=>{a(c.id)}})),Ne.default.createElement(Vo,{txId:o,onClose:()=>{r(null)}}),Ne.default.createElement(zo,{txId:i,onClose:()=>{a(null)}}))}var Yo=Gm;n();s();var je=m(_());v();var Ir=m(b());function Wm({txs:e,onClick:t}){let o=(0,Ir.useSelector)(ro),{dates:r}=(0,Ir.useSelector)(re),i=(0,je.useMemo)(()=>{let a=e.map(T=>({...T,groupDate:eo(T.sortTime,{format:"yyyyMMdd",locale:o})})),c=[],p=0,d,f;return a.forEach(T=>{let{groupDate:g}=T;d!==g&&(d=g,f=[],c[p++]={date:d,list:f}),f.push(T)}),c},[e,r]);return je.default.createElement(y.List,null,i.map(({date:a,list:c},p)=>je.default.createElement("div",{key:p},je.default.createElement(y.Date,null,a),c.map(d=>je.default.createElement(d.Comp,{key:d.id,tx:d,onClick:t})))))}var qo=Wm;n();s();var Co=m(_());v();function Vm({status:e}){let t="",o="";return(e===w.FAILED||e===w.DROPPED)&&(t=Ao.FAILED,o=l("wallet_extension_history_status_failed")),{labelText:o,labelType:t}}function zm(e){return[Zt(e)]}function $m({tx:e,onClick:t}){let{icons:o,title:r}=Yt(e),i=qt(e),a=zm(e),c=kt(a,i),{labelType:p,labelText:d}=Vm(e),f=Co.default.createElement(y.Label,{className:"tx-history-ml4",type:p,text:d});return Co.default.createElement(y.ItemContainer,{onClick:T=>{t&&t(e,T)}},Co.default.createElement(y.Row,{assets:i,align:c},Co.default.createElement(y.Info,{icons:o,title:r,label:f,details:a}),Co.default.createElement(y.Assets,{assets:i})))}var Zo=$m;function Km({tx:e}){let t=Yn(),{status:o,isShowPending:r,isCanceling:i}=e,[a,c]=(0,Te.useState)(!1),[p,d]=(0,Te.useState)(!1);return Te.default.createElement(Te.default.Fragment,null,(o===w.SUCCEED||o===w.FAILED)&&Te.default.createElement(Un,{url:t(e.txHash),text:l("wallet_extension_mid_link_explorer")}),r&&o===w.PENDING&&Te.default.createElement(Hn,{isShowCancel:!i,isShowSpeedUp:!i,isShowSpeedupCancel:i,onCancel:()=>{c(!0)},onSpeedUp:()=>{d(!0)}}),p&&Te.default.createElement(Vo,{txId:e?.id,onClose:()=>{d(!1)}}),a&&Te.default.createElement(zo,{txId:e?.id,onClose:()=>{c(!1)}}))}var Di=Km;function Ym({txId:e,onBack:t}){let r=$n().find(({id:i})=>i===e);return r?Fe.default.createElement(qe.Portal,{className:"rpc-mode-tx-detail"},Fe.default.createElement(Ci,{tx:r,onBack:t}),Fe.default.createElement(Gn,{message:r.errorMessage}),Fe.default.createElement("div",{className:"rpc-mode-tx-detail__content"},Fe.default.createElement(Ni,{tx:r}),Fe.default.createElement(bi,{tx:r}),Fe.default.createElement(Di,{tx:r}))):null}var Qo=Ym;n();s();var vr=m(_());function qm({symbol:e}){return vr.default.createElement("div",{className:"rpc-mode-evm-title-header__title"},vr.default.createElement(K,{className:"rpc-mode-evm-title-header__icon",text:e,theme:"black"}),e)}var Nr=qm;n();s();n();s();var Qt=m(_()),Li=m(b());function Zm({onClick:e}){let{dates:t}=(0,Li.useSelector)(re),o=Pe({dates:t});return o.length===0?Qt.default.createElement(y.Empty,{top:72}):Qt.default.createElement(y.ListContainer,{style:{paddingTop:"8px"}},Qt.default.createElement(Yo,{txs:o,onClick:e}))}var Oi=Zm;n();s();var yo=m(_());var Bi=m(b());function Qm({onClick:e}){let{dates:t}=(0,Bi.useSelector)(re),o=zn({dates:t}),r=(0,yo.useMemo)(()=>o.map(i=>({...i,sortTime:i.finishTime,Comp:Zo})),[o]);return r.length===0?yo.default.createElement(y.Empty,{top:72}):yo.default.createElement(y.ListContainer,null,yo.default.createElement(qo,{txs:r,onClick:e}))}var Fi=Qm;function Xm(){let e=(0,Mi.useSelector)(re),[t,o]=(0,Me.useState)(null),r=i=>{o(i.id)};return Me.default.createElement(Me.default.Fragment,null,e.status===go.PENDING?Me.default.createElement(Oi,{onClick:r}):Me.default.createElement(Fi,{onClick:r}),t&&Me.default.createElement(Qo,{txId:t,onBack:()=>{o(null)}}))}var Ui=Xm;n();s();function jm(){let e=(0,Hi.useDispatch)();return ct(()=>{e(ys())}),Ue.default.createElement(y.PageContainer,{className:"rpc-evm-tx-history"},Ue.default.createElement(be,{className:"rpc-evm-tx-history__top",offsetTop:0},Ue.default.createElement(M,{sticky:!1,title:l("wallet_extension_header_text_history")}),Ue.default.createElement(gi,null),Ue.default.createElement(xi,null)),Ue.default.createElement("div",{className:"rpc-evm-tx-history__bottom"},Ue.default.createElement(Ui,null)))}var Gi=jm;n();s();var ko=m(_());n();s();var Eo=m(_()),Wi=m(z());v();n();s();function He(){return te().get("address")}var Jm=()=>{let e=(0,Wi.useHistory)(),t=He(),o=A(t),r=()=>{e.push(Q)};return Eo.default.createElement(M,{title:Eo.default.createElement(Nr,{symbol:o?.symbol}),onBack:r},t&&Eo.default.createElement(xe,{title:l("developer_mode_infor_tooltip_token_details"),placement:xe.DIRECTION.bottom},Eo.default.createElement(F,{className:"okds-information-circle rpc-mode-evm-coin-detail-header__info-icon",onClick:()=>{e.push(`${gt}?address=${t}`)}})))},Vi=Eo.default.memo(Jm);n();s();var jo=m(_());var Yi=m(b());ee();n();s();var Xo=m(_()),zi=m(b()),$i=m(z());v();ee();function Rm(){let e=(0,$i.useHistory)(),t=(0,zi.useDispatch)(),{extensionConfig:o}=D("rpc_info"),r=He(),i=A(r),a=`${ao}?address=${r||""}`,c=!r&&o?.faucetUrl;return Xo.default.createElement("div",{className:`rpc-evm-coin-detail-btns ${c?"with-faucet":"without-faucet"}`},Xo.default.createElement(mt.IconButtonWithLabel,{disabled:to(i?.balance,0),icon:"okx-wallet-plugin-up",text:l("wallet_home_btn_send"),onClick:()=>{t(ps(a));let p=`${pe}?showClose=1`;r&&(p+=`&address=${r}`),e.push(p)}}),Xo.default.createElement(mt.IconButtonWithLabel,{icon:"okx-wallet-plugin-down",text:l("wallet_home_btn_receive"),onClick:()=>{let p=r?`&address=${r}`:"";e.push(`${io}?showClose=1${p}`)}}),c&&Xo.default.createElement(mt.IconButtonWithLabel,{icon:"okx-wallet-plugin-faucet-1",text:l("developer_mode_home_btn_faucet"),href:o?.faucetUrl}))}var Ki=Rm;function el(){let e=He(),t=A(e),o=t?.balance||0,{symbol:r,usdToThisRate:i}=(0,Yi.useSelector)(Wr),a=$(t?.price,i);return{coinAmount:o,coinSymbol:t?.symbol,coinAmountDisplay:no(o),currencyAmountDisplay:fn({amount:o,rate:a,symbol:r},{useSign:!0,useFixed:!0})}}function ol(){let e=de(),{coinSymbol:t,coinAmountDisplay:o}=el();return jo.default.createElement(Cs,null,jo.default.createElement(hs,{coinSymbol:t,amountDisplay:o,currencyDisplay:null}),jo.default.createElement(xs,{address:e}),jo.default.createElement(Ki,null))}var qi=ol;n();s();var ge=m(_());n();s();var Zi=m(_());function tl({txs:e,onClick:t}){return e.length===0?null:Zi.default.createElement(Yo,{txs:e,onClick:t})}var Qi=tl;n();s();var Xt=m(_());function rl({txs:e,onClick:t}){let o=(0,Xt.useMemo)(()=>e.map(r=>{let i,a;return r.status===w.PENDING?(i=r.sendTime,a=Ko):(i=r.finishTime,a=Zo),{...r,sortTime:i,Comp:a}}),[e]);return o.length===0?null:Xt.default.createElement(qo,{txs:o,onClick:t})}var Xi=rl;function nl(){let e=He(),t=Kn({tokenAddress:e}),[o,r]=(0,ge.useState)(null),[i,a]=(0,ge.useMemo)(()=>{let p=[],d=[];return t.forEach(f=>{f.isShowPending?p.push(f):d.push(f)}),[p,d]},[t]),c=p=>{r(p.id)};return t.length===0?ge.default.createElement(y.Empty,null):ge.default.createElement("div",null,ge.default.createElement(Qi,{txs:i,onClick:c}),ge.default.createElement(Xi,{txs:a,onClick:c}),ge.default.createElement(Qo,{txId:o,onBack:()=>{r(null)}}))}var ji=nl;n();s();function sl(){return ko.default.createElement("div",{className:"rpc-evm-coin-detail"},ko.default.createElement(Vi,null),ko.default.createElement("div",{className:"rpc-evm-coin-detail__content"},ko.default.createElement(qi,null),ko.default.createElement(ji,null)))}var Ji=sl;n();s();var le=m(_()),sa=m(lr());v();var ia=m(z());n();s();var oa=m(_()),ta=m(R());n();s();var Io=m(_()),Ri=m(R());var ea=({token:e,className:t,children:o,onClick:r})=>Io.default.createElement("div",{onClick:r,className:(0,Ri.default)("rc-mode__token",t)},Io.default.createElement(K,{fontSize:"18px",theme:"black",className:"rc-mode__token__icon",size:"large",text:e?.symbol}),Io.default.createElement("div",{className:"rc-mode__token__info"},Io.default.createElement("div",{className:"rc-mode__token__title"},e.symbol),Io.default.createElement("div",{className:"rc-mode__token__name"},e.name)),o);var ra=({className:e,dataSource:t=[],renderItem:o,emptyText:r,component:i="div",...a})=>{let c=!t.length;return oa.default.createElement(i,{className:(0,ta.default)("rc-mode__tokens",e),...a},t.map(p=>o(p)),c&&r)};ra.Item=ea;var Ge=ra;n();s();var Jo=m(_());var na=()=>{let e=ue(),[t,o]=Jo.default.useState(),r=ye(({target:{value:c}})=>{o(c)},[]),i=(0,Jo.useMemo)(()=>e.filter(({balance:c})=>!!Number(c)),[e]);return[(0,Jo.useMemo)(()=>t?i.filter(({name:c,symbol:p})=>{let d=t?.toLowerCase();return c?.toLowerCase()?.includes(d)||p?.toLowerCase()?.includes(d)}):i,[t,i]),{onChange:r,value:t,showSearch:!!i.length}]};n();s();var aa=()=>{let[e,{showSearch:t,...o}]=na();return le.default.createElement("div",{className:"rc-mode-select__token"},le.default.createElement(M,{title:l("developer_mode_send_title_selecta_token")}),t&&le.default.createElement(P.Search,{placeholder:l("developer_mode_send_input_selecta_token"),className:"rc-mode-select__token__search",...o}),le.default.createElement(Ge,{dataSource:e,renderItem:r=>le.default.createElement(ia.Link,{to:`${pe}?${sa.default.stringify({showClose:1,address:r?.address})}`},le.default.createElement(Ge.Item,{token:r},le.default.createElement("div",{className:"rc-mode-select__token__balance"},le.default.createElement("div",{className:"rc-mode-select__token__amount"},U.thousandFormat(r.balance||0))))),emptyText:le.default.createElement(Pr.State,{className:"rc-mode-select__token__empty",title:t?l("developer_mode_send_toast_addnewtoken",{crypto:le.default.createElement("span",{className:"rc-mode-select__token__empty__title__special"},o.value)}):l("developer_mode_send_toast_nonetoken")})}))};n();s();var Je=m(_()),ua=m(z());v();n();s();n();s();var jt=m(_()),il=({children:e})=>jt.default.createElement("div",{className:"token-detail-container"},e),ma=(0,jt.memo)(il);n();s();var We=m(_()),al=({image:e,symbol:t,name:o})=>We.default.createElement("div",{className:"token-detail-intro"},We.default.createElement("div",{className:"token-detail-intro__image"},e),We.default.createElement("div",{className:"token-detail-intro__desc"},We.default.createElement("div",{className:"token-detail-intro__symbol"},t),We.default.createElement("div",{className:"token-detail-intro__name"},o))),la=(0,We.memo)(al);n();s();var he=m(_()),ca=m(R());var ml=({className:e,title:t,text:o,copyText:r,copyNotificationTitle:i,copyNotificationDesc:a})=>{let c=(0,ca.default)("token-detail-row",e),[p,d]=Fn();return he.default.createElement("div",{className:c},he.default.createElement("div",{className:"token-detail-row__title"},t),he.default.createElement("div",{className:"token-detail-row__content"},he.default.createElement("div",{className:"token-detail-row__text"},o),r&&he.default.createElement("div",{className:"token-detail-row__copy",onClick:()=>{p||(d(r),oo.success({title:i,desc:he.default.createElement("div",{className:"token-detail-row__copy-desc"},a)}))}},he.default.createElement(F,{className:"okx-wallet-plugin-copy"}))))},Jt=(0,he.memo)(ml);n();s();var Ro=m(_()),pa=m(R());var ll=({details:e})=>Ro.default.createElement("div",{className:"token-detail-details"},e.map((t,o)=>{let r=o===0?"":"token-detail-details__split",i=(0,pa.default)(t?.className,r);return Ro.default.createElement(Jt,{...t,className:i})})),da=(0,Ro.memo)(ll);var Rt={Container:ma,Intro:la,Row:Jt,Details:da};n();s();function cl(){let e=(0,ua.useHistory)(),o=te().get("address"),r=A(o,!0),{extensionConfig:i}=D("rpc_info"),a=[{title:l("developer_mode_infor_subtitle_contractadd"),text:V(o),copyText:o,copyNotificationTitle:l("developer_mode_infor_toast_success"),copyNotificationDesc:o},{title:l("developer_mode_infor_subtitle_tokendecimal"),text:r.decimals},{title:l("developer_mode_infor_subtitle_network"),text:i.name}];return oe(()=>{o||e.replace(Q)}),Je.default.createElement("div",{className:"rpc-evm-token-detail"},Je.default.createElement(M,{title:l("developer_mode_infor_maintitle_tokendetails")}),Je.default.createElement(Rt.Container,null,Je.default.createElement(Rt.Intro,{image:Je.default.createElement(K,{text:r.symbol,size:"large",theme:"black"}),symbol:r.symbol,name:r.name}),Je.default.createElement(Rt.Details,{details:a})))}var fa=cl;n();s();var Y=m(_()),ha=m(z()),xa=m(R()),wr=m(Ga());v();n();s();var _a=m(_()),Ta=m(b());var ga=()=>{let e=(0,Ta.useDispatch)(),{extensionConfig:t}=D("rpc_info"),{chainId:o}=t,r=ue(!0,!0),i=(0,_a.useMemo)(()=>{let c=[],p=[];return r.forEach(d=>{d.isDeleted?p.push(d):c.push(d)}),{usedChainTokens:c,disusedChainTokens:p}},[r]),a=ye(({address:c,isDeleted:p})=>{e(nn({chainId:o,address:c,isDeleted:!p}))},[o]);return[i,a]};n();s();var Ca=()=>{let[{usedChainTokens:e,disusedChainTokens:t},o]=ga();return Y.default.createElement("div",{className:"rpc-mode-manage-crypto"},Y.default.createElement(M,{closeable:!1,title:l("developer_mode_home_maintitle_managecpt")}),Y.default.createElement(ha.Link,{to:_t},Y.default.createElement("div",{className:"rpc-mode-manage-crypto__custom"},Y.default.createElement("span",{className:"rpc-mode-manage-crypto__custom__title"},l("developer_mode_manage_text_customcpt")),Y.default.createElement(F,{className:"okds-arrow-chevron-right-centered-md rpc-mode-manage-crypto__custom__icon"}))),Y.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_addedcpt")),Y.default.createElement(Ge,{component:wr.default,className:"rc-mode-home__tokens",dataSource:e,transitionName:"fade",transitionEnterTimeout:300,transitionLeaveTimeout:300,renderItem:r=>{let i=!r.address;return Y.default.createElement(Ge.Item,{token:r},Y.default.createElement(F,{className:(0,xa.default)("okx-wallet-plugin-take","rc-mode-home__token__action","rc-mode-home__token__action__minus",{"rc-mode-home__token__action__disabled":i}),onClick:()=>o(r)}))}}),!!t.length&&Y.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_adding")),Y.default.createElement(Ge,{component:wr.default,className:"rc-mode-home__tokens",dataSource:t,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade",renderItem:r=>Y.default.createElement(Ge.Item,{token:r,key:r?.address},Y.default.createElement(F,{className:"okx-wallet-plugin-add rc-mode-home__token__action rc-mode-home__token__action__add",onClick:()=>o(r)}))}))};n();s();var B=m(_());v();n();s();var we=m(_()),ya=m(z());var Ea=m(ze());v();var pl="0x",dl=()=>{let e=xt();return async t=>{try{return!lo(t)||await(await e()).eth.getCode(t)===pl}catch(o){return console.log(o),!0}}},ka=()=>{let e=W.useForm(),t=(0,ya.useHistory)(),[o,r]=we.default.useState(null),[i,a]=we.default.useState(!1),[c,p]=we.default.useState(!1),d=Ct(),f=an(),T=ln(),g=dl(),h=ue(!0,!0),{extensionConfig:x}=D("rpc_info");we.default.useEffect(()=>{e?.setFieldsValue({network:x.name})},[x]);let E=ye(()=>{let{chainId:Z}=x,H=e.getFieldsValue();d(Z,H.address,H),T({chainId:Z,address:H.address}),oo.success({title:l("developer_mode_manage_toast_added")}),t.go(-1)},[x]),k=ye((0,Ea.debounce)(async()=>{r(null),p(null);let Z=e.getFieldValue("address");if(e.cleanErrors(),!Z)return!1;let H=h.find(se=>se.address===Z);if(H&&!H.isDeleted)return e.setErrors({address:l("developer_mode_manage_errortip_duplicate_add")});if(a(!0),p(!1),await g(Z))return a(!1),e.setErrors({address:l("developer_mode_manage_errortip_request_failed")});try{let se=await f(Z);r(se),e.setFieldsValue(se)}catch(se){p(!0),e.setErrors({address:""}),console.log("error",se)}finally{a(!1)}},250),[h]),ne=(0,we.useMemo)(()=>c?we.default.createElement("div",{className:"rpc-mode-custom-crypto__address__error"},l("developer_mode_manage_errortip_request_failed"),we.default.createElement("span",{className:"rpc-mode-custom-crypto__address__refresh",onClick:k},l("developer_mode_manage_errortip_refresh"))):null,[c]);return{form:e,token:o,rpcInfo:x,fetching:i,addressError:ne,onConfirm:E,onAddressTrigger:k}};n();s();var ul=11,Ia=()=>{let{form:e,token:t,rpcInfo:o,fetching:r,onConfirm:i,addressError:a,onAddressTrigger:c}=ka();return B.default.createElement("div",{className:"rpc-mode-custom-crypto"},B.default.createElement(M,{title:l("developer_mode_manage_maintitle_customcpt")}),B.default.createElement(W,{form:e,size:W.SIZE.lg,validateTrigger:["onBlur","onChange"],className:"rpc-mode-custom-crypto__form"},B.default.createElement(W.Item,{name:"network",label:l("developer_mode_manage_title_network")},B.default.createElement(P,{size:W.SIZE.xl,innerClassName:"rpc-mode-custom-crypto__form__input__disabled",prefix:B.default.createElement(K,{theme:"lightGray",icon:o.icon,text:o?.name,className:"rpc-mode-custom-crypto__icon"})})),B.default.createElement(W.Item,{name:"address",label:l("developer_mode_manage_title_contractadd"),extra:a},B.default.createElement(P.TextArea,{autoResize:!0,size:W.SIZE.xl,onChange:c,errorType:P.TIP_TYPE.always,suffix:r&&B.default.createElement(ir.Circle,{size:ir.SIZE.sm})})),B.default.createElement(W.Item,{name:"symbol",hidden:!t,label:l("developer_mode_manage_title_symbol"),rules:[{validator:(p,d)=>d?.length>ul?Promise.reject(l("developer_mode_manage_errortip_symbollimit")):Promise.resolve()}]},B.default.createElement(P,{size:W.SIZE.xl})),B.default.createElement(W.Item,{hidden:!t,name:"decimals",label:l("developer_mode_manage_title_decimals")},B.default.createElement(P,{size:W.SIZE.xl,disabled:!0})),B.default.createElement(W.Item,{hidden:!0,name:"name"},B.default.createElement(P,{size:W.SIZE.xl})),B.default.createElement(W.Item,{noStyle:!0,shouldUpdate:!0},({getFieldsError:p,getFieldValue:d})=>B.default.createElement(be.FooterActions,{offsetBottom:0},B.default.createElement(O,{size:O.SIZE.lg,type:O.TYPE.highlight,category:O.CATEGORY.fill,disabled:p().length||!d("symbol"),onClick:i},l("developer_mode_manage_btn_confirm"))))))};var va=()=>q.default.createElement(q.default.Fragment,null,q.default.createElement(J.Switch,null,q.default.createElement(J.Route,{path:pt,component:Fs,exact:!0}),q.default.createElement(J.Route,{path:io,component:Qs,exact:!0}),q.default.createElement(J.Route,{path:pe,component:di,exact:!0}),q.default.createElement(J.Route,{path:dt,component:_i,exact:!0}),q.default.createElement(J.Route,{path:ut,component:aa,exact:!0}),q.default.createElement(J.Route,{path:ft,component:Ca,exact:!0}),q.default.createElement(J.Route,{path:_t,component:Ia,exact:!0}),q.default.createElement(J.Route,{path:Tt,component:Gi,exact:!0}),q.default.createElement(J.Route,{path:ao,component:Ji,exact:!0}),q.default.createElement(J.Route,{path:gt,component:fa,exact:!0})),q.default.createElement(qs,null));var FE=()=>{let e=(0,vo.useHistory)(),{isRpcMode:t}=(0,Na.useSelector)(mo);return(0,et.useEffect)(()=>{t||e.replace(Q)},[t]),et.default.createElement(vo.Switch,null,et.default.createElement(vo.Route,{path:Zr,component:va}))};export{FE as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=rpc-mode-PQFJOHIQ.js.map
