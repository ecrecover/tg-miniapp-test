import{a as lr}from"./chunk-D5GPSXIL.js";import{a as ir}from"./chunk-ZWT5DFM3.js";import{a as Le,b as mr}from"./chunk-BNQJJTYH.js";import"./chunk-NGD2MT2M.js";import{a as cr}from"./chunk-QNERK7ZB.js";import{a as sr}from"./chunk-NKYZAXUF.js";import{a as Ct}from"./chunk-GRLVWTBK.js";import{c as tr}from"./chunk-GOPGSJ4H.js";import"./chunk-EEHWVWD4.js";import{b as Ee}from"./chunk-36P2OA3A.js";import"./chunk-JMAKZZHS.js";import{d as jo}from"./chunk-UOZDNCIX.js";import"./chunk-FA3U5YIB.js";import"./chunk-RNB3JHFL.js";import"./chunk-2XG4UAIK.js";import"./chunk-2K7DYI6B.js";import{a as Vo,d as le}from"./chunk-UFQZJGJ2.js";import"./chunk-NZPUYPHL.js";import"./chunk-4QAFBCO2.js";import"./chunk-B553FNEQ.js";import"./chunk-6QKWDR6X.js";import"./chunk-S2GMXONU.js";import{a as qo}from"./chunk-I3U7CKFC.js";import"./chunk-ZPDRUAGN.js";import"./chunk-WCH23YYN.js";import{a as dt,b as zo}from"./chunk-NZZFB6IS.js";import"./chunk-35PGDXR7.js";import"./chunk-PUO23DIP.js";import"./chunk-O2J764NL.js";import{a as me}from"./chunk-CDLW656Z.js";import"./chunk-3K3KMGWB.js";import{b as Ro}from"./chunk-5EZVDCYS.js";import"./chunk-475E6NBR.js";import{a as ie}from"./chunk-RC5IAFKK.js";import"./chunk-4VLUHY4K.js";import"./chunk-IHPHPUUG.js";import"./chunk-ZEWK7OGU.js";import"./chunk-QVA4WXOQ.js";import"./chunk-EX22SDGB.js";import"./chunk-4RARGC4D.js";import"./chunk-OQOFXHGC.js";import"./chunk-3QA2SYRR.js";import"./chunk-3SC55VQ2.js";import{e as Ho,g as se,h as Yo}from"./chunk-VTLNAOHG.js";import"./chunk-Y7YPG2EJ.js";import"./chunk-7R67VE77.js";import"./chunk-NHGZUGLZ.js";import"./chunk-G5LEAVCY.js";import"./chunk-ACHWU2H6.js";import"./chunk-ZPFBKNRM.js";import"./chunk-7DP5LYUM.js";import"./chunk-BVXKJJ4A.js";import"./chunk-TBBE7OKY.js";import"./chunk-7HJDVUH5.js";import{b as Wt,c as or,d as rr,e as De,f as B,g as b,h as nt,i as at,j as ce,k as nr,l as bt,m as fe,n as ar}from"./chunk-DMBZQQ63.js";import{k as wt}from"./chunk-NEFFYVGA.js";import{a as Ot,c as er}from"./chunk-VDMZHNTV.js";import"./chunk-H7DITLB3.js";import"./chunk-DY54SY5O.js";import"./chunk-REOQ3O2A.js";import{T as Jo,U as Ko,V as Xo,X as Qo}from"./chunk-VQBK6IHT.js";import"./chunk-CTT7GD4C.js";import{b as Bt,d as Fo,e as Po}from"./chunk-LQAOHG2H.js";import"./chunk-WNQ6F6VV.js";import{d as ko,f as Eo}from"./chunk-LEADLFDQ.js";import{a as Zo}from"./chunk-DGK7TBBE.js";import"./chunk-6Y7ULJF6.js";import"./chunk-3YH3AGVS.js";import"./chunk-3LB7TUPB.js";import"./chunk-TK6JYPIW.js";import"./chunk-OS6E6KVM.js";import"./chunk-GZRBUDXF.js";import"./chunk-WY46TT4P.js";import"./chunk-MTMUCMTY.js";import"./chunk-S6N4IJX7.js";import"./chunk-ZD4EJWX6.js";import"./chunk-WGCZSWYA.js";import"./chunk-IINHHLHP.js";import"./chunk-DY2YURLY.js";import"./chunk-KXZSXP3G.js";import"./chunk-6HXVFU7V.js";import"./chunk-D5FMQLJG.js";import"./chunk-3I7UBQEQ.js";import{h as ae}from"./chunk-DXRBY5MU.js";import"./chunk-6FR2UIE7.js";import{a as Do}from"./chunk-5GMHHIH5.js";import{d as Go,g as Bo,m as Oo,n as Wo,p as Uo,v as Mo,z as ke}from"./chunk-7KCWBFQ2.js";import"./chunk-QLUP7GYN.js";import"./chunk-7Y44NCE5.js";import"./chunk-BKPOG6ZD.js";import"./chunk-OZMVWMFO.js";import"./chunk-KTO7CPX7.js";import"./chunk-P3XTPXPO.js";import"./chunk-S6TPD26J.js";import"./chunk-4IY6P5HR.js";import"./chunk-FQWGOLDH.js";import{c as $o}from"./chunk-QEPBNPHF.js";import"./chunk-3JLS3TGD.js";import"./chunk-KDP5Z4RF.js";import"./chunk-W234FNSM.js";import"./chunk-DDO6HXRN.js";import"./chunk-CLWWTOKP.js";import{a as Lo}from"./chunk-KZ2PCELG.js";import"./chunk-C7ZG4INB.js";import{a as rt}from"./chunk-J5ANWCEO.js";import{s as To}from"./chunk-VMO2INN3.js";import{a as Cn}from"./chunk-J4TF3RT7.js";import{a as bo,j as It,l as So,o as vt,q as Pe}from"./chunk-6FOZGMAL.js";import{a as M,n as oe,o as re}from"./chunk-2MV3WEYP.js";import{db as ot,lb as wo,mb as Co,n as j,ob as ht,q as xo,qb as ee,s as te,y as P}from"./chunk-HPXM6RSK.js";import{X as Ao,Y as No,d as ho,m as Io,r as vo,t as ft}from"./chunk-IUIJ46C3.js";import"./chunk-KZ3ZU675.js";import{a as et}from"./chunk-NJ5CWPUY.js";import"./chunk-UMJMJOW4.js";import"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import"./chunk-O5JCC6KG.js";import{d as Tt,f as Fe}from"./chunk-MAIAJ7GD.js";import"./chunk-4PGNX6E2.js";import"./chunk-DBHB6SUD.js";import"./chunk-6UYK5TIR.js";import"./chunk-I56VJWE4.js";import"./chunk-PS3S6BG3.js";import"./chunk-RT4Y2U5N.js";import"./chunk-2VHH444P.js";import{a as Nt,b as J}from"./chunk-RIMU4JTV.js";import"./chunk-MGLVPWSV.js";import"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import{g as At}from"./chunk-AMVK42SC.js";import"./chunk-D6RIE45O.js";import{a as ne}from"./chunk-XCAARJ7Q.js";import{c as yo}from"./chunk-JXCCIV3J.js";import{b as Gt,c as _o}from"./chunk-AOA7NX2Y.js";import{h as ao,i as so,j as io,m as mo}from"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import{Ab as po,Ca as eo,Eb as uo,Ib as Rt,Jc as $,Kb as q,Na as Jt,Ta as oo,Xa as ro,ab as no,bb as yt,ca as to,db as V,hb as Kt,ib as tt,jb as Xt,kb as Qt,ob as Se,pb as lo,qb as co,sc as go,tb as fo,u as Re,yb as Lt,za as be}from"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import{A as Ce,F as G,c as jt,p as ct}from"./chunk-SOHTSUTI.js";import{I as U,m as Vt,w as a}from"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-E24EBHFY.js";import{M as Xe,S as Qe,Y as v,c as Dt}from"./chunk-V4F2JFTP.js";import{a as C,g as qt}from"./chunk-6DDC4Y2S.js";import"./chunk-TEY24VZN.js";import"./chunk-RKHQOOTU.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-F4JTGWJH.js";import"./chunk-YUXYCITH.js";import"./chunk-RMV3AS5X.js";import"./chunk-SF2LTPAC.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{f as c,m as s,o as i}from"./chunk-EQYVU4XP.js";s();i();var Ie=c(C()),_t=c(et());var _n=c(P());s();i();var Mt=c(C()),Nr=c(P()),wr=c(et());U();s();i();var Ut=c(C()),St=c(qt()),fr=c(P());var Ge=({title:t,children:e,onBack:o,onClose:r,nav:n,loading:m,pageName:f})=>{let l=(0,fr.useSelector)(b);return Ut.default.createElement(yo.Container,{loading:m,className:`metax-send-nft-page main-container ${f==="confirmDetail"&&l?.chain==0?"metax-send-btc-page":""}`},!n&&Ut.default.createElement(Lo,{title:t,onClose:r,onBack:o,closeable:!!r,className:f==="confirmDetail"&&l?.chain==0?"metax-send-btc-page-nav":""}),n,Ut.default.createElement("div",{className:`metax-send-nft-page__content ${f==="confirmDetail"&&l?.chain==0?"metax-send-btc-content":""}`},l&&Ut.default.createElement("div",{className:"metax-send-nft-page__content__main"},e)))};Ge.defaultProps={nav:null,title:"",onBack:null,onClose:null};Ge.propTypes={children:St.default.node.isRequired,onBack:St.default.func,onClose:St.default.func,title:St.default.string,nav:St.default.node};var de=Ge;s();i();U();var Y=c(C()),_e=c(P()),Ir=c(qt());s();i();Kt();var dr=async(t,e,o)=>{let r="",{coinId:n,baseCoinId:m}=o;return t?((n===yt||m===yt)&&!await Ko(t)||(te({coinId:n})||te({coinId:m}))&&!(await Xo(t)).isValid||(n===V||m===V)&&!await Jo(t)||o.coinId!==yt&&o.coinId!==V&&!te(o)&&!Qo(t,{allowNonPrefixed:!1}))&&(r="wallet_manage_crypto_errortip_invalid_address_tips"):r="wallet_transfer_errortip_receive_address_empty",r},pr=({amount:t,balance:e,t:o})=>t==="0"?o("wallet_extension_nft_toast_input_amount_no0"):t?t>e?o("wallet_extension_nft_toast_input_amount_no_greater",{max_amount:e}):"":o("wallet_extension_nft_toast_input_transfer_amount");s();i();var L=c(C()),ue=c(qt()),yr=c(Dt());U();var Tr=c(et());s();i();var Be=c(C());var pe=c(qt());var Oe=({disabled:t,buttonText:e,nextJump:o})=>{let r=()=>{t||o&&o()};return Be.default.createElement(rt.FooterActions,null,Be.default.createElement(v,{block:!0,category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,onClick:r,disabled:t},e))};Oe.propTypes={disabled:pe.default.bool,buttonText:pe.default.string.isRequired,nextJump:pe.default.func};Oe.defaultProps={disabled:!1,nextJump:()=>{}};var ur=Oe;s();i();var _r=c(P());mo();_o();var gr=c(C()),bn=0,Sn=()=>{let{chain:t,tokenId:e,accountAddress:o,tokenStandard:r}=(0,_r.useSelector)(b),{loading:n,data:m,error:f}=So(async()=>{let p={chain:t,walletAddress:o,inscriptionIds:[e],tokenStandard:er[r]},{data:d}=await io(Gt.postBtcNftStatus,p);return d?.assetStatusList||[]},{ready:t===bn&&[Ot.Ordinals,Ot.ATOMICAL].includes(r)}),l=(0,gr.useMemo)(()=>[Ot.ATOMICAL,Ot.Ordinals].includes(r)&&m?.some(({unavailable:p})=>Number(p)===1)?1:0,[m,r]);return[n,l,f]},xr=Sn;var We=({nftBalance:t,nftInfo:e,amount:o,toAddress:r,toError:n,amountError:m,onAmountChange:f,onToAddressChange:l,showAmount:p,onLoadingChange:d,tipMessage:g})=>{let[u,h,x]=xr(),I=(0,Tr.useHistory)(),F=()=>{I.replace(re)};(0,L.useEffect)(()=>{d?.(u)},[u]);let _=(0,L.useMemo)(()=>x?a("extension_wallet_header_alert_nft_check_error"):h===1?a("extension_wallet_header_alert_utxo_limit_arc"):null,[x,h]);return L.default.createElement("div",{className:(0,yr.default)("metax-send-nft-form")},(h||x)&&L.default.createElement(jt,{closable:!1,type:x?jt.TYPE.error:jt.TYPE.warn,className:"metax-send-nft-form__alert",title:_}),L.default.createElement("div",{className:"metax-send-nft-form__row"},L.default.createElement(ct.TextArea,{className:"metax-send-nft-form__address",inputClassName:"metax-send-nft-form__address-input",placeholder:a("wallet_extension_transaction_placeholder_input_address"),label:a("wallet_transfer_subtitle_receive_address"),value:r,error:n?a(n):"",disabled:!!h||u,size:ct.SIZE.xl,errorType:ct.TIP_TYPE.always,onChange:l,tips:g||a("wallet_extension_nft_popup_toast_wrong_address_cannnot_retrieved"),autoResize:!0})),p&&L.default.createElement("div",{className:"metax-send-nft-form__row"},L.default.createElement(ct.Number,{className:"ethereum-send-form__amount",placeholder:"0",title:a("wallet_contract_interactiom_subtitle_amount"),size:ct.SIZE.xl,precision:0,enableMinus:!1,value:o,error:m||"",errorType:ct.TIP_TYPE.always,onChange:f}),L.default.createElement("div",{className:"metax-send-nft-form__row__max"},L.default.createElement("span",{className:"metax-send-nft-form__row__max-amount"},a("wallet_extension_nft_toast_owned"),":",t),L.default.createElement("span",{onClick:()=>{f(`${e.totalBalance||0}`)},className:"metax-send-nft-form__row__btn-max"},a("wallet_transfer_btn_max_balance_amount")))),L.default.createElement(ur,{nextJump:F,buttonText:a("wallet_transfer_btn_next"),disabled:!r||n||h||p&&(!o||m)}))};We.propTypes={nftBalance:ue.default.number.isRequired,amount:ue.default.number,toAddress:ue.default.string};We.defaultProps={toAddress:"",amount:void 0};var hr=We;function vr(t){let e=Ho(void 0,void 0,{key:t.nftInfo.baseCoinKey}),o=(0,_e.useSelector)(fe),[r,n]=(0,Y.useState)(null),[m,f]=(0,Y.useState)(null),{run:l}=Pe(async(x,I)=>{!e||(x.toLowerCase()===I.toLowerCase()&&f(Y.default.createElement("div",{className:"metax-send-nft-form__waring"},Y.default.createElement("span",{className:"metax-send-nft-form__waring__tips"},a("wallet_extension_mid_textarea_same_address")))),n(await dr(x,I,e)))},{wait:200}),[p,d]=(0,Y.useState)(null),{run:g}=Pe((x,I)=>{d(pr({amount:x,balance:I,t:a}))},{wait:200}),u=(0,Y.useCallback)(x=>{t.setToAddress(x.target.value),l(x.target.value,t.fromAddress)},[t.fromAddress,l]),h=(0,Y.useCallback)(x=>{let I=x.replace(/\D.*$/g,"").replace(/^0*/,"").replace(/\D/g,"");t.setAmount(I),g(I,t.nftBalance)},[t.nftBalance,g]);return Y.default.createElement(hr,{...t,toError:r,tipMessage:m,amountError:p,showAmount:o,onToAddressChange:u,onAmountChange:h})}vr.propTypes={nftInfo:Ir.default.object.isRequired};function Fn(t){return{amount:t.nftSend.amount,toAddress:t.nftSend.toAddress,fromAddress:t.nftSend.nftInfo?.accountAddress,nftInfo:t.nftSend.nftInfo,nftBalance:t.nftSend.nftInfo?.totalBalance}}function Pn(t){return{setToAddress:e=>t(Wt.setToAddress(e)),setAmount:e=>t(Wt.setAmount(e))}}var Ar=(0,_e.connect)(Fn,Pn)(vr);var kn=()=>{let t=(0,Nr.useDispatch)(),e=(0,wr.useHistory)(),[o,{set:r}]=vt(!1),n=(0,Mt.useCallback)(()=>{t(Wt.resetSend()),e.goBack()},[e]);return Mt.default.createElement(de,{onBack:n,loading:o,title:a("wallet_home_btn_send")},Mt.default.createElement(Ar,{onLoadingChange:r}))},Cr=kn;s();i();var $t=c(C()),dn=c(P()),pn=c(et());U();s();i();var Yt=c(C()),cn=c(P());Kt();be();s();i();var N=c(C()),Ft=c(P()),Ur=c(et());U();s();i();Kt();_o();mo();q();Fe();var En=t=>{let e=ot(t),n=(wo(t)?.account||{})[Jt]||"";return{walletId:e,address:n}},Dn=async t=>{let e={coinId:V,address:t.address},o={fromAddr:t.fromAddress,toAddr:t.toAddress},{info:r={}}=await Go(e,o),{sequenceNumber:n,chainId:m,expirationTimestampSecs:f,gasUnitPrice:l}=r;return{sequenceNumber:n,chainId:m,expirationTimestampSecs:f,gasUnitPrice:l,maxGasAmount:8e3}},Ln=t=>async e=>{let{signedTx:o,sequenceNumber:r,fromAddress:n,toAddress:m,gasUnitPrice:f,maxGasAmount:l,amount:p}=t,d={nonce:r},g=tt(f,l),u={signedTx:o,coinId:V,fromAdr:n,toAdr:m,serviceCharge:g,extJson:JSON.stringify(d),coinAmount:fo(p),txSource:$.NFT};return await e(sr(u))},Ue=t=>async(e,o)=>{let r=o(),{address:n}=En(r),{type:m,maxGasAmount:f,gasUnitPrice:l,fromAddress:p,toAddress:d,receiver:g,sender:u,creator:h,collectionName:x,tokenName:I,version:F,amount:_}=t,k=await Dn({fromAddress:p,toAddress:d,address:n});f&&(k.maxGasAmount=f),l&&(k.gasUnitPrice=l);let w={};m===ft.OFFER_NFT||m===ft.OFFER_NFT_SIMULATE?(w.receiver=g,w.amount=_):w.sender=u;let O={type:m,base:k,data:{...w,creator:h,collectionName:x,tokenName:I,version:F}},E=await Tt().signTransaction(O,n,Jt);return{base:k,signedTx:E}},br=t=>async e=>{let{fromAddress:o,toAddress:r,amount:n}=t,{base:m,signedTx:f}=await e(Ue(t)),l=await me(Jt,f);return{txId:await e(Ln({...m,signedTx:f,fromAddress:o,toAddress:r,amount:n})),txHash:l}},Sr=async(t={},e)=>{let o;try{o=await Mo(e)}catch(m){o=t.maxGasAmount||2e3,console.log(m)}let{gasUnitPrice:r}=t,n=tt(r,o);return{gasUnitPrice:r,maxGasAmount:o,fee:n}},Fr=t=>async e=>{let{base:o,signedTx:r}=await e(Ue({...t,type:ft.OFFER_NFT_SIMULATE}));return Sr(o,r)},Pr=t=>async e=>{let{base:o,signedTx:r}=await e(Ue({...t,type:ft.CLAIM_NFT_SIMULATE}));return Sr(o,r)},kr=t=>async e=>e(br({...t,type:ft.OFFER_NFT})),Er=t=>async e=>e(br({...t,type:ft.CLAIM_NFT})),Dr=async(t,e,o,r)=>{let n=oo({coinId:r})||{},m=Gt.getAptosResourceType.replace("{rpcUrl}",n.rpcUrl),f=Gt.getAptosTable.replace("{rpcUrl}",n.rpcUrl),{data:{data:{token_data:{handle:l}}}}=await ao(m.replace("{creator}",t)),{data:p}=await so(f.replace("{handle}",l),{key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:t,collection:e,name:o}});return p.largest_property_version};s();i();var Lr=c(P());q();var Gn=(t,e)=>Vo((n,m)=>Xt(n,10**m.decimals),Rt)(t,e),ge=(t,e={})=>To(t,{symbol:e?.symbol,decimals:e?.decimals}),xe=(t,e={})=>{let o=(0,Lr.useSelector)(ee),r=ae(e.coinId),n=Gn(t,e);return le({amount:n,rate:r,symbol:o.symbol},{useApproximate:!0})};q();s();i();var st=c(C()),Gr=c(Cn());U();var D=({label:t,value:e,valueDisplay:o,canCopy:r})=>{let n=(0,st.useCallback)(()=>{(0,Gr.default)(e),G.success({title:a("wallet_transaction_history_toast_address_copied"),desc:e,duration:3,containerClassName:"address-copy-notification",showClose:!0,placement:G.DIRECTION.top})},[e]);return st.default.createElement("div",{className:"metax-send-nft-confirm"},st.default.createElement("div",{className:"metax-send-nft-confirm__label"},t),st.default.createElement("div",{className:"metax-send-nft-confirm__value",onClick:r?n:void 0},st.default.createElement(qo,{text:o,maxWidth:"215px"}),r&&st.default.createElement("span",{className:"okds-copy confirm-transaction--copy"})))};s();i();var Br=c(C()),Or=c(P());var Wr=(t,e)=>{let o=(0,Or.useDispatch)(),[r,n]=(0,Br.useState)({aptosFee:0,gasUnitPrice:"0",maxGasAmount:"0",loading:!1,version:0});return It(()=>{(async()=>{n({...r,loading:!0}),t.version=await Dr(t.creator,t.collectionName,t.tokenName,t.coinId);let{gasUnitPrice:f,maxGasAmount:l,fee:p}=e?await o(Pr(t)):await o(Fr(t));n({aptosFee:p,gasUnitPrice:f,maxGasAmount:l,loading:!1,version:t.version})})()}),r};var Bn=()=>{let t=(0,Ft.useDispatch)(),{creatorAddress:e,name:o,projectName:r,accountAddress:n,baseCoinId:m,image:f,chainName:l,claim:p}=(0,Ft.useSelector)(b),d=(0,Ur.useHistory)(),{name:g,keyringName:u}=(0,Ft.useSelector)(ht),{toAddress:h,amount:x=1}=(0,Ft.useSelector)(nt),{baseCoin:I,coin:F}=ie(m,!0),_=p?{fromAddress:n,toAddress:h,sender:n,creator:e,collectionName:r,tokenName:o,amount:x,coinId:F?.coinId}:{fromAddress:n,toAddress:h,receiver:h,creator:e,collectionName:r,tokenName:o,amount:x,coinId:F?.coinId},{aptosFee:k,gasUnitPrice:w,maxGasAmount:O,loading:E,version:K}=Wr(_,p),[X,Q]=(0,N.useState)(!1),kt=tr(),zt=ge(k,I),mt=lo(kt,po(k)),H=xe(k,I),Z=At({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return N.default.createElement(N.default.Fragment,null,N.default.createElement("div",{className:"metax-send-nft-detail"},N.default.createElement("div",{className:"metax-send-nft-detail__base--container"},N.default.createElement(Ct,{src:f,startStatus:!0,alt:"nft",backupImage:Z,classnames:"metax-send-nft-detail__icon"}),N.default.createElement("div",{className:"metax-send-nft-detail__name-container"},N.default.createElement("div",{className:"metax-send-nft-detail__name"},o))),N.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${u} - ${g}`}),N.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:n,valueDisplay:j(n),canCopy:!0}),N.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:h,valueDisplay:j(h),canCopy:!0}),N.default.createElement("div",{className:"metax-send-nft-detail__hr"}),N.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:l}),N.default.createElement("div",{className:"metax-send-nft-confirm metax-send-nft-fee-item"},N.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),N.default.createElement("div",{className:"metax-send-nft-confirm__value"},E?N.default.createElement(Qe,null):N.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},N.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},a("wallet_transfer_subtitle_trading_speed_average")," ",zt),N.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},H)))),!mt&&!E&&N.default.createElement("div",{className:"metax-send-nft-detail__error"},a("wallet_dapp_connection_errortip_insufficient_tip"))),N.default.createElement(rt.FooterActions,null,N.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(B()),mt?d.goBack():d.replace(M)}},a("wallet_dapp_connection_btn_reject")),N.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:X,disabled:!mt||E,onClick:async()=>{try{Q(!0),_.gasUnitPrice=w,_.maxGasAmount=O,_.version=K;let{txId:gt,txHash:xt}=p?await t(Er(_)):await t(kr(_));p?await ke(21,xt,h):await ke(20,xt,n),wt({tx_id:gt}),t(B()),G.success({title:a("wallet_transfer_notif_transaction_submit")}),d.replace(M)}catch{G.error({title:a("wallet_home_toast_network_error")})}finally{Q(!1)}}},a("wallet_set_password_btn_confirm"))))},Mr=Bn;s();i();var Hr=c(C());var ye=c(P());var Yr=()=>{let{accountAddress:t,inscriptionIdProtocol:e}=(0,ye.useSelector)(b),{toAddress:o}=(0,ye.useSelector)(nt),r=(0,ye.useSelector)(ot);return Hr.default.createElement(ir,{unapproved:{walletId:r,params:{transfer:{from:t,to:o,data:e}}}})};s();i();var A=c(C()),z=c(P()),on=c(et());U();q();s();i();var Me=c(P());q();function $r(){let{baseCoinKey:t}=(0,Me.useSelector)(b),o=se(void 0,void 0,{key:t})?.coinAmountInt,r=(0,Me.useSelector)(at),{gasLimit:n,gasPrice:m,supportEip1559:f,maxFeePerGas:l,maxPriorityFeePerGas:p}=r;if(n==="0"||f&&(l==="0"||p==="0")||!f&&m==="0")return!1;let g=tt(`${(f?l:m)||0}`,`${n||0}`);return co(`${o||0}`,g)}s();i();var Pt=c(P());Kt();q();Fe();function zr(){let t=(0,Pt.useDispatch)(),{contractAddress:e,accountAddress:o,baseCoinId:r,localType:n}=(0,Pt.useSelector)(b),{gasLimit:m,gasPrice:f,maxFeePerGas:l,maxPriorityFeePerGas:p,supportEip1559:d}=(0,Pt.useSelector)(nr),g=(0,Pt.useSelector)(ce),u=Do();return{send:async({nonce:h,updateGasInfo:x,activityId:I})=>{let F=ro(n)?.realChainIdHex,_={from:o,to:e,nonce:J(h),data:g,chainId:F,value:"0",gasLimit:J(m)};d?(_.type=Io.FEE_MARKET,_.maxFeePerGas=J(l),_.maxPriorityFeePerGas=J(p)):_.gasPrice=J(f),x&&(_.maxFeePerGas?(_.maxFeePerGas=J(x.maxFeePerGas),_.maxPriorityFeePerGas=J(x.maxPriorityFeePerGas)):_.gasPrice=J(x.gasPrice));let w={...xo(_)};w.walletId=u;let O=Nt(d?_.maxFeePerGas:_.gasPrice),E=Nt(_.gasLimit),K={..._,value:Nt(_.value),from:_.from,to:_.to,gas:E,gasPrice:O,priorityFee:Nt(d?_.maxPriorityFeePerGas:0),nonce:Nt(_.nonce),repeatTxType:ho.CONFIRMING,oldTxHash:""},X={coinId:r,coinAmount:0,fromAdr:_.from,toAdr:_.to,serviceCharge:tt(E,O),extJson:JSON.stringify(K),txSource:$.NFT,inputData:_.data?_.data:"",activityId:I};return await t(ko({txParams:w,walletId:u})),{serverTxId:await Tt().signAndPublishTransferTransaction({signParams:w,from:w.from,baseChain:eo,publishParams:X})}}}}s();i();var S=c(C()),Rr=c(Dt()),pt=c(P());U();var tn=c(et());s();i();s();i();var Vr=c(C()),qr=c(Dt());U();s();i();var Zr={root:"_root_1leh0_1"};function On({className:t,style:e}){return Vr.default.createElement("div",{className:(0,qr.default)(Zr.root,t),style:e},a("wallet_extension_freegas_notif_networkfee_rebate"))}var He=On;s();i();var Jr=c(C());s();i();var jr={text:"_text_1qgtl_1"};function Wn({status:t}){return t!==dt.ok?null:Jr.default.createElement(He,{className:jr.text})}var Ye=Wn;s();i();var Kr=c(C()),Xr=c(Dt());s();i();var it={root:"_root_6th6e_1",render:"_render_6th6e_9",iconWrapper:"_iconWrapper_6th6e_13",icon:"_icon_6th6e_13",error:"_error_6th6e_23"};function Un({className:t,children:e,error:o}){return Kr.default.createElement("div",{className:(0,Xr.default)(it.root,t,{[it.error]:o})},e)}var $e=Un;s();i();U();var Ht=c(C());var ze=c(Dt());function Mn({className:t,status:e,tip:o,activity:r}){if(e!==dt.error&&e!==dt.ok||!o)return null;let{gas:n,totalTimes:m}=r,{text:f,key:l,args:p,error:d}=o,g=f||a(l,p||{}),u;return l===Bt.availableTimesLimit?u=a("wallet_extension_freegas_tooltip_5refund_day",{num:m}):l===Bt.exceedGasLimit?u=a("wallet_extension_freegas_tooltip_under_10u",{num:n}):l===Bt.exceedTodayGasLimit?u=a("wallet_extension_freegas_tooltip_paused_rules"):l===Bt.walletAssetNotEnough&&(u=a("wallet_extension_freegas_notif_greater_than10",{num:m})),u&&(g=Ht.default.createElement("div",{className:it.iconWrapper},g,Ht.default.createElement(Ce,{title:u,trigger:Ce.TRIGGER_TYPES.hover},Ht.default.createElement(Xe,{className:(0,ze.default)("okx-wallet-plugin-information-circle",it.icon,{[it.error]:d})})))),Ht.default.createElement($e,{className:(0,ze.default)(it.render,t),error:d},g)}var Ze=Mn;s();i();var Te=c(P());U();q();var Qr=()=>{let t=(0,Te.useSelector)(bt),e=(0,Te.useSelector)(at),{baseCoin:o}=ie(t,!0),{networkFee:r}=e,n=(0,Te.useSelector)(ee),f=Zo(Lt,g=>uo(g,o.vdecimalNum),Rt),l=`${Vt.thousandFormat(f(r))} ${o.symbol}`,p=ae(o.coinId),d=le({amount:Lt(r),rate:p,symbol:n.symbol},{useApproximate:!0});return{gasFeeToETHDisplay:l,gasFeeToCurrencyDisplay:d}};s();i();var Ve={arrow:"_arrow_1p9f5_1",gasReturnTip:"_gasReturnTip_1p9f5_6"};function Hn(){let t=(0,pt.useSelector)(at),e=Le(),{status:o}=e,{gasType:r}=t,n=No[r],m=n?a(n):"",{gasFeeToETHDisplay:f,gasFeeToCurrencyDisplay:l}=Qr();return o===dt.ok?S.default.createElement(S.default.Fragment,null,S.default.createElement(Ye,{status:o}),S.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},m,"\xA0",f)):S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},m,"\xA0",f),S.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},l))}var en=()=>{let t=(0,pt.useDispatch)(),e=(0,tn.useHistory)(),{accountAddress:o,contractAddress:r}=(0,pt.useSelector)(b),n=(0,pt.useSelector)(bt),m=(0,pt.useSelector)(ce),[f,{setTrue:l,setFalse:p}]=vt(!1),d=Le(),g=bo(h=>{t(or(h))}),u=()=>{t(B()),e.push(M)};return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"metax-send-nft-confirm"},S.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),S.default.createElement("div",{className:"metax-send-nft-confirm__value",onClick:l},S.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},S.default.createElement(Hn,null)),S.default.createElement("div",{className:"metax-send-nft-confirm__value__narrow"},S.default.createElement("span",{className:(0,Rr.default)("okds-arrow-chevron-right-centered-md",Ve.arrow)}))),S.default.createElement(jo,{visible:f,coinId:n,address:o,inputData:m,tokenAddress:r,value:"0",onBack:p,onClose:u,onGasChange:g,gasReturn:d})),S.default.createElement(Ze,{className:Ve.gasReturnTip,activity:d.activity,status:d.status,tip:d.tip}))};var Yn=()=>{let t=(0,z.useDispatch)(),e=(0,z.useSelector)(ar),{accountAddress:o,baseCoinId:r,image:n,name:m,chainName:f}=(0,z.useSelector)(b),l=$r(),p=(0,on.useHistory)(),{name:d,keyringName:g}=(0,z.useSelector)(ht),u=(0,z.useSelector)(at),h=(0,z.useSelector)(bt),[,x]=Yo(h),{toAddress:I,amount:F}=(0,z.useSelector)(nt),_=(0,z.useSelector)(fe),[k,w]=(0,A.useState)(!1),{send:O}=zr(),E=zo({coinId:h,txType:Fo.nft,fromAddress:o,toAddress:I,unavailable:u.gasType===Ao.CUSTOM,fee:Lt(u.networkFee)}),K=E?.errorCode,X=()=>{w(!0)},Q=()=>{w(!1)},{gasPrice:kt}=u,mt={fetchParams:{coinId:h,from:o,to:I,amount:F,gasPrice:kt},userGasInfo:u,baseCoinAmountUse:"0"},H=(0,A.useMemo)(()=>_?Vt.thousandFormat(F):"",[F,_]),Z=(0,A.useCallback)(()=>{t(B()),l?p.goBack():p.replace(M)},[l]),gt=(0,A.useCallback)(async ve=>{if(!await Ro({callback:Z}))return;let{nonce:Ae,updateGasInfo:Ne}=ve;try{let W=await O({nonce:Ae,updateGasInfo:Ne,activityId:E.activityId}),{serverTxId:Et}=W||{};wt({tx_id:Et}),G.success({title:a("wallet_transfer_notif_transaction_submit")}),t(B()),p.replace("/")}catch(W){let Et=W?.data?.originalError?.code;Po(Et)?(G.error({title:W?.data?.originalError.msg||a("wallet_home_toast_network_error")}),E.clear()):W.message!==ne&&G.error({title:a("wallet_home_toast_network_error")})}},[r,o,O]);(0,A.useEffect)(()=>{K===0&&typeof x?.chainId<"u"&&$o({wallet_address:o,interactive_address:I,chain_id:x?.chainId,transaction_type:"send_nft"})},[K,x?.chainId]);let xt=At({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return A.default.createElement(mr,{gasReturn:E},A.default.createElement("div",{className:"metax-send-nft-detail"},A.default.createElement("div",{className:"metax-send-nft-detail__base--container"},A.default.createElement(Ct,{src:n,alt:"nft",startStatus:!0,backupImage:xt,classnames:"metax-send-nft-detail__icon"}),A.default.createElement("div",{className:"metax-send-nft-detail__name-container"},A.default.createElement("div",{className:"metax-send-nft-detail__name"},m))),A.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${g} - ${d}`}),A.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:o,valueDisplay:j(o),canCopy:!0}),A.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:I,valueDisplay:j(I),canCopy:!0}),A.default.createElement("div",{className:"metax-send-nft-detail__hr"}),A.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:f}),A.default.createElement(en,null),!e&&!l&&A.default.createElement("div",{className:"metax-send-nft-detail__error"},a("wallet_dapp_connection_errortip_insufficient_tip")),_&&A.default.createElement(D,{label:a("wallet_extension_transaction_module_input_label_amount"),valueDisplay:H})),A.default.createElement(rt.FooterActions,null,A.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:Z},a("wallet_dapp_connection_btn_reject")),A.default.createElement(lr,{dataForCheck:mt,onClick:gt,beforeClick:X,afterClick:Q,btnProps:{loading:k,width:160,disabled:e||!l}},a("wallet_set_password_btn_confirm"))))},rn=Yn;s();i();var y=c(C());U();s();i();var he=c(C());q();be();var nn=(t={},e=!1,o=!1)=>{let[r,n]=(0,he.useState)({}),[m,f]=(0,he.useState)(!0),[l,p]=(0,he.useState)(!1),d=r.fee;return It(()=>{(async()=>{try{let u=await Oo(t);u?.fee&&n(u),f(!1)}catch{o&&(p(!0),f(!1))}})()}),e?{solanaFee:d,solanaFeeInfo:r,loading:m,error:l}:d};var ut=c(P()),mn=c(et());s();i();be();s();i();Fe();var an=t=>async(e,o)=>{let r=o(),n=ot(r),m=t.walletId||n,l=Co(r,m)?.serverWalletType,p=await Tt().getSignRequestHeaders({walletId:m}),d={txSource:$.NORMAL,accountId:m,walletType:l,...t};return await Bo(d,{headers:p})};var qe=({type:t,from:e,to:o,blockHash:r,coinAmount:n,mint:m,createAssociatedAddress:f,computeUnitPrice:l,computeUnitLimit:p,tokenStandard:d})=>{let g={type:t,payer:e,blockHash:r,from:e,to:o,amount:n,computeUnitPrice:l,computeUnitLimit:p},u;return t===vo.TRANSFER?u={...g}:u={...g,mint:m,createAssociatedAddress:f},d&&(u.tokenStandard=d),u},sn=({type:t,from:e,to:o,coinId:r,blockHash:n,coinAmount:m,mint:f=null,createAssociatedAddress:l,serviceCharge:p,computeUnitPrice:d,computeUnitLimit:g,txSource:u=$.NORMAL,extJson:h=JSON.stringify({}),walletId:x,tokenStandard:I})=>async F=>{let _=qe({type:t,from:e,to:o,blockHash:n,coinAmount:m,mint:f,createAssociatedAddress:l,computeUnitPrice:d,computeUnitLimit:g,tokenStandard:I}),k=await F(Eo(_,e,x)),w=await me(Re,k);return await F(an({signedTx:k,coinAmount:m,coinId:r,fromAdr:e,toAdr:o,serviceCharge:p,txSource:u,extJson:h,txHash:w}))};q();var $n=()=>{let t=(0,ut.useDispatch)(),e=(0,ut.useSelector)(b),{tokenId:o,accountAddress:r,baseCoinId:n,image:m,name:f,chainName:l,extendProperty:p}=e,d=se(n),{chainId:g}=d,{tokenStandard:u}=p||{},h=cr(),x=(0,mn.useHistory)(),I=(0,y.useRef)(!1),F=(0,y.useRef)(),{name:_,keyringName:k}=(0,ut.useSelector)(ht),{toAddress:w}=(0,ut.useSelector)(nt),[O,{setTrue:E,setFalse:K}]=vt(!0),[X,Q]=(0,y.useState)(""),[kt,zt]=(0,y.useState)("0"),{loading:mt,solanaFeeInfo:H}=nn({coinId:n,address:w},!0),Z=mt||O,{fee:gt,computeUnitPrice:xt,feelimit:ve}=H,{priorityFee:je,priorityGasPrice:Ae,priorityGasLimit:Ne}=Ee(ve,xt,kt),W=Qt(gt,je),Et=xe(W,d),gn=ge(W,d),xn=(0,ut.useSelector)(ot),[yn,Je]=(0,y.useState)(!1),Tn=At({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"}),Zt=(0,y.useMemo)(()=>Z?{msg:"",isEnough:!1}:X?{msg:X,isEnough:!0}:Se(d.coinAmountInt,W)?{msg:a("wallet_dapp_connection_errortip_insufficient_tip"),isEnough:!1}:Se(d.coinAmountInt,Qt(W,H.selfRent))?{msg:a("walletextension_toast_text_reserve_rent_exempt",{number:Xt(H.selfRent,10**d.decimals)}),isEnough:!1}:{msg:"",isEnough:!0},[Z,d.coinAmountInt,d.decimals,W,H.selfRent]),Ke=()=>{let R={from:r,to:w,coinId:n,serviceCharge:W,computeUnitPrice:Ae,computeUnitLimit:Ne,txSource:$.NFT,coinAmount:1,mint:o,createAssociatedAddress:!F.current,walletId:xn,type:"tokenTransfer"};return u===4&&(R.type="mplTransfer",R.tokenStandard=4),R};return(0,y.useEffect)(()=>{o&&w&&g&&H.recentBlockhash&&(E(),Q(""),(async()=>{try{let lt=Ke();lt.blockHash=H.recentBlockhash;let we=qe(lt),hn=Uo({mint:o,address:w}),{SolWallet:In}=await go(),vn=await new In().getSerializedTransaction({privateKey:"",data:we}),An=h({coinId:n,from:r,chainId:g,simulateTransactionParam:{transaction:vn}}),[Nn,wn]=await Promise.all([hn,An]);F.current=Nn?.data?.legal,zt(wn.firstUnitLimit)}catch(lt){Q(lt?.message||a("wallet_extension_alert_estimate_unavailable"))}finally{K()}})())},[o,r,w,g,H.recentBlockhash]),y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"metax-send-nft-detail"},y.default.createElement("div",{className:"metax-send-nft-detail__base--container"},y.default.createElement(Ct,{src:m,startStatus:!0,alt:"",backupImage:Tn,classnames:"metax-send-nft-detail__icon"}),y.default.createElement("div",{className:"metax-send-nft-detail__name-container"},y.default.createElement("div",{className:"metax-send-nft-detail__name"},f))),y.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${k} - ${_}`}),y.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:r,valueDisplay:j(r),canCopy:!0}),y.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:w,valueDisplay:j(w),canCopy:!0}),y.default.createElement("div",{className:"metax-send-nft-detail__hr"}),y.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:l}),y.default.createElement("div",{className:"metax-send-nft-confirm metax-send-nft-fee-item"},y.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),y.default.createElement("div",{className:"metax-send-nft-confirm__value"},y.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},y.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},a("wallet_transfer_subtitle_trading_speed_average")," ",gn),y.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},Et)))),!Z&&Zt.msg&&y.default.createElement("div",{className:"metax-send-nft-detail__error"},Zt.msg)),y.default.createElement(rt.FooterActions,null,y.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(B()),Zt.isEnough?x.goBack():x.replace(M)}},a("wallet_dapp_connection_btn_reject")),y.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:Z||yn,disabled:Zt.msg,onClick:async()=>{if(!I.current){I.current=!0,Je(!0);try{let R=await Wo({coinId:n,address:r},{fromAddr:r,toAddr:w}),lt=Ke();lt.blockHash=R;let we=await t(sn(lt));wt({tx_id:we}),t(B()),G.success({title:a("wallet_transfer_notif_transaction_submit")}),x.replace(M)}catch(R){R.message!==ne&&G.error({title:a("wallet_home_toast_network_error")})}I.current=!1,Je(!1)}}},a("wallet_set_password_btn_confirm"))))},ln=$n;var zn=()=>{let{baseCoinId:t}=(0,cn.useSelector)(b);switch(t){case no:case to:return Yt.default.createElement(Yr,null);case yt:return Yt.default.createElement(ln,null);case V:return Yt.default.createElement(Mr,null);default:return Yt.default.createElement(rn,null)}},fn=zn;var Zn=()=>{let t=(0,pn.useHistory)(),e=(0,dn.useDispatch)(),o=(0,$t.useCallback)(()=>{e(De()),t.replace(oe)},[]);return $t.default.createElement(de,{pageName:"confirmDetail",title:t.location.state?.nftInfo.claim?a("extension_aptos_nft_title_receiveconfirm"):a("wallet_trade_maintitle_transaction_confirm"),onBack:()=>{if(t.location.state?.nftInfo.claim){e(B()),e(De()),t.goBack();return}o()}},$t.default.createElement(fn,null))},un=Zn;var Vn=()=>{let t=(0,_t.useHistory)(),e=(0,_n.useDispatch)();return It(()=>{t.location.state?e(rr(t.location.state?.nftInfo)):t.replace(M)}),Ie.default.createElement(_t.Switch,null,Ie.default.createElement(_t.Route,{exact:!0,path:oe,component:Cr}),Ie.default.createElement(_t.Route,{exact:!0,path:re,component:un}))},Hc=Vn;export{Hc as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=SendNft-GYALOGUF.js.map
