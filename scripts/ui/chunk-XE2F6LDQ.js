import{b as J,c as Q}from"./chunk-REIQGNZB.js";import{c as q}from"./chunk-Q4CU3DV4.js";import{a as K,b as G}from"./chunk-6QKWDR6X.js";import{c as f,d as P}from"./chunk-35PGDXR7.js";import{a as N}from"./chunk-H7DITLB3.js";import{d as $}from"./chunk-S6N4IJX7.js";import{s as z,w as n}from"./chunk-VMO2INN3.js";import{b as t}from"./chunk-IUIJ46C3.js";import{c as ue}from"./chunk-DBHB6SUD.js";import{a as Y}from"./chunk-RIMU4JTV.js";import{f as V,g as k,i as j}from"./chunk-MGLVPWSV.js";import{c as B}from"./chunk-JXCCIV3J.js";import{Kb as F,ea as Z,jb as W,nb as b,sb as D,za as me}from"./chunk-X7YMANPZ.js";import{n as H}from"./chunk-SOHTSUTI.js";import{I as h,w as m}from"./chunk-RPZQDAIQ.js";import{c as le}from"./chunk-V4F2JFTP.js";import{a as g}from"./chunk-6DDC4Y2S.js";import{f as A,m as o,o as s}from"./chunk-EQYVU4XP.js";o();s();F();var X=A(ue()),Te={[N.TOKEN_METHOD_APPROVE]:{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},[N.TOKEN_METHOD_INCREASE_ALLOWANCE]:{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}},Se=e=>[t.AUTHORIZATION,t.CANCEL_AUTHORIZATION,t.INCREASE_ALLOWANCE,t.DECREASE_ALLOWANCE,t.COMMON_APPROVE].includes(e),Pe=e=>[t.NFT_AUTHORIZATION,t.NFT_CANCEL_AUTHORIZATION].includes(e),ee=e=>[t.AUTHORIZATION,t.NFT_AUTHORIZATION,t.COMMON_APPROVE].includes(e),te=e=>[t.INCREASE_ALLOWANCE].includes(e);var Me=e=>t.TRANS_OUT===e,ve=e=>[t.CANCEL_AUTHORIZATION,t.NFT_CANCEL_AUTHORIZATION].includes(e),ce=({spender:e,value:r,type:p})=>!e||b(r,0)?"":X.default.encodeMethod(Te[p],[e,r]);function Ue(e,{customPermissionAmount:r,decimals:p},a){if(a){if(a.name!==N.TOKEN_METHOD_APPROVE&&a.name!==N.TOKEN_METHOD_INCREASE_ALLOWANCE)throw new Error(`Invalid data; should be 'approve' method, but instead is '${a.name}'`)}else throw new Error("Invalid data");let _=Q(a);return ce({spender:_,value:J(r,p),type:a.name})}var we=(e,r=24)=>e?.length>r?`${e.slice(0,r)}...`:e;o();s();var d=A(g());me();var M={eoa:"eoa",contract:"contract"},Ae="eth_sign",de="suspicion_withdraw_address",_e="lower_value",Ee=({kysRet:e={},coinId:r="",handleCancel:p})=>{let{getEoaModalParams:a,getEthSignModalParams:_,getLowerValueModalParams:y,getTronPermissionsModalParams:S,getSolPermissionsModalParams:C,getBlackAddressWarnModalParams:E,getStrongBlackAddressModalParams:I,getSuspicionWithdrawAddressModalParams:ae}=K(),{permissionMsg:w,approveList:ie,causeRiskItem:L=[],blackAddress:O}=e||{},[T={}]=ie||[],c=(0,d.useRef)(),l=pe=>{c.current||(c.current=H.action({hideCloseBtn:!0,maskClosable:!1,noContentPadding:!0,children:d.default.createElement(G,{modalParams:pe,handleCancel:async()=>{await p(),c.current.destroy(),c.current=null},closeModal:()=>{c.current.destroy(),c.current=null}})}))};(0,d.useEffect)(()=>{if(O?.tagExt){l(I(O.address));return}if(O?.msg){l(E(O.msg));return}if(w){l(r===Z?S():C());return}if((ee(T.approvalType)||te(T.approvalType))&&T.addressType===M.eoa){l(a(T.address));return}if(L.includes(de)){l(ae());return}if(L.includes(_e)){l(y());return}L.includes(Ae)&&l(_())},[r,w,O?.msg,L?.length,T.addressType,T.approvalType])},ke=Ee;o();s();var Ke=e=>[t.AUTHORIZATION,t.CANCEL_AUTHORIZATION,t.INCREASE_ALLOWANCE,t.DECREASE_ALLOWANCE,t.COMMON_APPROVE].includes(e),Oe=e=>[t.INCREASE_ALLOWANCE].includes(e);var $e=e=>[t.NFT_AUTHORIZATION,t.NFT_CANCEL_AUTHORIZATION].includes(e),Ne=e=>[t.AUTHORIZATION,t.NFT_AUTHORIZATION,t.COMMON_APPROVE].includes(e),re=e=>Ne(e)||Oe(e),Ge=e=>[t.CANCEL_AUTHORIZATION,t.NFT_CANCEL_AUTHORIZATION].includes(e),qe=e=>t.TRANS_OUT===e;o();s();var i=A(g()),ne=A(le());h();F();o();s();var se=A(g());o();s();var oe={root:"_root_1wfix_1"};var fe=({text:e,type:r=n.TYPE.secondary})=>{let p=q();return se.default.createElement(n.Text,{forceWrap:!0,size:n.SIZE.xs,type:r,className:oe.root,onClick:()=>{p(e)}},e)},R=fe;o();s();var v=A(g());h();var xe=({approveInfo:e})=>{let r=e?.addressType===M.eoa&&re(e?.approvalType)?n.TYPE.danger:n.TYPE.secondary;return v.default.createElement(f,{title:m("wallet_extension_popup_text_project"),summaryList:[{icon:{src:e.imageUrl||k},title:e.name||j,desc:v.default.createElement(R,{text:e.address,type:r})}]})},U=xe;o();s();var x={approve:"_approve_ojrap_1",title:"_title_ojrap_1",titleContent:"_titleContent_ojrap_6",warning:"_warning_ojrap_10"};var ye=e=>{typeof e!="string"&&(e=e.toString());let r=e?.length;return r<=15?30:r<=16?28:r<=17?26:r<=18?24:r<=20?22:r<=21?20:r<=23?18:r<=25?16:r<=29?14:12},Ce=({approveInfo:e,editBtnSlot:r=null,authAmount:p})=>{let{symbol:a,decimals:_,imageUrl:y=V}=e?.asset||{},{approvalRaw:S}=e||{},C=p||W(Y(S),D.pow(10,_));if([t.AUTHORIZATION,t.INCREASE_ALLOWANCE,t.COMMON_APPROVE].includes(e.approvalType)){let E=$(C),I=`${E?m("wallet_dapp_connection_subtitle_approval_amount_unlimitied"):z(C)} ${a}`;return i.default.createElement(P,{className:x.approve},i.default.createElement(f,{title:m(e.approvalType===t.INCREASE_ALLOWANCE?"wallet_extension_approve_text_increase_approval_amount":"extension_approve_maintitle_approve"),summaryList:[{title:i.default.createElement(B.Box,{className:x.title},i.default.createElement(n.AdaptiveText,{text:I,className:(0,ne.default)(x.titleContent,{[x.warning]:E}),autoSize:ye,ellipsis:{tooltip:!0}},I),r),desc:!!E&&i.default.createElement(n.Text,{size:n.SIZE.xs,type:n.TYPE.warnig},m("wallet_extension_transfer_text_unlimited_approval_risk")),icon:{src:y},descSize:n.SIZE.xs}]}),i.default.createElement(U,{approveInfo:e}))}return i.default.createElement(P,null,i.default.createElement(f,{title:m(e.approvalType===t.CANCEL_AUTHORIZATION?"extension_revoke_approval_maintitle_revoke_approval":"wallet_extension_approve_text_reduce_approval_amount"),summaryList:[{desc:i.default.createElement(R,{text:e.asset?.address}),title:e.asset?.symbol,icon:{src:e.asset?.imageUrl}}]}),i.default.createElement(U,{approveInfo:e}))},kt=Ce;export{Se as a,Pe as b,ee as c,te as d,Me as e,ve as f,Ue as g,we as h,M as i,Ae as j,ke as k,R as l,Ke as m,Oe as n,$e as o,Ne as p,Ge as q,qe as r,U as s,kt as t};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-XE2F6LDQ.js.map
