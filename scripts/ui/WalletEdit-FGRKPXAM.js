import{a as T,b as oe,d as S}from"./chunk-TFLNSTPF.js";import{a as $}from"./chunk-UNBL3DJE.js";import"./chunk-5Z7DXNIK.js";import{e as R,v as ee,w as re,x as ae}from"./chunk-7DP5LYUM.js";import"./chunk-TBBE7OKY.js";import"./chunk-7HJDVUH5.js";import"./chunk-2E742IIC.js";import"./chunk-KDP5Z4RF.js";import"./chunk-W234FNSM.js";import"./chunk-MO7YHFES.js";import{a as X}from"./chunk-KZ2PCELG.js";import{b as y}from"./chunk-C7ZG4INB.js";import"./chunk-J5ANWCEO.js";import{w as O}from"./chunk-VMO2INN3.js";import"./chunk-J4TF3RT7.js";import"./chunk-6FOZGMAL.js";import{$ as V,ba as Z,ca as J}from"./chunk-2MV3WEYP.js";import"./chunk-HPXM6RSK.js";import"./chunk-IUIJ46C3.js";import{a as F}from"./chunk-KZ3ZU675.js";import{a as pe}from"./chunk-NJ5CWPUY.js";import"./chunk-UMJMJOW4.js";import"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import"./chunk-O5JCC6KG.js";import"./chunk-MAIAJ7GD.js";import{f as Q}from"./chunk-4PGNX6E2.js";import"./chunk-MGLVPWSV.js";import"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import"./chunk-AMVK42SC.js";import"./chunk-D6RIE45O.js";import"./chunk-XCAARJ7Q.js";import{c as o}from"./chunk-JXCCIV3J.js";import"./chunk-AOA7NX2Y.js";import"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import{Hc as D,m as q}from"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import{G as k,t as M}from"./chunk-SOHTSUTI.js";import{I as Y,w as I}from"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-E24EBHFY.js";import{S as j,c as U}from"./chunk-V4F2JFTP.js";import{a as A}from"./chunk-6DDC4Y2S.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-YUXYCITH.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{f as L,m as l,o as n}from"./chunk-EQYVU4XP.js";l();n();Y();var ce=L(pe()),w=L(A());l();n();var G=L(U());var r=L(A());l();n();var le=L(U()),ne=L(q());var m=L(A());l();n();var K=L(A()),te=L(U());l();n();var W={handler:"_handler_3jcug_1",disabled:"_disabled_3jcug_4",keyring:"_keyring_3jcug_7",wallet:"_wallet_3jcug_11",icon:"_icon_3jcug_16",noHandler:"_noHandler_3jcug_23"};var ue=({type:a,canDrag:i,listeners:g,disabled:h,getHandlerRef:N})=>i?K.default.createElement(o.Box,{ref:N,...g,className:(0,te.default)(W.handler,W[a],{[W.disabled]:h})},K.default.createElement(y.IconButton,{className:W.icon,icon:"okx-wallet-plugin-hamburger"})):K.default.createElement(o.Box,{ref:N,...g,className:W.noHandler}),H=ue;l();n();var x={item:"_item_1e2ax_1",dragging:"_dragging_1e2ax_8",children:"_children_1e2ax_12",wrapper:"_wrapper_1e2ax_15",wallet:"_wallet_1e2ax_19",canDrag:"_canDrag_1e2ax_22",delete:"_delete_1e2ax_25",avatar:"_avatar_1e2ax_33",name:"_name_1e2ax_37",draw:"_draw_1e2ax_43",text:"_text_1e2ax_46",more:"_more_1e2ax_60"};var fe=({keyringIdentity:a,editIdentityName:i,onDragWalletStart:g,onDragWalletEnd:h,editKeyringIdentities:N})=>{let c=a?.walletIdentities||[],u=(0,m.useCallback)(()=>{g(a.keyringId)},[g,a]),s=(0,m.useCallback)(t=>{let f=(0,ne.cloneDeep)(N),B=f.find(({keyringId:b})=>b===a.keyringId);B.walletIdentities=t,h(f)},[N,a,h]),_=S(),d=(0,m.useMemo)(()=>a.keyringIdentityType!==D.MNEMONIC&&a.keyringIdentityType!==D.TON_MNEMONIC&&a.keyringIdentityType!==D.MPC,[a]),C=c.length>1;return m.default.createElement(M.Sortable,{uniqueKey:"walletId",itemClassName:x.item,onDragStart:u,itemChildrenClassName:x.children,itemDraggingClassName:x.dragging,itemWrapperClassName:x.wrapper,onDragEnd:s,dataSource:c,withOverlay:!1,renderHandler:({getHandlerRef:t,listeners:f})=>m.default.createElement(H,{type:"wallet",canDrag:C,listeners:f,getHandlerRef:t})},c.map(t=>m.default.createElement(o.FlexBox,{align:o.ALIGN.center,className:(0,le.default)(x.wallet,{[x.canDrag]:C}),key:t.walletId},d?m.default.createElement(o.Box,{className:x.delete},m.default.createElement(y,{className:"okx-wallet-plugin-delete",onClick:()=>_({walletId:t.walletId,keyringType:a.keyringIdentityType})})):null,m.default.createElement($,{size:$.SIZE.sm,className:x.avatar,walletIdentity:t}),m.default.createElement(o.FlexBox,{align:o.ALIGN.center,className:x.name,onClick:()=>{i({type:T.WALLETACCOUNT,identity:t,initialName:t.walletName,otherNames:c.map(({walletName:f,walletId:B})=>t.keyringId===B?"":f).filter(Boolean)})}},m.default.createElement(O.Text,{ellipsis:!0,className:x.text},t.walletName),m.default.createElement(o.Box,{className:x.draw},m.default.createElement(y,{className:"okx-wallet-plugin-draw"}))),m.default.createElement(F,{className:x.more,to:`${J}?walletId=${t?.walletId}`},m.default.createElement(y.IconButton,{icon:"okx-wallet-plugin-more"})))))},me=fe;l();n();var p={item:"_item_1chg9_1",children:"_children_1chg9_8",dragging:"_dragging_1chg9_11",wrap:"_wrap_1chg9_15",disabled:"_disabled_1chg9_22",showBottomLine:"_showBottomLine_1chg9_25",keyring:"_keyring_1chg9_35",canDrag:"_canDrag_1chg9_38",delete:"_delete_1chg9_41",name:"_name_1chg9_49",canEdit:"_canEdit_1chg9_53",draw:"_draw_1chg9_56",text:"_text_1chg9_59",more:"_more_1chg9_74"};var Ne=({editIdentityName:a,editKeyringIdentities:i,setEditKeyringIdentities:g})=>{let h=S(),N=(0,r.useCallback)(({keyringIdentityType:e})=>e===D.MNEMONIC||e===D.MPC||e===D.TON_MNEMONIC,[]),c=(0,r.useCallback)(({keyringIdentityType:e})=>e===D.MNEMONIC||Q(e)||e===D.MPC||e===D.TON_MNEMONIC,[]),[u,s]=(0,r.useState)(""),_=(0,r.useCallback)(({id:e})=>{s(e)},[]),d=(0,r.useCallback)(e=>{s(""),g(e)},[g]),[C,t]=(0,r.useState)(""),f=(0,r.useCallback)(e=>{t(e)},[]),B=(0,r.useCallback)(e=>{t(""),g(e)},[g]),b=i.length>1;return r.default.createElement(M.Sortable,{uniqueKey:"keyringId",itemClassName:p.item,itemChildrenClassName:p.children,itemDraggingClassName:p.dragging,onDragStart:_,onDragEnd:d,dataSource:i,withOverlay:!1,renderHandler:({getHandlerRef:e,listeners:P})=>r.default.createElement(H,{type:"keyring",canDrag:b,listeners:P,disabled:C,getHandlerRef:e})},i.map((e,P)=>r.default.createElement(o.Box,{className:(0,G.default)(p.wrap,{[p.disabled]:C&&C!==e.keyringId,[p.showBottomLine]:P!==i.length-1}),key:e.keyringId},r.default.createElement(o.FlexBox,{align:o.ALIGN.center,className:(0,G.default)(p.keyring,{[p.canDrag]:b})},N(e)?r.default.createElement(o.Box,{className:p.delete},r.default.createElement(y,{icon:"okx-wallet-plugin-delete",onClick:()=>h({keyringId:e.keyringId,keyringType:e.keyringIdentityType})})):null,r.default.createElement(o.FlexBox,{align:o.ALIGN.center,className:(0,G.default)(p.name,{[p.canEdit]:c(e)}),onClick:()=>{c(e)&&a({type:T.WALLET,identity:e,initialName:e.keyringName,otherNames:i.map(({keyringName:_e,keyringId:de})=>e.keyringId===de?"":_e).filter(Boolean)})}},r.default.createElement(O.Text,{ellipsis:!0,className:p.text},e.keyringName),c(e)?r.default.createElement(o.Box,{className:p.draw},r.default.createElement(y,{icon:"okx-wallet-plugin-draw"})):null),[D.PRIVATE_KEY].includes(e.keyringIdentityType)?null:r.default.createElement(F,{className:p.more,to:`${Z}?keyringId=${e?.keyringId}`},r.default.createElement(y.IconButton,{icon:"okx-wallet-plugin-more"}))),u===e.keyringId?null:r.default.createElement(me,{keyringIdentity:e,editIdentityName:a,onDragWalletStart:f,onDragWalletEnd:B,editKeyringIdentities:i}))))},ie=Ne;l();n();var se=L(q());Y();var v=L(A());var xe=a=>{let i=oe(),g=ee(),h=re(),N=(0,v.useMemo)(()=>({async[T.WALLET](c,u){let s=c?.keyringId;if(s)try{await g(s,u),a(_=>_.map(d=>d.keyringId===s?{...d,keyringName:u}:d)),k.success(I("wallet_edit_wallet_toast_renamed_success"))}catch(_){console.log(_)}},async[T.WALLETACCOUNT](c,u){let s=c?.walletId;if(s)try{await h(s,u),a(_=>_.map(d=>{let t=(d?.walletIdentities).find(f=>f.walletId===s);return t&&(t.walletName=u),d})),k.success(I("wallet_edit_wallet_toast_renamed_success"))}catch(_){console.log(_)}}}),[h,g,a]);return(0,v.useCallback)(({identity:c,...u})=>{i(u).then(s=>{let{type:_}=u,d=N[_];d&&d(c,s)}).catch(se.noop)},[N,i])},ge=xe;l();n();var z={root:"_root_z4n0b_1",headerDone:"_headerDone_z4n0b_1"};var De=()=>{let a=R(),[i,g]=(0,w.useState)(a),h=ge(g),[N,c]=(0,w.useState)(!1),u=f=>{g(f),c(!0)},s=(0,ce.useHistory)(),_=ae(),[d,C]=(0,w.useState)(!1),t=(0,w.useCallback)(async()=>{if(N){C(!0);try{await _(i)}catch(f){console.log(f),k.error({title:I("extension_wallet_toast_sorting_failure")})}}s.push(`${V}?from=seedVerify`)},[s,_,i,N]);return w.default.createElement(o.Container,{className:z.root},w.default.createElement(X,{backable:!1,bordered:!1},d?w.default.createElement(j.Circle,{size:j.SIZE.md}):w.default.createElement(o.Box,{className:z.headerDone,onClick:t},I("wallet_manage_btn_edit_done"))),w.default.createElement(ie,{editIdentityName:h,editKeyringIdentities:i,setEditKeyringIdentities:u}))},jr=De;export{jr as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=WalletEdit-FGRKPXAM.js.map
