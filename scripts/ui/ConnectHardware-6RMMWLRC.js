import{a as dr}from"./chunk-XZRYRRSY.js";import{a as po,b as ur,c as _r}from"./chunk-XYK5LSIG.js";import"./chunk-BTXINDN4.js";import{a as qt,b as zt}from"./chunk-OHUVDC2B.js";import"./chunk-H7VNXVFH.js";import"./chunk-E7VELZFV.js";import"./chunk-VCB5OJ3D.js";import"./chunk-RANKOJV5.js";import{a as pr}from"./chunk-I3U7CKFC.js";import"./chunk-ZPDRUAGN.js";import{a as cr}from"./chunk-RC5IAFKK.js";import"./chunk-4VLUHY4K.js";import"./chunk-IHPHPUUG.js";import"./chunk-ZEWK7OGU.js";import"./chunk-QVA4WXOQ.js";import"./chunk-EX22SDGB.js";import"./chunk-VTLNAOHG.js";import{a as ar}from"./chunk-Y7YPG2EJ.js";import{a as lr}from"./chunk-7R67VE77.js";import"./chunk-NHGZUGLZ.js";import"./chunk-G5LEAVCY.js";import"./chunk-ACHWU2H6.js";import"./chunk-ZPFBKNRM.js";import{a as co,b as nr,f as Xe,g as jt}from"./chunk-7DP5LYUM.js";import{a as M}from"./chunk-BVXKJJ4A.js";import{b as rr}from"./chunk-ZPXNW4X5.js";import{b as Jo,c as Ft,d as Ro,e as er,f as tr,g as or,h as mo}from"./chunk-4DKEIQZR.js";import{c as Pt}from"./chunk-G2NQ466R.js";import"./chunk-LKYWOOF5.js";import"./chunk-XTGUBST2.js";import{c as vt,d as Dt,e as Zo,f as mt}from"./chunk-TBBE7OKY.js";import"./chunk-7HJDVUH5.js";import"./chunk-5CHBWRLU.js";import{a as $t,b as fr}from"./chunk-LJBCNFS2.js";import"./chunk-TWZSLMIY.js";import"./chunk-C64P2PDF.js";import{j as Gt}from"./chunk-IXKCAKQY.js";import{a as sr}from"./chunk-TK6JYPIW.js";import"./chunk-OS6E6KVM.js";import"./chunk-GZRBUDXF.js";import"./chunk-DY2YURLY.js";import"./chunk-KXZSXP3G.js";import{b as kt,d as Mt}from"./chunk-6HXVFU7V.js";import"./chunk-D5FMQLJG.js";import"./chunk-DXRBY5MU.js";import"./chunk-6FR2UIE7.js";import"./chunk-5GMHHIH5.js";import"./chunk-7KCWBFQ2.js";import"./chunk-QLUP7GYN.js";import"./chunk-7Y44NCE5.js";import"./chunk-BKPOG6ZD.js";import"./chunk-OZMVWMFO.js";import"./chunk-KTO7CPX7.js";import"./chunk-P3XTPXPO.js";import"./chunk-4IY6P5HR.js";import"./chunk-FQWGOLDH.js";import{L as mr,o as ir,s as Ht}from"./chunk-QEPBNPHF.js";import"./chunk-3JLS3TGD.js";import"./chunk-KDP5Z4RF.js";import{a as Ut,b as Kt}from"./chunk-W234FNSM.js";import"./chunk-GVNVILUC.js";import"./chunk-DDO6HXRN.js";import"./chunk-CLWWTOKP.js";import{a as Y}from"./chunk-KZ2PCELG.js";import{b as Se}from"./chunk-C7ZG4INB.js";import"./chunk-J5ANWCEO.js";import{w as b}from"./chunk-VMO2INN3.js";import"./chunk-J4TF3RT7.js";import{e as It,j as Ct,o as qo,v as $e}from"./chunk-6FOZGMAL.js";import{$ as zo,C as bt,a as te,p as At,q as Ye,r as ue,s as Nt,t as St}from"./chunk-2MV3WEYP.js";import{Eb as lt,Kb as Go,gb as Et,hb as Bt,ib as Lt,jb as Ho,n as lo,y as le}from"./chunk-HPXM6RSK.js";import"./chunk-IUIJ46C3.js";import"./chunk-2RF4WEQ2.js";import{a as ke,c as Wt}from"./chunk-XRXUVH6X.js";import"./chunk-KZ3ZU675.js";import{a as ee}from"./chunk-NJ5CWPUY.js";import"./chunk-UH5YBH76.js";import"./chunk-CGQV4V24.js";import"./chunk-4X3PZECG.js";import{k as Ve,p as io}from"./chunk-UMJMJOW4.js";import"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import"./chunk-O5JCC6KG.js";import{d as xe,f as no}from"./chunk-MAIAJ7GD.js";import{d as Ot}from"./chunk-4PGNX6E2.js";import{a as be}from"./chunk-PS3S6BG3.js";import"./chunk-RT4Y2U5N.js";import"./chunk-2VHH444P.js";import{d as Ko}from"./chunk-MGLVPWSV.js";import"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import{g as it}from"./chunk-AMVK42SC.js";import"./chunk-D6RIE45O.js";import{c as w,d as oe,e as R,g as $o,h as Yo,j as Vo,k as Xo,n as Qo}from"./chunk-XCAARJ7Q.js";import{c as t}from"./chunk-JXCCIV3J.js";import"./chunk-AOA7NX2Y.js";import"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import{Bc as nt,Ca as at,Fa as Do,Kb as Fo,Lb as Po,Wb as Es,Zb as Uo,hb as Wo,jc as Bs,m as Ie,o as Q,pb as Tt,q as ze,u as ht,uc as jo,v as wt,za as Ne}from"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import{A as Oo,D as vo,G as v,J as ne,d as st,f as Ae,n as qe,q as Mo,w as gt}from"./chunk-SOHTSUTI.js";import{I as S,m as ko,w as i}from"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-ZAMSVR5I.js";import"./chunk-E24EBHFY.js";import"./chunk-FJEX4Z7I.js";import{M as ae,S as Ge,Y as I,c as Ce}from"./chunk-V4F2JFTP.js";import{a as E}from"./chunk-6DDC4Y2S.js";import"./chunk-TEY24VZN.js";import"./chunk-RKHQOOTU.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-F4JTGWJH.js";import"./chunk-YUXYCITH.js";import"./chunk-JM2ML6BR.js";import"./chunk-GBSH5BA3.js";import"./chunk-RMV3AS5X.js";import"./chunk-MYDAWE3K.js";import"./chunk-3NG42BBY.js";import"./chunk-QMAXXJCA.js";import"./chunk-HFBVRVPB.js";import"./chunk-SF2LTPAC.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{f as c,m as s,o as a}from"./chunk-EQYVU4XP.js";s();a();var pe=c(E());var se=c(ee());s();a();S();var xr=c(le());var gr=c(ee());var g=c(E());s();a();var Me=c(E()),uo=c(Ce());S();s();a();var ge={root:"_root_14nif_1",closeWrap:"_closeWrap_14nif_5",closeIcon:"_closeIcon_14nif_13",closeText:"_closeText_14nif_17",stepWrap:"_stepWrap_14nif_23",stepItem:"_stepItem_14nif_30",active:"_active_14nif_37"};var Ls=e=>{let{currentStep:r,handleClose:o}=e;return Me.default.createElement(t.Box,{className:ge.root},Me.default.createElement(t.Box,{className:ge.closeWrap},Me.default.createElement(ae,{onClick:o,className:(0,uo.default)("okx-wallet-plugin-close",ge.closeIcon)}),r!==3?Me.default.createElement(t.Box,{onClick:o,className:ge.closeText},i("wallet_extension_top_textbtn_skip")):null),Me.default.createElement(t.Box,{className:ge.stepWrap},Array(4).fill(" ").map((n,l)=>Me.default.createElement(t.Box,{key:l,className:(0,uo.default)(ge.stepItem,{[ge.active]:r===l})}))))},ct=Ls;s();a();var _o=c(E());s();a();var yr={root:"_root_1wb1e_1"};var Is=({handleNext:e})=>_o.default.createElement(t.FlexBox,{className:yr.root,align:t.ALIGN.center,justify:t.ALIGN.center,onClick:e},_o.default.createElement(ae,{className:"okds-arrow-pointer-right-sm"})),Yt=Is;s();a();var W={root:"_root_15mve_1",wrap:"_wrap_15mve_9",title:"_title_15mve_13",titleColorfulGreen:"_titleColorfulGreen_15mve_22",titleColorfulYellow:"_titleColorfulYellow_15mve_25",desc:"_desc_15mve_28",firstScreenImg:"_firstScreenImg_15mve_36",secondAndFourthScreenImg:"_secondAndFourthScreenImg_15mve_42",thirdScreenImg:"_thirdScreenImg_15mve_45",footerWrap:"_footerWrap_15mve_48"};var Cs=e=>{let{handleNext:r,handleClose:o}=e,n=it({light:"/cdn/assets/imgs/245/AB118B1F7E00FCCF.png",dark:"/cdn/assets/imgs/245/46D15BEDF89AD94E.png"});return g.default.createElement(g.default.Fragment,null,g.default.createElement(ct,{currentStep:0,handleClose:o}),g.default.createElement(t.Box,{className:W.wrap},g.default.createElement(t.Box,{className:W.title},g.default.createElement("span",null,i("wallet_extension_top_title_added_seed_phrase1",{seedPhrase:i("wallet_extension_top_title_added_seed_phrase2")}))),g.default.createElement(b.Text,{className:W.desc},i("wallet_extension_top_maintitle_added_seed_phrase")),g.default.createElement(st,{className:W.firstScreenImg,src:n})),g.default.createElement(Yt,{handleNext:r}))},As=e=>{let{handleNext:r,handleClose:o}=e,n=it({light:"/cdn/assets/imgs/245/4A7B68AABB586801.png",dark:"/cdn/assets/imgs/245/46C68B7C7B93F25B.png"});return g.default.createElement(g.default.Fragment,null,g.default.createElement(ct,{currentStep:1,handleClose:o}),g.default.createElement(t.Box,{className:W.wrap},g.default.createElement(t.Box,{className:W.title},i("wallet_extension_top_title_unlock_hardware")),g.default.createElement(b.Text,{className:W.desc},i("wallet_extension_top_subtitle_confirm_unlock")),g.default.createElement(st,{src:n,className:W.secondAndFourthScreenImg})),g.default.createElement(Yt,{handleNext:r}))},Ns=e=>{let{handleNext:r,handleClose:o}=e,n=it({light:"/cdn/assets/imgs/245/21F0D08062856488.png",dark:"/cdn/assets/imgs/245/D8A2A5141B0A6F22.png"});return g.default.createElement(g.default.Fragment,null,g.default.createElement(ct,{currentStep:2,handleClose:o}),g.default.createElement(t.Box,{className:W.wrap},g.default.createElement(t.Box,{className:W.title},i("wallet_extension_top_title_usb_connected")),g.default.createElement(b.Text,{className:W.desc},i("wallet_extension_top_subtitle_after_connected")),g.default.createElement(st,{src:n,className:W.thirdScreenImg})),g.default.createElement(Yt,{handleNext:r}))},Ss=e=>{let{handleClose:r}=e,o=it({light:"/cdn/assets/imgs/245/21F0D08062856488.png",dark:"/cdn/assets/imgs/245/D8A2A5141B0A6F22.png"});return g.default.createElement(g.default.Fragment,null,g.default.createElement(ct,{currentStep:3,handleClose:r}),g.default.createElement(t.Box,{className:W.wrap},g.default.createElement(t.Box,{className:W.title},i("wallet_extension_top_title_asset_allocation1",{app:i("wallet_extension_top_title_asset_allocation2")})),g.default.createElement(b.Text,{className:W.desc},i("wallet_extension_top_subtitle_turnon_ledger")),g.default.createElement(st,{src:o,className:W.secondAndFourthScreenImg})),g.default.createElement(t.Box,{className:W.footerWrap},g.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,className:"wallet-management__button",onClick:r},i("wallet_extension_footer_btn_connect1"))))},bs=[Cs,As,Ns,Ss],ks=()=>{let e=(0,xr.useDispatch)(),r=(0,gr.useHistory)(),[o,n]=(0,g.useState)(0),l=bs[o],m=(0,g.useCallback)(()=>{n(d=>++d)},[]),p=(0,g.useCallback)(()=>{r.replace(Ye)},[r]);return(0,g.useEffect)(()=>{e(kt("isLedgerImported",!0))},[e]),g.default.createElement(t.Container,{className:W.root},g.default.createElement(l,{handleNext:m,handleClose:p}))},hr=ks;s();a();var re=c(E());S();Wo();s();a();var pt=c(E()),Vt=c(le()),yo=c(ee()),fo=c(co());S();Ne();var wr=(e=!1)=>{let r=M(),o=(0,yo.useHistory)(),n=r.get("type"),l=r.get("walletId"),m=(0,Vt.useSelector)(Ho),p=[];if(n==="addChain")if(m[l]){let{account:d}=m[l];p=Object.keys(d)}else e&&(v.error(i("wallet_extension_top_error_parameters")),o.replace(te));return p},Tr=()=>{let e=wr(!0),r=(0,Vt.useSelector)(lt);return(0,pt.useMemo)(()=>_r.map(({chain:o,...n})=>({chain:o,config:n,allChains:r.filter(l=>l.baseChain===o),imported:e.includes(o)})),[e,r])},Er=()=>{let e=wr(),r=(0,Vt.useSelector)(lt);return(0,pt.useMemo)(()=>[ze,wt].map(n=>{let l=r.find(m=>m.baseChain===n);return{imported:e.includes(n),...l}}),[e,r])},Br=e=>{let r=(0,yo.useHistory)(),o=M(),n=o.get("type"),l=o.get("walletId");return(0,pt.useCallback)(async()=>{let m=await mt.hasConnectedLedger(),p=!1;if(m||(p=(await mt.requestLedgerDevice()).length===0),p){[R.addAccount,R.addChain].includes(n)&&r.goBack();return}let d=`${ue}/${w.ledger}?${fo.default.stringify({baseChain:e})}`;n&&l&&(d+=`&${fo.default.stringify({type:n,walletId:l})}`),r.push(d)},[r,n,l,e])};s();a();var dt={root:"_root_f8vjo_1",chainList:"_chainList_f8vjo_6",footerWrap:"_footerWrap_f8vjo_10"};var Ms=[at,Do],Os=()=>{let e=M(),r=e.get("type"),o=e.get("hideBack"),[n,l]=(0,re.useState)(""),m=Tr(),p=Er(),d=Br(n),y=m?.filter(({chain:u})=>Ms.includes(u))||[];return re.default.createElement(t.FlexBox,{className:dt.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},re.default.createElement(Y,{closeable:!1,backable:!o,className:dt.navigator,title:i("wallet_extension_top_maintitle_select_network")}),re.default.createElement(t.Box,{className:dt.chainList},y.map(({chain:u,config:x,allChains:f,imported:h})=>{let{titleKey:T,networkCountKey:B,importLedgerConfig:{supportNetworksKey:N}}=x;return re.default.createElement(po,{imported:h,selected:u===n,handleClick:()=>{h||l(u)}},re.default.createElement(ur,{titleKey:T,networkCountKey:B,descriptionKey:N,chainsList:f,imported:h,hideRightIcon:!0}))}),p.map(u=>re.default.createElement(po,{imported:u.imported,key:u.chainName,selected:u.baseChain===n,handleClick:()=>{u.imported||l(u.baseChain)},...u}))),re.default.createElement(t.Box,{className:dt.footerWrap},re.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,onClick:d,className:"wallet-management__button",disabled:!n},r==="addChain"?i("wallet_extension_footer_btn_add_network"):i("wallet_addwallet_btn_conncet_hardware_wallet"))))},Lr=Os;s();a();var X=c(E()),ft=c(ee());S();s();a();var J=c(E()),Ir=c(Ie());s();a();var Z={root:"_root_a2lvr_1",header:"_header_a2lvr_10",back:"_back_a2lvr_17",close:"_close_a2lvr_18",title:"_title_a2lvr_22",content:"_content_a2lvr_26",selectorTitle:"_selectorTitle_a2lvr_29",selector:"_selector_a2lvr_29",item:"_item_a2lvr_39",lock:"_lock_a2lvr_43",button:"_button_a2lvr_48"};var vs=({handleClick:e=Ir.noop,visible:r=!0})=>r?J.default.createElement(t.Box,{className:Z.root,onClick:e},J.default.createElement(t.FlexBox,{justify:"space-between",className:Z.header},J.default.createElement(ne.Input,{active:!0,className:Z.back}),J.default.createElement(ne.Input,{active:!0,className:Z.title}),J.default.createElement(ne.Input,{active:!0,className:Z.close})),J.default.createElement(t.Box,{className:Z.content},J.default.createElement(ne.Input,{active:!0,className:Z.selectorTitle}),J.default.createElement(ne.Input,{active:!0,className:Z.selector}),J.default.createElement(ne.Input,{active:!0,className:Z.selectorTitle}),J.default.createElement(ne.Input,{active:!0,className:Z.item}),J.default.createElement(ne.Input,{active:!0,className:Z.lock})),J.default.createElement(ne.Input,{active:!0,className:Z.button})):null,he=vs;s();a();var ce=c(E());S();Ne();s();a();var A=c(E()),Cr=c(le()),xo=c(Ce()),Ar=c(Ie());S();s();a();var ut=c(E());S();s();a();var Xt={root:"_root_v9tdu_1",importedRoot:"_importedRoot_v9tdu_9",tag:"_tag_v9tdu_13"};var q="SELECTED",F="IMPORTED",Ds=({selectType:e})=>e===F?ut.default.createElement(t.FlexBox,{className:Xt.importedRoot,align:t.ALIGN.center},ut.default.createElement(t.Box,{className:Xt.tag},i("wallet_extension_card_label_added"))):ut.default.createElement(t.FlexBox,{className:Xt.root,align:t.ALIGN.center},ut.default.createElement(Mo,{checked:e===q,circle:!0})),ie=Ds;Ne();Fo();s();a();var Qt=({account:e,selected:r,selectedAddressesInTargetIdentity:o=[],baseChain:n})=>{let l=m=>m.some(p=>(Wt(p)&&(p=p?.address),be(p,e.address,{localType:n})));return l(o)?F:l(r)?q:""};s();a();var j={root:"_root_ujyxp_1",SELECTED:"_SELECTED_ujyxp_9",selected:"_SELECTED_ujyxp_9",IMPORTED:"_IMPORTED_ujyxp_12",imported:"_IMPORTED_ujyxp_12",main:"_main_ujyxp_15",address:"_address_ujyxp_18",asset:"_asset_ujyxp_24",dontHaveAsset:"_dontHaveAsset_ujyxp_25",assetArrow:"_assetArrow_ujyxp_36",assetModal:"_assetModal_ujyxp_44",assetList:"_assetList_ujyxp_44",chainImage:"_chainImage_ujyxp_58",chainName:"_chainName_ujyxp_63",coinAmountDisplay:"_coinAmountDisplay_ujyxp_68",coinAmountDisplayText:"_coinAmountDisplayText_ujyxp_73",commonFooter:"_commonFooter_ujyxp_79"};var go=({account:e,onSelect:r,selectType:o})=>{let[n,l]=(0,A.useState)(!1),m=(0,Cr.useSelector)(lt),p=ar(),d=m.filter(f=>f.baseChain===Q),{assetList:y=[]}=e,u=(0,A.useMemo)(()=>d.map(f=>{let{coinId:h}=f,T=(0,Ar.cloneDeep)(f),B=y.find(O=>O.coinId===h);T.coinAmount=B?.coinAmount||"0";let N=p[h];return N&&(T.decimals=N.decimals,T.symbol=N.symbol),T}).sort((f,h)=>h.coinAmount-f.coinAmount),[d,y,p]),{address:x}=e;return A.default.createElement(A.default.Fragment,null,A.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:(0,xo.default)(j.root,{[j.SELECTED]:o===q,[j.IMPORTED]:o===F}),key:x,onClick:()=>{o!==F&&r(e)}},A.default.createElement(t.Box,{className:j.main},A.default.createElement(t.Box,{className:j.address},e.address),e.hasAsset?A.default.createElement(t.Box,{className:j.asset,onClick:f=>{f.stopPropagation(),l(!0)}},A.default.createElement("span",null,i("wallet_extension_card_btn_view_assets")),A.default.createElement(ae,{className:(0,xo.default)("okds-arrow-chevron-right-centered-md",j.assetArrow)})):A.default.createElement(t.Box,{className:j.dontHaveAsset},A.default.createElement("span",null,i("wallet_extension_card_btn_noearnings_yet")))),A.default.createElement(ie,{selectType:o})),A.default.createElement(qe.Action,{onClose:()=>{l(!1)},className:j.assetModal,visible:n,hideCloseBtn:!0,alignBottom:!0,whiteboard:!0,title:null},A.default.createElement(t.Box,{className:j.assetList},u.map(f=>A.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:j.asset},A.default.createElement(vo,{className:j.chainImage,src:f.image||Ko}),A.default.createElement(t.Box,{className:j.chainName},A.default.createElement(pr,{maxWidth:"192px",text:f.chainName})),A.default.createElement(t.Box,{className:j.coinAmountDisplay},A.default.createElement(b.DisplayAmount,{className:j.coinAmountDisplayText,mode:b.CRYPTO,symbol:f.symbol,decimals:f.decimals,ellipsis:{tooltip:!0}},f?.coinAmount))))),A.default.createElement(t.Box,{className:j.commonFooter},A.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,onClick:()=>l(!1),block:!0},i("wallet_extension_footer_btn_same_device_ok")))))};go.pickAssetAccounts=e=>{let r=[];return ke(e)&&e.forEach(o=>{let{assetList:n=[]}=o||{};ke(n)&&n.some(l=>Tt(l?.coinAmount,0))&&(o.hasAsset=!0,r.push(o))}),r};go.getSelectType=Qt;var Nr=go;s();a();var we=c(E()),Sr=c(Ce());S();s();a();var _e={root:"_root_f2f0f_1",SELECTED:"_SELECTED_f2f0f_8",selected:"_SELECTED_f2f0f_8",IMPORTED:"_IMPORTED_f2f0f_11",imported:"_IMPORTED_f2f0f_11",addressBox:"_addressBox_f2f0f_14",block:"_block_f2f0f_18",tag:"_tag_f2f0f_29",assets:"_assets_f2f0f_40",address:"_address_f2f0f_14"};var ho=({account:e,onSelect:r,selectType:o,baseCoin:n})=>we.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:(0,Sr.default)(_e.root,{[_e.SELECTED]:o===q,[_e.IMPORTED]:o===F}),onClick:()=>{o!==F&&r(e)}},we.default.createElement(t.Box,{className:_e.addressBox},nt.map(l=>we.default.createElement(t.Box,{className:_e.block},we.default.createElement(t.Box,{className:_e.tag},i(jo[l])),we.default.createElement(b.DisplayAmount,{className:_e.assets,mode:b.CRYPTO,symbol:n.symbol,decimals:n.decimals,ellipsis:{tooltip:!0}},e[l]?.coinAmount),we.default.createElement(t.Box,{className:_e.address},e[l]?.address)))),we.default.createElement(ie,{selectType:o}));ho.pickAssetAccounts=e=>{let r=[];return ke(e)&&e.forEach(o=>{o?.hasAsset&&r.push(o)}),r};ho.getSelectType=({account:e,selected:r,selectedAddressesInTargetIdentity:o,baseChain:n})=>{let l=m=>m.some(p=>{Wt(p)&&(p=p?.address);let d=!1;return nt.forEach(y=>{be(e?.[y]?.address,p,{localType:n})&&(d=!0)}),d});return l(o)?F:l(r)?q:""};var br=ho;s();a();var Qe=c(E()),kr=c(Ce());Fo();s();a();var Oe={root:"_root_h2by8_1",SELECTED:"_SELECTED_h2by8_9",selected:"_SELECTED_h2by8_9",IMPORTED:"_IMPORTED_h2by8_12",imported:"_IMPORTED_h2by8_12",main:"_main_h2by8_15",asset:"_asset_h2by8_19",address:"_address_h2by8_26"};var wo=({account:e,onSelect:r,selectType:o,baseCoin:n})=>{let{symbol:l,decimals:m}=n,{address:p}=e,d=e?.coinAmount;return Qe.default.createElement(t.FlexBox,{align:t.ALIGN.center,className:(0,kr.default)(Oe.root,{[Oe.SELECTED]:o===q,[Oe.IMPORTED]:o===F}),key:p,onClick:()=>{o!==F&&r(e)}},Qe.default.createElement(t.Box,{className:Oe.main},Qe.default.createElement(b.DisplayAmount,{className:Oe.asset,mode:b.CRYPTO,symbol:l,decimals:m,ellipsis:{tooltip:!0}},d),Qe.default.createElement(t.Box,{className:Oe.address},e.address)),Qe.default.createElement(ie,{selectType:o}))};wo.pickAssetAccounts=e=>{let r=[];return ke(e)&&e.forEach(o=>{Tt(o?.coinAmount,0)&&r.push(o)}),r};wo.getSelectType=Qt;var To=wo;s();a();var ve=c(E()),Mr=c(ee());S();s();a();var Eo={title:"_title_1nhzx_1",selector:"_selector_1nhzx_7"};var Ws=({basePath:e,setBasePath:r})=>{let{hardware:o}=(0,Mr.useParams)(),l=M().get("baseChain"),m=(0,ve.useMemo)(()=>Qo?.[o]?.[l],[l,o]);return m?ve.default.createElement(ve.default.Fragment,null,ve.default.createElement(b.Text,{className:Eo.title},i("wallet_addwallet_subtitle_hardware_wallet_select_a_hd_path")),ve.default.createElement(gt,{value:e,className:Eo.selector,type:gt.TYPE.input,options:m,onChange:({value:p})=>{r(p)},align:gt.DIRECTION.right})):null},Or=Ws;s();a();var Ze=c(E());S();s();a();var Bo={showAll:"_showAll_dqqdk_1",showAllText:"_showAllText_dqqdk_11"};var Fs=({hasAssetAccounts:e,renderList:r,handleUnFold:o})=>Ze.default.createElement(Ze.default.Fragment,null,r(e),Ze.default.createElement(t.Box,{className:Bo.showAll,onClick:o},Ze.default.createElement("span",{className:Bo.showAllText},i("wallet_extension_top_dropdown_show_assets")),Ze.default.createElement(ae,{className:"okds-arrow-chevron-down-md"}))),vr=Fs;s();a();S();var me=c(E());s();a();var Lo={loadMore:"_loadMore_15zyi_1",loadMoreText:"_loadMoreText_15zyi_9"};var Dr=8,Ps=({renderList:e,scrollWrapRef:r,fetchAddress:o,firstPageAccounts:n})=>{let l=(0,me.useRef)(),[m,p]=(0,me.useState)(Dr),d=()=>{clearInterval(l.current),p(Dr),l.current=setInterval(()=>{p(f=>Math.max(f-1,0))},1e3)};It(()=>{clearInterval(l.current)});let{data:y,noMore:u}=$e(async f=>{d();let h=f?.pageNo||1,T=await o(h);return h===1&&(T=[...n,...T]),{list:T,pageNo:h+1}},{target:r,isNoMore:f=>f?.list?.length>=500}),x=y?.list||n;return me.default.createElement(me.default.Fragment,null,e(x),u?null:me.default.createElement(t.Box,{className:Lo.loadMore},me.default.createElement(Ge,null),me.default.createElement("span",{className:Lo.loadMoreText},m>0?i("wallet_extension_footer_loading_est_loading",{value:m}):i("wallet_extension_footer_loading_wait_amoment"))))},Wr=Ps;s();a();var Zt={root:"_root_yoqwy_1",title:"_title_yoqwy_7",icon:"_icon_yoqwy_13"};var Io={[Q]:Nr,[ze]:br,[ht]:To,[wt]:To},Us=({baseChain:e,fetchAddress:r,basePath:o,setBasePath:n,firstPageAccounts:l,coinId:m,selected:p,selectedAddressesInTargetIdentity:d,...y})=>{let u=(0,ce.useRef)(),x=Io[e],f=x.pickAssetAccounts(l),h=f.length,[T,{setFalse:B}]=qo(!!(h&&h!==l.length)),{baseCoin:N}=cr(m,!0),O=K=>K.map(L=>{let D=x.getSelectType({account:L,selected:p,selectedAddressesInTargetIdentity:d,baseChain:e});return ce.default.createElement(x,{account:L,baseCoin:N,selectType:D,...y})});return ce.default.createElement(t.FlexBox,{ref:u,className:Zt.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},ce.default.createElement(Or,{basePath:o,setBasePath:n}),ce.default.createElement(b.Text,{className:Zt.title},i("wallet_extension_top_title_select"),e===Q?ce.default.createElement(Se,{className:Zt.icon,icon:"okx-wallet-plugin-information-circle",tooltip:{title:i("wallet_extension_toast_tooltip_try_switch"),placement:Oo.DIRECTION.bottom},size:Se.SIZE.xs}):null),T?ce.default.createElement(vr,{renderList:O,handleUnFold:B,hasAssetAccounts:f}):ce.default.createElement(Wr,{renderList:O,fetchAddress:r,scrollWrapRef:u,firstPageAccounts:l}))},Fr=Us;s();a();var Re=c(E()),Je=c(le()),_t=c(ee());S();no();Bs();Es();Ne();io();var Pr=()=>{let e=M(),{hardware:r}=(0,_t.useParams)(),o=e.get("baseChain"),[n,l]=(0,Re.useState)(()=>r===w.ledger?o===ht?Xo:Yo:Vo);return[n,l]},Ur=()=>{let e=[],r=M(),o=r.get("walletId"),n=r.get("baseChain");return((0,Je.useSelector)(Et).find(d=>(d.walletIdentities||[]).some(u=>u.walletId===o))?.walletIdentities||[]).forEach(d=>{let y=d?.account?.[n];y&&e.push(y)}),e},Kr=()=>{let e=M(),r=e.get("type"),o=e.get("baseChain"),n=jt()?.length,[l,m]=(0,Re.useState)([]);return[l,d=>{m(y=>r===R.addChain?[d]:y.some(u=>be(u.address,d.address,{localType:o}))?y.filter(u=>!be(u.address,d.address,{localType:o})):n+y.length>=500?(v.error({title:i("wallet_extension_hardware_wallet_notif_max_account",{num:500})}),y):[...y,d])}]},jr=e=>{let[r,o]=(0,Re.useState)(!1),{hardware:n}=(0,_t.useParams)(),l=M(),m=l.get("type"),p=l.get("baseChain"),d=l.get("walletId"),y=(0,_t.useHistory)(),u=(0,Je.useDispatch)(),x=(0,Je.useSelector)(Bt),f=(0,Je.useSelector)(Lt),h=(0,Re.useMemo)(()=>e.map(B=>{let N={};return N.path=B.path,N.address=B.address,p===ze&&nt.forEach(O=>{let{address:K,path:L,publicKey:D}=B[O];N[O]={address:K,path:L,publicKey:D}}),N}),[e,p]);return[r,async()=>{try{let B={accounts:h,hardware:n,baseChain:p,walletId:d,type:m},N=$o[w.ledger],O=await Zo()||{};if(O?.productName&&(N=`${oe[w.ledger]} ${O.productName}`),B.ledgerInfo={productName:N},!x){u(Gt(B)),y.push(`${bt}?from=${zt.HARDWARE}`);return}if(!f){v.error({title:i("wallet_extension_hardware_wallet_notif_please_unlock")});return}Ht({hardwarewallet_brand:n,device_name:N}),o(!0),await u(qt(B)),await Ve(u);let K=te;[R.addAccount,R.addChain].includes(m)&&(K=`${zo}?from=seedVerify`);let L=Uo()===Po;if(m===R.addChain&&L){xe().notifyUpdateWalletsAssets(),y.go(-2);return}if(m===R.addAccount&&L){xe().notifyUpdateWalletsAssets(),y.go(-2);return}L?y.replace(K):globalThis.platform.openExtensionInPopup(K),o(!1)}catch(B){o(!1),B.message===Kt&&v.error(i("extension_wallet_addwallet_toast_wallets_added",{amount:500})),B.message===Ut&&v.error(i("wallet_home_toast_network_error"))}}]};s();a();var Jt={wrap:"_wrap_jx54d_1",root:"_root_jx54d_6",footerWrap:"_footerWrap_jx54d_10",accountList:"_accountList_jx54d_15",account:"_account_jx54d_15",accountLeft:"_accountLeft_jx54d_28",address:"_address_jx54d_31",path:"_path_jx54d_38",assets:"_assets_jx54d_44",accountRight:"_accountRight_jx54d_49"};var Ks=()=>{let{hardware:e}=(0,ft.useParams)(),r=M(),o=r.get("hideBack"),n=r.get("baseChain"),l=Ur(),[m,p]=Pr(),[d,y]=Kr(),u=lr({baseChain:n})||[],{coinId:x}=u?.[0]||{},f=(0,ft.useHistory)(),[h,T]=(0,X.useState)([]),B=async Be=>{if(!e)return[];try{return await sr({hardware:e,page:Be,basePath:m,baseChain:n,coinId:x})}catch(de){switch(console.log(de),console.log(de.name),console.log(de.message),de.name){case"LockedDeviceError":Dt.openModal(vt.lockedDevice,{baseChain:n,onButtonClick:()=>{window.location.reload()},onCloseBtnClick:()=>{f.goBack()}});break;case"InvalidStateError":case"TransportStatusError":Dt.openModal(vt.wrongAppToGetAddress,{baseChain:n,onButtonClick:()=>{window.location.reload()},onCloseBtnClick:()=>{f.goBack()}});break;case"TransportError":break;default:Dt.openModal(vt.connectError,{onButtonClick:async()=>{if(de.name==="TransportOpenUserCancelled"&&(await mt.requestLedgerDevice()).length){K();return}window.location.reload()},onCloseBtnClick:()=>{f.goBack()}});break}throw de}},[N,O]=(0,X.useState)(!0),K=async()=>{O(!0);let Be=await B(0);T(Be),O(!1)};(0,X.useEffect)(()=>{x&&K()},[m,x]);let[L,D]=jr(d);return X.default.createElement(t.Box,{className:Jt.wrap},N?X.default.createElement(he,null):X.default.createElement(t.FlexBox,{className:Jt.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},X.default.createElement(Y,{closeable:!1,backable:!o,title:i("wallet_extension_top_maintitle_select_address")}),X.default.createElement(Fr,{basePath:m,setBasePath:p,firstPageAccounts:h,selected:d,selectedAddressesInTargetIdentity:l,baseChain:n,onSelect:y,coinId:x,fetchAddress:B}),X.default.createElement(t.Box,{className:Jt.footerWrap},X.default.createElement(I,{category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,className:"wallet-management__button",disabled:!d.length,loading:L,onClick:D},d.length?i("wallet_extension_footer_btn_connecting",{value:d.length}):i("wallet_extension_footer_btn_connect")))))},Hr=e=>{let r=(0,ft.useHistory)(),n=M().get("baseChain");return Object.keys(Io).includes(n)?X.default.createElement(Ks,{...e}):(v.error(i("wallet_extension_top_error_parameters")),r.replace(te),null)};s();a();var yt=c(E());S();s();a();var Gr=c(co()),qr=c(le()),zr=c(ee()),Rt=c(E());Ne();var $r=()=>{let e=(0,zr.useHistory)(),{isLedgerImported:r}=(0,qr.useSelector)(Mt),o=(0,Rt.useMemo)(()=>({[w.ledger](){r?e.push(Ye):e.push(Nt)},[w.trezor](){e.push(`${ue}/${w.trezor}?${Gr.default.stringify({baseChain:Q})}`)},[w.onekey](){e.push(St)},[w.keystone](){e.push(`${ue}/${w.keystone}`)}}),[r,e]);return(0,Rt.useCallback)(({brand:l})=>{mr({hardwarewallet_brand:l}),ir(),o[l]()},[o])};s();a();var Co=c(Ce());S();var fe=c(E());s();a();var De={root:"_root_m678d_1",recommend:"_recommend_m678d_19",brandInfo:"_brandInfo_m678d_22",icon:"_icon_m678d_27",name:"_name_m678d_32",arrow:"_arrow_m678d_37"};var js=e=>{let{icon:r,wallet:o,onClick:n}=e,l=(0,fe.useCallback)(()=>{n(o)},[o,n]);return fe.default.createElement(t.Box,{onClick:l,className:De.root},fe.default.createElement(t.Box,{className:De.brandInfo},fe.default.createElement(Se,{className:(0,Co.default)(r,De.icon)}),fe.default.createElement(t.Box,{className:De.name},o.name),o.recommend?fe.default.createElement(Ae,{className:De.recommend,type:Ae.TYPE.rect,color:Ae.COLOR.green},i("wallet_onekey_tag_new")):null),fe.default.createElement(Se,{size:Se.SIZE.xs,className:(0,Co.default)("okds-arrow-chevron-right-centered-md",De.arrow)}))},eo=js;s();a();var to={root:"_root_gtfj8_1",navigator:"_navigator_gtfj8_4",wrap:"_wrap_gtfj8_7"};var Hs=[{name:oe[w.keystone],icon:"okx-wallet-plugin-keystone",brand:w.keystone,recommend:!0},nr()?{name:oe[w.ledger],icon:"okx-wallet-plugin-ledger",brand:w.ledger,recommend:!1}:null,{name:oe[w.onekey],icon:"okx-wallet-plugin-onekey",brand:w.onekey,recommend:!1},{name:oe[w.trezor],icon:"okx-wallet-plugin-trezor",brand:w.trezor,recommend:!1}].filter(Boolean),Gs=()=>{let e=$r();return yt.default.createElement(t.Container,{className:to.root},yt.default.createElement(Y,{closeable:!1,backable:!1,bordered:!1,className:to.navigator,title:i("wallet_addwallet_maintitle_connect_hareware_wallet")}),yt.default.createElement(t.Box,{className:to.wrap},Hs.map(r=>yt.default.createElement(eo,{wallet:r,icon:r.icon,onClick:e}))))},Yr=Gs;s();a();var ss=c(Ie());S();var as=c(ee());var U=c(E()),ro=c(le());Ne();s();a();var Te=c(E()),Vr=c(Ce());var Xr=c(Ie());S();s();a();var We={root:"_root_gwbd5_1",SELECTED:"_SELECTED_gwbd5_10",selected:"_SELECTED_gwbd5_10",IMPORTED:"_IMPORTED_gwbd5_13",imported:"_IMPORTED_gwbd5_13",selector:"_selector_gwbd5_16",main:"_main_gwbd5_19",name:"_name_gwbd5_23",assets:"_assets_gwbd5_29"};var qs=e=>{let{account:r,children:o,setSelected:n,selectType:l,badgeSlot:m=null}=e,p=jt()?.length;return Te.default.createElement(t.Box,{className:(0,Vr.default)(We.root,We[l]),onClick:()=>{l!==F&&n(d=>l===q?d.filter(y=>y.index!==r.index):p+d.length>=500?(v.error({title:i("wallet_extension_hardware_wallet_notif_max_account",{num:500})}),d):[...d,r])}},Te.default.createElement(t.FlexBox,{className:We.selector,align:t.ALIGN.center},Te.default.createElement(t.FlexBox,{justify:t.ALIGN.center,direction:t.DIRECTION.vertical,className:We.main},Te.default.createElement(t.FlexBox,{align:t.ALIGN.center},Te.default.createElement(t.Box,{className:We.name},i("wallet_extension_card_title_account",{value:`${(0,Xr.padStart)(`${r.index+1}`,2,"0")}`})),m),!!r.balance&&Te.default.createElement(b.DisplayAmount,{ellipsis:!0,symbol:"$",mode:b.LEGAL,useApproximate:!1,className:We.assets},r.balance)),Te.default.createElement(ie,{selectType:l})),o)},et=qs;no();io();s();a();var Qr=c(E());Wo();var zs=(e,r)=>{let o=e.index;return o!==void 0&&o===r.index},$s=(e,r)=>{let o=r?.[at]?.address;return!!o&&e?.account?.[at]===o},Ys=(e,r)=>(0,Qr.useCallback)(o=>{let n=e.some(m=>m.index===o.index);return r.some(m=>zs(m,o)||$s(m,o))?F:n?q:""},[e,r]),tt=Ys;s();a();var Ao=c(Ce());S();var k=c(E());Ne();s();a();var P={root:"_root_7hr89_1",tip:"_tip_7hr89_8",icon:"_icon_7hr89_13",info:"_info_7hr89_19",desc:"_desc_7hr89_23",entry:"_entry_7hr89_28",dialogRoot:"_dialogRoot_7hr89_34",title:"_title_7hr89_37",listWrap:"_listWrap_7hr89_42",pathItem:"_pathItem_7hr89_42",recommendItem:"_recommendItem_7hr89_51",SELECTED:"_SELECTED_7hr89_54",selected:"_SELECTED_7hr89_54",recommend:"_recommend_7hr89_51",detail:"_detail_7hr89_69",path:"_path_7hr89_42",address:"_address_7hr89_80",balance:"_balance_7hr89_88"};var Zr=(0,k.memo)(({account:e,selectType:r,updateAddressType:o})=>{let{mainnet:n,addressType:l,addressTypeUpdated:m}=e,p=l[Q],[d,y]=(0,k.useState)(!1),x=Object.values(n).filter(({balance:T})=>ko.gt(T,0)),f=T=>{y(!1),o(e,T,Q)},h=(0,k.useMemo)(()=>r===F||m?i("wallet_extension_hardware_wallet_notif_current_address",{network:"EVM",address:lo(n[p].address)}):i("wallet_extension_card_alert_default_option",{network:"EVM",address:lo(n[p].address)}),[m,r,p,n]);return x.length<=1||x.length===2&&x[0].address===x[1].address?null:k.default.createElement(t.Box,{className:P.root,onClick:T=>{T.stopPropagation()}},k.default.createElement(t.FlexBox,{className:P.tip},k.default.createElement(ae,{className:(0,Ao.default)("okx-wallet-plugin-information-circle",P.icon)}),k.default.createElement(t.Box,{className:P.info},k.default.createElement(t.Box,{className:P.desc},h),k.default.createElement(t.Box,{className:P.entry,onClick:()=>{y(!0)}},i("wallet_extension_card_textbtn_change_network",{network:"EVM"})))),k.default.createElement(qe.Action,{noContentPadding:!0,visible:d,alignBottom:!0,onClose:()=>{y(!1)}},k.default.createElement(t.Box,{className:P.dialogRoot},k.default.createElement(t.Box,{className:P.title},i("wallet_extension_top_title_change_evm",{network:"EVM"})),k.default.createElement(t.Box,{className:P.listWrap},Ft(e.index).map(T=>{let B=p===T.type;return k.default.createElement(t.FlexBox,{className:(0,Ao.default)(P.pathItem,{[P.recommendItem]:T.recommend,[P.SELECTED]:B}),onClick:()=>{B||f(T.type)},align:t.ALIGN.center},!!T.recommend&&k.default.createElement(t.Box,{className:P.recommend},i("wallet_extension_top_tag_recommended")),k.default.createElement(t.Box,{className:P.detail},k.default.createElement(t.Box,{className:P.path},T.pathName),k.default.createElement(t.Box,{className:P.address},n[T.type].address),k.default.createElement(b.DisplayAmount,{ellipsis:!0,symbol:"$",mode:b.LEGAL,useApproximate:!1,className:P.balance},n[T.type].balance)),k.default.createElement(ie,{selectType:B?q:""}))})))))});s();a();S();var oo=c(E()),Jr=c(ee()),xt=c(le());no();io();var Vs=(e,r)=>{let o={[w.onekey](){let{onekeyInfo:n}=r,l=n?.deviceType;return l?`${e}_${l}`:e},[w.keystone](){let{keystoneInfo:n}=r;return n?.device||e},[w.trezor](){return oe[w.trezor]}};return o[e]?o[e]():"unknown"},Xs=({hardware:e,selected:r,walletId:o,walletInfo:n={}})=>{let[l,m]=(0,oo.useState)(!1),p=(0,Jr.useHistory)(),d=(0,xt.useDispatch)(),y=M(),u=(0,xt.useSelector)(Bt),x=(0,xt.useSelector)(Lt),f=(0,oo.useCallback)(async()=>{try{let h={hardware:e,walletId:o,accounts:r,...n};if(o&&(h.type=R.addAccount),!u){d(Gt(h)),p.push(`${bt}?from=${zt.HARDWARE}`);return}if(!x){v.error({title:i("wallet_extension_hardware_wallet_notif_please_unlock")});return}m(!0),Ht({hardwarewallet_brand:e,device_name:Vs(e,n)}),await d(qt(h)),await Ve(d),m(!1),R.addAccount===y.get("type")?(v.success({title:i("wallet_addacount_toast_account_created")}),xe().notifyUpdateWalletsAssets(),e===w.trezor?globalThis.platform.openExtensionInPopup(te):p.go(-1)):globalThis.platform.openExtensionInPopup(te)}catch(h){m(!1),h.message===Kt&&v.error(i("extension_wallet_addwallet_toast_wallets_added",{amount:500})),h.message===Ut&&v.error(i("wallet_home_toast_network_error"))}},[y,p,r,e,o,d,n,x,u]);return[l,f]},ot=Xs;s();a();var No=c(Ie());var Rr=c(le()),Ee=c(E());var Qs=e=>{let o=M().get("walletId"),n=(0,Rr.useSelector)(Et),[l,m]=(0,Ee.useState)(()=>o?n.find(x=>(x.walletIdentities||[]).some(h=>h.walletId===o))||{}:{});(0,Ee.useEffect)(()=>{if(e&&(0,No.isEmpty)(l)){let x=n.find(f=>f.masterFingerprint===e);x&&!(0,No.isEmpty)(x)&&m(x)}},[n,e,l]);let[p,d]=(0,Ee.useState)([]);(0,Ee.useEffect)(()=>{let x=l?.walletIdentities||[];d(x)},[l]);let[y,u]=(0,Ee.useState)(o);return(0,Ee.useEffect)(()=>{let x=p?.[0];u(x?.walletId||"")},[p]),{targetKeyringIdentity:l,targetWalletIdentities:p,targetWalletId:y}},es=Qs;s();a();var Fe=c(E()),ts=c(Ie());S();var Zs=e=>{let r=(0,Fe.useRef)(),o=(0,Fe.useRef)(),[n,l]=(0,Fe.useState)("");return(0,Fe.useEffect)(()=>{if(!(r.current&&o.current))return ts.noop;let m=new IntersectionObserver(([p])=>{p.isIntersecting?l(""):l(i("wallet_extension_top_title_select_account"))},{root:r.current});return m.observe(o.current),()=>{m.disconnect()}},[e]),{title:n,wrapRef:r,titleRef:o}},os=Zs;s();a();var So=c(E());S();s();a();var rs={root:"_root_14fge_1"};var Js=({selected:e,isSubmiting:r,handleSubmit:o})=>So.default.createElement(t.Box,{className:rs.root},So.default.createElement(I,{block:!0,loading:r,category:I.CATEGORY.fill,type:I.TYPE.highlight,size:I.SIZE.lg,disabled:!e.length,onClick:o},e.length?i("wallet_extension_footer_btn_connecting",{value:e.length}):i("wallet_extension_footer_btn_connect"))),rt=Js;s();a();var Pe={wrap:"_wrap_i44ji_1",root:"_root_i44ji_6",navigator:"_navigator_i44ji_11",title:"_title_i44ji_20",desc:"_desc_i44ji_26"};var ns=()=>{let e=(0,as.useHistory)(),[r,o]=(0,U.useState)(""),n=(0,ro.useSelector)(Go),l=n[r]||{},{targetKeyringIdentity:m,targetWalletIdentities:p,targetWalletId:d}=es(r),[y,u]=(0,U.useState)([]),x=(0,ro.useDispatch)(),f=(0,U.useCallback)(async C=>{await xe().setScanedKeyStone(C),await Ve(x)},[x]),{hasDangerKeystoneScaned:h}=dr(),T=(0,U.useCallback)(async C=>{o(C.masterFingerprint);let z=await tr(C),$=await Jo(z);await f({...C,accountsWithBalance:$});let{device:Le,deviceVersion:je}=C;Le===Ro&&(!je||er(je,"1.0.4")===-1)&&(h||(x(kt("hasDangerKeystoneScaned",!0)),mo.showUpdateModal()))},[f]),B=C=>{let z=n[C];T(z)},N=async()=>{let C=await mo.openModal(or.getAccounts,{onBackBtnClick(){e.goBack()}}),z=n[C.masterFingerprint];z&&(C.accountsWithBalance=z.accountsWithBalance),T(C)};Ct(()=>{m?.masterFingerprint?B(m?.masterFingerprint):N()});let O=l?.accountsWithBalance,{title:K,wrapRef:L,titleRef:D}=os(O),Be=tt(y,p),[de,bo]=ot({walletInfo:{keystoneInfo:(0,ss.pick)(l,["device","deviceId","masterFingerprint"])},selected:y,walletId:d,hardware:w.keystone}),gs=async(C,z,$=Q)=>{let Le=p.find(He=>He.index===C.index);Le&&await xe().updateWalletAddress(Le.walletId,{[$]:z});let{accountsWithBalance:je}=l,ws=je.map(He=>{if(C.index===He.index){let{addressType:Ts}=He;return{...He,addressType:{...Ts,[$]:z},addressTypeUpdated:!0}}return He});f({...l,accountsWithBalance:ws})},hs=((C={})=>z=>{let $=z?.addressType?.[Q];if(C[$])return C[$];let Le=Ft(0).find(je=>je.type===$)?.pathName||"";return Le?C[$]=Le.split("|")?.[0]?.trim():C[$]="",C[$]})();return U.default.createElement(t.Box,{className:Pe.wrap},O?.length?U.default.createElement(t.FlexBox,{className:Pe.root,align:t.ALIGN.unset,direction:t.DIRECTION.vertical},U.default.createElement(Y,{closeable:!1,bordered:!1,title:K,className:Pe.navigator}),U.default.createElement(t.FlexBox,{direction:t.DIRECTION.vertical,className:Pe.wrap,ref:L},U.default.createElement(t.Box,{className:Pe.title,ref:D},i("wallet_extension_top_title_select_account")),U.default.createElement(t.Box,{className:Pe.desc},i("extension_wallet_hardware_wallet_text_multi_net")),O.map(C=>{let z=Be(C),$=hs(C);return U.default.createElement(et,{account:C,selectType:z,setSelected:u,badgeSlot:$?U.default.createElement(Ae,{type:Ae.TYPE.rect},$):null},U.default.createElement(Zr,{account:C,selectType:z,updateAddressType:gs}))})),U.default.createElement(rt,{selected:y,isSubmiting:de,handleSubmit:bo})):U.default.createElement(he,null))};s();a();var is=c(Ie());S();var ms=c(le());var cs=c(ee());var H=c(E());s();a();var so=c(E());var ls=e=>{let r=Xe(),o=(0,so.useMemo)(()=>r?.find(m=>{if(Ot(m.initialType)){let{firstEvmAddress:p,connectId:d}=m?.onekeyInfo||{};return $t(d,p)===e}return!1})||{},[r,e]),n=(0,so.useMemo)(()=>o.walletIdentities||[],[o]),l=(0,so.useMemo)(()=>n.length?n[0].walletId:"",[n]);return{targetKeyringIdentity:o,targetWalletIdentities:n,targetWalletId:l}};s();a();var Ue={wrap:"_wrap_19eua_1",root:"_root_19eua_6",list:"_list_19eua_10",desc:"_desc_19eua_16",loadMore:"_loadMore_19eua_22"};var Rs=new Pt,ea=()=>{let e=M(),r=e.get("connectId"),o=e.get("firstEvmAddress"),n=$t(r,o),{connectedOnekey:l}=(0,ms.useSelector)(Mt),m=l?.[n],p=(0,H.useRef)(),{data:d,noMore:y}=$e(async L=>{if(!m)return{list:[]};let D=L?.pageNo??0;return{list:await Rs.getAccounts({page:D,onekeyInfo:m}),pageNo:D+1}},{target:p,isNoMore:L=>L?.list?.length>=500}),u=d?.list||m?.accountsWithBalance||[],[x,f]=(0,H.useState)([]),{targetWalletIdentities:h,targetWalletId:T}=ls(n),B=tt(x,h),[N,O]=ot({walletInfo:{onekeyInfo:(0,is.pick)(m,["connectId","deviceId","deviceType","firstEvmAddress"])},selected:x,walletId:T,hardware:w.onekey}),K=(0,cs.useHistory)();return(0,H.useEffect)(()=>{m||(v.error(i("wallet_extension_top_error_parameters")),K.replace(te))},[m,K,n]),H.default.createElement(t.Box,{className:Ue.wrap},H.default.createElement(t.FlexBox,{direction:t.DIRECTION.vertical,className:Ue.root},H.default.createElement(Y,{bordered:!1,closeable:!1,className:Ue.navigator,title:i("wallet_extension_onekey_title_import_account")}),H.default.createElement(t.Box,{ref:p,className:Ue.list},H.default.createElement(t.Box,{className:Ue.desc},i("extension_wallet_hardware_wallet_text_multi_net")),u?.map(L=>{let D=B(L);return H.default.createElement(et,{account:L,selectType:D,setSelected:f})}),y?null:H.default.createElement(t.Box,{className:Ue.loadMore},H.default.createElement(Ge,null))),H.default.createElement(rt,{selected:x,isSubmiting:N,handleSubmit:O})),H.default.createElement(he,{visible:!u?.length}))},ps=ea;s();a();S();var ds=c(ee()),G=c(E());s();a();var Ke={wrap:"_wrap_174i9_1",root:"_root_174i9_6",list:"_list_174i9_10",desc:"_desc_174i9_16",loadMore:"_loadMore_174i9_22"};var ta=new rr,oa=()=>{let r=M().get("walletId"),[o,n]=(0,G.useState)(!1),l=async L=>{let D=L?.nextPage||0;return{list:await ta.getAccounts({page:D}),nextPage:D+1}},m=(0,G.useRef)(),{data:p,loading:d,noMore:y}=$e(l,{target:m,isNoMore:L=>L?.list?.length>=500,onError:()=>{n(!0)}}),u=Xe(),[x,f]=(0,G.useState)([]),h=u?.find(({walletIdentities:L})=>L.some(D=>D.walletId===r)),{walletIdentities:T=[]}=h||{},B=tt(x,T),[N,O]=ot({selected:x,walletId:r,hardware:w.trezor}),K=(0,ds.useHistory)();return G.default.createElement(t.Box,{className:Ke.wrap},G.default.createElement(t.FlexBox,{direction:t.DIRECTION.vertical,className:Ke.root},G.default.createElement(Y,{bordered:!1,closeable:!1,className:Ke.navigator,title:i("wallet_extension_onekey_title_import_account")}),G.default.createElement(t.Box,{ref:m,className:Ke.list},G.default.createElement(t.Box,{className:Ke.desc},i("extensions_hardware_support_text_evm_only",{brand:oe[w.trezor]})),p?.list?.map(L=>{let D=B(L);return G.default.createElement(et,{account:L,selectType:D,setSelected:f})}),y?null:G.default.createElement(t.Box,{className:Ke.loadMore},G.default.createElement(Ge,null))),G.default.createElement(rt,{selected:x,isSubmiting:N,handleSubmit:O})),G.default.createElement(qe.Prompt,{btnFull:!0,visible:o,infoType:!1,alignBottom:!1,hideCloseBtn:!!r,title:i("wallet_add_wallet_maintitle_hardware_wallet_conncet_failed"),text:i("wallet_add_wallet_modal_hardware_wallet_conncet_failed_tip"),onConfirm:()=>{window.location.reload()},confirmBtnProps:{type:I.TYPE.highlight,size:I.SIZE.lg},confirmText:i("wallet_manage_wallet_btn_reconncet_hardware_wallet"),onClose:()=>{K.goBack()}}),G.default.createElement(he,{visible:d||o}))},us=oa;s();a();var fs=c(co());S();var ys=c(le());var ye=c(E());s();a();var ao={root:"_root_pxrbs_1",navigator:"_navigator_pxrbs_4",list:"_list_pxrbs_7"};var _s=new Pt,ra=({history:e})=>{let[r,o]=(0,ye.useState)([]),n=(0,ye.useRef)(),l=async()=>{try{let u=await _s.searchDevices();u.length?(o(u),n.current=null):n.current=setTimeout(()=>{l()},3e3)}catch{e.goBack()}};Ct(l),It(()=>{n.current&&clearTimeout(n.current)});let m=Xe(),p=(u,x)=>m.some(f=>{if(Ot(f.initialType)){let{onekeyInfo:h}=f;return fr(h,{connectId:u,firstEvmAddress:x})}return!1}),d=(0,ys.useDispatch)(),y=async({connectId:u,deviceId:x,deviceType:f})=>{try{let h=await _s.getFirstEvmAddress({dispatch:d,connectId:u,deviceId:x,deviceType:f});if(p(u,h)){v.error({title:i("wallet_extension_hardware_wallet_notif_hardware_already")});return}e.push(`${ue}/${w.onekey}?${fs.default.stringify({firstEvmAddress:h,connectId:u})}`)}catch(h){console.log(h)}};return ye.default.createElement(t.Container,{className:ao.root,loading:r.length?!1:{loadingText:i("wallet_onekey_text_searching_for_equipment")}},ye.default.createElement(Y,{stickyStyle:{zIndex:3},className:ao.navigator,closeable:!1,bordered:!1,title:i("wallet_onekey_title_connect_device")}),ye.default.createElement(t.Box,{className:ao.list},r.map(u=>ye.default.createElement(eo,{wallet:u,onClick:y,icon:"okx-wallet-plugin-equipment"}))))},xs=ra;var sa={[w.keystone]:ns,[w.ledger]:Hr,[w.onekey]:ps,[w.trezor]:us},aa=()=>pe.default.createElement(se.Switch,null,pe.default.createElement(se.Route,{path:At,component:Yr,exact:!0}),pe.default.createElement(se.Route,{path:Nt,component:hr,exact:!0}),pe.default.createElement(se.Route,{path:Ye,component:Lr,exact:!0}),pe.default.createElement(se.Route,{path:St,component:xs,exact:!0}),pe.default.createElement(se.Route,{path:`${ue}/:hardware`,render:e=>{let r=e?.match?.params?.hardware,o=sa[r];return o?pe.default.createElement(o,null):pe.default.createElement(se.Redirect,{to:At})},exact:!0}),pe.default.createElement(se.Redirect,{to:At})),U_=aa;export{U_ as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=ConnectHardware-6RMMWLRC.js.map
