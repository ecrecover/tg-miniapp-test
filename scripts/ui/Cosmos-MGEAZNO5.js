import{a as Ft}from"./chunk-CS4LDCJ7.js";import{a as Z}from"./chunk-XQL7T4TZ.js";import{a as X}from"./chunk-XF27BKZH.js";import{a as Q}from"./chunk-G2V3XEUQ.js";import{a as K,b as V}from"./chunk-QR2WOQMM.js";import"./chunk-2P6KMQ6R.js";import"./chunk-PVE3B4RU.js";import"./chunk-636MHS2Q.js";import"./chunk-XJ4IKVPR.js";import"./chunk-XE2F6LDQ.js";import"./chunk-REIQGNZB.js";import"./chunk-Q4CU3DV4.js";import"./chunk-DSYZP5KR.js";import"./chunk-RNB3JHFL.js";import"./chunk-6QKWDR6X.js";import{a as z}from"./chunk-7XFZKU6W.js";import"./chunk-I3U7CKFC.js";import"./chunk-ZPDRUAGN.js";import"./chunk-WCH23YYN.js";import"./chunk-NZZFB6IS.js";import"./chunk-35PGDXR7.js";import"./chunk-PUO23DIP.js";import"./chunk-O2J764NL.js";import"./chunk-CDLW656Z.js";import"./chunk-3K3KMGWB.js";import"./chunk-5EZVDCYS.js";import"./chunk-475E6NBR.js";import"./chunk-RC5IAFKK.js";import"./chunk-4VLUHY4K.js";import"./chunk-IHPHPUUG.js";import"./chunk-ZEWK7OGU.js";import"./chunk-QVA4WXOQ.js";import"./chunk-EX22SDGB.js";import"./chunk-4RARGC4D.js";import"./chunk-OQOFXHGC.js";import"./chunk-3QA2SYRR.js";import"./chunk-3SC55VQ2.js";import{e as Y,g as $}from"./chunk-VTLNAOHG.js";import"./chunk-Y7YPG2EJ.js";import"./chunk-7R67VE77.js";import"./chunk-NHGZUGLZ.js";import"./chunk-G5LEAVCY.js";import"./chunk-ACHWU2H6.js";import"./chunk-ZPFBKNRM.js";import"./chunk-7DP5LYUM.js";import"./chunk-BVXKJJ4A.js";import"./chunk-TBBE7OKY.js";import"./chunk-7HJDVUH5.js";import{a as dt,b as v}from"./chunk-T22ZPYWM.js";import{a as y}from"./chunk-CABO2JBZ.js";import"./chunk-6B2YB6M3.js";import"./chunk-ADKEXOTG.js";import"./chunk-H7DITLB3.js";import"./chunk-VQBK6IHT.js";import"./chunk-CTT7GD4C.js";import"./chunk-LQAOHG2H.js";import"./chunk-WNQ6F6VV.js";import"./chunk-LEADLFDQ.js";import"./chunk-DGK7TBBE.js";import"./chunk-6Y7ULJF6.js";import"./chunk-3YH3AGVS.js";import"./chunk-3LB7TUPB.js";import"./chunk-TK6JYPIW.js";import"./chunk-OS6E6KVM.js";import"./chunk-GZRBUDXF.js";import"./chunk-WY46TT4P.js";import"./chunk-MTMUCMTY.js";import"./chunk-S6N4IJX7.js";import"./chunk-ZD4EJWX6.js";import"./chunk-WGCZSWYA.js";import"./chunk-IINHHLHP.js";import"./chunk-DY2YURLY.js";import"./chunk-KXZSXP3G.js";import"./chunk-6HXVFU7V.js";import"./chunk-D5FMQLJG.js";import"./chunk-3I7UBQEQ.js";import"./chunk-DXRBY5MU.js";import"./chunk-6FR2UIE7.js";import"./chunk-5GMHHIH5.js";import{B as W}from"./chunk-7KCWBFQ2.js";import"./chunk-QLUP7GYN.js";import"./chunk-7Y44NCE5.js";import{d as B}from"./chunk-BKPOG6ZD.js";import"./chunk-OZMVWMFO.js";import"./chunk-KTO7CPX7.js";import"./chunk-P3XTPXPO.js";import"./chunk-S6TPD26J.js";import"./chunk-4IY6P5HR.js";import"./chunk-FQWGOLDH.js";import"./chunk-QEPBNPHF.js";import"./chunk-3JLS3TGD.js";import"./chunk-KDP5Z4RF.js";import"./chunk-W234FNSM.js";import"./chunk-DDO6HXRN.js";import"./chunk-CLWWTOKP.js";import"./chunk-KZ2PCELG.js";import"./chunk-C7ZG4INB.js";import"./chunk-J5ANWCEO.js";import"./chunk-VMO2INN3.js";import"./chunk-J4TF3RT7.js";import{j as q,n as H}from"./chunk-6FOZGMAL.js";import"./chunk-2MV3WEYP.js";import"./chunk-HPXM6RSK.js";import{K as I,u as b}from"./chunk-IUIJ46C3.js";import"./chunk-KZ3ZU675.js";import"./chunk-NJ5CWPUY.js";import"./chunk-4X3PZECG.js";import"./chunk-UMJMJOW4.js";import"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import"./chunk-O5JCC6KG.js";import{d as U,f as lt}from"./chunk-MAIAJ7GD.js";import"./chunk-4PGNX6E2.js";import"./chunk-DBHB6SUD.js";import"./chunk-I56VJWE4.js";import"./chunk-PS3S6BG3.js";import"./chunk-RT4Y2U5N.js";import{c as D}from"./chunk-2VHH444P.js";import"./chunk-RIMU4JTV.js";import"./chunk-MGLVPWSV.js";import"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import"./chunk-AMVK42SC.js";import"./chunk-D6RIE45O.js";import"./chunk-XCAARJ7Q.js";import"./chunk-JXCCIV3J.js";import"./chunk-AOA7NX2Y.js";import"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import{Kb as J,ib as R,m as gt,qb as E}from"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import"./chunk-SOHTSUTI.js";import"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-ZAMSVR5I.js";import"./chunk-WZLED2TE.js";import"./chunk-E24EBHFY.js";import"./chunk-V4F2JFTP.js";import{a as h}from"./chunk-6DDC4Y2S.js";import"./chunk-TEY24VZN.js";import"./chunk-RKHQOOTU.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-F4JTGWJH.js";import"./chunk-YUXYCITH.js";import"./chunk-RMV3AS5X.js";import"./chunk-3NG42BBY.js";import"./chunk-SF2LTPAC.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{c as ut,f as m,m as s,o as a}from"./chunk-EQYVU4XP.js";var nt=ut((Lt,ot)=>{s();a();var It=Ft();function yt(t,e,r){return t==null?t:It(t,e,r)}ot.exports=yt});s();a();var M=m(h()),ft=m(B());s();a();var l=m(h());s();a();var et=m(gt());J();s();a();var w=m(B()),j=m(dt());var tt=t=>(0,w.default)(t,"params.transaction.signOptions.preferNoSetFee",!1),P=t=>{let e=[],r=(0,w.default)(t,"params.transaction.signDoc",{}),o=r;if(r.authInfoBytes)try{o=j.AuthInfo.decode(y(r.authInfoBytes))}catch{return e}return(0,w.default)(o,"fee.amount",[])};function x({coinId:t,unapproved:e,preferNoSetFee:r,feeInfo:o}){let{walletId:n}=z(e),i=P(e).find(({denom:d})=>d===o.denom),p=r?i?.amount||0:o.gasFee,c=$(t,n)?.coinAmountInt;return(0,et.isNil)(c)||E(c,p)}s();a();var A=m(h());var G=m(v()),rt=m(B()),st=m(nt());J();lt();function Ct({cosmosPrefix:t,feeAmount:e,feeDenom:r,tx:o}){let n=o;return o.authInfoBytes?n={type:b.DAPP_PROTOBUF,data:JSON.stringify({chainId:o?.chainId,accountNumber:o?.accountNumber,authInfo:(0,G.toHex)(y(o?.authInfoBytes)),body:(0,G.toHex)(y(o?.bodyBytes))})}:((0,rt.default)(o,"fee.amount",[]).length||(0,st.default)(o,"fee.amount",[{amount:e,denom:r}]),n={type:b.DAPP_JSON,data:JSON.stringify(o)}),n.withTx=!0,n.prefix=t,n.fake=!0,n}async function St({from:t,localType:e,cosmosPrefix:r,feeAmount:o,feeDenom:n,tx:f}){let i=Ct({tx:f,cosmosPrefix:r,feeAmount:o,feeDenom:n}),p=await U().signCommonMessage(t,i,e),{tx:c}=JSON.parse(p);return c}function L(t){let e=t?.params?.transaction?.signDoc,r=t?.params?.transaction?.chainId,o=t?.params?.transaction?.signer,{cosmosPrefix:n,localType:f,coinId:i}=D(r)??{},[p,c]=(0,A.useState)(""),[g,d]=(0,A.useState)(!1),[u,S]=(0,A.useState)("");return q(()=>{(async()=>{try{d(!1);let{normal:k,gasLimit:F,feeDemon:N}=await W({coinId:i,from:o,value:"0",to:o});S(N);let T=await St({from:o,localType:f,cosmosPrefix:n,feeAmount:R(k,F),feeDenom:N,tx:e});c(T)}catch{d(!0),c("-")}})()}),{inputData:p,inputDataError:g,denom:u}}s();a();function _({coinId:t,feeInfo:e,denom:r,unapproved:o,preferNoSetFee:n,callback:f}){let i=P(o),p=i.find(({denom:u})=>u===r),c=i.filter(({denom:u})=>u!==r).map(({amount:u,denom:S})=>`${u} ${S}`),g;return n?g=p?.amount||"":g=e.initLoading?void 0:e.gasFee,{coinId:t,networkFee:g,level:n?void 0:e.gasType,loading:n?!1:e.initLoading,estimateFailed:n?!1:e.error,appendFeeList:n?c:"",preferNoSetFee:n,onClick:()=>{f()}}}var kt=({unapproved:t,coinId:e})=>{let[r,{toggle:o}]=H(!1),[n,f]=(0,l.useState)({}),[i,p]=(0,l.useState)(tt(t)),c=Y(e)||{},g=t.params?.transaction?.signer,d=t.params?.transaction?.contractAddress,{inputData:u,inputDataError:S,denom:O}=L(t),k=x({coinId:e,unapproved:t,preferNoSetFee:i,feeInfo:n}),F=_({coinId:e,feeInfo:n,unapproved:t,preferNoSetFee:i,inputDataError:S,denom:O,callback:o}),N=V({baseCoin:c,unapproved:t,estimateFailed:F.estimateFailed,isSufficientGas:k}),{buttonGroup:T}=Q({coinId:e,unapproved:t,feeLoading:F.loading,estimateFailed:F.estimateFailed,isSufficientGas:k,needCheckMpc:!0,extParams:{preferNoSetFee:i,serverFee:{gas:n.gasAmount,amount:[{denom:n.denom,amount:n.gasFee}]}}});return l.default.createElement(l.default.Fragment,null,l.default.createElement(K,{unapproved:t,tipMessage:N,buttonGroup:T,networkFee:F,contractAddress:d}),l.default.createElement(X,{visible:r,coinId:String(e),address:g,inputData:u,gasType:F.level,onBack:()=>{o()},onClose:()=>{o()},onChange:pt=>{f(pt)},onConfirm:()=>{p(!1)}}))},at=kt;s();a();var it=m(h()),mt=m(v());var ct=({unapproved:t})=>{let e=t.params?.transaction?.data,r=typeof e=="string"?e:(0,mt.toBase64)(y(e));return it.default.createElement(Z,{needCheckMpc:!0,message:r,unapproved:t})};var ye=({unapproved:t})=>{let e=(0,ft.default)(t,"params.transaction.chainId"),{coinId:r}=D(e)??{};switch(t.method){case I.SIGN_AMINO:case I.RPC_SIGN_AMINO:case I.SIGN_DIRECT:case I.RPC_SIGN_DIRECT:return M.default.createElement(at,{unapproved:t,coinId:r});case I.SIGN_ARBITRARY:case I.RPC_SIGN_ARBITRARY:return M.default.createElement(ct,{unapproved:t,coinId:r});default:return""}};export{ye as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=Cosmos-MGEAZNO5.js.map
