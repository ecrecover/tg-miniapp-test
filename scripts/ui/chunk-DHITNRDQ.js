import{c as F}from"./chunk-GUYSHF5X.js";import{a as _e,b as ge,c as we}from"./chunk-H2MP374E.js";import{a as H}from"./chunk-BSJ5U7SB.js";import{a as fe}from"./chunk-AWV3UGPG.js";import{c as pe}from"./chunk-7BFUGHAL.js";import{a as me}from"./chunk-V4V6C6NY.js";import{a as ue}from"./chunk-BGUY7SH3.js";import{q as z,r as ce}from"./chunk-FCCCJLF6.js";import{a as He}from"./chunk-EJQOS3F4.js";import{c as q}from"./chunk-4QSQKIBZ.js";import{b as de,c as ze}from"./chunk-OXVQDEZW.js";import{g as ie,m as Me}from"./chunk-X3G52GGX.js";import{Oa as ne,hb as Ye,lc as le,m as Y,ma as ae,za as Oe}from"./chunk-QG673PNL.js";import{F as V,n as re,p as y}from"./chunk-6MTHEPGF.js";import{I as O,w as i}from"./chunk-ZQQ7HNWV.js";import{S as j,Y as M,c as De}from"./chunk-ZOQTSYT4.js";import{a as N,g as Ve}from"./chunk-ADZWCU3Q.js";import{a as Pe}from"./chunk-TBVIGR5T.js";import{f as w,m as f,o as p}from"./chunk-REC7XVZY.js";f();p();var k=w(N()),Te=w(Y());f();p();var P=w(N()),ke=w(He());O();var Fe=({type:o,addressId:a,addressInputValue:s,nameInputValue:d,networkSelectList:l,onClose:_,onDelete:g,onBackToHome:c})=>{let e=(0,ke.useHistory)(),r=(0,P.useRef)(!1),t=o===C.TYPE.EDIT,n=t?i("wallet_extension_editaddress_title_edit_address"):i("wallet_extension_addaddress_title_add_address"),u=t?i("wallet_extension_editaddress_modal_detele_address"):i("wallet_extension_addaddress_modal_cancel_adding"),m=t?i("wallet_extension_editaddress_btn_detele"):i("wallet_extension_addaddress_btn_yes"),x=t?i("wallet_extension_editaddress_btn_cancel"):i("wallet_extension_addaddress_btn_no"),b=s||d||l.length,A=()=>{let h=c&&c();e.push(h||"")},L=()=>{let h=re.warn({title:u,alignBottom:!1,cancelText:x,confirmText:m,onCancel:()=>{h.destroy(),r.current=!1},onConfirm:async()=>{t?(await we(a),V.success({title:i("wallet_extension_addressbook_toast_address_deleted")}),g&&g(),_()):r.current?A():_()}})};return P.default.createElement(P.default.Fragment,null,P.default.createElement(me,{onBack:()=>{!t&&b?L():_()},title:n,onClose:()=>{t?L():b?(r.current=!0,L()):A()},closeable:t?{style:{color:"var(--okd-color-semantic-negative)"},icon:"okx-wallet-plugin-trash"}:!0}))},xe=Fe;f();p();var S=w(N());O();var be=w(Y());function K({nameInputValue:o,nameInputError:a,setNameInputValue:s,setNameInputError:d}){let l=(0,S.useRef)(),_=(0,S.useRef)(!1),g=a&&_.current?a:"",{run:c}=z(()=>{_.current=!0;let r="";(0,be.size)(o)>20&&(r=i("wallet_extension_addaddress_errortip_maximum_20")),d(r)},{wait:50}),e=r=>{c(),s(r.target.value)};return(0,S.useEffect)(()=>{l.current.focus()},[]),S.default.createElement(y,{className:"address-edit-dialog__name-input",placeholder:i("wallet_extension_addaddress_input_enter_name_limit"),label:i("wallet_extension_addaddress_subtitle_name"),value:o,error:g,errorType:y.TIP_TYPE.always,size:y.SIZE.xl,onChange:e,maxLength:30,onRef:r=>{l.current=r}})}f();p();var E=w(N());O();function X({type:o,addressData:a,addressInputValue:s,addressInputError:d,setAddressInputValue:l,setAddressInputError:_,onChangeToEdit:g,validNetworks:c,isLoading:e,isBetterLoading:r}){let{id:t,address:n}=a,u=o===C.TYPE.EDIT,m=F(s),x=!!m?.id&&(!u||m?.id!==t),b=(0,E.useRef)(!1),A=d&&b.current?d:"",{run:L}=z(async()=>{let h="";s&&c&&!c.length&&(h=i("wallet_extension_addaddress_errortip_wrong_address")),x&&(h=i("wallet_extension_addaddress_errortip_address_exists")),b.current=!0,_(h)},{wait:50}),B=h=>{l(h.target.value)},D=()=>{g(m)};return(0,E.useEffect)(()=>{L()},[c]),E.default.createElement(E.default.Fragment,null,E.default.createElement(y.TextArea,{className:"address-edit-dialog__address-input",placeholder:i("wallet_extension_addaddress_input_enter_address"),disabled:!u&&n,label:i("wallet_extension_addaddress_subtitle_address"),value:s,error:!e&&!!A,errorType:y.TIP_TYPE.always,size:y.SIZE.xl,suffix:r&&E.default.createElement(j.Circle,{size:j.SIZE.sm}),onChange:B,autoResize:!0}),A&&E.default.createElement("div",{className:"address-edit-dialog__address-input__error"},A,x&&E.default.createElement("span",{className:"address-edit-dialog__address-input__error-action",onClick:D},i("wallet_extension_addaddress_anchor_go_to_edit"))))}f();p();var T=w(N()),ve=w(Y());O();f();p();var I=w(N()),Z=w(Ve()),U=w(De()),he=w(Y());f();p();var J=({className:o="",options:a=[],onChange:s=()=>{}})=>{let[d,l]=(0,I.useState)({}),[_,g]=(0,I.useState)({});(0,I.useEffect)(()=>{let e={},r={};for(let t=0;t<a.length;t++){let n=a[t];n.active&&(e[n.value]=n),n.disabled&&(r[n.value]=n)}l(e),g(r)},[a]);let c=e=>{if(e.disabled)return;let r=e.value,t=(0,he.cloneDeep)(d);d[r]?(delete t[r],l(t)):(t[r]=e,l(t));let n=Object.values(t);s&&s(n)};return I.default.createElement("div",{className:(0,U.default)("ok-button-checkbox",o)},a.map((e,r)=>I.default.createElement("div",{className:(0,U.default)("ok-button-checkbox__item",{"ok-button-checkbox__item--active":!!d[e.value],"ok-button-checkbox__item--disabled":!!_[e.value]}),onClick:()=>{c(e)},key:r},e.image&&I.default.createElement("img",{className:"ok-button-checkbox__item-icon",src:e.image,alt:e.label}),I.default.createElement("span",{className:"ok-button-checkbox__item-text"},e.label))))};J.propTypes={className:Z.default.string,options:Z.default.array,onChange:Z.default.func};J.defaultProps={className:"",options:[],onChange:()=>{}};var Ee=J;Ye();var Ze=[ne];function Q({network:o,networkSelectList:a,setNetworkSelectList:s,setHasSelect:d,disabled:l,validNetworks:_}){let g=fe(),[c,e]=(0,T.useState)([]),r=n=>{if(!n.length){s([]);return}let u=n.map(m=>m.value);s(u)},t=H();return(0,T.useLayoutEffect)(()=>{let n=t.filter(({coinType:u,localType:m})=>!Ze.includes(m)&&_?.includes(u)).map(({chainName:u,localType:m})=>{let x=(0,ve.get)(g.find(b=>b.localType===m),"image");return{disabled:o===m,active:a.includes(m),label:u,value:m,image:x}});e(n),d(n.some(u=>u.active))},[_,a,t]),l||!c.length?null:T.default.createElement("div",{className:"address-edit-dialog__network-select"},T.default.createElement("div",{className:"address-edit-dialog__network-select__title"},i("wallet_extension_addressbook_title_select_networks")),T.default.createElement(Ee,{options:c,onChange:r}))}f();p();var Ie=w(N());O();function $({type:o,addressId:a,nameInputValue:s,addressInputValue:d,networkSelectList:l,addressInputError:_,nameInputError:g,hasSelect:c,onClose:e}){let r=o===C.TYPE.EDIT,t=s===""||d===""||_!==""||g!==""||!c||l.length===0,n=async u=>{u.stopPropagation();let m={address:d,name:s,networks:l};if(r)await ge(a,m),V.success({title:i("wallet_extension_editaddress_toast_edit_saved")}),e(m);else try{await _e(m),V.success({title:i("wallet_extension_addressbook_toast_address_added")}),e(m)}catch(x){x?.message===pe&&V.error({title:i("wallet_extension_addressbook_toast_address_limit_reached")})}};return Ie.default.createElement(M,{className:"address-edit-dialog__save",disabled:t,category:M.CATEGORY.fill,type:M.TYPE.highlight,size:M.SIZE.lg,onClick:n,block:!0},i("wallet_set_password_btn_confirm"))}f();p();var W=w(N());f();p();var Ne=w(Pe());var G=w(N());var R=w(Y());Me();ze();Oe();var Ae={[Ne.Currency.WAX]:async o=>{if(!o)return!1;let a={account:o,coinId:ae},s;try{s=await ie(de.queryAccountExist,a)}catch{(0,R.noop)()}return!!s?.data?.account},default:async(o,a,s)=>{let{validAddress:d}=await le(),{isValid:l}=await d(a.valueOf(),{address:o,hrp:s});return l}};function Ge(){let[o,a]=(0,G.useState)(0),s=(0,G.useRef)(0),d=H(),l=o>0,_=ce(l,{wait:200});return{isLoading:l,isBetterLoading:_,validAddress:(c,e)=>{(async()=>{let t=++s.current,n=[];a(u=>u+1);try{await Promise.all(d.map(async({coinType:u,cosmosPrefix:m})=>{try{await(Ae[u]||Ae.default)(c,u,m)&&n.push(Number(u))}catch{(0,R.noop)()}}))}finally{t===s.current&&(a(0),e(n))}})()}}}var Ce=Ge;function We(o){let[a,s]=(0,W.useState)(null),{isLoading:d,isBetterLoading:l,validAddress:_}=Ce();return(0,W.useEffect)(()=>{if(!o){s(null);return}_(o,g=>{s(g)})},[o]),{validNetworks:a,isBetterLoading:l,isLoading:d}}var ye=We;f();p();function C({type:o,data:a,onClose:s,onDelete:d,onBackToHome:l,onChangeToEdit:_}){let{id:g,address:c,network:e}=a,r=F(c),[t,n]=(0,k.useState)(""),[u,m]=(0,k.useState)(""),[x,b]=(0,k.useState)(""),[A,L]=(0,k.useState)(""),[B,D]=(0,k.useState)([]),[h,Le]=(0,k.useState)(!0),{isLoading:Se,isBetterLoading:ee,validNetworks:te}=ye(t);return(0,k.useEffect)(()=>{if(o===C.TYPE.EDIT&&r){let{name:Be,networks:se}=r,oe=se;e&&(oe=(0,Te.uniq)([...se,e])),b(Be),n(c),D(oe)}else c&&n(c),e&&D([e])},[o,c,e]),k.default.createElement(q.Portal,{component:q.Container,className:"address-edit-dialog"},k.default.createElement(xe,{type:o,addressId:g,address:c,addressInputValue:t,nameInputValue:x,networkSelectList:B,onClose:s,onDelete:d,onBackToHome:l}),k.default.createElement("div",{className:"address-edit-dialog__body"},k.default.createElement(K,{nameInputValue:x,nameInputError:A,setNameInputValue:b,setNameInputError:L}),k.default.createElement(X,{type:o,addressData:a,addressInputValue:t,addressInputError:u,setAddressInputError:m,setAddressInputValue:n,onChangeToEdit:_,validNetworks:te,isLoading:Se,isBetterLoading:ee}),k.default.createElement(Q,{network:e,networkSelectList:B,setNetworkSelectList:D,setHasSelect:Le,validNetworks:te,disabled:!t||u||ee})),k.default.createElement(ue.FooterActions,null,k.default.createElement($,{type:o,addressId:g,nameInputValue:x,addressInputValue:t,networkSelectList:B,addressInputError:u,nameInputError:A,hasSelect:h,onClose:s})))}C.TYPE={EDIT:"edit",ADD:"add"};export{C as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-DHITNRDQ.js.map
