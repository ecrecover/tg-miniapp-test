import{a as ft}from"./chunk-D5GPSXIL.js";import{b as st,c as lt,d as pt}from"./chunk-TNL4ZLYC.js";import{b as rt,h as at,j as nt,l as ct,p as it,q as mt}from"./chunk-JMAKZZHS.js";import{d as ot}from"./chunk-UOZDNCIX.js";import"./chunk-FA3U5YIB.js";import"./chunk-RNB3JHFL.js";import"./chunk-2XG4UAIK.js";import"./chunk-2K7DYI6B.js";import"./chunk-UFQZJGJ2.js";import{a as tt}from"./chunk-NZPUYPHL.js";import"./chunk-4QAFBCO2.js";import"./chunk-B553FNEQ.js";import"./chunk-6QKWDR6X.js";import"./chunk-S2GMXONU.js";import"./chunk-I3U7CKFC.js";import"./chunk-ZPDRUAGN.js";import"./chunk-NZZFB6IS.js";import"./chunk-PUO23DIP.js";import"./chunk-O2J764NL.js";import{a as me,d as et}from"./chunk-CDLW656Z.js";import"./chunk-3K3KMGWB.js";import"./chunk-5EZVDCYS.js";import"./chunk-475E6NBR.js";import{a as M}from"./chunk-RC5IAFKK.js";import"./chunk-4VLUHY4K.js";import"./chunk-IHPHPUUG.js";import"./chunk-ZEWK7OGU.js";import"./chunk-QVA4WXOQ.js";import"./chunk-EX22SDGB.js";import"./chunk-4RARGC4D.js";import"./chunk-OQOFXHGC.js";import"./chunk-3QA2SYRR.js";import"./chunk-3SC55VQ2.js";import{b as $e,d as Qe}from"./chunk-VTLNAOHG.js";import{a as je}from"./chunk-Y7YPG2EJ.js";import"./chunk-7R67VE77.js";import"./chunk-NHGZUGLZ.js";import"./chunk-G5LEAVCY.js";import"./chunk-ACHWU2H6.js";import"./chunk-ZPFBKNRM.js";import{f as Je}from"./chunk-7DP5LYUM.js";import{a as Re}from"./chunk-BVXKJJ4A.js";import"./chunk-TBBE7OKY.js";import"./chunk-7HJDVUH5.js";import"./chunk-H7DITLB3.js";import"./chunk-DY54SY5O.js";import"./chunk-REOQ3O2A.js";import"./chunk-VQBK6IHT.js";import"./chunk-CTT7GD4C.js";import"./chunk-LQAOHG2H.js";import"./chunk-WNQ6F6VV.js";import{d as qe}from"./chunk-LEADLFDQ.js";import"./chunk-DGK7TBBE.js";import"./chunk-6Y7ULJF6.js";import"./chunk-3YH3AGVS.js";import"./chunk-3LB7TUPB.js";import"./chunk-TK6JYPIW.js";import"./chunk-OS6E6KVM.js";import"./chunk-GZRBUDXF.js";import"./chunk-WY46TT4P.js";import"./chunk-MTMUCMTY.js";import"./chunk-S6N4IJX7.js";import"./chunk-ZD4EJWX6.js";import"./chunk-WGCZSWYA.js";import"./chunk-IINHHLHP.js";import"./chunk-DY2YURLY.js";import"./chunk-KXZSXP3G.js";import"./chunk-6HXVFU7V.js";import"./chunk-D5FMQLJG.js";import{d as O}from"./chunk-3I7UBQEQ.js";import"./chunk-DXRBY5MU.js";import"./chunk-6FR2UIE7.js";import{a as Ke}from"./chunk-5GMHHIH5.js";import{d as Xe}from"./chunk-7KCWBFQ2.js";import"./chunk-QLUP7GYN.js";import"./chunk-7Y44NCE5.js";import"./chunk-BKPOG6ZD.js";import"./chunk-OZMVWMFO.js";import"./chunk-KTO7CPX7.js";import"./chunk-P3XTPXPO.js";import"./chunk-S6TPD26J.js";import"./chunk-4IY6P5HR.js";import"./chunk-FQWGOLDH.js";import"./chunk-QEPBNPHF.js";import"./chunk-3JLS3TGD.js";import"./chunk-KDP5Z4RF.js";import"./chunk-W234FNSM.js";import"./chunk-DDO6HXRN.js";import"./chunk-CLWWTOKP.js";import{a as ie}from"./chunk-KZ2PCELG.js";import{b as Z}from"./chunk-C7ZG4INB.js";import{a as ce}from"./chunk-J5ANWCEO.js";import{w as s}from"./chunk-VMO2INN3.js";import"./chunk-J4TF3RT7.js";import{a as Ze,b as Me,j as He,l as Ve,o as Q}from"./chunk-6FOZGMAL.js";import{a as ne}from"./chunk-2MV3WEYP.js";import{n as xe,q as ke,s as ve,y as to}from"./chunk-HPXM6RSK.js";import{b as Ue,d as Ye,m as Ge}from"./chunk-IUIJ46C3.js";import"./chunk-KZ3ZU675.js";import{a as De}from"./chunk-NJ5CWPUY.js";import"./chunk-UMJMJOW4.js";import"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import"./chunk-O5JCC6KG.js";import{d as G,f as ae}from"./chunk-MAIAJ7GD.js";import"./chunk-4PGNX6E2.js";import"./chunk-DBHB6SUD.js";import"./chunk-6UYK5TIR.js";import"./chunk-I56VJWE4.js";import"./chunk-PS3S6BG3.js";import"./chunk-RT4Y2U5N.js";import"./chunk-2VHH444P.js";import{a as $,b as q}from"./chunk-RIMU4JTV.js";import"./chunk-MGLVPWSV.js";import"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import"./chunk-AMVK42SC.js";import"./chunk-D6RIE45O.js";import"./chunk-XCAARJ7Q.js";import{c as T}from"./chunk-JXCCIV3J.js";import"./chunk-AOA7NX2Y.js";import"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import{Ac as _e,Ca as Ne,G as Pe,Jc as ze,Kb as eo,Xa as Be,aa as Fe,ba as be,hb as Rt,m as Qt,ma as ye,qb as Le,uc as Oe,wa as Ee,za as Se}from"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import{C as Y,F as ue,b as Ae,n as re}from"./chunk-SOHTSUTI.js";import{I as v,m as fe,w as d}from"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-E24EBHFY.js";import{Y as F,c as We}from"./chunk-V4F2JFTP.js";import{a as N}from"./chunk-6DDC4Y2S.js";import"./chunk-TEY24VZN.js";import"./chunk-RKHQOOTU.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-F4JTGWJH.js";import"./chunk-YUXYCITH.js";import"./chunk-RMV3AS5X.js";import"./chunk-SF2LTPAC.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{f as P,m as i,o as m}from"./chunk-EQYVU4XP.js";i();m();var g=P(N());v();var Ut=P(De());Se();ae();i();m();var H=P(N()),ut=P(We());i();m();var _={"wax-create-account-confirm":"_wax-create-account-confirm_gnpt7_1",waxCreateAccountConfirm:"_wax-create-account-confirm_gnpt7_1","wax-create-account-confirm-form":"_wax-create-account-confirm-form_gnpt7_4",waxCreateAccountConfirmForm:"_wax-create-account-confirm-form_gnpt7_4","wax-create-account-confirm-form-select":"_wax-create-account-confirm-form-select_gnpt7_7",waxCreateAccountConfirmFormSelect:"_wax-create-account-confirm-form-select_gnpt7_7","wax-create-account-confirm-form-select-disabled":"_wax-create-account-confirm-form-select-disabled_gnpt7_14",waxCreateAccountConfirmFormSelectDisabled:"_wax-create-account-confirm-form-select-disabled_gnpt7_14","wax-create-account-confirm-form-select-free":"_wax-create-account-confirm-form-select-free_gnpt7_18",waxCreateAccountConfirmFormSelectFree:"_wax-create-account-confirm-form-select-free_gnpt7_18","wax-create-account-confirm-form-select-free-text":"_wax-create-account-confirm-form-select-free-text_gnpt7_21",waxCreateAccountConfirmFormSelectFreeText:"_wax-create-account-confirm-form-select-free-text_gnpt7_21","wax-create-account-confirm-form-select-free-amount":"_wax-create-account-confirm-form-select-free-amount_gnpt7_25",waxCreateAccountConfirmFormSelectFreeAmount:"_wax-create-account-confirm-form-select-free-amount_gnpt7_25","wax-create-account-confirm-form-select-space":"_wax-create-account-confirm-form-select-space_gnpt7_29",waxCreateAccountConfirmFormSelectSpace:"_wax-create-account-confirm-form-select-space_gnpt7_29","wax-create-account-confirm-form-payInfo":"_wax-create-account-confirm-form-payInfo_gnpt7_32",waxCreateAccountConfirmFormPayInfo:"_wax-create-account-confirm-form-payInfo_gnpt7_32","wax-create-account-confirm-form-payInfo-icon":"_wax-create-account-confirm-form-payInfo-icon_gnpt7_37",waxCreateAccountConfirmFormPayInfoIcon:"_wax-create-account-confirm-form-payInfo-icon_gnpt7_37","wax-create-account-confirm-form-payCrypto-dialog":"_wax-create-account-confirm-form-payCrypto-dialog_gnpt7_41",waxCreateAccountConfirmFormPayCryptoDialog:"_wax-create-account-confirm-form-payCrypto-dialog_gnpt7_41","wax-create-account-confirm-form-payCrypto-title":"_wax-create-account-confirm-form-payCrypto-title_gnpt7_44",waxCreateAccountConfirmFormPayCryptoTitle:"_wax-create-account-confirm-form-payCrypto-title_gnpt7_44","wax-create-account-confirm-form-payCrypto-list":"_wax-create-account-confirm-form-payCrypto-list_gnpt7_50",waxCreateAccountConfirmFormPayCryptoList:"_wax-create-account-confirm-form-payCrypto-list_gnpt7_50","wax-create-account-confirm-form-payWallet":"_wax-create-account-confirm-form-payWallet_gnpt7_53",waxCreateAccountConfirmFormPayWallet:"_wax-create-account-confirm-form-payWallet_gnpt7_53","wax-create-account-confirm-form-payWallet-navigator":"_wax-create-account-confirm-form-payWallet-navigator_gnpt7_56",waxCreateAccountConfirmFormPayWalletNavigator:"_wax-create-account-confirm-form-payWallet-navigator_gnpt7_56","wax-create-account-confirm-form-payWallet-wallet-item":"_wax-create-account-confirm-form-payWallet-wallet-item_gnpt7_59",waxCreateAccountConfirmFormPayWalletWalletItem:"_wax-create-account-confirm-form-payWallet-wallet-item_gnpt7_59","wax-create-account-confirm-form-payWallet-accordion":"_wax-create-account-confirm-form-payWallet-accordion_gnpt7_62",waxCreateAccountConfirmFormPayWalletAccordion:"_wax-create-account-confirm-form-payWallet-accordion_gnpt7_62","wax-create-account-confirm-form-payWallet-accordion-header":"_wax-create-account-confirm-form-payWallet-accordion-header_gnpt7_68",waxCreateAccountConfirmFormPayWalletAccordionHeader:"_wax-create-account-confirm-form-payWallet-accordion-header_gnpt7_68","wax-create-account-confirm-form-payWallet-accordion-content":"_wax-create-account-confirm-form-payWallet-accordion-content_gnpt7_72",waxCreateAccountConfirmFormPayWalletAccordionContent:"_wax-create-account-confirm-form-payWallet-accordion-content_gnpt7_72","wax-create-account-confirm-form-payWallet-accordion-icon":"_wax-create-account-confirm-form-payWallet-accordion-icon_gnpt7_75",waxCreateAccountConfirmFormPayWalletAccordionIcon:"_wax-create-account-confirm-form-payWallet-accordion-icon_gnpt7_75","wax-create-account-confirm-form-payWallet-account-item":"_wax-create-account-confirm-form-payWallet-account-item_gnpt7_78",waxCreateAccountConfirmFormPayWalletAccountItem:"_wax-create-account-confirm-form-payWallet-account-item_gnpt7_78","wax-create-account-confirm-form-payWallet-account-item-main":"_wax-create-account-confirm-form-payWallet-account-item-main_gnpt7_82",waxCreateAccountConfirmFormPayWalletAccountItemMain:"_wax-create-account-confirm-form-payWallet-account-item-main_gnpt7_82","wax-create-account-confirm-form-payWallet-tag":"_wax-create-account-confirm-form-payWallet-tag_gnpt7_85",waxCreateAccountConfirmFormPayWalletTag:"_wax-create-account-confirm-form-payWallet-tag_gnpt7_85","wax-create-account-confirm-form-payWallet-selected-icon":"_wax-create-account-confirm-form-payWallet-selected-icon_gnpt7_94",waxCreateAccountConfirmFormPayWalletSelectedIcon:"_wax-create-account-confirm-form-payWallet-selected-icon_gnpt7_94","wax-create-account-confirm-form-payWallet-footer":"_wax-create-account-confirm-form-payWallet-footer_gnpt7_97",waxCreateAccountConfirmFormPayWalletFooter:"_wax-create-account-confirm-form-payWallet-footer_gnpt7_97","wax-create-account-confirm-form-insufficient-error":"_wax-create-account-confirm-form-insufficient-error_gnpt7_100",waxCreateAccountConfirmFormInsufficientError:"_wax-create-account-confirm-form-insufficient-error_gnpt7_100","wax-create-account-confirm-form-fill-up":"_wax-create-account-confirm-form-fill-up_gnpt7_103",waxCreateAccountConfirmFormFillUp:"_wax-create-account-confirm-form-fill-up_gnpt7_103"};var oo=({type:t,value:e,disabled:a,placeholder:c,onClick:o})=>H.default.createElement(T.FlexBox,{align:T.ALIGN.center,onClick:()=>{o?.(t)},className:(0,ut.default)(_["wax-create-account-confirm-form-select"],{[_["wax-create-account-confirm-form-select-disabled"]]:a})},H.default.createElement(T.Space,{className:_["wax-create-account-confirm-form-select-space"],space:0,direction:T.DIRECTION.vertical},!e&&c&&H.default.createElement(s.Text,{type:s.TYPE.secondary},c),!!e&&H.default.createElement(s.Text,null,e?.label||e),!!e?.desc&&H.default.createElement(s.Text,{size:s.SIZE.xs,type:s.TYPE.secondary},e?.desc||e)),!a&&H.default.createElement(Z,{icon:"okds-arrow-chevron-right-centered-md",size:Z.SIZE.xs})),de=H.default.memo(oo);i();m();var X=P(N());v();var yt=P(We());var ro=({coinAmount:t,decimals:e,symbol:a})=>X.default.createElement(T.FlexBox,{align:T.ALIGN.center,className:(0,yt.default)(_["wax-create-account-confirm-form-select"],_["wax-create-account-confirm-form-select-free"])},X.default.createElement(T.Space,{space:6,align:T.ALIGN.center,direction:T.DIRECTION.horizontal},X.default.createElement(s.Text,{className:_["wax-create-account-confirm-form-select-free-text"]},d("wallet_extension_mid_colored_free")),X.default.createElement(s.DisplayAmount,{className:_["wax-create-account-confirm-form-select-free-amount"],mode:s.CRYPTO,size:s.SIZE.sm,symbol:a,amount:t,decimals:e}))),xt=X.default.memo(ro);i();m();var V=P(N());v();var ao=({symbol:t,decimals:e,value:a={}})=>{let c=[{symbol:t,decimals:e,label:"extension_wallet_create_colored_cpu",value:a?.cpuAmount},{symbol:t,decimals:e,label:"extension_wallet_create_colored_network",value:a?.netAmount},{decimals:0,symbol:"bytes",label:"extension_wallet_create_colored_ram",value:a?.ramAmount},{symbol:t,decimals:e,label:"extension_wallet_create_colored_price",value:a?.sumAmount,icon:{icon:"okds-information-circle",tooltip:"extension_wallet_create_tooltip_20percent_transferfee"}}];return V.default.createElement(O,{space:20,className:_["wax-create-account-confirm-form-payInfo"],dataSource:c,renderItem:({icon:o,label:n,value:y,symbol:l,decimals:p})=>V.default.createElement(O.Line,{size:s.SIZE.sm,label:V.default.createElement(V.default.Fragment,null,d(n),!!o&&V.default.createElement(Z,{className:_["wax-create-account-confirm-form-payInfo-icon"],icon:o?.icon,size:Z.SIZE.xs,tooltip:o?.tooltip?d(o?.tooltip):!1})),value:V.default.createElement(s.DisplayAmount,{symbol:l,decimals:p,mode:s.CRYPTO,size:s.SIZE.sm},y)})})},_t=V.default.memo(ao);i();m();var z=P(N());v();var no=({name:t,value:e,visible:a,options:c,onChange:o,onClose:n})=>z.default.createElement(re,{windowClass:_["wax-create-account-confirm-form-payCrypto-dialog"],alignBottom:!0,onClose:()=>{n?.(t)},visible:a},z.default.createElement(s.Text,{className:_["wax-create-account-confirm-form-payCrypto-title"],strong:700,ellipsis:{tooltip:!0}},d("extension_wallet_popup_maintitle_select_crypto")),z.default.createElement(O,{className:_["wax-create-account-confirm-form-payCrypto-list"],space:16,dataSource:c,renderItem:y=>{let{icon:l}=y;return z.default.createElement(O.Card,{icon:{src:l},onClick:()=>{o?.({[t]:y}),n?.(t)},selected:e?.coinId===y.coinId},z.default.createElement(T.Space,{space:2,direction:T.DIRECTION.vertical},z.default.createElement(s.Text,null,y.label),z.default.createElement(s.Text,{type:s.TYPE.secondary,size:s.SIZE.sm},y.message)))}})),dt=z.default.memo(no);i();m();var R=P(N());v();i();m();i();m();i();m();var gt=P(N()),co=({coinId:t,sendAmount:e,fromAddr:a,toAddr:c})=>{let[o,n]=(0,gt.useState)({});return{props:{visible:!1,coinId:t,address:a,inputData:"",tokenAddress:c,value:e,onGasChange:n},ethereumGasInfo:o}},Ct=co;i();m();var io=({coinId:t,coinAmount:e,fromAddr:a,toAddr:c,ethereumGasInfo:o,btnProps:n,beforeClick:y,onClick:l})=>{let w={fetchParams:{coinId:t,from:a,to:c,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:e};return{props:{beforeClick:y,dataForCheck:w,btnProps:n,onClick:l}}},wt=io;i();m();var ht=P(to());Rt();ae();var mo=({coinId:t,walletId:e,sendAmount:a,fromAddr:c,toAddr:o,ethereumGasInfo:n,onPublish:y})=>{let l=(0,ht.useDispatch)(),{coin:p}=M(t,!1),w=x=>{let{updateGasInfo:u}=x;return u?{...u,gasLimit:n.gasLimit,supportEip1559:n.supportEip1559,networkFee:n.networkFee}:{...n}},r=({updateData:x,finallyGasInfo:u})=>{let{nonce:W}=x,h=Be(p.localType)?.realChainIdHex,A={from:c,gasLimit:q(u.gasLimit),nonce:q(W),chainId:h};return u.supportEip1559?(A.maxFeePerGas=q(u.maxFeePerGas),A.maxPriorityFeePerGas=q(u.maxPriorityFeePerGas),A.type=Ge.FEE_MARKET):A.gasPrice=q(u.gasPrice),A.value=q(a),A.to=o,ke(A)},f=({txParams:x,finallyGasInfo:u})=>{let W=$(x.value),h=$(x.gasLimit),A=$(n.supportEip1559?x.maxFeePerGas:x.gasPrice),S={...x,value:W,from:c,to:o,gas:h,gasPrice:A,priorityFee:$(n.supportEip1559?x.maxPriorityFeePerGas:0),nonce:$(x.nonce),repeatTxType:Ye.CONFIRMING,oldTxHash:""};return{coinId:p.coinId,coinAmount:a,fromAdr:c,toAdr:o,serviceCharge:u.networkFee,extJson:JSON.stringify(S),txSource:ze.NORMAL,inputData:x.data?x.data:""}};return async x=>{let u=w(x),W=r({updateData:x,finallyGasInfo:u}),h={...W,walletId:e},A=f({txParams:W,finallyGasInfo:u});await l(qe({txParams:h,walletId:e}));let S=await G().signAndGetEthereumPublishParams({signParams:h,from:W.from,baseChain:Ne,publishParams:A});typeof y=="function"&&await y(S)}},Tt=mo;var so=({toAddr:t,coinId:e,walletId:a,fromAddr:c,sendAmount:o,btnProps:n,onBeforeClick:y=()=>{},onPublishTrascation:l=()=>{},onClickWrap:p=()=>{}})=>{let{props:w,ethereumGasInfo:r}=Ct({coinId:e,toAddr:t,fromAddr:c,sendAmount:o}),f=r?.networkFee,C=Tt({coinId:e,walletId:a,sendAmount:o,fromAddr:c,toAddr:t,ethereumGasInfo:r,onPublish:l}),{props:x}=wt({toAddr:t,coinId:e,fromAddr:c,ethereumGasInfo:r,coinAmount:o,btnProps:n,beforeClick:()=>y?.(f),onClick:(...u)=>{p(async()=>{await C(...u)})}});return R.default.createElement(R.default.Fragment,null,R.default.createElement(ot,{...w}),R.default.createElement(ft,{...x},d("wallet_extension_btn_general_confirm")))},It=so;i();m();var Wt=P(N());v();var lo=({fromAddr:t,coinId:e,toAddr:a,disabled:c,loading:o,walletId:n,walletType:y,sendAmount:l,hideLoading:p,onBeforeClick:w=()=>{},onPublishTrascation:r=()=>{},onClickWrap:f=()=>{}})=>{let{coin:C}=M(e,!1),x=tt({coinId:e,address:t,chainId:C?.chainId},{pollingInterval:20*1e3}),u=x?.normal,[,W]=nt({coinId:e,walletId:n,address:t},{refreshDeps:[n,t]}),[,h]=it({coinId:e,toAddr:a,walletId:n,fromAddr:t,satBytes:u,coinAmount:l,canTransferAmount:W}),A=mt({coinId:e,toAddr:a,walletId:n,fromAddr:t,satBytes:u,networkFee:h,coinAmount:l,localType:C?.localType,dustSize:x?.minOutput}),S=at({coinId:e,walletId:n,address:t,utxoType:rt.TRANSFER}),B=ct({coinId:e,txType:Ue.TRANS_OUT,address:t}),L=async()=>{f(async()=>{w&&await w(h,W);let I=await S(l,h);await B(I,()=>{p?.()});let D=await A({utxoList:I}),U=await me(C.localType,D);r?.({coinId:e,txHash:U,signedTx:D,walletId:n,walletType:y,toAdr:a,serviceCharge:h,fromAdr:t,coinAmount:l})})};return Wt.default.createElement(F,{loading:o,disabled:c,size:F.SIZE.lg,category:F.CATEGORY.fill,type:F.TYPE.highlight,onClick:L},d("wallet_extension_btn_general_confirm"))},At=lo;i();m();var Pt=P(N());v();ae();var po=({fromAddr:t,coinId:e,toAddr:a,disabled:c,loading:o,walletId:n,walletType:y,sendAmount:l,onBeforeClick:p=()=>{},onPublishTrascation:w=()=>{},onClickWrap:r=()=>{}})=>{let{coin:f}=M(e,!1),C=async()=>{r(async()=>{typeof p=="function"&&p("0");let x=await Xe({coinId:e,address:t},{fromAddr:t,toAddr:a}),{info:u}=x||{},{chainid:W,compression:h,refBlockNumber:A,refBlockId:S,refBlockTimestamp:B,expireSeconds:L}=u,I={type:0,from:t,to:a,amount:l,memo:"",common:{chainId:W,compression:h,refBlockNumber:A,refBlockId:S,refBlockTimestamp:B,expireSeconds:L}},D=await G().signTransaction(I,t,f.localType),U=await me(f.localType,D);typeof w=="function"&&await w({coinId:e,txHash:U,signedTx:D,walletId:n,walletType:y,toAdr:a,serviceCharge:"0",fromAdr:t,coinAmount:l})})};return Pt.default.createElement(F,{loading:o,disabled:c,size:F.SIZE.lg,category:F.CATEGORY.fill,type:F.TYPE.highlight,onClick:C},d("wallet_extension_btn_general_confirm"))},Ft=po;i();m();var bt=P(N());v();var Et=P(De());var fo=600001,uo=({loading:t,disabled:e,fromPage:a,retryCreateAccount:c,onPublishTrascation:o=()=>{}})=>{let n=(0,Et.useHistory)(),y=async()=>{let l=await o?.();if(Number(l?.code)===fo){let p=re.warn({alignBottom:!1,title:d("wallet_extension_wax_modaltitle_account_unavailable"),text:d("wallet_extension_wax_modaldesc_free_account_unsupported"),cancelText:d("wallet_extension_btn_general_cancel"),confirmText:d("wallet_extension_mid_btn_retry"),onCancel:()=>{p.destroy(),n.push(a||ne)},onConfirm:()=>{p.destroy(),c?.()}})}};return bt.default.createElement(F,{loading:t,disabled:e,size:F.SIZE.lg,category:F.CATEGORY.fill,type:F.TYPE.highlight,onClick:y},d("wallet_extension_btn_general_confirm"))},St=uo;i();m();var E=P(N());v();var yo=({name:t,value:e,visible:a,options:c=[],onChange:o,onClose:n})=>{let[y,l]=(0,E.useState)(e);return(0,E.useEffect)(()=>{l(e)},[e]),a?E.default.createElement(T.Portal,{component:T.Container,className:_["wax-create-account-confirm-form-payWallet"]},E.default.createElement(ie,{className:_["wax-create-account-confirm-form-payWallet-navigator"],title:d("extension_wallet_header_title_select_wallet"),closeable:!1,onBack:()=>{n?.(t)}}),E.default.createElement(O,{className:_["wax-create-account-confirm-form-payWallet-wallet-item"],space:12,dataSource:c||[],renderItem:({keyringName:p,keyringColor:w,walletIdentities:r})=>E.default.createElement(Ae,{defaultExpanded:!0,iconClassName:_["wax-create-account-confirm-form-payWallet-accordion-icon"],title:E.default.createElement(s.Text,{strong:!0,size:s.SIZE.lg,style:{color:w}},p),className:_["wax-create-account-confirm-form-payWallet-accordion"],headerClassName:_["wax-create-account-confirm-form-payWallet-accordion-header"],contentClassName:_["wax-create-account-confirm-form-payWallet-accordion-content"]},E.default.createElement(O,{dataSource:r,renderItem:f=>E.default.createElement(T.FlexBox,{className:_["wax-create-account-confirm-form-payWallet-account-item"],align:T.ALIGN.center,onClick:()=>{l(f)}},E.default.createElement(T.Space,{className:_["wax-create-account-confirm-form-payWallet-account-item-main"],space:0,direction:T.DIRECTION.vertical},E.default.createElement(T.Space,{space:8,align:T.ALIGN.center},E.default.createElement(s.Text,{size:s.SIZE.md},f?.walletName),!!f.addressType&&E.default.createElement(T.Box,{className:_["wax-create-account-confirm-form-payWallet-tag"]},d(Oe[f.addressType]))),E.default.createElement(s.DisplayAmount,{mode:s.CRYPTO,decimals:f?.decimals,symbol:f?.symbol,size:s.SIZE.xs,type:s.TYPE.secondary},f?.coinAmountInt)),y?.address===f?.address&&E.default.createElement(Z,{className:_["wax-create-account-confirm-form-payWallet-selected-icon"],icon:"okds-success-circle-fill"}))}))}),E.default.createElement(ce.FooterActions,{className:_["wax-create-account-confirm-form-payWallet-footer"]},E.default.createElement(F,{size:F.SIZE.lg,category:F.CATEGORY.fill,type:F.TYPE.highlight,onClick:()=>{n?.(t),o?.({[t]:y})}},d("wallet_extension_btn_general_confirm")))):null},Nt=yo;i();m();ae();Se();eo();var xo=()=>{let t=Qe(),e=Je({hasBackup:!0}),a=$e();return Ze(async(c,o)=>{let n=await t(c),y=n?.localType;if(!c||!y)return null;let l=await G().getCreatedWalletIds(),p=await a({walletIds:l,chainId:n.chainId,coinId:c,flatten:!0});return(e?.map(r=>{let{walletIdentities:f}=r;return{...r,walletIdentities:f.map(C=>{let x=p[C?.walletId]||[];return{...C,coins:x.filter(u=>u?.coinId===c&&Le(u.coinAmountInt,o))}}).filter(({coins:C})=>C?.length)}}).filter(({walletIdentities:r})=>r?.some(({coins:f})=>f?.length))).map(r=>{let f=r?.walletIdentities;return ve({coinId:c})?f=f?.reduce((C,{coins:x,walletName:u,addressType:W,...h})=>[...C,...x.map(({coinAmountInt:A,addressType:S,...B})=>{let L=W?.[Ee(c)]?.find(I=>I?.addressType===_e[S])?.address;return{...h,...B,walletName:u,coinAmountInt:A,label:`${r?.keyringName} - ${u}`,desc:xe(L),addressType:_e[S],address:L}})],[]):f=f.map(({account:C,walletName:x,coins:u,...W})=>{let h=C?.[y];return{...u[0],...W,address:h,walletName:x,label:`${r?.keyringName} - ${x}`,desc:xe(h)}}),{...r,walletIdentities:f}})},[e])},Bt=xo;i();m();var j=P(N()),_o=()=>{let t=Y.useForm(),[e,a]=(0,j.useState)({}),[c,o]=(0,j.useState)({payCrypto:!1,payWallet:!1}),n=(0,j.useCallback)(l=>{o(p=>({...p,[l]:!p[l]}))},[]),y=(0,j.useCallback)(l=>{t.setFieldsValue(l),a((p={})=>({...p,...l}))},[]);return{form:t,visible:c,payValues:e,onPayValuesChange:y,onToggleSelectPanel:n}},Lt=_o;i();m();var J=P(N()),go=({form:t,payInfo:e,payValues:a,isFreeCreate:c,walletOptions:o,payCryptoOptions:n,onPayValuesChange:y,setPayWalletError:l})=>{let p=(0,J.useRef)({payCrypto:!1,payWallet:!1}),w=r=>{y?.(r),t.setFieldsValue(r)};(0,J.useEffect)(()=>{w({payInfo:e})},[e]),(0,J.useEffect)(()=>{if(!p.current.payCrypto&&n?.length){let r=n.find(({recommend:f})=>f);w({payCrypto:r}),p.current={...p.current,payCrypto:!0}}if(p.current.payCrypto&&n?.length){let r=n.find(({coinId:f})=>f===a?.payCrypto?.coinId);r&&w({payCrypto:r})}},[n]),(0,J.useEffect)(()=>{if(!c){if(!p.current.payWallet&&o?.length){let[{walletIdentities:[r]}]=o;w({payWallet:r}),p.current={...p.current,payWallet:!0}}if(p.current.payWallet){o?.length||(w({payWallet:null}),l?.(!1));let{coinId:r}=a?.payCrypto||{},{coinId:f}=a?.payWallet||{};if(o?.length&&r!==f){let[{walletIdentities:[C]}]=o;w({payWallet:C}),l?.(!1)}}}},[c,o])},kt=go;i();m();var vt=P(Qt());var K=P(N());var Co=60*1e3,wo=t=>{let[e,a]=(0,K.useState)({}),[c,{set:o}]=Q(!1),[n,{set:y}]=Q(),[l,p]=(0,K.useState)([]),w=je(),r=(0,K.useMemo)(()=>(0,vt.isEmpty)(w)?[]:l.map(u=>{let{coinId:W,coinAmount:h}=u,A=w[W]||{},{image:S,symbol:B,decimals:L}=A;return{...A,...u,icon:S,label:K.default.createElement(s.DisplayAmount,{noStyle:!0,symbol:B,decimals:L,mode:s.CRYPTO},h)}}),[w,l]),f=async()=>{let{eosMarket:u,coins:W,freeAccount:h}=await st({coinId:t});a(u),p(W),y(h)},{runAsync:C,refreshAsync:x}=Ve(f,{manual:!0,pollingInterval:Co,pollingWhenHidden:!1,pollingErrorRetryCount:3});return He(()=>{(async()=>{try{o(!0),await C()}catch(u){console.log(u)}finally{o(!1)}})()}),[c,n,e,r,x]},Dt=wo;i();m();v();var Ot=P(N()),ho=({sendAmount:t,availableBalance:e="0",onCheckCallback:a})=>(0,Ot.useCallback)((c="0",o)=>fe.gt(fe.add(t,c),o!==void 0?o:e)?a?.(!0):a?.(!1),[t,e]),zt=ho;var To=()=>{let t=Re(),e=(0,Ut.useHistory)(),[a,c]=(0,g.useState)(null),o=Number(t.get("coinId"))||ye,{coin:n}=M(o,!1),y=Ke(),[l,p]=(0,g.useState)(!1),[w,r,f,C,x]=Dt(o),[u,W]=(0,g.useState)(!1),[h,{setTrue:A,setFalse:S}]=Q(!1),{form:B,visible:L,payValues:I,onPayValuesChange:D,onToggleSelectPanel:U}=Lt({payInfo:f,payCryptoOptions:C}),se=Bt();Me(()=>{(async()=>{if(!r&&I?.payCrypto?.coinId){let k=await se(I?.payCrypto?.coinId,I?.payCrypto?.coinAmount);c(k)}})()},[r,I?.payCrypto?.coinId,I?.payCrypto?.coinAmount]),kt({form:B,payInfo:f,payValues:I,isFreeCreate:r,walletOptions:a,payCryptoOptions:C,setPayWalletError:p,onPayValuesChange:D});let{coinId:ee,coinAmount:ge,toAddress:Yt}=I?.payCrypto||{},{walletId:Gt,serverWalletType:Ce,address:we,coinAmountInt:he}=I?.payWallet||{},Zt=async k=>{try{A(),await k()}catch(oe){let pe=oe?.msg||d("extension_wallet_transaction_notif_waxaccount_failed");ue.error({title:pe})}finally{S()}},Mt=zt({sendAmount:ge,availableBalance:he,onCheckCallback:k=>(p(k),k?Promise.reject():Promise.resolve())}),Te=async k=>{let oe=await G().getPublicKeyByWalletId(y,Pe),{coinAmount:pe,symbol:Vt}=I?.payCrypto||{},{ramBytes:qt,cpuAmount:Kt,ramAmount:$t,netAmount:Xt,sumAmount:jt}=I?.payInfo||{},Jt={transaction:k,order:{payCoin:Vt,ramBytes:qt,payAmount:pe,eosAmount:jt,cpuAmount:Kt,ramAmount:$t,netAmount:Xt,ownerKey:oe,activeKey:oe,payAddress:we,account:t.get("account"),coinId:n?.coinId,chainId:n?.chainId}},Ie=await(r?pt:lt)(Jt,y);return Number(Ie.code)===0&&(ue.success({title:d("extension_wallet_transaction_notif_waxaccount_created"),desc:t.get("account")}),e.push(t.get("from")||ne)),Ie},le={coinId:ee,toAddr:Yt,walletId:Gt,fromAddr:we,sendAmount:ge,onBeforeClick:Mt,onPublishTrascation:Te,onClickWrap:Zt},te=!r&&(!I?.payCrypto||!I?.payWallet),Ht=(0,g.useMemo)(()=>r?C.find(k=>k?.coinId===o)||C?.[0]:{},[r,o,C]);return g.default.createElement(T.Container,{loading:w,className:_["wax-create-account-confirm"]},g.default.createElement(ie,{closeable:!1,title:d("extension_wallet_header_title_waxaccount_opening")}),g.default.createElement(Y,{form:B,className:_["wax-create-account-confirm-form"]},g.default.createElement(Y.Item,{name:"payCrypto",label:d("extension_wallet_create_text_payment_crypto")},r?g.default.createElement(xt,{...Ht}):g.default.createElement(de,{type:"payCrypto",onClick:U})),!r&&g.default.createElement(Y.Item,{name:"payWallet",extra:!!l&&g.default.createElement(T.Space,{space:7},g.default.createElement(s.Text,{className:_["wax-create-account-confirm-form-insufficient-error"],size:s.SIZE.sm},d("extension_wallet_create_errortip_insufficient_balance")),g.default.createElement(s.Text,{className:_["wax-create-account-confirm-form-fill-up"],size:s.SIZE.sm,onClick:()=>{W(!0)}},d("extension_wallet_create_textbtn_fill_up",{crypto:I?.payCrypto?.symbol}))),label:d("extension_wallet_create_text_payment_wallet")},g.default.createElement(de,{type:"payWallet",onClick:U,disabled:!a?.length,placeholder:d("extension_wallet_create_input_no_available_wallets")})),g.default.createElement(Y.Item,{name:"payInfo",label:d("extension_wallet_create_text_pay_toopen")},g.default.createElement(_t,{symbol:n?.symbol,decimals:n.decimals})),g.default.createElement(Y.Item,null,g.default.createElement(ce.FooterActions,{placeholder:!1},!r&&ee===be&&g.default.createElement(At,{loading:h,disabled:te,walletType:Ce,hideLoading:S,availableAmount:he,...le}),!r&&ee===Fe&&g.default.createElement(It,{btnProps:{loading:h,disabled:te},...le}),!r&&ee===ye&&g.default.createElement(Ft,{loading:h,disabled:te,walletType:Ce,...le}),r&&g.default.createElement(St,{loading:h,disabled:te,fromPage:t.get("from"),retryCreateAccount:x,onPublishTrascation:Te})))),g.default.createElement(dt,{name:"payCrypto",value:I.payCrypto,visible:L.payCrypto,options:C,onChange:D,onClose:U}),g.default.createElement(Nt,{name:"payWallet",value:I?.payWallet,visible:L?.payWallet,options:a,onClose:U,onChange:D}),g.default.createElement(et,{visible:u,closeCallback:()=>W(!1),address:I?.payWallet?.address,coinId:I?.payCrypto?.coinId,receiveOnly:!0}))},vn=g.default.memo(To);export{vn as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=ConfirmPay-HK6UGNLI.js.map
