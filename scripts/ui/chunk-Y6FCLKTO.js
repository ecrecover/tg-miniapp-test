import{a as Da}from"./chunk-R53OLZPP.js";import{b as Lt}from"./chunk-2GMLPDYZ.js";import{a as ka}from"./chunk-7KCWBFQ2.js";import{f as Er,t as ze,v as Ke}from"./chunk-NAI3K3VA.js";import{F as Z,H as Sr}from"./chunk-IUIJ46C3.js";import{a as Bt}from"./chunk-UH5YBH76.js";import{l as Wt}from"./chunk-TXKWPME2.js";import{m as kt,q as Dt,za as Ia}from"./chunk-X7YMANPZ.js";import{c as B,g as be,h as L,u as He,v as It}from"./chunk-NC54RUAI.js";import{d as Pt}from"./chunk-YR74Q3QD.js";import{b as Aa,c as h,d as Na,f as _,g as Pa,l as process,m as o,o as l}from"./chunk-EQYVU4XP.js";var zt=h((Yl,Ht)=>{o();l();Ht.exports=ve;ve.default=ve;ve.stable=Ut;ve.stableStringify=Ut;var z=[],Q=[];function ve(e,r,t){xr(e,"",[],void 0);var i;for(Q.length===0?i=JSON.stringify(e,r,t):i=JSON.stringify(e,Ft(r),t);z.length!==0;){var n=z.pop();n.length===4?Object.defineProperty(n[0],n[1],n[3]):n[0][n[1]]=n[2]}return i}function xr(e,r,t,i){var n;if(typeof e=="object"&&e!==null){for(n=0;n<t.length;n++)if(t[n]===e){var a=Object.getOwnPropertyDescriptor(i,r);a.get!==void 0?a.configurable?(Object.defineProperty(i,r,{value:"[Circular]"}),z.push([i,r,e,a])):Q.push([e,r]):(i[r]="[Circular]",z.push([i,r,e]));return}if(t.push(e),Array.isArray(e))for(n=0;n<e.length;n++)xr(e[n],n,t,e);else{var s=Object.keys(e);for(n=0;n<s.length;n++){var f=s[n];xr(e[f],f,t,e)}}t.pop()}}function Wa(e,r){return e<r?-1:e>r?1:0}function Ut(e,r,t){var i=Mr(e,"",[],void 0)||e,n;for(Q.length===0?n=JSON.stringify(i,r,t):n=JSON.stringify(i,Ft(r),t);z.length!==0;){var a=z.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}return n}function Mr(e,r,t,i){var n;if(typeof e=="object"&&e!==null){for(n=0;n<t.length;n++)if(t[n]===e){var a=Object.getOwnPropertyDescriptor(i,r);a.get!==void 0?a.configurable?(Object.defineProperty(i,r,{value:"[Circular]"}),z.push([i,r,e,a])):Q.push([e,r]):(i[r]="[Circular]",z.push([i,r,e]));return}if(typeof e.toJSON=="function")return;if(t.push(e),Array.isArray(e))for(n=0;n<e.length;n++)Mr(e[n],n,t,e);else{var s={},f=Object.keys(e).sort(Wa);for(n=0;n<f.length;n++){var u=f[n];Mr(e[u],u,t,e),s[u]=e[u]}if(i!==void 0)z.push([i,r,e]),i[r]=s;else return s}t.pop()}}function Ft(e){return e=e!==void 0?e:function(r,t){return t},function(r,t){if(Q.length>0)for(var i=0;i<Q.length;i++){var n=Q[i];if(n[1]===r&&n[0]===t){t="[Circular]",Q.splice(i,1);break}}return e.call(this,r,t)}}});var Ve=h(ae=>{"use strict";o();l();Object.defineProperty(ae,"__esModule",{value:!0});ae.EthereumProviderError=ae.EthereumRpcError=void 0;var Ba=zt(),Je=class extends Error{constructor(r,t,i){if(!Number.isInteger(r))throw new Error('"code" must be an integer.');if(!t||typeof t!="string")throw new Error('"message" must be a nonempty string.');super(t),this.code=r,i!==void 0&&(this.data=i)}serialize(){let r={code:this.code,message:this.message};return this.data!==void 0&&(r.data=this.data),this.stack&&(r.stack=this.stack),r}toString(){return Ba.default(this.serialize(),Ua,2)}};ae.EthereumRpcError=Je;var Tr=class extends Je{constructor(r,t,i){if(!La(r))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(r,t,i)}};ae.EthereumProviderError=Tr;function La(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function Ua(e,r){if(r!=="[Circular]")return r}});var $e=h(se=>{"use strict";o();l();Object.defineProperty(se,"__esModule",{value:!0});se.errorValues=se.errorCodes=void 0;se.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};se.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}});var Or=h(D=>{"use strict";o();l();Object.defineProperty(D,"__esModule",{value:!0});D.serializeError=D.isValidCode=D.getMessageFromCode=D.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;var Ge=$e(),Fa=Ve(),Kt=Ge.errorCodes.rpc.internal,Ha="Unspecified error message. This is a bug, please report it.",za={code:Kt,message:Cr(Kt)};D.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function Cr(e,r=Ha){if(Number.isInteger(e)){let t=e.toString();if(Rr(Ge.errorValues,t))return Ge.errorValues[t].message;if($t(e))return D.JSON_RPC_SERVER_ERROR_MESSAGE}return r}D.getMessageFromCode=Cr;function Vt(e){if(!Number.isInteger(e))return!1;let r=e.toString();return!!(Ge.errorValues[r]||$t(e))}D.isValidCode=Vt;function Ka(e,{fallbackError:r=za,shouldIncludeStack:t=!1}={}){var i,n;if(!r||!Number.isInteger(r.code)||typeof r.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof Fa.EthereumRpcError)return e.serialize();let a={};if(e&&typeof e=="object"&&!Array.isArray(e)&&Rr(e,"code")&&Vt(e.code)){let f=e;a.code=f.code,f.message&&typeof f.message=="string"?(a.message=f.message,Rr(f,"data")&&(a.data=f.data)):(a.message=Cr(a.code),a.data={originalError:Jt(e)})}else{a.code=r.code;let f=(i=e)===null||i===void 0?void 0:i.message;a.message=f&&typeof f=="string"?f:r.message,a.data={originalError:Jt(e)}}let s=(n=e)===null||n===void 0?void 0:n.stack;return t&&e&&s&&typeof s=="string"&&(a.stack=s),a}D.serializeError=Ka;function $t(e){return e>=-32099&&e<=-32e3}function Jt(e){return e&&typeof e=="object"&&!Array.isArray(e)?Object.assign({},e):e}function Rr(e,r){return Object.prototype.hasOwnProperty.call(e,r)}});var Yt=h(Xe=>{"use strict";o();l();Object.defineProperty(Xe,"__esModule",{value:!0});Xe.ethErrors=void 0;var qr=Ve(),Gt=Or(),M=$e();Xe.ethErrors={rpc:{parse:e=>j(M.errorCodes.rpc.parse,e),invalidRequest:e=>j(M.errorCodes.rpc.invalidRequest,e),invalidParams:e=>j(M.errorCodes.rpc.invalidParams,e),methodNotFound:e=>j(M.errorCodes.rpc.methodNotFound,e),internal:e=>j(M.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("RPC Server errors must provide single object argument.");let{code:r}=e;if(!Number.isInteger(r)||r>-32005||r<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return j(r,e)},invalidInput:e=>j(M.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>j(M.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>j(M.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>j(M.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>j(M.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>j(M.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>_e(M.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>_e(M.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>_e(M.errorCodes.provider.unsupportedMethod,e),disconnected:e=>_e(M.errorCodes.provider.disconnected,e),chainDisconnected:e=>_e(M.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Provider custom errors must provide single object argument.");let{code:r,message:t,data:i}=e;if(!t||typeof t!="string")throw new Error('"message" must be a nonempty string');return new qr.EthereumProviderError(r,t,i)}}};function j(e,r){let[t,i]=Xt(r);return new qr.EthereumRpcError(e,t||Gt.getMessageFromCode(e),i)}function _e(e,r){let[t,i]=Xt(r);return new qr.EthereumProviderError(e,t||Gt.getMessageFromCode(e),i)}function Xt(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){let{message:r,data:t}=e;if(r&&typeof r!="string")throw new Error("Must specify string message.");return[r||void 0,t]}}return[]}});var A=h(O=>{"use strict";o();l();Object.defineProperty(O,"__esModule",{value:!0});O.getMessageFromCode=O.serializeError=O.EthereumProviderError=O.EthereumRpcError=O.ethErrors=O.errorCodes=void 0;var Qt=Ve();Object.defineProperty(O,"EthereumRpcError",{enumerable:!0,get:function(){return Qt.EthereumRpcError}});Object.defineProperty(O,"EthereumProviderError",{enumerable:!0,get:function(){return Qt.EthereumProviderError}});var Zt=Or();Object.defineProperty(O,"serializeError",{enumerable:!0,get:function(){return Zt.serializeError}});Object.defineProperty(O,"getMessageFromCode",{enumerable:!0,get:function(){return Zt.getMessageFromCode}});var Ja=Yt();Object.defineProperty(O,"ethErrors",{enumerable:!0,get:function(){return Ja.ethErrors}});var Va=$e();Object.defineProperty(O,"errorCodes",{enumerable:!0,get:function(){return Va.errorCodes}})});var ti=h((mf,ri)=>{o();l();ri.exports=ei;function ei(e,r){if(e&&r)return ei(e)(r);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(i){t[i]=e[i]}),t;function t(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];var a=e.apply(this,i),s=i[i.length-1];return typeof a=="function"&&a!==s&&Object.keys(s).forEach(function(f){a[f]=s[f]}),a}}});var Qe=h((bf,jr)=>{o();l();var ii=ti();jr.exports=ii(Ye);jr.exports.strict=ii(ni);Ye.proto=Ye(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Ye(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return ni(this)},configurable:!0})});function Ye(e){var r=function(){return r.called?r.value:(r.called=!0,r.value=e.apply(this,arguments))};return r.called=!1,r}function ni(e){var r=function(){if(r.called)throw new Error(r.onceError);return r.called=!0,r.value=e.apply(this,arguments)},t=e.name||"Function wrapped with `once`";return r.onceError=t+" shouldn't be called more than once",r.called=!1,r}});var Ar=h((Sf,si)=>{o();l();var $a=Qe(),Ga=function(){},Xa=function(e){return e.setHeader&&typeof e.abort=="function"},Ya=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},ai=function(e,r,t){if(typeof r=="function")return ai(e,null,r);r||(r={}),t=$a(t||Ga);var i=e._writableState,n=e._readableState,a=r.readable||r.readable!==!1&&e.readable,s=r.writable||r.writable!==!1&&e.writable,f=!1,u=function(){e.writable||c()},c=function(){s=!1,a||t.call(e)},p=function(){a=!1,s||t.call(e)},y=function(x){t.call(e,x?new Error("exited with error code: "+x):null)},R=function(x){t.call(e,x)},C=function(){process.nextTick(H)},H=function(){if(!f){if(a&&!(n&&n.ended&&!n.destroyed))return t.call(e,new Error("premature close"));if(s&&!(i&&i.ended&&!i.destroyed))return t.call(e,new Error("premature close"))}},I=function(){e.req.on("finish",c)};return Xa(e)?(e.on("complete",c),e.on("abort",C),e.req?I():e.on("request",I)):s&&!i&&(e.on("end",u),e.on("close",u)),Ya(e)&&e.on("exit",y),e.on("end",p),e.on("finish",c),r.error!==!1&&e.on("error",R),e.on("close",C),function(){f=!0,e.removeListener("complete",c),e.removeListener("abort",C),e.removeListener("request",I),e.req&&e.req.removeListener("finish",c),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("exit",y),e.removeListener("end",p),e.removeListener("error",R),e.removeListener("close",C)}};si.exports=ai});var oi={};Na(oi,{default:()=>Qa});var Qa,li=Aa(()=>{o();l();Qa={}});var fi=h((Rf,Ze)=>{o();l();var ee=(li(),Pa(oi));if(ee&&ee.default){Ze.exports=ee.default;for(let e in ee)Ze.exports[e]=ee[e]}else ee&&(Ze.exports=ee)});var ci=h((qf,di)=>{o();l();var Za=Qe(),es=Ar(),Nr=fi(),Se=function(){},rs=/^v?\.0/.test(process.version),er=function(e){return typeof e=="function"},ts=function(e){return!rs||!Nr?!1:(e instanceof(Nr.ReadStream||Se)||e instanceof(Nr.WriteStream||Se))&&er(e.close)},is=function(e){return e.setHeader&&er(e.abort)},ns=function(e,r,t,i){i=Za(i);var n=!1;e.on("close",function(){n=!0}),es(e,{readable:r,writable:t},function(s){if(s)return i(s);n=!0,i()});var a=!1;return function(s){if(!n&&!a){if(a=!0,ts(e))return e.close(Se);if(is(e))return e.abort();if(er(e.destroy))return e.destroy();i(s||new Error("stream was destroyed"))}}},ui=function(e){e()},as=function(e,r){return e.pipe(r)},ss=function(){var e=Array.prototype.slice.call(arguments),r=er(e[e.length-1]||Se)&&e.pop()||Se;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var t,i=e.map(function(n,a){var s=a<e.length-1,f=a>0;return ns(n,s,f,function(u){t||(t=u),u&&i.forEach(ui),!s&&(i.forEach(ui),r(t))})});return e.reduce(as)};di.exports=ss});var Ir=h(rr=>{"use strict";o();l();Object.defineProperty(rr,"__esModule",{value:!0});rr.getUniqueId=void 0;var hi=4294967295,Pr=Math.floor(Math.random()*hi);function os(){return Pr=(Pr+1)%hi,Pr}rr.getUniqueId=os});var pi=h(tr=>{"use strict";o();l();Object.defineProperty(tr,"__esModule",{value:!0});tr.createIdRemapMiddleware=void 0;var ls=Ir();function fs(){return(e,r,t,i)=>{let n=e.id,a=ls.getUniqueId();e.id=a,r.id=a,t(s=>{e.id=n,r.id=n,s()})}}tr.createIdRemapMiddleware=fs});var gi=h(ir=>{"use strict";o();l();Object.defineProperty(ir,"__esModule",{value:!0});ir.createAsyncMiddleware=void 0;function us(e){return async(r,t,i,n)=>{let a,s=new Promise(p=>{a=p}),f=null,u=!1,c=async()=>{u=!0,i(p=>{f=p,a()}),await s};try{await e(r,t,c),u?(await s,f(null)):n(null)}catch(p){f?f(p):n(p)}}}ir.createAsyncMiddleware=us});var mi=h(nr=>{"use strict";o();l();Object.defineProperty(nr,"__esModule",{value:!0});nr.createScaffoldMiddleware=void 0;function ds(e){return(r,t,i,n)=>{let a=e[r.method];return a===void 0?i():typeof a=="function"?a(r,t,i,n):(t.result=a,n())}}nr.createScaffoldMiddleware=ds});var yi=h(Dr=>{"use strict";o();l();Object.defineProperty(Dr,"__esModule",{value:!0});var cs=be();function wi(e,r,t){try{Reflect.apply(e,r,t)}catch(i){setTimeout(()=>{throw i})}}function hs(e){let r=e.length,t=new Array(r);for(let i=0;i<r;i+=1)t[i]=e[i];return t}var kr=class extends cs.EventEmitter{emit(r,...t){let i=r==="error",n=this._events;if(n!==void 0)i=i&&n.error===void 0;else if(!i)return!1;if(i){let s;if(t.length>0&&([s]=t),s instanceof Error)throw s;let f=new Error(`Unhandled error.${s?` (${s.message})`:""}`);throw f.context=s,f}let a=n[r];if(a===void 0)return!1;if(typeof a=="function")wi(a,this,t);else{let s=a.length,f=hs(a);for(let u=0;u<s;u+=1)wi(f[u],this,t)}return!0}};Dr.default=kr});var Br=h(oe=>{"use strict";o();l();var ps=oe&&oe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oe,"__esModule",{value:!0});oe.JsonRpcEngine=void 0;var gs=ps(yi()),N=A(),W=class extends gs.default{constructor(){super(),this._middleware=[]}push(r){this._middleware.push(r)}handle(r,t){if(t&&typeof t!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(r)?t?this._handleBatch(r,t):this._handleBatch(r):t?this._handle(r,t):this._promiseHandle(r)}asMiddleware(){return async(r,t,i,n)=>{try{let[a,s,f]=await W._runAllMiddleware(r,t,this._middleware);return s?(await W._runReturnHandlers(f),n(a)):i(async u=>{try{await W._runReturnHandlers(f)}catch(c){return u(c)}return u()})}catch(a){return n(a)}}}async _handleBatch(r,t){try{let i=await Promise.all(r.map(this._promiseHandle.bind(this)));return t?t(null,i):i}catch(i){if(t)return t(i);throw i}}_promiseHandle(r){return new Promise(t=>{this._handle(r,(i,n)=>{t(n)})})}async _handle(r,t){if(!r||Array.isArray(r)||typeof r!="object"){let s=new N.EthereumRpcError(N.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof r}`,{request:r});return t(s,{id:void 0,jsonrpc:"2.0",error:s})}if(typeof r.method!="string"){let s=new N.EthereumRpcError(N.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof r.method}`,{request:r});return t(s,{id:r.id,jsonrpc:"2.0",error:s})}let i=Object.assign({},r),n={id:i.id,jsonrpc:i.jsonrpc},a=null;try{await this._processRequest(i,n)}catch(s){a=s}return a&&(delete n.result,n.error||(n.error=N.serializeError(a))),t(a,n)}async _processRequest(r,t){let[i,n,a]=await W._runAllMiddleware(r,t,this._middleware);if(W._checkForCompletion(r,t,n),await W._runReturnHandlers(a),i)throw i}static async _runAllMiddleware(r,t,i){let n=[],a=null,s=!1;for(let f of i)if([a,s]=await W._runMiddleware(r,t,f,n),s)break;return[a,s,n.reverse()]}static _runMiddleware(r,t,i,n){return new Promise(a=>{let s=u=>{let c=u||t.error;c&&(t.error=N.serializeError(c)),a([c,!0])},f=u=>{t.error?s(t.error):(u&&(typeof u!="function"&&s(new N.EthereumRpcError(N.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof u}" for request:
${Wr(r)}`,{request:r})),n.push(u)),a([null,!1]))};try{i(r,t,f,s)}catch(u){s(u)}})}static async _runReturnHandlers(r){for(let t of r)await new Promise((i,n)=>{t(a=>a?n(a):i())})}static _checkForCompletion(r,t,i){if(!("result"in t)&&!("error"in t))throw new N.EthereumRpcError(N.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${Wr(r)}`,{request:r});if(!i)throw new N.EthereumRpcError(N.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${Wr(r)}`,{request:r})}};oe.JsonRpcEngine=W;function Wr(e){return JSON.stringify(e,null,2)}});var bi=h(ar=>{"use strict";o();l();Object.defineProperty(ar,"__esModule",{value:!0});ar.mergeMiddleware=void 0;var ms=Br();function ws(e){let r=new ms.JsonRpcEngine;return e.forEach(t=>r.push(t)),r.asMiddleware()}ar.mergeMiddleware=ws});var vi=h(P=>{"use strict";o();l();var ys=P&&P.__createBinding||(Object.create?function(e,r,t,i){i===void 0&&(i=t),Object.defineProperty(e,i,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,i){i===void 0&&(i=t),e[i]=r[t]}),le=P&&P.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&ys(r,e,t)};Object.defineProperty(P,"__esModule",{value:!0});le(pi(),P);le(gi(),P);le(mi(),P);le(Ir(),P);le(Br(),P);le(bi(),P)});var Ee=h((iu,Lr)=>{"use strict";o();l();typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Lr.exports={nextTick:bs}:Lr.exports=process;function bs(e,r,t,i){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,a,s;switch(n){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,r)});case 3:return process.nextTick(function(){e.call(null,r,t)});case 4:return process.nextTick(function(){e.call(null,r,t,i)});default:for(a=new Array(n-1),s=0;s<a.length;)a[s++]=arguments[s];return process.nextTick(function(){e.apply(null,a)})}}});var Si=h((su,_i)=>{o();l();var vs={}.toString;_i.exports=Array.isArray||function(e){return vs.call(e)=="[object Array]"}});var Ur=h((fu,Ei)=>{o();l();Ei.exports=be().EventEmitter});var xe=h((Fr,Mi)=>{o();l();var sr=Pt(),K=sr.Buffer;function xi(e,r){for(var t in e)r[t]=e[t]}K.from&&K.alloc&&K.allocUnsafe&&K.allocUnsafeSlow?Mi.exports=sr:(xi(sr,Fr),Fr.Buffer=fe);function fe(e,r,t){return K(e,r,t)}xi(K,fe);fe.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return K(e,r,t)};fe.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=K(e);return r!==void 0?typeof t=="string"?i.fill(r,t):i.fill(r):i.fill(0),i};fe.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return K(e)};fe.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return sr.SlowBuffer(e)}});var Ri=h((pu,Hr)=>{"use strict";o();l();function _s(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var Ti=xe().Buffer,Me=He();function Ss(e,r,t){e.copy(r,t)}Hr.exports=function(){function e(){_s(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(t){var i={data:t,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length},e.prototype.unshift=function(t){var i={data:t,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length},e.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(t){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=t+i.data;return n},e.prototype.concat=function(t){if(this.length===0)return Ti.alloc(0);if(this.length===1)return this.head.data;for(var i=Ti.allocUnsafe(t>>>0),n=this.head,a=0;n;)Ss(n.data,i,a),a+=n.data.length,n=n.next;return i},e}();Me&&Me.inspect&&Me.inspect.custom&&(Hr.exports.prototype[Me.inspect.custom]=function(){var e=Me.inspect({length:this.length});return this.constructor.name+" "+e})});var zr=h((wu,qi)=>{"use strict";o();l();var Ci=Ee();function Es(e,r){var t=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(r?r(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Ci.nextTick(Oi,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!r&&a?(Ci.nextTick(Oi,t,a),t._writableState&&(t._writableState.errorEmitted=!0)):r&&r(a)}),this)}function xs(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Oi(e,r){e.emit("error",r)}qi.exports={destroy:Es,undestroy:xs}});var Jr=h((vu,Wi)=>{"use strict";o();l();var re=Ee();Wi.exports=S;function Ai(e){var r=this;this.next=null,this.entry=null,this.finish=function(){Fs(r,e)}}var Ms=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:re.nextTick,ue;S.WritableState=Re;var Ni=Object.create(L());Ni.inherits=B();var Ts={deprecate:It()},Pi=Ur(),lr=xe().Buffer,Rs=globalThis.Uint8Array||function(){};function Cs(e){return lr.from(e)}function Os(e){return lr.isBuffer(e)||e instanceof Rs}var Ii=zr();Ni.inherits(S,Pi);function qs(){}function Re(e,r){ue=ue||te(),e=e||{};var t=r instanceof ue;this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=e.writableHighWaterMark,a=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:t&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(f){Ds(r,f)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ai(this)}Re.prototype.getBuffer=function(){for(var r=this.bufferedRequest,t=[];r;)t.push(r),r=r.next;return t};(function(){try{Object.defineProperty(Re.prototype,"buffer",{get:Ts.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var or;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(or=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return or.call(this,e)?!0:this!==S?!1:e&&e._writableState instanceof Re}})):or=function(e){return e instanceof this};function S(e){if(ue=ue||te(),!or.call(S,this)&&!(this instanceof ue))return new S(e);this._writableState=new Re(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Pi.call(this)}S.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function js(e,r){var t=new Error("write after end");e.emit("error",t),re.nextTick(r,t)}function As(e,r,t,i){var n=!0,a=!1;return t===null?a=new TypeError("May not write null values to stream"):typeof t!="string"&&t!==void 0&&!r.objectMode&&(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),re.nextTick(i,a),n=!1),n}S.prototype.write=function(e,r,t){var i=this._writableState,n=!1,a=!i.objectMode&&Os(e);return a&&!lr.isBuffer(e)&&(e=Cs(e)),typeof r=="function"&&(t=r,r=null),a?r="buffer":r||(r=i.defaultEncoding),typeof t!="function"&&(t=qs),i.ended?js(this,t):(a||As(this,i,e,t))&&(i.pendingcb++,n=Ps(this,i,a,e,r,t)),n};S.prototype.cork=function(){var e=this._writableState;e.corked++};S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&ki(this,e))};S.prototype.setDefaultEncoding=function(r){if(typeof r=="string"&&(r=r.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((r+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+r);return this._writableState.defaultEncoding=r,this};function Ns(e,r,t){return!e.objectMode&&e.decodeStrings!==!1&&typeof r=="string"&&(r=lr.from(r,t)),r}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ps(e,r,t,i,n,a){if(!t){var s=Ns(r,i,n);i!==s&&(t=!0,n="buffer",i=s)}var f=r.objectMode?1:i.length;r.length+=f;var u=r.length<r.highWaterMark;if(u||(r.needDrain=!0),r.writing||r.corked){var c=r.lastBufferedRequest;r.lastBufferedRequest={chunk:i,encoding:n,isBuf:t,callback:a,next:null},c?c.next=r.lastBufferedRequest:r.bufferedRequest=r.lastBufferedRequest,r.bufferedRequestCount+=1}else Kr(e,r,!1,f,i,n,a);return u}function Kr(e,r,t,i,n,a,s){r.writelen=i,r.writecb=s,r.writing=!0,r.sync=!0,t?e._writev(n,r.onwrite):e._write(n,a,r.onwrite),r.sync=!1}function Is(e,r,t,i,n){--r.pendingcb,t?(re.nextTick(n,i),re.nextTick(Te,e,r),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),Te(e,r))}function ks(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Ds(e,r){var t=e._writableState,i=t.sync,n=t.writecb;if(ks(t),r)Is(e,t,i,r,n);else{var a=Di(t);!a&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&ki(e,t),i?Ms(ji,e,t,a,n):ji(e,t,a,n)}}function ji(e,r,t,i){t||Ws(e,r),r.pendingcb--,i(),Te(e,r)}function Ws(e,r){r.length===0&&r.needDrain&&(r.needDrain=!1,e.emit("drain"))}function ki(e,r){r.bufferProcessing=!0;var t=r.bufferedRequest;if(e._writev&&t&&t.next){var i=r.bufferedRequestCount,n=new Array(i),a=r.corkedRequestsFree;a.entry=t;for(var s=0,f=!0;t;)n[s]=t,t.isBuf||(f=!1),t=t.next,s+=1;n.allBuffers=f,Kr(e,r,!0,r.length,n,"",a.finish),r.pendingcb++,r.lastBufferedRequest=null,a.next?(r.corkedRequestsFree=a.next,a.next=null):r.corkedRequestsFree=new Ai(r),r.bufferedRequestCount=0}else{for(;t;){var u=t.chunk,c=t.encoding,p=t.callback,y=r.objectMode?1:u.length;if(Kr(e,r,!1,y,u,c,p),t=t.next,r.bufferedRequestCount--,r.writing)break}t===null&&(r.lastBufferedRequest=null)}r.bufferedRequest=t,r.bufferProcessing=!1}S.prototype._write=function(e,r,t){t(new Error("_write() is not implemented"))};S.prototype._writev=null;S.prototype.end=function(e,r,t){var i=this._writableState;typeof e=="function"?(t=e,e=null,r=null):typeof r=="function"&&(t=r,r=null),e!=null&&this.write(e,r),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&Us(this,i,t)};function Di(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Bs(e,r){e._final(function(t){r.pendingcb--,t&&e.emit("error",t),r.prefinished=!0,e.emit("prefinish"),Te(e,r)})}function Ls(e,r){!r.prefinished&&!r.finalCalled&&(typeof e._final=="function"?(r.pendingcb++,r.finalCalled=!0,re.nextTick(Bs,e,r)):(r.prefinished=!0,e.emit("prefinish")))}function Te(e,r){var t=Di(r);return t&&(Ls(e,r),r.pendingcb===0&&(r.finished=!0,e.emit("finish"))),t}function Us(e,r,t){r.ending=!0,Te(e,r),t&&(r.finished?re.nextTick(t):e.once("finish",t)),r.ended=!0,e.writable=!1}function Fs(e,r,t){var i=e.entry;for(e.entry=null;i;){var n=i.callback;r.pendingcb--,n(t),i=i.next}r.corkedRequestsFree?r.corkedRequestsFree.next=e:r.corkedRequestsFree=e}Object.defineProperty(S.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});S.prototype.destroy=Ii.destroy;S.prototype._undestroy=Ii.undestroy;S.prototype._destroy=function(e,r){this.end(),r(e)}});var te=h((Eu,Fi)=>{"use strict";o();l();var Bi=Ee(),Hs=Object.keys||function(e){var r=[];for(var t in e)r.push(t);return r};Fi.exports=J;var Li=Object.create(L());Li.inherits=B();var Ui=Gr(),$r=Jr();Li.inherits(J,Ui);for(Vr=Hs($r.prototype),fr=0;fr<Vr.length;fr++)ur=Vr[fr],J.prototype[ur]||(J.prototype[ur]=$r.prototype[ur]);var Vr,ur,fr;function J(e){if(!(this instanceof J))return new J(e);Ui.call(this,e),$r.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",zs)}Object.defineProperty(J.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function zs(){this.allowHalfOpen||this._writableState.ended||Bi.nextTick(Ks,this)}function Ks(e){e.end()}Object.defineProperty(J.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});J.prototype._destroy=function(e,r){this.push(null),this.end(),Bi.nextTick(r,e)}});var Qr=h(zi=>{"use strict";o();l();var Yr=xe().Buffer,Hi=Yr.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Js(e){if(!e)return"utf8";for(var r;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(r)return;e=(""+e).toLowerCase(),r=!0}}function Vs(e){var r=Js(e);if(typeof r!="string"&&(Yr.isEncoding===Hi||!Hi(e)))throw new Error("Unknown encoding: "+e);return r||e}zi.StringDecoder=Ce;function Ce(e){this.encoding=Vs(e);var r;switch(this.encoding){case"utf16le":this.text=Zs,this.end=eo,r=4;break;case"utf8":this.fillLast=Xs,r=4;break;case"base64":this.text=ro,this.end=to,r=3;break;default:this.write=io,this.end=no;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Yr.allocUnsafe(r)}Ce.prototype.write=function(e){if(e.length===0)return"";var r,t;if(this.lastNeed){if(r=this.fillLast(e),r===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?r?r+this.text(e,t):this.text(e,t):r||""};Ce.prototype.end=Qs;Ce.prototype.text=Ys;Ce.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Xr(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function $s(e,r,t){var i=r.length-1;if(i<t)return 0;var n=Xr(r[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<t||n===-2?0:(n=Xr(r[i]),n>=0?(n>0&&(e.lastNeed=n-2),n):--i<t||n===-2?0:(n=Xr(r[i]),n>=0?(n>0&&(n===2?n=0:e.lastNeed=n-3),n):0))}function Gs(e,r,t){if((r[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&r.length>1){if((r[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&r.length>2&&(r[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function Xs(e){var r=this.lastTotal-this.lastNeed,t=Gs(this,e,r);if(t!==void 0)return t;if(this.lastNeed<=e.length)return e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,r,0,e.length),this.lastNeed-=e.length}function Ys(e,r){var t=$s(this,e,r);if(!this.lastNeed)return e.toString("utf8",r);this.lastTotal=t;var i=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",r,i)}function Qs(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+"\uFFFD":r}function Zs(e,r){if((e.length-r)%2===0){var t=e.toString("utf16le",r);if(t){var i=t.charCodeAt(t.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",r,e.length-1)}function eo(e){var r=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,t)}return r}function ro(e,r){var t=(e.length-r)%3;return t===0?e.toString("base64",r):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",r,e.length-t))}function to(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function io(e){return e.toString(this.encoding)}function no(e){return e&&e.length?this.write(e):""}});var Gr=h((qu,tn)=>{"use strict";o();l();var ce=Ee();tn.exports=b;var ao=Si(),Oe;b.ReadableState=Yi;var Ou=be().EventEmitter,$i=function(e,r){return e.listeners(r).length},it=Ur(),qe=xe().Buffer,so=globalThis.Uint8Array||function(){};function oo(e){return qe.from(e)}function lo(e){return qe.isBuffer(e)||e instanceof so}var Gi=Object.create(L());Gi.inherits=B();var Zr=He(),g=void 0;Zr&&Zr.debuglog?g=Zr.debuglog("stream"):g=function(){};var fo=Ri(),Xi=zr(),de;Gi.inherits(b,it);var et=["error","close","destroy","pause","resume"];function uo(e,r,t){if(typeof e.prependListener=="function")return e.prependListener(r,t);!e._events||!e._events[r]?e.on(r,t):ao(e._events[r])?e._events[r].unshift(t):e._events[r]=[t,e._events[r]]}function Yi(e,r){Oe=Oe||te(),e=e||{};var t=r instanceof Oe;this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,n=e.readableHighWaterMark,a=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:t&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new fo,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(de||(de=Qr().StringDecoder),this.decoder=new de(e.encoding),this.encoding=e.encoding)}function b(e){if(Oe=Oe||te(),!(this instanceof b))return new b(e);this._readableState=new Yi(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),it.call(this)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});b.prototype.destroy=Xi.destroy;b.prototype._undestroy=Xi.undestroy;b.prototype._destroy=function(e,r){this.push(null),r(e)};b.prototype.push=function(e,r){var t=this._readableState,i;return t.objectMode?i=!0:typeof e=="string"&&(r=r||t.defaultEncoding,r!==t.encoding&&(e=qe.from(e,r),r=""),i=!0),Qi(this,e,r,!1,i)};b.prototype.unshift=function(e){return Qi(this,e,null,!0,!1)};function Qi(e,r,t,i,n){var a=e._readableState;if(r===null)a.reading=!1,go(e,a);else{var s;n||(s=co(a,r)),s?e.emit("error",s):a.objectMode||r&&r.length>0?(typeof r!="string"&&!a.objectMode&&Object.getPrototypeOf(r)!==qe.prototype&&(r=oo(r)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):rt(e,a,r,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!t?(r=a.decoder.write(r),a.objectMode||r.length!==0?rt(e,a,r,!1):Zi(e,a)):rt(e,a,r,!1))):i||(a.reading=!1)}return ho(a)}function rt(e,r,t,i){r.flowing&&r.length===0&&!r.sync?(e.emit("data",t),e.read(0)):(r.length+=r.objectMode?1:t.length,i?r.buffer.unshift(t):r.buffer.push(t),r.needReadable&&dr(e)),Zi(e,r)}function co(e,r){var t;return!lo(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function ho(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}b.prototype.isPaused=function(){return this._readableState.flowing===!1};b.prototype.setEncoding=function(e){return de||(de=Qr().StringDecoder),this._readableState.decoder=new de(e),this._readableState.encoding=e,this};var Ki=8388608;function po(e){return e>=Ki?e=Ki:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Ji(e,r){return e<=0||r.length===0&&r.ended?0:r.objectMode?1:e!==e?r.flowing&&r.length?r.buffer.head.data.length:r.length:(e>r.highWaterMark&&(r.highWaterMark=po(e)),e<=r.length?e:r.ended?r.length:(r.needReadable=!0,0))}b.prototype.read=function(e){g("read",e),e=parseInt(e,10);var r=this._readableState,t=e;if(e!==0&&(r.emittedReadable=!1),e===0&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return g("read: emitReadable",r.length,r.ended),r.length===0&&r.ended?tt(this):dr(this),null;if(e=Ji(e,r),e===0&&r.ended)return r.length===0&&tt(this),null;var i=r.needReadable;g("need readable",i),(r.length===0||r.length-e<r.highWaterMark)&&(i=!0,g("length less than watermark",i)),r.ended||r.reading?(i=!1,g("reading or ended",i)):i&&(g("do read"),r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=Ji(t,r)));var n;return e>0?n=en(e,r):n=null,n===null?(r.needReadable=!0,e=0):r.length-=e,r.length===0&&(r.ended||(r.needReadable=!0),t!==e&&r.ended&&tt(this)),n!==null&&this.emit("data",n),n};function go(e,r){if(!r.ended){if(r.decoder){var t=r.decoder.end();t&&t.length&&(r.buffer.push(t),r.length+=r.objectMode?1:t.length)}r.ended=!0,dr(e)}}function dr(e){var r=e._readableState;r.needReadable=!1,r.emittedReadable||(g("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?ce.nextTick(Vi,e):Vi(e))}function Vi(e){g("emit readable"),e.emit("readable"),nt(e)}function Zi(e,r){r.readingMore||(r.readingMore=!0,ce.nextTick(mo,e,r))}function mo(e,r){for(var t=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(g("maybeReadMore read 0"),e.read(0),t!==r.length);)t=r.length;r.readingMore=!1}b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};b.prototype.pipe=function(e,r){var t=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,g("pipe count=%d opts=%j",i.pipesCount,r);var n=(!r||r.end!==!1)&&e!==process.stdout&&e!==process.stderr,a=n?f:x;i.endEmitted?ce.nextTick(a):t.once("end",a),e.on("unpipe",s);function s(q,k){g("onunpipe"),q===t&&k&&k.hasUnpiped===!1&&(k.hasUnpiped=!0,p())}function f(){g("onend"),e.end()}var u=wo(t);e.on("drain",u);var c=!1;function p(){g("cleanup"),e.removeListener("close",H),e.removeListener("finish",I),e.removeListener("drain",u),e.removeListener("error",C),e.removeListener("unpipe",s),t.removeListener("end",f),t.removeListener("end",x),t.removeListener("data",R),c=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&u()}var y=!1;t.on("data",R);function R(q){g("ondata"),y=!1;var k=e.write(q);k===!1&&!y&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&rn(i.pipes,e)!==-1)&&!c&&(g("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,y=!0),t.pause())}function C(q){g("onerror",q),x(),e.removeListener("error",C),$i(e,"error")===0&&e.emit("error",q)}uo(e,"error",C);function H(){e.removeListener("finish",I),x()}e.once("close",H);function I(){g("onfinish"),e.removeListener("close",H),x()}e.once("finish",I);function x(){g("unpipe"),t.unpipe(e)}return e.emit("pipe",t),i.flowing||(g("pipe resume"),t.resume()),e};function wo(e){return function(){var r=e._readableState;g("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&$i(e,"data")&&(r.flowing=!0,nt(e))}}b.prototype.unpipe=function(e){var r=this._readableState,t={hasUnpiped:!1};if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,e&&e.emit("unpipe",this,t),this);if(!e){var i=r.pipes,n=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,t);return this}var s=rn(r.pipes,e);return s===-1?this:(r.pipes.splice(s,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this,t),this)};b.prototype.on=function(e,r){var t=it.prototype.on.call(this,e,r);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&dr(this):ce.nextTick(yo,this))}return t};b.prototype.addListener=b.prototype.on;function yo(e){g("readable nexttick read 0"),e.read(0)}b.prototype.resume=function(){var e=this._readableState;return e.flowing||(g("resume"),e.flowing=!0,bo(this,e)),this};function bo(e,r){r.resumeScheduled||(r.resumeScheduled=!0,ce.nextTick(vo,e,r))}function vo(e,r){r.reading||(g("resume read 0"),e.read(0)),r.resumeScheduled=!1,r.awaitDrain=0,e.emit("resume"),nt(e),r.flowing&&!r.reading&&e.read(0)}b.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function nt(e){var r=e._readableState;for(g("flow",r.flowing);r.flowing&&e.read()!==null;);}b.prototype.wrap=function(e){var r=this,t=this._readableState,i=!1;e.on("end",function(){if(g("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&r.push(s)}r.push(null)}),e.on("data",function(s){if(g("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var f=r.push(s);f||(i=!0,e.pause())}});for(var n in e)this[n]===void 0&&typeof e[n]=="function"&&(this[n]=function(s){return function(){return e[s].apply(e,arguments)}}(n));for(var a=0;a<et.length;a++)e.on(et[a],this.emit.bind(this,et[a]));return this._read=function(s){g("wrapped _read",s),i&&(i=!1,e.resume())},this};Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});b._fromList=en;function en(e,r){if(r.length===0)return null;var t;return r.objectMode?t=r.buffer.shift():!e||e>=r.length?(r.decoder?t=r.buffer.join(""):r.buffer.length===1?t=r.buffer.head.data:t=r.buffer.concat(r.length),r.buffer.clear()):t=_o(e,r.buffer,r.decoder),t}function _o(e,r,t){var i;return e<r.head.data.length?(i=r.head.data.slice(0,e),r.head.data=r.head.data.slice(e)):e===r.head.data.length?i=r.shift():i=t?So(e,r):Eo(e,r),i}function So(e,r){var t=r.head,i=1,n=t.data;for(e-=n.length;t=t.next;){var a=t.data,s=e>a.length?a.length:e;if(s===a.length?n+=a:n+=a.slice(0,e),e-=s,e===0){s===a.length?(++i,t.next?r.head=t.next:r.head=r.tail=null):(r.head=t,t.data=a.slice(s));break}++i}return r.length-=i,n}function Eo(e,r){var t=qe.allocUnsafe(e),i=r.head,n=1;for(i.data.copy(t),e-=i.data.length;i=i.next;){var a=i.data,s=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,s),e-=s,e===0){s===a.length?(++n,i.next?r.head=i.next:r.head=r.tail=null):(r.head=i,i.data=a.slice(s));break}++n}return r.length-=n,t}function tt(e){var r=e._readableState;if(r.length>0)throw new Error('"endReadable()" called on non-empty stream');r.endEmitted||(r.ended=!0,ce.nextTick(xo,r,e))}function xo(e,r){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,r.readable=!1,r.emit("end"))}function rn(e,r){for(var t=0,i=e.length;t<i;t++)if(e[t]===r)return t;return-1}});var at=h((Nu,sn)=>{"use strict";o();l();sn.exports=V;var cr=te(),an=Object.create(L());an.inherits=B();an.inherits(V,cr);function Mo(e,r){var t=this._transformState;t.transforming=!1;var i=t.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));t.writechunk=null,t.writecb=null,r!=null&&this.push(r),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function V(e){if(!(this instanceof V))return new V(e);cr.call(this,e),this._transformState={afterTransform:Mo.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",To)}function To(){var e=this;typeof this._flush=="function"?this._flush(function(r,t){nn(e,r,t)}):nn(this,null,null)}V.prototype.push=function(e,r){return this._transformState.needTransform=!1,cr.prototype.push.call(this,e,r)};V.prototype._transform=function(e,r,t){throw new Error("_transform() is not implemented")};V.prototype._write=function(e,r,t){var i=this._transformState;if(i.writecb=t,i.writechunk=e,i.writeencoding=r,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};V.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};V.prototype._destroy=function(e,r){var t=this;cr.prototype._destroy.call(this,e,function(i){r(i),t.emit("close")})};function nn(e,r,t){if(r)return e.emit("error",r);if(t!=null&&e.push(t),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var un=h((ku,fn)=>{"use strict";o();l();fn.exports=je;var on=at(),ln=Object.create(L());ln.inherits=B();ln.inherits(je,on);function je(e){if(!(this instanceof je))return new je(e);on.call(this,e)}je.prototype._transform=function(e,r,t){t(null,e)}});var cn=h((U,dn)=>{o();l();U=dn.exports=Gr();U.Stream=U;U.Readable=U;U.Writable=Jr();U.Duplex=te();U.Transform=at();U.PassThrough=un()});var pn=h((Uu,hn)=>{o();l();var Ro=Da(),Co=cn().Duplex;hn.exports=Oo;function Oo(){let e={},r=new Co({objectMode:!0,read:n,write:a}),t=new Ro;return{events:t,middleware:(u,c,p,y)=>{r.push(u),e[u.id]={req:u,res:c,next:p,end:y}},stream:r};function n(){return!1}function a(u,c,p){let y;try{!u.id?f(u):s(u)}catch(R){y=R}p(y)}function s(u){let c=e[u.id];if(!c)throw new Error(`StreamMiddleware - Unknown response id ${u.id}`);delete e[u.id],Object.assign(c.res,u),setTimeout(c.end)}function f(u){t.emit("notification",u)}}});var Ae=h((zu,st)=>{"use strict";o();l();typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?st.exports={nextTick:qo}:st.exports=process;function qo(e,r,t,i){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,a,s;switch(n){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,r)});case 3:return process.nextTick(function(){e.call(null,r,t)});case 4:return process.nextTick(function(){e.call(null,r,t,i)});default:for(a=new Array(n-1),s=0;s<a.length;)a[s++]=arguments[s];return process.nextTick(function(){e.apply(null,a)})}}});var mn=h((Vu,gn)=>{o();l();var jo={}.toString;gn.exports=Array.isArray||function(e){return jo.call(e)=="[object Array]"}});var ot=h((Xu,wn)=>{o();l();wn.exports=be().EventEmitter});var Ne=h((lt,bn)=>{o();l();var hr=Pt(),$=hr.Buffer;function yn(e,r){for(var t in e)r[t]=e[t]}$.from&&$.alloc&&$.allocUnsafe&&$.allocUnsafeSlow?bn.exports=hr:(yn(hr,lt),lt.Buffer=he);function he(e,r,t){return $(e,r,t)}yn($,he);he.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return $(e,r,t)};he.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=$(e);return r!==void 0?typeof t=="string"?i.fill(r,t):i.fill(r):i.fill(0),i};he.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return $(e)};he.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return hr.SlowBuffer(e)}});var _n=h((rd,ft)=>{"use strict";o();l();function Ao(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var vn=Ne().Buffer,Pe=He();function No(e,r,t){e.copy(r,t)}ft.exports=function(){function e(){Ao(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(t){var i={data:t,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length},e.prototype.unshift=function(t){var i={data:t,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length},e.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(t){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=t+i.data;return n},e.prototype.concat=function(t){if(this.length===0)return vn.alloc(0);if(this.length===1)return this.head.data;for(var i=vn.allocUnsafe(t>>>0),n=this.head,a=0;n;)No(n.data,i,a),a+=n.data.length,n=n.next;return i},e}();Pe&&Pe.inspect&&Pe.inspect.custom&&(ft.exports.prototype[Pe.inspect.custom]=function(){var e=Pe.inspect({length:this.length});return this.constructor.name+" "+e})});var ut=h((nd,xn)=>{"use strict";o();l();var Sn=Ae();function Po(e,r){var t=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(r?r(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&Sn.nextTick(En,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!r&&a?(Sn.nextTick(En,t,a),t._writableState&&(t._writableState.errorEmitted=!0)):r&&r(a)}),this)}function Io(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function En(e,r){e.emit("error",r)}xn.exports={destroy:Po,undestroy:Io}});var ct=h((od,An)=>{"use strict";o();l();var ie=Ae();An.exports=E;function Tn(e){var r=this;this.next=null,this.entry=null,this.finish=function(){Zo(r,e)}}var ko=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:ie.nextTick,pe;E.WritableState=ke;var Rn=Object.create(L());Rn.inherits=B();var Do={deprecate:It()},Cn=ot(),gr=Ne().Buffer,Wo=globalThis.Uint8Array||function(){};function Bo(e){return gr.from(e)}function Lo(e){return gr.isBuffer(e)||e instanceof Wo}var On=ut();Rn.inherits(E,Cn);function Uo(){}function ke(e,r){pe=pe||ne(),e=e||{};var t=r instanceof pe;this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=e.writableHighWaterMark,a=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:t&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(f){$o(r,f)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Tn(this)}ke.prototype.getBuffer=function(){for(var r=this.bufferedRequest,t=[];r;)t.push(r),r=r.next;return t};(function(){try{Object.defineProperty(ke.prototype,"buffer",{get:Do.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var pr;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(pr=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return pr.call(this,e)?!0:this!==E?!1:e&&e._writableState instanceof ke}})):pr=function(e){return e instanceof this};function E(e){if(pe=pe||ne(),!pr.call(E,this)&&!(this instanceof pe))return new E(e);this._writableState=new ke(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Cn.call(this)}E.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Fo(e,r){var t=new Error("write after end");e.emit("error",t),ie.nextTick(r,t)}function Ho(e,r,t,i){var n=!0,a=!1;return t===null?a=new TypeError("May not write null values to stream"):typeof t!="string"&&t!==void 0&&!r.objectMode&&(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),ie.nextTick(i,a),n=!1),n}E.prototype.write=function(e,r,t){var i=this._writableState,n=!1,a=!i.objectMode&&Lo(e);return a&&!gr.isBuffer(e)&&(e=Bo(e)),typeof r=="function"&&(t=r,r=null),a?r="buffer":r||(r=i.defaultEncoding),typeof t!="function"&&(t=Uo),i.ended?Fo(this,t):(a||Ho(this,i,e,t))&&(i.pendingcb++,n=Ko(this,i,a,e,r,t)),n};E.prototype.cork=function(){var e=this._writableState;e.corked++};E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&qn(this,e))};E.prototype.setDefaultEncoding=function(r){if(typeof r=="string"&&(r=r.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((r+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+r);return this._writableState.defaultEncoding=r,this};function zo(e,r,t){return!e.objectMode&&e.decodeStrings!==!1&&typeof r=="string"&&(r=gr.from(r,t)),r}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Ko(e,r,t,i,n,a){if(!t){var s=zo(r,i,n);i!==s&&(t=!0,n="buffer",i=s)}var f=r.objectMode?1:i.length;r.length+=f;var u=r.length<r.highWaterMark;if(u||(r.needDrain=!0),r.writing||r.corked){var c=r.lastBufferedRequest;r.lastBufferedRequest={chunk:i,encoding:n,isBuf:t,callback:a,next:null},c?c.next=r.lastBufferedRequest:r.bufferedRequest=r.lastBufferedRequest,r.bufferedRequestCount+=1}else dt(e,r,!1,f,i,n,a);return u}function dt(e,r,t,i,n,a,s){r.writelen=i,r.writecb=s,r.writing=!0,r.sync=!0,t?e._writev(n,r.onwrite):e._write(n,a,r.onwrite),r.sync=!1}function Jo(e,r,t,i,n){--r.pendingcb,t?(ie.nextTick(n,i),ie.nextTick(Ie,e,r),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),Ie(e,r))}function Vo(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function $o(e,r){var t=e._writableState,i=t.sync,n=t.writecb;if(Vo(t),r)Jo(e,t,i,r,n);else{var a=jn(t);!a&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&qn(e,t),i?ko(Mn,e,t,a,n):Mn(e,t,a,n)}}function Mn(e,r,t,i){t||Go(e,r),r.pendingcb--,i(),Ie(e,r)}function Go(e,r){r.length===0&&r.needDrain&&(r.needDrain=!1,e.emit("drain"))}function qn(e,r){r.bufferProcessing=!0;var t=r.bufferedRequest;if(e._writev&&t&&t.next){var i=r.bufferedRequestCount,n=new Array(i),a=r.corkedRequestsFree;a.entry=t;for(var s=0,f=!0;t;)n[s]=t,t.isBuf||(f=!1),t=t.next,s+=1;n.allBuffers=f,dt(e,r,!0,r.length,n,"",a.finish),r.pendingcb++,r.lastBufferedRequest=null,a.next?(r.corkedRequestsFree=a.next,a.next=null):r.corkedRequestsFree=new Tn(r),r.bufferedRequestCount=0}else{for(;t;){var u=t.chunk,c=t.encoding,p=t.callback,y=r.objectMode?1:u.length;if(dt(e,r,!1,y,u,c,p),t=t.next,r.bufferedRequestCount--,r.writing)break}t===null&&(r.lastBufferedRequest=null)}r.bufferedRequest=t,r.bufferProcessing=!1}E.prototype._write=function(e,r,t){t(new Error("_write() is not implemented"))};E.prototype._writev=null;E.prototype.end=function(e,r,t){var i=this._writableState;typeof e=="function"?(t=e,e=null,r=null):typeof r=="function"&&(t=r,r=null),e!=null&&this.write(e,r),i.corked&&(i.corked=1,this.uncork()),!i.ending&&!i.finished&&Qo(this,i,t)};function jn(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function Xo(e,r){e._final(function(t){r.pendingcb--,t&&e.emit("error",t),r.prefinished=!0,e.emit("prefinish"),Ie(e,r)})}function Yo(e,r){!r.prefinished&&!r.finalCalled&&(typeof e._final=="function"?(r.pendingcb++,r.finalCalled=!0,ie.nextTick(Xo,e,r)):(r.prefinished=!0,e.emit("prefinish")))}function Ie(e,r){var t=jn(r);return t&&(Yo(e,r),r.pendingcb===0&&(r.finished=!0,e.emit("finish"))),t}function Qo(e,r,t){r.ending=!0,Ie(e,r),t&&(r.finished?ie.nextTick(t):e.once("finish",t)),r.ended=!0,e.writable=!1}function Zo(e,r,t){var i=e.entry;for(e.entry=null;i;){var n=i.callback;r.pendingcb--,n(t),i=i.next}r.corkedRequestsFree?r.corkedRequestsFree.next=e:r.corkedRequestsFree=e}Object.defineProperty(E.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});E.prototype.destroy=On.destroy;E.prototype._undestroy=On.undestroy;E.prototype._destroy=function(e,r){this.end(),r(e)}});var ne=h((ud,kn)=>{"use strict";o();l();var Nn=Ae(),el=Object.keys||function(e){var r=[];for(var t in e)r.push(t);return r};kn.exports=G;var Pn=Object.create(L());Pn.inherits=B();var In=gt(),pt=ct();Pn.inherits(G,In);for(ht=el(pt.prototype),mr=0;mr<ht.length;mr++)wr=ht[mr],G.prototype[wr]||(G.prototype[wr]=pt.prototype[wr]);var ht,wr,mr;function G(e){if(!(this instanceof G))return new G(e);In.call(this,e),pt.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",rl)}Object.defineProperty(G.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function rl(){this.allowHalfOpen||this._writableState.ended||Nn.nextTick(tl,this)}function tl(e){e.end()}Object.defineProperty(G.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});G.prototype._destroy=function(e,r){this.push(null),this.end(),Nn.nextTick(r,e)}});var yt=h(Wn=>{"use strict";o();l();var wt=Ne().Buffer,Dn=wt.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function il(e){if(!e)return"utf8";for(var r;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(r)return;e=(""+e).toLowerCase(),r=!0}}function nl(e){var r=il(e);if(typeof r!="string"&&(wt.isEncoding===Dn||!Dn(e)))throw new Error("Unknown encoding: "+e);return r||e}Wn.StringDecoder=De;function De(e){this.encoding=nl(e);var r;switch(this.encoding){case"utf16le":this.text=ul,this.end=dl,r=4;break;case"utf8":this.fillLast=ol,r=4;break;case"base64":this.text=cl,this.end=hl,r=3;break;default:this.write=pl,this.end=gl;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=wt.allocUnsafe(r)}De.prototype.write=function(e){if(e.length===0)return"";var r,t;if(this.lastNeed){if(r=this.fillLast(e),r===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?r?r+this.text(e,t):this.text(e,t):r||""};De.prototype.end=fl;De.prototype.text=ll;De.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function mt(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function al(e,r,t){var i=r.length-1;if(i<t)return 0;var n=mt(r[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<t||n===-2?0:(n=mt(r[i]),n>=0?(n>0&&(e.lastNeed=n-2),n):--i<t||n===-2?0:(n=mt(r[i]),n>=0?(n>0&&(n===2?n=0:e.lastNeed=n-3),n):0))}function sl(e,r,t){if((r[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&r.length>1){if((r[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&r.length>2&&(r[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function ol(e){var r=this.lastTotal-this.lastNeed,t=sl(this,e,r);if(t!==void 0)return t;if(this.lastNeed<=e.length)return e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,r,0,e.length),this.lastNeed-=e.length}function ll(e,r){var t=al(this,e,r);if(!this.lastNeed)return e.toString("utf8",r);this.lastTotal=t;var i=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",r,i)}function fl(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+"\uFFFD":r}function ul(e,r){if((e.length-r)%2===0){var t=e.toString("utf16le",r);if(t){var i=t.charCodeAt(t.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",r,e.length-1)}function dl(e){var r=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,t)}return r}function cl(e,r){var t=(e.length-r)%3;return t===0?e.toString("base64",r):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",r,e.length-t))}function hl(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function pl(e){return e.toString(this.encoding)}function gl(e){return e&&e.length?this.write(e):""}});var gt=h((wd,Xn)=>{"use strict";o();l();var me=Ae();Xn.exports=v;var ml=mn(),We;v.ReadableState=Kn;var md=be().EventEmitter,Fn=function(e,r){return e.listeners(r).length},Et=ot(),Be=Ne().Buffer,wl=globalThis.Uint8Array||function(){};function yl(e){return Be.from(e)}function bl(e){return Be.isBuffer(e)||e instanceof wl}var Hn=Object.create(L());Hn.inherits=B();var bt=He(),m=void 0;bt&&bt.debuglog?m=bt.debuglog("stream"):m=function(){};var vl=_n(),zn=ut(),ge;Hn.inherits(v,Et);var vt=["error","close","destroy","pause","resume"];function _l(e,r,t){if(typeof e.prependListener=="function")return e.prependListener(r,t);!e._events||!e._events[r]?e.on(r,t):ml(e._events[r])?e._events[r].unshift(t):e._events[r]=[t,e._events[r]]}function Kn(e,r){We=We||ne(),e=e||{};var t=r instanceof We;this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,n=e.readableHighWaterMark,a=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:t&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new vl,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(ge||(ge=yt().StringDecoder),this.decoder=new ge(e.encoding),this.encoding=e.encoding)}function v(e){if(We=We||ne(),!(this instanceof v))return new v(e);this._readableState=new Kn(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Et.call(this)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});v.prototype.destroy=zn.destroy;v.prototype._undestroy=zn.undestroy;v.prototype._destroy=function(e,r){this.push(null),r(e)};v.prototype.push=function(e,r){var t=this._readableState,i;return t.objectMode?i=!0:typeof e=="string"&&(r=r||t.defaultEncoding,r!==t.encoding&&(e=Be.from(e,r),r=""),i=!0),Jn(this,e,r,!1,i)};v.prototype.unshift=function(e){return Jn(this,e,null,!0,!1)};function Jn(e,r,t,i,n){var a=e._readableState;if(r===null)a.reading=!1,Ml(e,a);else{var s;n||(s=Sl(a,r)),s?e.emit("error",s):a.objectMode||r&&r.length>0?(typeof r!="string"&&!a.objectMode&&Object.getPrototypeOf(r)!==Be.prototype&&(r=yl(r)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):_t(e,a,r,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!t?(r=a.decoder.write(r),a.objectMode||r.length!==0?_t(e,a,r,!1):Vn(e,a)):_t(e,a,r,!1))):i||(a.reading=!1)}return El(a)}function _t(e,r,t,i){r.flowing&&r.length===0&&!r.sync?(e.emit("data",t),e.read(0)):(r.length+=r.objectMode?1:t.length,i?r.buffer.unshift(t):r.buffer.push(t),r.needReadable&&yr(e)),Vn(e,r)}function Sl(e,r){var t;return!bl(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function El(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}v.prototype.isPaused=function(){return this._readableState.flowing===!1};v.prototype.setEncoding=function(e){return ge||(ge=yt().StringDecoder),this._readableState.decoder=new ge(e),this._readableState.encoding=e,this};var Bn=8388608;function xl(e){return e>=Bn?e=Bn:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Ln(e,r){return e<=0||r.length===0&&r.ended?0:r.objectMode?1:e!==e?r.flowing&&r.length?r.buffer.head.data.length:r.length:(e>r.highWaterMark&&(r.highWaterMark=xl(e)),e<=r.length?e:r.ended?r.length:(r.needReadable=!0,0))}v.prototype.read=function(e){m("read",e),e=parseInt(e,10);var r=this._readableState,t=e;if(e!==0&&(r.emittedReadable=!1),e===0&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return m("read: emitReadable",r.length,r.ended),r.length===0&&r.ended?St(this):yr(this),null;if(e=Ln(e,r),e===0&&r.ended)return r.length===0&&St(this),null;var i=r.needReadable;m("need readable",i),(r.length===0||r.length-e<r.highWaterMark)&&(i=!0,m("length less than watermark",i)),r.ended||r.reading?(i=!1,m("reading or ended",i)):i&&(m("do read"),r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=Ln(t,r)));var n;return e>0?n=$n(e,r):n=null,n===null?(r.needReadable=!0,e=0):r.length-=e,r.length===0&&(r.ended||(r.needReadable=!0),t!==e&&r.ended&&St(this)),n!==null&&this.emit("data",n),n};function Ml(e,r){if(!r.ended){if(r.decoder){var t=r.decoder.end();t&&t.length&&(r.buffer.push(t),r.length+=r.objectMode?1:t.length)}r.ended=!0,yr(e)}}function yr(e){var r=e._readableState;r.needReadable=!1,r.emittedReadable||(m("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?me.nextTick(Un,e):Un(e))}function Un(e){m("emit readable"),e.emit("readable"),xt(e)}function Vn(e,r){r.readingMore||(r.readingMore=!0,me.nextTick(Tl,e,r))}function Tl(e,r){for(var t=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(m("maybeReadMore read 0"),e.read(0),t!==r.length);)t=r.length;r.readingMore=!1}v.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};v.prototype.pipe=function(e,r){var t=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,m("pipe count=%d opts=%j",i.pipesCount,r);var n=(!r||r.end!==!1)&&e!==process.stdout&&e!==process.stderr,a=n?f:x;i.endEmitted?me.nextTick(a):t.once("end",a),e.on("unpipe",s);function s(q,k){m("onunpipe"),q===t&&k&&k.hasUnpiped===!1&&(k.hasUnpiped=!0,p())}function f(){m("onend"),e.end()}var u=Rl(t);e.on("drain",u);var c=!1;function p(){m("cleanup"),e.removeListener("close",H),e.removeListener("finish",I),e.removeListener("drain",u),e.removeListener("error",C),e.removeListener("unpipe",s),t.removeListener("end",f),t.removeListener("end",x),t.removeListener("data",R),c=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&u()}var y=!1;t.on("data",R);function R(q){m("ondata"),y=!1;var k=e.write(q);k===!1&&!y&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&Gn(i.pipes,e)!==-1)&&!c&&(m("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,y=!0),t.pause())}function C(q){m("onerror",q),x(),e.removeListener("error",C),Fn(e,"error")===0&&e.emit("error",q)}_l(e,"error",C);function H(){e.removeListener("finish",I),x()}e.once("close",H);function I(){m("onfinish"),e.removeListener("close",H),x()}e.once("finish",I);function x(){m("unpipe"),t.unpipe(e)}return e.emit("pipe",t),i.flowing||(m("pipe resume"),t.resume()),e};function Rl(e){return function(){var r=e._readableState;m("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Fn(e,"data")&&(r.flowing=!0,xt(e))}}v.prototype.unpipe=function(e){var r=this._readableState,t={hasUnpiped:!1};if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,e&&e.emit("unpipe",this,t),this);if(!e){var i=r.pipes,n=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,t);return this}var s=Gn(r.pipes,e);return s===-1?this:(r.pipes.splice(s,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this,t),this)};v.prototype.on=function(e,r){var t=Et.prototype.on.call(this,e,r);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&yr(this):me.nextTick(Cl,this))}return t};v.prototype.addListener=v.prototype.on;function Cl(e){m("readable nexttick read 0"),e.read(0)}v.prototype.resume=function(){var e=this._readableState;return e.flowing||(m("resume"),e.flowing=!0,Ol(this,e)),this};function Ol(e,r){r.resumeScheduled||(r.resumeScheduled=!0,me.nextTick(ql,e,r))}function ql(e,r){r.reading||(m("resume read 0"),e.read(0)),r.resumeScheduled=!1,r.awaitDrain=0,e.emit("resume"),xt(e),r.flowing&&!r.reading&&e.read(0)}v.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function xt(e){var r=e._readableState;for(m("flow",r.flowing);r.flowing&&e.read()!==null;);}v.prototype.wrap=function(e){var r=this,t=this._readableState,i=!1;e.on("end",function(){if(m("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&r.push(s)}r.push(null)}),e.on("data",function(s){if(m("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var f=r.push(s);f||(i=!0,e.pause())}});for(var n in e)this[n]===void 0&&typeof e[n]=="function"&&(this[n]=function(s){return function(){return e[s].apply(e,arguments)}}(n));for(var a=0;a<vt.length;a++)e.on(vt[a],this.emit.bind(this,vt[a]));return this._read=function(s){m("wrapped _read",s),i&&(i=!1,e.resume())},this};Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});v._fromList=$n;function $n(e,r){if(r.length===0)return null;var t;return r.objectMode?t=r.buffer.shift():!e||e>=r.length?(r.decoder?t=r.buffer.join(""):r.buffer.length===1?t=r.buffer.head.data:t=r.buffer.concat(r.length),r.buffer.clear()):t=jl(e,r.buffer,r.decoder),t}function jl(e,r,t){var i;return e<r.head.data.length?(i=r.head.data.slice(0,e),r.head.data=r.head.data.slice(e)):e===r.head.data.length?i=r.shift():i=t?Al(e,r):Nl(e,r),i}function Al(e,r){var t=r.head,i=1,n=t.data;for(e-=n.length;t=t.next;){var a=t.data,s=e>a.length?a.length:e;if(s===a.length?n+=a:n+=a.slice(0,e),e-=s,e===0){s===a.length?(++i,t.next?r.head=t.next:r.head=r.tail=null):(r.head=t,t.data=a.slice(s));break}++i}return r.length-=i,n}function Nl(e,r){var t=Be.allocUnsafe(e),i=r.head,n=1;for(i.data.copy(t),e-=i.data.length;i=i.next;){var a=i.data,s=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,s),e-=s,e===0){s===a.length?(++n,i.next?r.head=i.next:r.head=r.tail=null):(r.head=i,i.data=a.slice(s));break}++n}return r.length-=n,t}function St(e){var r=e._readableState;if(r.length>0)throw new Error('"endReadable()" called on non-empty stream');r.endEmitted||(r.ended=!0,me.nextTick(Pl,r,e))}function Pl(e,r){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,r.readable=!1,r.emit("end"))}function Gn(e,r){for(var t=0,i=e.length;t<i;t++)if(e[t]===r)return t;return-1}});var Mt=h((vd,Zn)=>{"use strict";o();l();Zn.exports=X;var br=ne(),Qn=Object.create(L());Qn.inherits=B();Qn.inherits(X,br);function Il(e,r){var t=this._transformState;t.transforming=!1;var i=t.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));t.writechunk=null,t.writecb=null,r!=null&&this.push(r),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function X(e){if(!(this instanceof X))return new X(e);br.call(this,e),this._transformState={afterTransform:Il.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",kl)}function kl(){var e=this;typeof this._flush=="function"?this._flush(function(r,t){Yn(e,r,t)}):Yn(this,null,null)}X.prototype.push=function(e,r){return this._transformState.needTransform=!1,br.prototype.push.call(this,e,r)};X.prototype._transform=function(e,r,t){throw new Error("_transform() is not implemented")};X.prototype._write=function(e,r,t){var i=this._transformState;if(i.writecb=t,i.writechunk=e,i.writeencoding=r,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};X.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};X.prototype._destroy=function(e,r){var t=this;br.prototype._destroy.call(this,e,function(i){r(i),t.emit("close")})};function Yn(e,r,t){if(r)return e.emit("error",r);if(t!=null&&e.push(t),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var ia=h((Ed,ta)=>{"use strict";o();l();ta.exports=Le;var ea=Mt(),ra=Object.create(L());ra.inherits=B();ra.inherits(Le,ea);function Le(e){if(!(this instanceof Le))return new Le(e);ea.call(this,e)}Le.prototype._transform=function(e,r,t){t(null,e)}});var aa=h((F,na)=>{o();l();F=na.exports=gt();F.Stream=F;F.Readable=F;F.Writable=ct();F.Duplex=ne();F.Transform=Mt();F.PassThrough=ia()});var ua=h((Cd,fa)=>{o();l();var{Duplex:la}=aa(),sa=Ar(),Dl=Qe(),oa={},Tt=class extends la{constructor(r={}){let t=Object.assign({},r,{objectMode:!0});super(t),this._substreams={}}createStream(r){if(!r)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[r])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');let t=new Rt({parent:this,name:r});return this._substreams[r]=t,Wl(this,i=>{t.destroy(i)}),t}ignoreStream(r){if(!r)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[r])throw new Error('ObjectMultiplex - Substream for name "${name}" already exists');this._substreams[r]=oa}_read(){}_write(r,t,i){let n=r.name,a=r.data;if(!n)return console.warn(`ObjectMultiplex - malformed chunk without name "${r}"`),i();let s=this._substreams[n];if(!s)return console.warn(`ObjectMultiplex - orphaned data for stream "${n}"`),i();s!==oa&&s.push(a),i()}},Rt=class extends la{constructor({parent:r,name:t}){super({objectMode:!0}),this._parent=r,this._name=t}_read(){}_write(r,t,i){this._parent.push({name:this._name,data:r}),i()}};fa.exports=Tt;function Wl(e,r){let t=Dl(r);sa(e,{readable:!1},t),sa(e,{writable:!1},t)}});var ca=h((jd,da)=>{"use strict";o();l();var Y=da.exports=function(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"};Y.writable=function(e){return Y(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object"};Y.readable=function(e){return Y(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object"};Y.duplex=function(e){return Y.writable(e)&&Y.readable(e)};Y.transform=function(e){return Y.duplex(e)&&typeof e._transform=="function"&&typeof e._transformState=="object"}});o();l();var Fe=_(Bt());o();l();o();l();var Ct=_(ci()),_r=_(vi()),ha=_(pn()),pa=_(ua()),vr=_(A()),ga=_(ca());o();l();var Bl={errors:{disconnected:()=>"Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"Disconnected from OKX Wallet background. Page reload required.",invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",expectStringMessage:()=>"Expect a string message",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidPermittedAccount:()=>"Invalid parameters: must provide an legal address that connect to wallet.",methodNotFound:e=>`The method '${e}' does not exist / is not available.`,invalidTransaction:()=>"Invalid transaction.",unauthorized:()=>"The requested method and/or account has not been authorized by the user.",methodNotSupport:()=>"Does not support the method.",invalidCosmosChainId:e=>`There is no chain info for ${e}`,rejected:()=>"User rejected the request.",invalidBitcoinAddress:e=>`Invalid address from ${e} `,invalidBitcoinTokenName:e=>`Invalid token name ${e}`,invalidParams:()=>"Invalid parameters.",cantWatchAsset:()=>"Can't watch Asset for current wallet"},event:{CONNECT_WALLET:"connectWallet",CONNECT:"connect",DISCONNECT:"disconnect",NOTIFICATION:"notification",WALLET_CHANGED:"walletChanged",ACCOUNT_CHANGED:"accountChanged",ACCOUNTS_CHANGED:"accountsChanged",NETWORK_CHANGED:"networkChanged",ISOMER_NETWORK_CHANGED:"isomerNetWorkChange",CHAIN_CHANGED:"chainChanged",STREAM_FAILED:"streamFailed",LOCKED:"locked",CLEAR_COOKIE:"clearCookie",SIGNIN:"signIn",SIGNOUT:"signOut"},code:{success:200,unauthorized:4e3,rejected:4001}},w=Bl;var Wd=(e,r,t)=>{if(!(0,ga.duplex)(e))throw new Error(w.errors.invalidDuplexStream());let i=new pa.default,n=(0,ha.default)();(0,Ct.default)(e,i,e),(0,Ct.default)(n.stream,i.createStream(r),n.stream,t);let a=new _r.JsonRpcEngine;return a.push((0,_r.createIdRemapMiddleware)()),a.push(n.middleware),{rpcEngine:a,jsonRpcConnection:n}},Bd=e=>{if(!e||typeof e!="object"||Array.isArray(e))throw vr.ethErrors.rpc.invalidRequest({message:w.errors.invalidRequestArgs(),data:e});let{method:r,params:t}=e;if(typeof r!="string"||r.length===0)throw vr.ethErrors.rpc.invalidRequest({message:w.errors.invalidRequestMethod(),data:e});if(t!==void 0&&!Array.isArray(t)&&(typeof t!="object"||t===null))throw vr.ethErrors.rpc.invalidRequest({message:w.errors.invalidRequestParams(),data:e})},Ld=(e,r)=>(t,i)=>{t||i.error?r(t||i.error):Array.isArray(i)?e(i):e(i.result)};o();l();function Ll(e){return!!e&&typeof e=="object"}function Ul(e){let r=Object.prototype.toString.call(e);return r==="[object RegExp]"||r==="[object Date]"}function Fl(e){return Ll(e)&&!Ul(e)}function Hl(e){return Array.isArray(e)?[]:{}}function Ue(e,r){return r.clone!==!1&&r.isMergeableObject(e)?Ot(Hl(e),e,r):e}function zl(e,r,t){return e.concat(r).map(i=>Ue(i,t))}function Kl(e,r){if(!r.customMerge)return Ot;let t=r.customMerge(e);return typeof t=="function"?t:Ot}function Jl(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(r=>e.propertyIsEnumerable(r)):[]}function ma(e){return Object.keys(e).concat(Jl(e))}function wa(e,r){try{return r in e}catch{return!1}}function Vl(e,r){return wa(e,r)&&!(Object.hasOwnProperty.call(e,r)&&Object.propertyIsEnumerable.call(e,r))}function $l(e,r,t){let i={};return t.isMergeableObject(e)&&ma(e).forEach(n=>{i[n]=Ue(e[n],t)}),ma(r).forEach(n=>{Vl(e,n)||(wa(e,n)&&t.isMergeableObject(r[n])?i[n]=Kl(n,t)(e[n],r[n],t):i[n]=Ue(r[n],t))}),i}function Ot(e,r,t){t=t||{},t.arrayMerge=t.arrayMerge||zl,t.isMergeableObject=t.isMergeableObject||Fl,t.cloneUnlessOtherwiseSpecified=Ue;let i=Array.isArray(r),n=Array.isArray(e);if(i===n){if(i)return t.arrayMerge(e,r,t)}else return Ue(r,t);return $l(e,r,t)}o();l();var qt=_(A());var ya=(e,r,t)=>{let i=r?.address;if(!i||i!==t)throw qt.ethErrors.rpc.invalidRequest({message:w.errors.invalidPermittedAccount(),data:e})},T=e=>{if(!e)throw qt.ethErrors.provider.unauthorized({message:w.errors.unauthorized()})};o();l();var ba=_(Bt()),va=_(A());var _a="solana",At={Transaction:"legacy",VersionedTransaction:0},rc=e=>{let r=null,i=(e?.address||[]).find(n=>n.name===_a);return i?.address&&(r=new Er(i.address)),{publicKey:r}},tc=e=>e?new Er(e):null,ic=e=>{let r=null;try{r=ze.from(e)}catch{console.log()}if(r)return r;try{r=Ke.deserialize(e)}catch{console.log()}return r},nc=(e,r)=>{T(r);let t={localType:_a,method:e.method,params:{},walletId:r?.walletId},{display:i,message:n,transaction:a,transactions:s,type:f,okxArgs:u}=e.params;if(i&&(t.params.display=i),n)return t.params.message=i?new TextEncoder().encode(n):n,t;if(a)return t.params={message:jt(a,f),okxArgs:u},t;if(s)return t.params={message:s.map(c=>jt(c.transaction,c.type))},t;throw va.ethErrors.rpc.invalidParams({message:w.errors.invalidRequestArgs(),data:e})};var ac=(e,r)=>({publicKey:e,signature:ba.default.decode(r)});o();l();var Sa=_(A()),Ea=_(kt());var xa="aptos",Gl=async()=>await Lt(Wt)||{},hc=e=>{let t=(e?.address||[]).find(i=>i.name===xa);return t?.address?{address:t.address,publicKey:""}:null};var pc=e=>{let r=e?.arguments;if(Array.isArray(r)){let t=[];r.forEach(i=>{if(i instanceof Uint8Array){let n=[];i.forEach(a=>{n.push(a)}),t.push(n)}else t.push(i)}),e={...e,arguments:t}}return e},gc=async(e,r)=>{let{localType:t}=await Gl();T(r);let i={localType:t||xa,method:e.method,params:{},walletId:r?.walletId},{address:n,application:a,chainId:s,nonce:f,message:u,transaction:c,options:p,extParams:y}=e.params;if(u&&(0,Ea.isString)(u))return n&&(i.params.address=r.address),a&&(i.params.application=e.origin),s&&(i.params.chainId=s),i.params.message=u,i.params.nonce=f,i;if(c)return i.params.transaction=c,i.params.options=p,i.params.extParams=y,i;throw Sa.ethErrors.rpc.invalidParams({message:w.errors.invalidRequestArgs(),data:e})};o();l();var Ma=_(A());var Ta="tron",_c=e=>(e?.address||[]).find(i=>i.name===Ta)?.address||null,Sc=(e,r)=>{T(r);let t={localType:Ta,method:e.method,params:{},walletId:r?.walletId},{message:i,transaction:n,signedTx:a,isOffline:s,extraData:f}=e.params;if(i)return t.params.message=i,t;if(n){t.params.transaction=n;let u=n.extParams;return u&&(t.params.extParams=u),s&&(t.params={...t.params,isOffline:s,extraData:f}),t}if(a){t.params.signedTx=a;let u=a.extParams;return u&&(t.params.extParams=u),t}throw Ma.ethErrors.rpc.invalidParams({message:w.errors.invalidRequestArgs(),data:e})};o();l();var Ra=_(A());var Cc=(e,r,{baseChain:t})=>{T(r);let i={localType:t,method:e.method,params:{},walletId:r?.walletId},{transaction:n,message:a}=e.params;if(n||a)return i.params={...e.params},i;throw Ra.ethErrors.rpc.invalidParams({message:w.errors.invalidRequestArgs(),data:e})};o();l();var Ca=_(A()),we=_(ka());function Xl(e,r){return r.includes(e)?e:null}var Pc=(e,r)=>{let i=(e?.address||[]).reduce((n,a)=>(r.includes(a.name)&&(n[a.name]=a.address),n),{});return Object.keys(i).length?{account:i,name:`${e.keyringName} - ${e.name}`}:null},Ic=(e,r)=>{let t=Xl(e,r);if(!t)throw new Error(w.errors.invalidCosmosChainId(e));return t},kc=(e,r)=>{if((e==="signArbitrary"||e==="verifyArbitrary"||e==="signEthereum")&&r?.data!==""&&(0,we.default)(r?.data))throw new Error(w.errors.invalidTransaction());if(e==="signAmino"&&(0,we.default)(r?.signDoc))throw new Error(w.errors.invalidTransaction());if(e==="signDirect"&&((0,we.default)(r?.signDoc)||(0,we.default)(r?.signDoc?.bodyBytes)||(0,we.default)(r?.signDoc?.authInfoBytes)))throw new Error(w.errors.invalidTransaction())},Dc=(e,r,t)=>{T(r);let i={localType:t,method:e.method,params:{},walletId:r?.walletId},{transaction:n}=e.params;if(n)return n.extParams&&(i.params.extParams=n.extParams,delete n.extParams),i.params.transaction=n,i;throw Ca.ethErrors.rpc.invalidParams({message:w.errors.invalidRequestArgs(),data:e})};o();l();var Nt=_(A()),ye=_(kt());Ia();var Kc=(e,{localType:r})=>{let t=e?.address||[],i=r,n=t.find(a=>a.name===i);return n?.address?{address:n.address,publicKey:"",compressedPublicKey:""}:null},Oa=(e,{accountsMap:r,localType:t})=>{if(e.length>0){let i={},n={};Object.values(r[t]).forEach(({publicKey:a,address:s})=>{i[a]=s,n[s]=a}),e=e.map(a=>{let{index:s,address:f,publicKey:u,sighashTypes:c}=a;if((0,ye.isNaN)(Number(s)))throw new Error("invalid index in toSignInput");if(c?.map(Number)?.some(ye.isNaN))throw new Error("invalid sighash type in toSignInput");if(!f&&!u)throw new Error("no address or public key in toSignInput");if(u){if(!i[u]||!(0,ye.isUndefined)(f)&&i[u]!==f)throw new Error("invalid public key in toSignInput");return{...a,address:i[a.publicKey]}}if(f){if(!n[f]||!(0,ye.isUndefined)(u)&&n[f]!==u)throw new Error("invalid address in toSignInput");return{...a,publicKey:n[a.address]}}return a})}return e},Jc=async(e,r,{keyringController:t})=>{T(r);let i=e?.params?.localType||Dt,n={localType:i,method:e.method,params:{},walletId:r?.walletId},{transaction:a,transfer:s,message:f,type:u}=e.params;if(a){if(e.method===Sr.SIGNPSBT){let{psbtOpts:c={}}=a,p=c.toSignInputs||[],{accountsMap:y}=await t.getAccountInfoByWalletId(r?.walletId);p.length>0&&(p=await Oa(p,{accountsMap:y,localType:i}),a.psbtOpts.toSignInputs=p)}if(e.method===Sr.SIGNPSBTS){let{accountsMap:c}=await t.getAccountInfoByWalletId(r?.walletId),p=a.psbts;if(!Array.isArray(p))throw Nt.ethErrors.rpc.invalidParams({message:w.errors.invalidParams(),data:e});let y=(a?.psbtOpts||[]).map(R=>{let C=Oa(R.toSignInputs||[],{accountsMap:c,localType:i});return{...R,toSignInputs:C}});a.psbtOpts=y}n.params.transaction=a}if(s&&(n.params.transfer=s),f&&(n.params={message:f,...e.params}),a||s||f&&(u=="ecdsa"||u=="bip322-simple"))return ya(e,r,(a||s)?.from||e.params?.from),n;throw Nt.ethErrors.rpc.invalidParams({message:w.errors.invalidRequestArgs(),data:e})};o();l();var qa=_(A());var Qc=(e,r,{baseChain:t})=>{T(r);let i={localType:t,method:e.method,params:{},walletId:r?.walletId},{transactions:n,data:a}=e.params;if(n)return i.params={...e.params,transactions:Array.isArray(n)?n:[n]},i;if(a)return i.params={...e.params},i;throw qa.ethErrors.rpc.invalidParams({message:w.errors.invalidRequestArgs(),data:e})};o();l();var ja=_(A());var nh=(e,r,{baseChain:t})=>{T(r);let i={localType:t,method:e.method,params:{},walletId:r?.walletId},{event:n,message:a}=e.params;if(n)return i.params={event:n},i;if(a)return i.params={message:a},i;throw ja.ethErrors.rpc.invalidParams({message:w.errors.invalidRequestArgs(),data:e})};var Mh=(e,r=Z.TRANSACTION)=>Fe.default.encode(r===Z.TRANSACTION?e.serialize({requireAllSignatures:!1,verifySignatures:!1}):e.serialize()),jt=(e,r=Z.TRANSACTION)=>{let t=Fe.default.decode(e);return r===Z.TRANSACTION?ze.from(t):Ke.deserialize(t)},Th=e=>{switch(e?.version){case At.Transaction:case At.VersionedTransaction:return Z.VERSIONED_TRANSACTION;default:return Z.TRANSACTION}},Rh=e=>Fe.default.encode(e),Ch=e=>Fe.default.decode(e);export{zt as a,A as b,ci as c,vi as d,cn as e,ua as f,w as g,Wd as h,Bd as i,Ld as j,Ot as k,ya as l,T as m,rc as n,tc as o,ic as p,nc as q,ac as r,Gl as s,hc as t,pc as u,gc as v,_c as w,Sc as x,Cc as y,Pc as z,Ic as A,kc as B,Dc as C,Kc as D,Jc as E,Qc as F,nh as G,Mh as H,jt as I,Th as J,Rh as K,Ch as L};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-Y6FCLKTO.js.map
