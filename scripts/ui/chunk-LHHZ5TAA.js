import{f as R,g as N,h as u,l as rt}from"./chunk-PI6QLVMS.js";import{M as D,U as I,X as et,b as p,c as U,i as b}from"./chunk-QY4HIIR3.js";import{a as k}from"./chunk-XFWUEPSK.js";import{c as m,d,f as tt}from"./chunk-MNNY2ODL.js";import{b as O,c as Z}from"./chunk-OXVQDEZW.js";import{h as C,k as v,m as B}from"./chunk-X3G52GGX.js";import{c as M}from"./chunk-WUKT6J7S.js";import{Qa as P,f as h,h as V,hb as X}from"./chunk-QG673PNL.js";import{a as Q}from"./chunk-Y62GSKHT.js";import{b as _,d as z,f,l as process,m as g,o as L}from"./chunk-REC7XVZY.js";function at(t,e){return e===l.LOCALE_TYPE.default?t:`${e}_${t}`}async function c(t,e,r){c.cache||(c.cache={});let n=at(t,e);if(r&&c.cache[n])return c.cache[n];try{let{data:o}=await C(O.i18nConfigUrl(t,e)),a=e===l.LOCALE_TYPE.default?ot(o):o,{local:s}=j.default.storage;return s.set({[n]:a}),c.cache[n]=a,a}catch(o){W.default.error(o)}return null}async function st(t,e=l.LOCALE_TYPE.default){return c(t,e)}async function S(t,e=l.LOCALE_TYPE.default,r=!0){if(process.env.ASSETS_BUILD_TYPE===h.PREPUB||process.env.ASSETS_BUILD_TYPE===h.PUBLISH){let n=await c(t,e,r);if(n)return n}return st(t,e)}var W,j,l,ot,xt,$=_(()=>{"use strict";g();L();W=f(k()),j=f(Q()),l=f(M());Z();V();B();ot=(t={})=>{let e={};return Object.entries(t).forEach(([r,n])=>{e[r]={message:n}}),e},xt=(t,e,r,n={})=>{if(!e||!e[r])return null;let a=e[r].message,s=Object.values(n);return Boolean(s&&s.length)&&(a=a.split(/(\$\d)|(\{\w+\})/gu).map(i=>{if(!i)return i;let E=i.match(/\$(\d)|\{(\w+)\}/u);if(!E)return i;let T=/\$(\d)/u.test(i),q=T?Number(E[1])-1:E[2];return(T?s:n)[q]}).join("")),a}});var Lt={};z(Lt,{forceUpdateMetamaskState:()=>G,forceUpdateMetamaskStateLightly:()=>mt,getChainInfo:()=>ct,getCurrentWindowTab:()=>gt,lockMetamask:()=>ft,setCurrentLocale:()=>Y,setCurrentWindowTab:()=>J,setLastActiveTime:()=>lt,updateCurrentLocale:()=>x,updateMetamaskState:()=>y,updateMetamaskStateFromBackground:()=>F,updateMetamaskStatePartly:()=>H,updatePartialMetamaskState:()=>ut});function Y(t,e,r,n){return{type:D,value:{locale:t,messages:e,okdMessages:r,dexMessages:n}}}async function ct(){m().getChainFromServer()}function x(t){return async e=>{e(R());try{let r=await S(t),n=await S(t,w.LOCALE_TYPE.okd),o=await S(t,w.LOCALE_TYPE.dex);await d().setCurrentLocale(t),e(Y(t,r,n,o)),v(t)}catch(r){e(u(r.message));return}finally{e(N())}}}function H(t){return(e,r)=>{let{metamask:n}=r();t={...n,...t};let{currentLocale:o,selectedAddress:a}=n,{currentLocale:s,selectedAddress:A}=t;o&&s&&o!==s&&e(x(s)),a!==A&&e({type:U}),e({type:p,value:t})}}function y(t){return(e,r)=>{let{metamask:n}=r(),{currentLocale:o}=n,{currentLocale:a}=t;o&&a&&o!==a&&e(x(a)),e({type:p,value:t})}}function ut(t){return e=>{t.chainList&&P(t.chainList),e({type:p,value:t})}}function ft(){return K.default.debug("background.setLocked"),t=>it().then(()=>F()).catch(e=>{throw t(u(e.message)),e}).then(e=>{t(y(e)),t({type:b})}).catch(()=>{t({type:b})})}async function G(t){let e;try{e=await d().getState()}catch(r){throw t(u(r.message)),r}return t(y(e)),e}async function mt(t){let e={};try{e=await d().getLightState()}catch(r){throw t(u(r.message)),r}try{G(t)}catch(r){console.log(r)}return t(H(e)),e}function lt(){return t=>{m().setLastActiveTime(e=>{e&&t(u(e.message))})}}function J(t){return{type:I,value:t}}function gt(){return async t=>{let e=await globalThis.platform.currentTab();t(J(e))}}var K,w,F,it,dt=_(()=>{"use strict";g();L();K=f(k());tt();$();B();w=f(M());rt();X();et();F=()=>new Promise((t,e)=>{m().getState((r,n)=>{if(r){e(r);return}t(n)})});it=()=>new Promise((t,e)=>{m().setLocked(r=>{if(r){e(r);return}t()})})});export{xt as a,st as b,$ as c,ct as d,x as e,F as f,y as g,ut as h,ft as i,G as j,mt as k,lt as l,gt as m,Lt as n,dt as o};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-LHHZ5TAA.js.map
