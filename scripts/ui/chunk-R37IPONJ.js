import{a as U}from"./chunk-36P2OA3A.js";import{H as f,J as T}from"./chunk-Y6FCLKTO.js";import{q as P}from"./chunk-7KCWBFQ2.js";import{T as p,V as C,_ as N,aa as d,t as l,u as A,v as u}from"./chunk-NAI3K3VA.js";import{b as I,c as z}from"./chunk-AOA7NX2Y.js";import{Kb as F,kb as h,ob as m,sc as S}from"./chunk-X7YMANPZ.js";import{d as R}from"./chunk-IYL2DA3V.js";import{f as _,m as y,o as g}from"./chunk-EQYVU4XP.js";y();g();var w=_(R());F();z();async function D(t){let{SolWallet:r}=await S(),i=new r,o=[];try{let e=(t||[]).filter(Boolean);e.length>0&&(o=await i.deserializeMessages({data:e}))}catch{}return(o||[]).reduce((e,n)=>{let{deserialized:a,computeUnitLimit:c,computeUnitPrice:s}=n||{};return a&&(e=h(e,U(c,s))),e},"0")}var b="SetComputeUnitLimit",x="SetComputeUnitPrice";function L(t,r,i){if(m(r||0,0)||m(i||0,0)||t.some(c=>{try{let s=N.decodeInstructionType(c);return s===b||s===x}catch{return!1}}))return t;let e=[...t],n=d.setComputeUnitPrice({microLamports:r});e.unshift(n);let a=d.setComputeUnitLimit({units:i});return e.unshift(a),e}async function B(t,r,i){let o=new C(I.requestSolanaMethodUrlToFullnode);o._rpcRequest=P;let e=await Promise.all((t.message?.addressTableLookups||[]).map(s=>o.getAccountInfo(s.accountKey).then(M=>new p({key:s.accountKey,state:p.deserialize(M.data)})))),n=A.decompile(t.message,{addressLookupTableAccounts:e});n.instructions=L(n.instructions,r,i);let a=new u(n.compileToV0Message(e)),c=T(a);return f(a,c)}async function G(t,r,i){return new Promise(o=>{try{let e=w.base.fromBase58(t);try{e=l.from(e)}catch{e=u.deserialize(e)}if(e.signatures&&e.signatures.length>1){o(t);return}if(e instanceof l){e.instructions=L(e.instructions,r,i);let n=T(e);o(f(e,n))}else e instanceof u?B(e,r,i).then(o).catch(()=>{o(t)}):o(t)}catch{o(t)}})}export{D as a,G as b};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-R37IPONJ.js.map
