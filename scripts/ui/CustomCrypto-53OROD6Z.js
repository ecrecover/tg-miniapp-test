import{a as Fe}from"./chunk-T5SGZQDD.js";import{a as ke}from"./chunk-3DHD7TXN.js";import"./chunk-J66MHRNB.js";import{a as Ee}from"./chunk-2PABOPC7.js";import"./chunk-IHPHPUUG.js";import"./chunk-ZEWK7OGU.js";import"./chunk-QVA4WXOQ.js";import"./chunk-EX22SDGB.js";import"./chunk-NHGZUGLZ.js";import"./chunk-G5LEAVCY.js";import"./chunk-ACHWU2H6.js";import"./chunk-ZPFBKNRM.js";import"./chunk-7DP5LYUM.js";import{a as Y}from"./chunk-BVXKJJ4A.js";import"./chunk-TBBE7OKY.js";import"./chunk-7HJDVUH5.js";import"./chunk-BLQO46DT.js";import{a as ve,b as ee}from"./chunk-5NXPDYL5.js";import"./chunk-LQAOHG2H.js";import"./chunk-WNQ6F6VV.js";import"./chunk-LEADLFDQ.js";import"./chunk-3YH3AGVS.js";import"./chunk-TK6JYPIW.js";import"./chunk-OS6E6KVM.js";import"./chunk-WY46TT4P.js";import"./chunk-MTMUCMTY.js";import"./chunk-IINHHLHP.js";import"./chunk-DY2YURLY.js";import"./chunk-KXZSXP3G.js";import"./chunk-6HXVFU7V.js";import"./chunk-D5FMQLJG.js";import"./chunk-5GMHHIH5.js";import"./chunk-QLUP7GYN.js";import"./chunk-7Y44NCE5.js";import"./chunk-BKPOG6ZD.js";import"./chunk-OZMVWMFO.js";import"./chunk-KTO7CPX7.js";import"./chunk-P3XTPXPO.js";import"./chunk-FQWGOLDH.js";import"./chunk-QEPBNPHF.js";import"./chunk-3JLS3TGD.js";import"./chunk-KDP5Z4RF.js";import"./chunk-W234FNSM.js";import"./chunk-DDO6HXRN.js";import"./chunk-CLWWTOKP.js";import{a as Te}from"./chunk-KZ2PCELG.js";import"./chunk-C7ZG4INB.js";import{a as Se}from"./chunk-J5ANWCEO.js";import"./chunk-VMO2INN3.js";import"./chunk-J4TF3RT7.js";import{o as ge,q as Z}from"./chunk-6FOZGMAL.js";import{G as be,a as Ie,k as xe,l as we}from"./chunk-2MV3WEYP.js";import{s as N}from"./chunk-HPXM6RSK.js";import"./chunk-IUIJ46C3.js";import"./chunk-KZ3ZU675.js";import{a as X}from"./chunk-NJ5CWPUY.js";import"./chunk-UMJMJOW4.js";import"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import"./chunk-O5JCC6KG.js";import"./chunk-MAIAJ7GD.js";import"./chunk-4PGNX6E2.js";import"./chunk-MGLVPWSV.js";import"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import"./chunk-AMVK42SC.js";import"./chunk-D6RIE45O.js";import"./chunk-XCAARJ7Q.js";import{c as ye}from"./chunk-JXCCIV3J.js";import"./chunk-AOA7NX2Y.js";import"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import{aa as de,ab as Ce,ca as pe,db as J,hb as he,ma as F,oa as _e,q as ue,ra as fe,za as W}from"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import{G as H,p as v,v as V}from"./chunk-SOHTSUTI.js";import{I as P,w as n}from"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-E24EBHFY.js";import{M as le,S as me,Y as B,c as Ye}from"./chunk-V4F2JFTP.js";import{a as k}from"./chunk-6DDC4Y2S.js";import"./chunk-TEY24VZN.js";import"./chunk-RKHQOOTU.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-F4JTGWJH.js";import"./chunk-YUXYCITH.js";import"./chunk-RMV3AS5X.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{f as y,m as i,o as a}from"./chunk-EQYVU4XP.js";i();a();var s=y(k()),De=y(X());P();i();a();var A=y(k()),j=y(X());P();var Ne=y(Ye());var je=(e,t)=>{let o=e==="protocol"?we:xe;if(t){let r=new URLSearchParams(t).toString();return`${o}?${r}`}return o},Qe=({selectedInfo:e,category:t})=>{let o=(0,j.useHistory)(),r=(0,j.useLocation)(),c=new URLSearchParams(r.search);return A.default.createElement("div",{className:"chain-select",onClick:()=>{let u={...Object.fromEntries(c.entries()),pageType:"customCrypto"};o.push(je(t,u))}},A.default.createElement("div",{className:"chain-select-title"},t==="protocol"?n("extension_defi_info_title_protocol"):n("wallet_custom_crypto_subtitle_select_network")),A.default.createElement("div",{className:"chain-select-box"},t==="protocol"?null:A.default.createElement("img",{className:"chain-select-icon",src:e?.imageUrl||e?.logo,alt:"chain"}),A.default.createElement("div",{className:"chain-select-name"},e?.name),A.default.createElement(le,{className:(0,Ne.default)("okds-arrow-chevron-right-centered-md","chain-select-arrow")})))},Q=Qe;i();a();var te=y(k());var $e=({currentAddress:e,addressInputTitle:t,errorText:o,placeHolderText:r,addressIsInvalid:c,updateCustomCoin:u})=>te.default.createElement("div",{className:"contract-address-box"},te.default.createElement(v.TextArea,{autoResize:!0,value:e,title:t,size:v.SIZE.xl,error:c&&o,errorType:v.TIP_TYPE.always,placeholder:r,onChange:l=>{u(l.target.value)}})),Ae=$e;i();a();var S=y(k());P();W();var Ge=({customCoin:e})=>{let t=(o,r)=>e.localType===ue?null:S.default.createElement("div",{className:"crypto-base-info"},S.default.createElement("div",{className:"crypto-base-info-title"},o),S.default.createElement("input",{disabled:!0,className:"crypto-base-info-box",value:r.toString()}));return S.default.createElement(S.default.Fragment,null,e?.symbol&&S.default.createElement(S.default.Fragment,null,t(n("wallet_manage_crypto_subtitle_custom_crpto_symbol"),e.symbol),t(n("wallet_manage_crypto_custom_coin_subtitle_decimals"),e.decimals)))},Oe=Ge;i();a();he();W();var oe={[F]:{title:"wallet_extension_create_input_title_contract_token_symbol",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[Ce]:{title:"extension_wallet_customcoin_text_currency_symbol",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[pe]:{title:"extension_wallet_customcoin_text_currency_symbol",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[_e]:{title:"extension_wallet_cardano_text_fingerprint",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[fe]:{title:"wallet_extension_import_title_jetton_master",error:"developer_mode_manage_errortip_request_failed",placeholder:"wallet_extension_import_input_jetton_master"},default:{title:"wallet_transaction_history_subtitle_contract_address",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"}};i();a();var M=y(k());P();W();i();a();var O=y(k());P();var Ke=({isFacet:e,onToggle:t})=>{let o=[{value:"ERC20",label:"ERC20"},{value:"Facet",label:"Facet"}],[r,c]=(0,O.useState)(e?"Facet":"ERC20"),u=(0,O.useCallback)((l={value:"ERC20"})=>{c(l.value),t(l.value==="Facet")},[]);return O.default.createElement("div",{className:"chain-select-isfacet"},O.default.createElement(V,{title:n("extension_defi_info_title_protocol"),value:r,options:o,onChange:u,size:V.SIZE.lg,searchable:!1,dropMode:!0}))},Me=Ke;var Ve=({selectedNetwork:e,account:t,accountIsInvalid:o,accountErrorMessage:r,setAccount:c,updateCustomCoin:u,accountRef:l,setProtocol:x,protocol:_,protocolList:f,isFacet:d,setIsFacet:C})=>{let h=Y(),p=Number(h.get("protocolId"));return(0,M.useEffect)(()=>{let m=null;if(!N(e)){x("");return}if(p&&f?.length&&(m=f.find(w=>w.protocolId===p)),!m&&f.length>0&&(m=f[0]),m){let w={...m,name:m.protocolName};x(w)}},[f,e]),{renderCustomForm:()=>e?.coinId===F?M.default.createElement("div",{className:"contract-address-box"},M.default.createElement(v.TextArea,{autoResize:!0,value:t,title:n("wallet_extension_create_input_title_contract_account_name"),size:v.SIZE.xl,error:o&&r,errorType:v.TIP_TYPE.always,placeholder:n("wallet_extension_create_input_title_contract_token_symbol"),onChange:m=>{c(m.target.value),l.current=m.target.value,u()}})):e?.coinId===de?M.default.createElement(Me,{isFacet:d,onToggle:m=>{C(m),u()}}):N(e)&&_?M.default.createElement(Q,{selectedInfo:_,category:"protocol"}):null}},Pe=Ve;i();a();var T=y(k());W();var Je=(e,t,o,r,c,u)=>{let[l,x]=(0,T.useState)({}),[_,f]=(0,T.useState)(!1),[d,C]=(0,T.useState)(""),[h,p]=(0,T.useState)(!0),[D,m]=(0,T.useState)(""),[w,E]=(0,T.useState)(!1),[U,L]=(0,T.useState)(!1),R=g=>`facet_${g}`,{run:$}=Z(async({addr:g,accountName:q,protocolId:G})=>{L(!1);let b;try{b=await ve({contractAddress:o?R(g):g,chainInfo:e,account:q,isFacet:o,...N(e)?{protocolId:G}:{}})}catch(K){b={},K?.data?.originalError?.data?.code==="ERR_NETWORK"&&L(!0)}if(g===t){if(x(b),e.coinId===F&&!b?.accountValid){f(!0),C(b.msg),p(!0);return}else if(!D&&e?.coinId===F){E(!1),p(!0);return}f(!1),C(""),g&&b?.symbol?(E(!1),p(!1)):g?(E(!0),p(!0)):(E(!1),p(!0))}},{wait:500});return{customCoin:l,accountIsInvalid:_,accountErrorMessage:d,stateOnLock:h,account:D,addressIsInvalid:w,setAccount:m,updateCustomCoin:()=>{x({}),p(!0),$({addr:r.current,accountName:c.current,protocolId:u?.protocolId})},networkError:U}},Le=Je;i();a();var Be=y(X());P();i();a();function Xe(e,t){if(e.key&&t.key)return e.key===t.key;if(e.coinId&&t.coinId)return e.coinId===t.coinId;let o=e.address||e.contractAddress,r=t.address||t.contractAddress;return o&&r?o.toLowerCase()===r.toLowerCase()&&e.localType===t.localType:!1}function re(e,t){for(let o=0;o<t.length;o++){let r=t[o];if(Xe(r,e)||r.childrenCoin&&re(e,r.childrenCoin))return!0}return!1}he();function ne(e,t,o){let r=(0,Be.useHistory)(),[c,{setTrue:u,setFalse:l}]=ge(),x=Ee(),_=ke(),f=async C=>{t.coinId===J&&await _({...e,baseCoinId:J,address:e.contractAddress},async()=>{C||await ee(e)},l)},{run:d}=Z(async()=>{u();let C=re(e,x);if(await f(C),C){H.error(n("wallet_manage_crypto_errortip_crypto_added")),l();return}try{await ee({...e,protocolId:o}),H.success(n("wallet_manage_crypto_toast_custom_crypto_success")),r.push(Ie)}catch(h){let p=h?.data?.originalError?.msg||n("wallet_extenshion_toast_add_failed");H.error(p)}finally{l()}},{wait:100});return{isSubmitting:c,submitAction:d}}i();a();var et="Ethereum",tt=()=>{let e=(0,De.useHistory)(),t=s.default.useRef(""),o=s.default.useRef(""),r=s.default.useRef(""),[c,u]=(0,s.useState)(!1),[l,x]=(0,s.useState)(""),[_,f]=(0,s.useState)(""),[d,C]=(0,s.useState)({imageUrl:"",name:"",coinId:-1}),{data:{supportNetworkList:h,protocolList:p}={}}=Fe(d.coinId),m=Y().get("network"),{title:w,error:E,placeholder:U,placeholderName:L,placeholderId:R}=oe[d?.coinId]||oe.default,$=(0,s.useMemo)(()=>n(w),[w]),se=(0,s.useMemo)(()=>N(d)&&_?.searchType?_.searchType===1?n(L):n(R):n(U),[U,R,L,_.searchType,d?.coinId]),{customCoin:g,accountIsInvalid:q,accountErrorMessage:G,stateOnLock:b,account:K,addressIsInvalid:ie,setAccount:Ue,updateCustomCoin:ae,networkError:ce}=Le(d,l,c,r,t,_),Re=(0,s.useMemo)(()=>ce?n("developer_mode_manage_errortip_network_error"):n(E),[E,ce]),{renderCustomForm:qe}=Pe({selectedNetwork:d,account:K,accountIsInvalid:q,accountErrorMessage:G,setAccount:Ue,updateCustomCoin:ae,accountRef:t,protocolRef:o,setProtocol:f,protocol:_,protocolList:p,isFacet:c,setIsFacet:u}),{isSubmitting:ze,submitAction:He}=ne(g,d,_.protocolId);return(0,s.useEffect)(()=>{async function z(){if(h.length>0){let We=m||et;C(h.filter(Ze=>Ze.name===We)[0]||h[0])}}z()},[h]),s.default.createElement("div",{className:"custom-crypto-page main-container"},s.default.createElement(Te,{title:n("wallet_manage_crypto_maintitle_custom_crypto"),onBack:()=>{e.push(be)}}),s.default.createElement(ye.Spin,{loading:!h?.length||!p?.length,size:me.SIZE.lg},s.default.createElement("div",{className:"custom-crypto--body"},s.default.createElement(Q,{selectedInfo:d}),qe(),s.default.createElement(Ae,{updateCustomCoin:z=>{r.current=z,x(z),ae()},currentAddress:l,addressInputTitle:$,errorText:Re,placeHolderText:se,addressIsInvalid:ie}),s.default.createElement(Oe,{customCoin:g})),s.default.createElement(Se.FooterActions,null,s.default.createElement(B,{onClick:He,size:B.SIZE.lg,type:B.TYPE.highlight,category:B.CATEGORY.fill,loading:ze,disabled:ie||b||q},n("wallet_set_password_btn_confirm")))))},ko=tt;export{ko as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=CustomCrypto-53OROD6Z.js.map
