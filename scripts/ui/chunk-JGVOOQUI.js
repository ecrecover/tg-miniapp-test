import{db as m,lb as d,zb as a}from"./chunk-FK3ETA6I.js";import{m as P}from"./chunk-QG673PNL.js";import{f as b,m as o,o as i}from"./chunk-REC7XVZY.js";o();i();var f=b(P());o();i();var p={exposedAccounts:"exposedAccounts",primaryAccountOnly:"primaryAccountOnly"};function g(e){return e.metamask.domains||{}}function A(e){return e.metamask.domainMetadata||{}}function _(e){let t=g(e);return Object.keys(t).reduce((n,r)=>{let s=x(l(t[r]));return s.length>0&&(n[r]=s),n},{})}function j(e){let t=m(e),n=g(e),r=A(e),s=[];return(0,f.forOwn)(n,(c,u)=>{if(!D(c).includes(t))return;let{extensionId:y,name:k,icon:v,host:O,isOkx:C}=r[u]||{};s.push({extensionId:y,origin:u,isOkx:C,name:k,icon:v,host:O})}),s}function D(e){return x(l(e))}function l(e={}){return Array.isArray(e.permissions)?e.permissions.find(t=>t.parentCapability==="eth_accounts"):{}}function x(e){let t=T(e);return t&&Array.isArray(t.value)?t.value:[]}function T(e={}){return Array.isArray(e.caveats)&&e.caveats.find(t=>t.name===p.exposedAccounts)}function B(e){let{permissionsHistory:t={}}=e.metamask;return Object.keys(t).reduce((n,r)=>{let s=JSON.parse(JSON.stringify(t[r].eth_accounts));return{...n,[r]:s}},{})}function w(e){let t=A(e);return Object.values(t).reduce((n,{host:r})=>(r&&(n[r]?n[r]+=1:n[r]=1),n),{})}function I(e){return(e.metamask.permissionsRequests||[]).map(n=>({...n,time:e.metamask.pendingApprovals[n.metadata.id]?.time||Date.now(),providerType:e.metamask.pendingApprovals[n.metadata.id]?.requestData?.providerType,method:e.metamask.pendingApprovals[n.metadata.id]?.requestData?.method,exts:e.metamask.pendingApprovals[n.metadata.id]?.requestData?.exts}))}function q(e){let t=I(e);return t&&t[0]?t[t.length-1]:null}function H(e){let t=q(e);return t&&t.metadata?t.metadata.id:null}function W(e){let{domainMetadata:t={}}=e.metamask,n=a(e);return{...t[n],origin:n}}function J(e){let{domains:t={}}=e.metamask,n=a(e);return Boolean(t[n])}function V(e){let{domains:t={}}=e.metamask,n=a(e);if(t[n]){let r=t[n].permissions.filter(s=>s.parentCapability==="eth_accounts");if(r.length){let s=r[0].caveats.filter(c=>c.name==="exposedAccounts");if(s.length)return s[0].value}}return[]}function $(e){let t=d(e);return`${t.keyringName} - ${t.walletName}`}export{p as a,A as b,_ as c,j as d,B as e,w as f,I as g,q as h,H as i,W as j,J as k,V as l,$ as m};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-JGVOOQUI.js.map
