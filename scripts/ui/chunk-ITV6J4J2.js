import{a as En}from"./chunk-E4R5GU2A.js";import{g as Y}from"./chunk-2FULUWWG.js";import{a as sr,b as Pe,o as Ee,s as ar}from"./chunk-4X6ZAX3L.js";import{c as N}from"./chunk-4QSQKIBZ.js";import{m as hn}from"./chunk-QG673PNL.js";import{G as ir,d as K,n as or}from"./chunk-6MTHEPGF.js";import{B as S,I as fn}from"./chunk-ZQQ7HNWV.js";import{Y as D}from"./chunk-ZOQTSYT4.js";import{a as pn}from"./chunk-ADZWCU3Q.js";import{e as nr,f as dn}from"./chunk-FHQVMQUK.js";import{c as x,f as be,h as te,l as process,m as l,n as h,o as u}from"./chunk-REC7XVZY.js";var ne=x((ms,lr)=>{l();u();var Sn="2.0.0",Dn=Number.MAX_SAFE_INTEGER||9007199254740991,Rn=16;lr.exports={SEMVER_SPEC_VERSION:Sn,MAX_LENGTH:256,MAX_SAFE_INTEGER:Dn,MAX_SAFE_COMPONENT_LENGTH:Rn}});var oe=x((xs,ur)=>{l();u();var On=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};ur.exports=On});var H=x((G,dr)=>{l();u();var{MAX_SAFE_COMPONENT_LENGTH:qe}=ne(),Ln=oe();G=dr.exports={};var Cn=G.re=[],E=G.src=[],m=G.t={},$n=0,w=(t,e,r)=>{let n=$n++;Ln(n,e),m[t]=n,E[n]=e,Cn[n]=new RegExp(e,r?"g":void 0)};w("NUMERICIDENTIFIER","0|[1-9]\\d*");w("NUMERICIDENTIFIERLOOSE","[0-9]+");w("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");w("MAINVERSION",`(${E[m.NUMERICIDENTIFIER]})\\.(${E[m.NUMERICIDENTIFIER]})\\.(${E[m.NUMERICIDENTIFIER]})`);w("MAINVERSIONLOOSE",`(${E[m.NUMERICIDENTIFIERLOOSE]})\\.(${E[m.NUMERICIDENTIFIERLOOSE]})\\.(${E[m.NUMERICIDENTIFIERLOOSE]})`);w("PRERELEASEIDENTIFIER",`(?:${E[m.NUMERICIDENTIFIER]}|${E[m.NONNUMERICIDENTIFIER]})`);w("PRERELEASEIDENTIFIERLOOSE",`(?:${E[m.NUMERICIDENTIFIERLOOSE]}|${E[m.NONNUMERICIDENTIFIER]})`);w("PRERELEASE",`(?:-(${E[m.PRERELEASEIDENTIFIER]}(?:\\.${E[m.PRERELEASEIDENTIFIER]})*))`);w("PRERELEASELOOSE",`(?:-?(${E[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${E[m.PRERELEASEIDENTIFIERLOOSE]})*))`);w("BUILDIDENTIFIER","[0-9A-Za-z-]+");w("BUILD",`(?:\\+(${E[m.BUILDIDENTIFIER]}(?:\\.${E[m.BUILDIDENTIFIER]})*))`);w("FULLPLAIN",`v?${E[m.MAINVERSION]}${E[m.PRERELEASE]}?${E[m.BUILD]}?`);w("FULL",`^${E[m.FULLPLAIN]}$`);w("LOOSEPLAIN",`[v=\\s]*${E[m.MAINVERSIONLOOSE]}${E[m.PRERELEASELOOSE]}?${E[m.BUILD]}?`);w("LOOSE",`^${E[m.LOOSEPLAIN]}$`);w("GTLT","((?:<|>)?=?)");w("XRANGEIDENTIFIERLOOSE",`${E[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);w("XRANGEIDENTIFIER",`${E[m.NUMERICIDENTIFIER]}|x|X|\\*`);w("XRANGEPLAIN",`[v=\\s]*(${E[m.XRANGEIDENTIFIER]})(?:\\.(${E[m.XRANGEIDENTIFIER]})(?:\\.(${E[m.XRANGEIDENTIFIER]})(?:${E[m.PRERELEASE]})?${E[m.BUILD]}?)?)?`);w("XRANGEPLAINLOOSE",`[v=\\s]*(${E[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${E[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${E[m.XRANGEIDENTIFIERLOOSE]})(?:${E[m.PRERELEASELOOSE]})?${E[m.BUILD]}?)?)?`);w("XRANGE",`^${E[m.GTLT]}\\s*${E[m.XRANGEPLAIN]}$`);w("XRANGELOOSE",`^${E[m.GTLT]}\\s*${E[m.XRANGEPLAINLOOSE]}$`);w("COERCE",`(^|[^\\d])(\\d{1,${qe}})(?:\\.(\\d{1,${qe}}))?(?:\\.(\\d{1,${qe}}))?(?:$|[^\\d])`);w("COERCERTL",E[m.COERCE],!0);w("LONETILDE","(?:~>?)");w("TILDETRIM",`(\\s*)${E[m.LONETILDE]}\\s+`,!0);G.tildeTrimReplace="$1~";w("TILDE",`^${E[m.LONETILDE]}${E[m.XRANGEPLAIN]}$`);w("TILDELOOSE",`^${E[m.LONETILDE]}${E[m.XRANGEPLAINLOOSE]}$`);w("LONECARET","(?:\\^)");w("CARETTRIM",`(\\s*)${E[m.LONECARET]}\\s+`,!0);G.caretTrimReplace="$1^";w("CARET",`^${E[m.LONECARET]}${E[m.XRANGEPLAIN]}$`);w("CARETLOOSE",`^${E[m.LONECARET]}${E[m.XRANGEPLAINLOOSE]}$`);w("COMPARATORLOOSE",`^${E[m.GTLT]}\\s*(${E[m.LOOSEPLAIN]})$|^$`);w("COMPARATOR",`^${E[m.GTLT]}\\s*(${E[m.FULLPLAIN]})$|^$`);w("COMPARATORTRIM",`(\\s*)${E[m.GTLT]}\\s*(${E[m.LOOSEPLAIN]}|${E[m.XRANGEPLAIN]})`,!0);G.comparatorTrimReplace="$1$2$3";w("HYPHENRANGE",`^\\s*(${E[m.XRANGEPLAIN]})\\s+-\\s+(${E[m.XRANGEPLAIN]})\\s*$`);w("HYPHENRANGELOOSE",`^\\s*(${E[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${E[m.XRANGEPLAINLOOSE]})\\s*$`);w("STAR","(<|>)?=?\\s*\\*");w("GTE0","^\\s*>=\\s*0.0.0\\s*$");w("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var ie=x((Ts,pr)=>{l();u();var bn=["includePrerelease","loose","rtl"],Pn=t=>t?typeof t!="object"?{loose:!0}:bn.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};pr.exports=Pn});var me=x((Ss,Er)=>{l();u();var fr=/^[0-9]+$/,hr=(t,e)=>{let r=fr.test(t),n=fr.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},Bn=(t,e)=>hr(e,t);Er.exports={compareIdentifiers:hr,rcompareIdentifiers:Bn}});var L=x((Os,xr)=>{l();u();var ve=oe(),{MAX_LENGTH:mr,MAX_SAFE_INTEGER:ge}=ne(),{re:vr,t:gr}=H(),qn=ie(),{compareIdentifiers:se}=me(),b=class{constructor(e,r){if(r=qn(r),e instanceof b){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>mr)throw new TypeError(`version is longer than ${mr} characters`);ve("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?vr[gr.LOOSE]:vr[gr.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ge||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ge||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ge||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<ge)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ve("SemVer.compare",this.version,this.options,e),!(e instanceof b)){if(typeof e=="string"&&e===this.version)return 0;e=new b(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof b||(e=new b(e,this.options)),se(this.major,e.major)||se(this.minor,e.minor)||se(this.patch,e.patch)}comparePre(e){if(e instanceof b||(e=new b(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(ve("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return se(n,i)}while(++r)}compareBuild(e){e instanceof b||(e=new b(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(ve("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return se(n,i)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};xr.exports=b});var V=x(($s,yr)=>{l();u();var{MAX_LENGTH:Un}=ne(),{re:Ir,t:wr}=H(),_r=L(),Fn=ie(),kn=(t,e)=>{if(e=Fn(e),t instanceof _r)return t;if(typeof t!="string"||t.length>Un||!(e.loose?Ir[wr.LOOSE]:Ir[wr.FULL]).test(t))return null;try{return new _r(t,e)}catch{return null}};yr.exports=kn});var Nr=x((Bs,Tr)=>{l();u();var Mn=V(),Gn=(t,e)=>{let r=Mn(t,e);return r?r.version:null};Tr.exports=Gn});var Sr=x((Fs,Ar)=>{l();u();var jn=V(),Xn=(t,e)=>{let r=jn(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};Ar.exports=Xn});var Rr=x((Gs,Dr)=>{l();u();var Hn=L(),Vn=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new Hn(t,r).inc(e,n).version}catch{return null}};Dr.exports=Vn});var P=x((Hs,Lr)=>{l();u();var Or=L(),zn=(t,e,r)=>new Or(t,r).compare(new Or(e,r));Lr.exports=zn});var xe=x((Ws,Cr)=>{l();u();var Wn=P(),Kn=(t,e,r)=>Wn(t,e,r)===0;Cr.exports=Kn});var Pr=x((Zs,br)=>{l();u();var $r=V(),Yn=xe(),Zn=(t,e)=>{if(Yn(t,e))return null;{let r=$r(t),n=$r(e),i=r.prerelease.length||n.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(let c in r)if((c==="major"||c==="minor"||c==="patch")&&r[c]!==n[c])return o+c;return s}};br.exports=Zn});var qr=x((ea,Br)=>{l();u();var Jn=L(),Qn=(t,e)=>new Jn(t,e).major;Br.exports=Qn});var Fr=x((na,Ur)=>{l();u();var eo=L(),ro=(t,e)=>new eo(t,e).minor;Ur.exports=ro});var Mr=x((sa,kr)=>{l();u();var to=L(),no=(t,e)=>new to(t,e).patch;kr.exports=no});var jr=x((la,Gr)=>{l();u();var oo=V(),io=(t,e)=>{let r=oo(t,e);return r&&r.prerelease.length?r.prerelease:null};Gr.exports=io});var Hr=x((pa,Xr)=>{l();u();var so=P(),ao=(t,e,r)=>so(e,t,r);Xr.exports=ao});var zr=x((Ea,Vr)=>{l();u();var co=P(),lo=(t,e)=>co(t,e,!0);Vr.exports=lo});var Ie=x((ga,Kr)=>{l();u();var Wr=L(),uo=(t,e,r)=>{let n=new Wr(t,r),i=new Wr(e,r);return n.compare(i)||n.compareBuild(i)};Kr.exports=uo});var Zr=x((wa,Yr)=>{l();u();var po=Ie(),fo=(t,e)=>t.sort((r,n)=>po(r,n,e));Yr.exports=fo});var Qr=x((Ta,Jr)=>{l();u();var ho=Ie(),Eo=(t,e)=>t.sort((r,n)=>ho(n,r,e));Jr.exports=Eo});var ae=x((Sa,et)=>{l();u();var mo=P(),vo=(t,e,r)=>mo(t,e,r)>0;et.exports=vo});var we=x((Oa,rt)=>{l();u();var go=P(),xo=(t,e,r)=>go(t,e,r)<0;rt.exports=xo});var Ue=x(($a,tt)=>{l();u();var Io=P(),wo=(t,e,r)=>Io(t,e,r)!==0;tt.exports=wo});var _e=x((Ba,nt)=>{l();u();var _o=P(),yo=(t,e,r)=>_o(t,e,r)>=0;nt.exports=yo});var ye=x((Fa,ot)=>{l();u();var To=P(),No=(t,e,r)=>To(t,e,r)<=0;ot.exports=No});var Fe=x((Ga,it)=>{l();u();var Ao=xe(),So=Ue(),Do=ae(),Ro=_e(),Oo=we(),Lo=ye(),Co=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Ao(t,r,n);case"!=":return So(t,r,n);case">":return Do(t,r,n);case">=":return Ro(t,r,n);case"<":return Oo(t,r,n);case"<=":return Lo(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};it.exports=Co});var at=x((Ha,st)=>{l();u();var $o=L(),bo=V(),{re:Te,t:Ne}=H(),Po=(t,e)=>{if(t instanceof $o)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(Te[Ne.COERCE]);else{let n;for(;(n=Te[Ne.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),Te[Ne.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;Te[Ne.COERCERTL].lastIndex=-1}return r===null?null:bo(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};st.exports=Po});var B=x((Wa,dt)=>{l();u();var z=class{constructor(e,r){if(r=qo(r),e instanceof z)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new z(e.raw,r);if(e instanceof ke)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!lt(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&Go(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=ct.get(n);if(i)return i;let o=this.options.loose,s=o?C[R.HYPHENRANGELOOSE]:C[R.HYPHENRANGE];e=e.replace(s,Jo(this.options.includePrerelease)),A("hyphen replace",e),e=e.replace(C[R.COMPARATORTRIM],Fo),A("comparator trim",e,C[R.COMPARATORTRIM]),e=e.replace(C[R.TILDETRIM],ko),e=e.replace(C[R.CARETTRIM],Mo),e=e.split(/\s+/).join(" ");let c=o?C[R.COMPARATORLOOSE]:C[R.COMPARATOR],d=e.split(" ").map(I=>jo(I,this.options)).join(" ").split(/\s+/).map(I=>Zo(I,this.options)).filter(this.options.loose?I=>!!I.match(c):()=>!0).map(I=>new ke(I,this.options)),a=d.length,f=new Map;for(let I of d){if(lt(I))return[I];f.set(I.value,I)}f.size>1&&f.has("")&&f.delete("");let g=[...f.values()];return ct.set(n,g),g}intersects(e,r){if(!(e instanceof z))throw new TypeError("a Range is required");return this.set.some(n=>ut(n,r)&&e.set.some(i=>ut(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Uo(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Qo(this.set[r],e,this.options))return!0;return!1}};dt.exports=z;var Bo=En(),ct=new Bo({max:1e3}),qo=ie(),ke=ce(),A=oe(),Uo=L(),{re:C,t:R,comparatorTrimReplace:Fo,tildeTrimReplace:ko,caretTrimReplace:Mo}=H(),lt=t=>t.value==="<0.0.0-0",Go=t=>t.value==="",ut=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},jo=(t,e)=>(A("comp",t,e),t=Vo(t,e),A("caret",t),t=Xo(t,e),A("tildes",t),t=Wo(t,e),A("xrange",t),t=Yo(t,e),A("stars",t),t),$=t=>!t||t.toLowerCase()==="x"||t==="*",Xo=(t,e)=>t.trim().split(/\s+/).map(r=>Ho(r,e)).join(" "),Ho=(t,e)=>{let r=e.loose?C[R.TILDELOOSE]:C[R.TILDE];return t.replace(r,(n,i,o,s,c)=>{A("tilde",t,n,i,o,s,c);let d;return $(i)?d="":$(o)?d=`>=${i}.0.0 <${+i+1}.0.0-0`:$(s)?d=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:c?(A("replaceTilde pr",c),d=`>=${i}.${o}.${s}-${c} <${i}.${+o+1}.0-0`):d=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,A("tilde return",d),d})},Vo=(t,e)=>t.trim().split(/\s+/).map(r=>zo(r,e)).join(" "),zo=(t,e)=>{A("caret",t,e);let r=e.loose?C[R.CARETLOOSE]:C[R.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,c,d)=>{A("caret",t,i,o,s,c,d);let a;return $(o)?a="":$(s)?a=`>=${o}.0.0${n} <${+o+1}.0.0-0`:$(c)?o==="0"?a=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:a=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:d?(A("replaceCaret pr",d),o==="0"?s==="0"?a=`>=${o}.${s}.${c}-${d} <${o}.${s}.${+c+1}-0`:a=`>=${o}.${s}.${c}-${d} <${o}.${+s+1}.0-0`:a=`>=${o}.${s}.${c}-${d} <${+o+1}.0.0-0`):(A("no pr"),o==="0"?s==="0"?a=`>=${o}.${s}.${c}${n} <${o}.${s}.${+c+1}-0`:a=`>=${o}.${s}.${c}${n} <${o}.${+s+1}.0-0`:a=`>=${o}.${s}.${c} <${+o+1}.0.0-0`),A("caret return",a),a})},Wo=(t,e)=>(A("replaceXRanges",t,e),t.split(/\s+/).map(r=>Ko(r,e)).join(" ")),Ko=(t,e)=>{t=t.trim();let r=e.loose?C[R.XRANGELOOSE]:C[R.XRANGE];return t.replace(r,(n,i,o,s,c,d)=>{A("xRange",t,n,i,o,s,c,d);let a=$(o),f=a||$(s),g=f||$(c),I=g;return i==="="&&I&&(i=""),d=e.includePrerelease?"-0":"",a?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&I?(f&&(s=0),c=0,i===">"?(i=">=",f?(o=+o+1,s=0,c=0):(s=+s+1,c=0)):i==="<="&&(i="<",f?o=+o+1:s=+s+1),i==="<"&&(d="-0"),n=`${i+o}.${s}.${c}${d}`):f?n=`>=${o}.0.0${d} <${+o+1}.0.0-0`:g&&(n=`>=${o}.${s}.0${d} <${o}.${+s+1}.0-0`),A("xRange return",n),n})},Yo=(t,e)=>(A("replaceStars",t,e),t.trim().replace(C[R.STAR],"")),Zo=(t,e)=>(A("replaceGTE0",t,e),t.trim().replace(C[e.includePrerelease?R.GTE0PRE:R.GTE0],"")),Jo=t=>(e,r,n,i,o,s,c,d,a,f,g,I,v)=>($(n)?r="":$(i)?r=`>=${n}.0.0${t?"-0":""}`:$(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,$(a)?d="":$(f)?d=`<${+a+1}.0.0-0`:$(g)?d=`<${a}.${+f+1}.0-0`:I?d=`<=${a}.${f}.${g}-${I}`:t?d=`<${a}.${f}.${+g+1}-0`:d=`<=${d}`,`${r} ${d}`.trim()),Qo=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(A(t[n].semver),t[n].semver!==ke.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var ce=x((Za,mt)=>{l();u();var le=Symbol("SemVer ANY"),J=class{static get ANY(){return le}constructor(e,r){if(r=ei(r),e instanceof J){if(e.loose===!!r.loose)return e;e=e.value}Ge("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===le?this.value="":this.value=this.operator+this.semver.version,Ge("comp",this)}parse(e){let r=this.options.loose?pt[ft.COMPARATORLOOSE]:pt[ft.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new ht(n[2],this.options.loose):this.semver=le}toString(){return this.value}test(e){if(Ge("Comparator.test",e,this.options.loose),this.semver===le||e===le)return!0;if(typeof e=="string")try{e=new ht(e,this.options)}catch{return!1}return Me(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof J))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new Et(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new Et(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),c=Me(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),d=Me(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||o&&s||c||d}};mt.exports=J;var ei=ie(),{re:pt,t:ft}=H(),Me=Fe(),Ge=oe(),ht=L(),Et=B()});var ue=x((ec,vt)=>{l();u();var ri=B(),ti=(t,e,r)=>{try{e=new ri(e,r)}catch{return!1}return e.test(t)};vt.exports=ti});var xt=x((nc,gt)=>{l();u();var ni=B(),oi=(t,e)=>new ni(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));gt.exports=oi});var wt=x((sc,It)=>{l();u();var ii=L(),si=B(),ai=(t,e,r)=>{let n=null,i=null,o=null;try{o=new si(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new ii(n,r))}),n};It.exports=ai});var yt=x((lc,_t)=>{l();u();var ci=L(),li=B(),ui=(t,e,r)=>{let n=null,i=null,o=null;try{o=new li(e,r)}catch{return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new ci(n,r))}),n};_t.exports=ui});var At=x((pc,Nt)=>{l();u();var je=L(),di=B(),Tt=ae(),pi=(t,e)=>{t=new di(t,e);let r=new je("0.0.0");if(t.test(r)||(r=new je("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let c=new je(s.semver.version);switch(s.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!o||Tt(c,o))&&(o=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||Tt(r,o))&&(r=o)}return r&&t.test(r)?r:null};Nt.exports=pi});var Dt=x((Ec,St)=>{l();u();var fi=B(),hi=(t,e)=>{try{return new fi(t,e).range||"*"}catch{return null}};St.exports=hi});var Ae=x((gc,Ct)=>{l();u();var Ei=L(),Lt=ce(),{ANY:mi}=Lt,vi=B(),gi=ue(),Rt=ae(),Ot=we(),xi=ye(),Ii=_e(),wi=(t,e,r,n)=>{t=new Ei(t,n),e=new vi(e,n);let i,o,s,c,d;switch(r){case">":i=Rt,o=xi,s=Ot,c=">",d=">=";break;case"<":i=Ot,o=Ii,s=Rt,c="<",d="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(gi(t,e,n))return!1;for(let a=0;a<e.set.length;++a){let f=e.set[a],g=null,I=null;if(f.forEach(v=>{v.semver===mi&&(v=new Lt(">=0.0.0")),g=g||v,I=I||v,i(v.semver,g.semver,n)?g=v:s(v.semver,I.semver,n)&&(I=v)}),g.operator===c||g.operator===d||(!I.operator||I.operator===c)&&o(t,I.semver))return!1;if(I.operator===d&&s(t,I.semver))return!1}return!0};Ct.exports=wi});var bt=x((wc,$t)=>{l();u();var _i=Ae(),yi=(t,e,r)=>_i(t,e,">",r);$t.exports=yi});var Bt=x((Tc,Pt)=>{l();u();var Ti=Ae(),Ni=(t,e,r)=>Ti(t,e,"<",r);Pt.exports=Ni});var Ft=x((Sc,Ut)=>{l();u();var qt=B(),Ai=(t,e,r)=>(t=new qt(t,r),e=new qt(e,r),t.intersects(e));Ut.exports=Ai});var Mt=x((Oc,kt)=>{l();u();var Si=ue(),Di=P();kt.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((f,g)=>Di(f,g,r));for(let f of s)Si(f,e,r)?(o=f,i||(i=f)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let c=[];for(let[f,g]of n)f===g?c.push(f):!g&&f===s[0]?c.push("*"):g?f===s[0]?c.push(`<=${g}`):c.push(`${f} - ${g}`):c.push(`>=${f}`);let d=c.join(" || "),a=typeof e.raw=="string"?e.raw:String(e);return d.length<a.length?d:e}});var Vt=x(($c,Ht)=>{l();u();var Gt=B(),Se=ce(),{ANY:Xe}=Se,de=ue(),He=P(),Ri=(t,e,r={})=>{if(t===e)return!0;t=new Gt(t,r),e=new Gt(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=Oi(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},Oi=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Xe){if(e.length===1&&e[0].semver===Xe)return!0;r.includePrerelease?t=[new Se(">=0.0.0-0")]:t=[new Se(">=0.0.0")]}if(e.length===1&&e[0].semver===Xe){if(r.includePrerelease)return!0;e=[new Se(">=0.0.0")]}let n=new Set,i,o;for(let v of t)v.operator===">"||v.operator===">="?i=jt(i,v,r):v.operator==="<"||v.operator==="<="?o=Xt(o,v,r):n.add(v.semver);if(n.size>1)return null;let s;if(i&&o){if(s=He(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let v of n){if(i&&!de(v,String(i),r)||o&&!de(v,String(o),r))return null;for(let M of e)if(!de(v,String(M),r))return!1;return!0}let c,d,a,f,g=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,I=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;g&&g.prerelease.length===1&&o.operator==="<"&&g.prerelease[0]===0&&(g=!1);for(let v of e){if(f=f||v.operator===">"||v.operator===">=",a=a||v.operator==="<"||v.operator==="<=",i){if(I&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===I.major&&v.semver.minor===I.minor&&v.semver.patch===I.patch&&(I=!1),v.operator===">"||v.operator===">="){if(c=jt(i,v,r),c===v&&c!==i)return!1}else if(i.operator===">="&&!de(i.semver,String(v),r))return!1}if(o){if(g&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===g.major&&v.semver.minor===g.minor&&v.semver.patch===g.patch&&(g=!1),v.operator==="<"||v.operator==="<="){if(d=Xt(o,v,r),d===v&&d!==o)return!1}else if(o.operator==="<="&&!de(o.semver,String(v),r))return!1}if(!v.operator&&(o||i)&&s!==0)return!1}return!(i&&a&&!o&&s!==0||o&&f&&!i&&s!==0||I||g)},jt=(t,e,r)=>{if(!t)return e;let n=He(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},Xt=(t,e,r)=>{if(!t)return e;let n=He(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};Ht.exports=Ri});var Wt=x((Bc,zt)=>{l();u();var Ve=H();zt.exports={re:Ve.re,src:Ve.src,tokens:Ve.t,SEMVER_SPEC_VERSION:ne().SEMVER_SPEC_VERSION,SemVer:L(),compareIdentifiers:me().compareIdentifiers,rcompareIdentifiers:me().rcompareIdentifiers,parse:V(),valid:Nr(),clean:Sr(),inc:Rr(),diff:Pr(),major:qr(),minor:Fr(),patch:Mr(),prerelease:jr(),compare:P(),rcompare:Hr(),compareLoose:zr(),compareBuild:Ie(),sort:Zr(),rsort:Qr(),gt:ae(),lt:we(),eq:xe(),neq:Ue(),gte:_e(),lte:ye(),cmp:Fe(),coerce:at(),Comparator:ce(),Range:B(),satisfies:ue(),toComparators:xt(),maxSatisfying:wt(),minSatisfying:yt(),minVersion:At(),validRange:Dt(),outside:Ae(),gtr:bt(),ltr:Bt(),intersects:Ft(),simplifyRange:Mt(),subset:Vt()}});l();u();var y=be(pn());fn();var cr=be(hn());l();u();var _={root:"_root_1e4bi_1",title:"_title_1e4bi_8",confirmTitle:"_confirmTitle_1e4bi_15 _title_1e4bi_8",confirmTitleHighLight:"_confirmTitleHighLight_1e4bi_21 _title_1e4bi_8",confirmDesc:"_confirmDesc_1e4bi_26",commonTitle:"_commonTitle_1e4bi_39 _title_1e4bi_8",commonDesc:"_commonDesc_1e4bi_48",commonImage:"_commonImage_1e4bi_61",commonImageTag:"_commonImageTag_1e4bi_67",newImage:"_newImage_1e4bi_71",newImageTag:"_newImageTag_1e4bi_76",commonFooter:"_commonFooter_1e4bi_79",multiLineFooter:"_multiLineFooter_1e4bi_87",extButton:"_extButton_1e4bi_95"};var T={connectError:"CONNECTERROR",wrongApp:"WRONGAPP",rejected:"REJECTED",confirm:"CONFIRM",blindEnable:"BLINDENABLE",ledgerBusy:"LEDGERBUSY",disConnected:"DISCONNECTED",lockedDevice:"LOCKEDDEVICE",wrongAppToGetAddress:"WRONGAPPTOGETADDRESS",hardWareNotConnected:"HARDWARENOTCONNECTED"},Z=({titleKey:t,descKey:e,lightImg:r,darkImg:n,btnTextKey:i,isNewImage:o})=>({handleClose:s,onButtonClick:c})=>{let d=Y({light:r,dark:n});return y.default.createElement(N.Box,{className:_.root},y.default.createElement(N.Box,{className:_.commonTitle},S(t)),y.default.createElement(N.Box,{className:_.commonDesc},e?S(e):""),y.default.createElement(K,{src:d,pictureClassName:o?_.newImage:_.commonImage,className:o?_.newImageTag:_.commonImageTag}),y.default.createElement(N.Box,{className:_.commonFooter},y.default.createElement(D,{category:D.CATEGORY.fill,type:D.TYPE.highlight,size:D.SIZE.lg,onClick:()=>{c&&c(),s()},block:!0},S(i))))},mn=Z({titleKey:"wallet_add_wallet_maintitle_hardware_wallet_conncet_failed",descKey:"extension_wallet_conncecthardware_keep_usbconnection",lightImg:"/cdn/assets/imgs/245/3E037F1AD56B99E5.png",darkImg:"/cdn/assets/imgs/245/5C128DD70BFD43E6.png",btnTextKey:"extension_wallet_conncecthardware_retry"}),vn=Z({titleKey:"wallet_add_wallet_maintitle_hardware_wallet_conncet_failed",descKey:"extension_wallet_conncecthardware_device_disconnected",lightImg:"/cdn/assets/imgs/245/3E037F1AD56B99E5.png",darkImg:"/cdn/assets/imgs/245/5C128DD70BFD43E6.png",btnTextKey:"extension_wallet_conncecthardware_okbtn"}),gn=Z({titleKey:"wallet_add_wallet_maintitle_hardware_wallet_conncet_failed",descKey:"extension_wallet_conncecthardware_keep_usbconnection",lightImg:"/cdn/assets/imgs/245/9AD7699D75F09864.png",darkImg:"/cdn/assets/imgs/245/5E204EF0476C9EA5.png",btnTextKey:"extension_wallet_conncecthardware_okbtn",isNewImage:!0}),xn=Z({titleKey:"wallet_dialog_title_transaction_reject",descKey:"wallet_dialog_subtitle_transaction_reject_desc",lightImg:"/cdn/assets/imgs/245/D20BB80F72E26AE8.png",darkImg:"/cdn/assets/imgs/245/84CF381F4BEFAB79.png",btnTextKey:"extension_wallet_conncecthardware_okbtn"}),In=Z({titleKey:"wallet_dialog_title_transaction_failed",descKey:"wallet_dialog_subtitle_transaction_error_reinitiate",lightImg:"/cdn/assets/imgs/245/9AD7699D75F09864.png",darkImg:"/cdn/assets/imgs/245/5E204EF0476C9EA5.png",btnTextKey:"extension_wallet_conncecthardware_okbtn",isNewImage:!0}),wn=Z({titleKey:"wallet_add_wallet_maintitle_hardware_wallet_conncet_failed",descKey:"wallet_extension_pop_title_hardware_wallet_notunlocked",lightImg:"/cdn/assets/imgs/245/038C820230C1D3E0.png",darkImg:"/cdn/assets/imgs/245/0EAF10E9F40C5541.png",btnTextKey:"extension_wallet_conncecthardware_retry",isNewImage:!0}),_n=({handleClose:t,baseChain:e})=>{let r=Y({light:"/cdn/assets/imgs/245/9AD7699D75F09864.png",dark:"/cdn/assets/imgs/245/5E204EF0476C9EA5.png"});return y.default.createElement(N.Box,{className:_.root},y.default.createElement(N.Box,{className:_.commonTitle},S("wallet_add_wallet_maintitle_hardware_wallet_conncet_failed")),y.default.createElement(N.Box,{className:_.commonDesc},S("wallet_extension_pop_title_open_app",{Name:Ee[e]})),y.default.createElement(K,{src:r,className:_.newImageTag,pictureClassName:_.newImage}),y.default.createElement(N.Box,{className:_.commonFooter},y.default.createElement(D,{category:D.CATEGORY.fill,type:D.TYPE.highlight,size:D.SIZE.lg,onClick:()=>{window.location.reload(),t()},block:!0},S("extension_wallet_conncecthardware_retry"))))},yn=({handleClose:t,walletName:e,onButtonClick:r,onExtButtonClick:n})=>{let i=Y({light:"/cdn/assets/imgs/245/A9EDDD75B9E98A02.png",dark:"/cdn/assets/imgs/245/FCD6B8E149D00A31.png"});return y.default.createElement(N.Box,{className:_.root},y.default.createElement(N.Box,{className:_.commonTitle},S("wallet_extension_footer_btn_ok")),y.default.createElement(N.Box,{className:_.commonDesc},S("wallet_extension_top_subtitle_same_device",{acctName:e})),y.default.createElement(K,{src:i,className:_.commonImageTag,pictureClassName:_.commonImage}),y.default.createElement(N.Box,{className:_.multiLineFooter},y.default.createElement(D,{category:D.CATEGORY.fill,type:D.TYPE.highlight,size:D.SIZE.lg,onClick:()=>{r&&r(),t()},block:!0},S("wallet_add_wallet_btn_conncet_hardware_wallet")),y.default.createElement(N.Box,{className:_.extButton,onClick:n},S("wallet_extension_footer_btn_add_newdevice"))))},Tn=({handleClose:t,network:e})=>{let r=Y({light:"/cdn/assets/imgs/245/13DD433CD15E83AA.png",dark:"/cdn/assets/imgs/245/74F4F0AC071E323D.png"});return y.default.createElement(N.Box,{className:_.root},y.default.createElement(N.Box,{className:_.commonTitle},S("wallet_dialog_title_transaction_failed")),y.default.createElement(N.Box,{className:_.commonDesc},S("extension_wallet_dialog_subtitle_transaction_failed_desc",{network:e,signbyhash:"Blind signing"})),y.default.createElement(K,{src:r,className:_.commonImageTag,pictureClassName:_.commonImage}),y.default.createElement(N.Box,{className:_.commonFooter},y.default.createElement(D,{category:D.CATEGORY.fill,type:D.TYPE.highlight,size:D.SIZE.lg,onClick:t,block:!0},S("extension_wallet_conncecthardware_okbtn"))))},Nn=()=>{let t=Y({light:"/cdn/assets/imgs/245/56CE147131A188AA.png",dark:"/cdn/assets/imgs/245/FA61D5D25FCE8E12.png"});return y.default.createElement(N.Box,{className:_.root},y.default.createElement(N.Box,{className:_.confirmTitle},S("extension_wallet_conncecthardware_check_ledgerwallet",{transaction:y.default.createElement("span",{className:_.confirmTitleHighLight},S("extension_wallet_conncecthardware_transaction_details"))})),y.default.createElement(N.Box,{className:_.confirmDesc},S("extension_wallet_conncecthardware_transaction_sent")),y.default.createElement(K,{src:t,className:_.newImageTag,pictureClassName:_.newImage}))},An={[T.connectError]:mn,[T.wrongApp]:gn,[T.rejected]:xn,[T.confirm]:Nn,[T.blindEnable]:Tn,[T.ledgerBusy]:In,[T.disConnected]:vn,[T.lockedDevice]:wn,[T.wrongAppToGetAddress]:_n,[T.hardWareNotConnected]:yn},Be=class{constructor(){te(this,"renderContent",()=>{let{type:e,props:r}=this,n=An[e];return n?y.default.createElement(n,{...r,handleClose:this.closeModal}):null});te(this,"renderModalDom",()=>{let{hideCloseBtn:e=!1,onCloseBtnClick:r}=this.props;this.modalDom=or.action({onClose:()=>{this.closeModal(),r&&r()},className:"hardware-wallet-tip-dialog",maskClosable:!1,alignBottom:!0,noTopRadius:!1,noContentPadding:!0,hideCloseBtn:e,children:this.renderContent()})});te(this,"openModal",(0,cr.debounce)((e,r={})=>{this.closeModal(),this.visible=!0,this.type=e,this.props=r,this.renderModalDom()},300));te(this,"closeModal",()=>{this.visible=!1,this.modalDom&&(this.modalDom.destroy(),this.modalDom=null)});this.visible=!1,this.type=T.confirm,this.props={},this.modalDom=null}},X=new Be;l();u();l();u();var Ke=be(Wt()),We=function(){return We=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},We.apply(this,arguments)},W;var O;(function(t){t.blue="blue",t.nanoS="nanoS",t.nanoSP="nanoSP",t.nanoX="nanoX",t.stax="stax"})(O||(O={}));var Ye=(W={},W[O.blue]={id:O.blue,productName:"Ledger\xA0Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:function(t){return 4*1024}},W[O.nanoS]={id:O.nanoS,productName:"Ledger\xA0Nano\xA0S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:function(t){var e;return Ke.default.lt((e=Ke.default.coerce(t))!==null&&e!==void 0?e:"","2.0.0")?4*1024:2*1024}},W[O.nanoSP]={id:O.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1536*1024,masks:[856686592],getBlockSize:function(t){return 32}},W[O.nanoX]={id:O.nanoX,productName:"Ledger\xA0Nano\xA0X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:function(t){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},W[O.stax]={id:O.stax,productName:"Ledger\xA0Stax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1536*1024,masks:[857735168],getBlockSize:function(t){return 32},bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},W),Fc={Blue:O.blue,"Nano S":O.nanoS,"Nano S Plus":O.nanoSP,"Nano X":O.nanoX,Stax:O.stax},Kt=Object.values(Ye),Q=11415;var Ze=function(t){var e=Kt.find(function(i){return i.legacyUsbProductId===t});if(e)return e;var r=t>>8,n=Kt.find(function(i){return i.productIdMM===r});return n};var Li=[],Yt={};for(Zt in Ye)if(ze=Ye[Zt],De=ze.bluetoothSpec,De)for(Re=0;Re<De.length;Re++)pe=De[Re],Li.push(pe.serviceUuid),Yt[pe.serviceUuid]=Yt[pe.serviceUuid.replace(/-/g,"")]=We({deviceModel:ze},pe);var ze,De,pe,Re,Zt;l();u();l();u();dn();l();u();l();u();var Ci=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var $i={},bi={},Je=function(t,e){bi[t]=e},p=function(t){var e=function(r){Ci(n,r);function n(i,o,s){var c=r.call(this,i||t,s)||this;if(Object.setPrototypeOf(c,n.prototype),c.name=t,o)for(var d in o)c[d]=o[d];if(s&&Pi(s)&&"cause"in s&&!("cause"in c)){var a=s.cause;c.cause=a,"stack"in a&&(c.stack=c.stack+`
CAUSE: `+a.stack)}return c}return n}(Error);return $i[t]=e,e};function Pi(t){return typeof t=="object"}var Qt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Kc=p("AccountNameRequired"),Yc=p("AccountNotSupported"),Zc=p("AmountRequired"),Jc=p("BluetoothRequired"),Qc=p("BtcUnmatchedApp"),el=p("CantOpenDevice"),rl=p("CashAddrNotSupported"),tl=p("CurrencyNotSupported"),nl=p("DeviceAppVerifyNotSupported"),ol=p("DeviceGenuineSocketEarlyClose"),il=p("DeviceNotGenuine"),sl=p("DeviceOnDashboardExpected"),al=p("DeviceOnDashboardUnexpected"),cl=p("DeviceInOSUExpected"),ll=p("DeviceHalted"),ul=p("DeviceNameInvalid"),dl=p("DeviceSocketFail"),pl=p("DeviceSocketNoBulkStatus"),Bi=p("LockedDeviceError"),en=p("DisconnectedDevice"),rn=p("DisconnectedDeviceDuringOperation"),fl=p("DeviceExtractOnboardingStateError"),hl=p("DeviceOnboardingStatePollingError"),El=p("EnpointConfig"),ml=p("EthAppPleaseEnableContractData"),vl=p("FeeEstimationFailed"),gl=p("FirmwareNotRecognized"),xl=p("HardResetFail"),Il=p("InvalidXRPTag"),wl=p("InvalidAddress"),_l=p("InvalidAddressBecauseDestinationIsAlsoSource"),yl=p("LatestMCUInstalledError"),Tl=p("UnknownMCU"),Nl=p("LedgerAPIError"),Al=p("LedgerAPIErrorWithMessage"),Sl=p("LedgerAPINotAvailable"),Dl=p("ManagerAppAlreadyInstalled"),Rl=p("ManagerAppRelyOnBTC"),Ol=p("ManagerAppDepInstallRequired"),Ll=p("ManagerAppDepUninstallRequired"),Cl=p("ManagerDeviceLocked"),$l=p("ManagerFirmwareNotEnoughSpace"),bl=p("ManagerNotEnoughSpace"),Pl=p("ManagerUninstallBTCDep"),Bl=p("NetworkDown"),ql=p("NoAddressesFound"),Ul=p("NotEnoughBalance"),Fl=p("NotEnoughBalanceToDelegate"),kl=p("NotEnoughBalanceInParentAccount"),Ml=p("NotEnoughSpendableBalance"),Gl=p("NotEnoughBalanceBecauseDestinationNotCreated"),jl=p("NoAccessToCamera"),Xl=p("NotEnoughGas"),Hl=p("NotSupportedLegacyAddress"),Vl=p("GasLessThanEstimate"),zl=p("PriorityFeeTooLow"),Wl=p("PriorityFeeTooHigh"),Kl=p("PriorityFeeHigherThanMaxFee"),Yl=p("MaxFeeTooLow"),Zl=p("PasswordsDontMatch"),Jl=p("PasswordIncorrect"),Ql=p("RecommendSubAccountsToEmpty"),eu=p("RecommendUndelegation"),ru=p("TimeoutTagged"),tu=p("UnexpectedBootloader"),nu=p("MCUNotGenuineToDashboard"),ou=p("RecipientRequired"),iu=p("UnavailableTezosOriginatedAccountReceive"),su=p("UnavailableTezosOriginatedAccountSend"),au=p("UpdateFetchFileFail"),cu=p("UpdateIncorrectHash"),lu=p("UpdateIncorrectSig"),uu=p("UpdateYourApp"),du=p("UserRefusedDeviceNameChange"),pu=p("UserRefusedAddress"),fu=p("UserRefusedFirmwareUpdate"),hu=p("UserRefusedAllowManager"),Eu=p("UserRefusedOnDevice"),Qe=p("TransportOpenUserCancelled"),mu=p("TransportInterfaceNotAvailable"),tn=p("TransportRaceCondition"),vu=p("TransportWebUSBGestureRequired"),gu=p("DeviceShouldStayInApp"),xu=p("WebsocketConnectionError"),Iu=p("WebsocketConnectionFailed"),wu=p("WrongDeviceForAccount"),_u=p("WrongAppForCurrency"),yu=p("ETHAddressNonEIP"),Tu=p("CantScanQRCode"),Nu=p("FeeNotLoaded"),Au=p("FeeRequired"),Su=p("FeeTooHigh"),Du=p("DustLimit"),Ru=p("PendingOperation"),Ou=p("SyncError"),Lu=p("PairingFailed"),Cu=p("GenuineCheckFailed"),$u=p("LedgerAPI4xx"),bu=p("LedgerAPI5xx"),Pu=p("FirmwareOrAppUpdateRequired"),Bu=p("LanguageNotFound"),qu=p("NoDBPathGiven"),Uu=p("DBWrongPassword"),Fu=p("DBNotReset"),Jt;(function(t){t[t.Unknown=0]="Unknown",t[t.BleLocationServicesDisabled=1]="BleLocationServicesDisabled",t[t.BleBluetoothUnauthorized=2]="BleBluetoothUnauthorized",t[t.BleScanStartFailed=3]="BleScanStartFailed"})(Jt||(Jt={}));var ku=function(t){Qt(e,t);function e(r,n){var i=t.call(this,n)||this;return i.name="HwTransportError",i.type=r,Object.setPrototypeOf(i,e.prototype),i}return e}(Error);var q=function(t){Qt(e,t);function e(r,n){var i=this,o="TransportError";return i=t.call(this,r||o)||this,i.name=o,i.message=r,i.stack=new Error().stack,i.id=n,i}return e}(Error);Je("TransportError",function(t){return new q(t.message,t.id)});var ee={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,CUSTOM_IMAGE_BOOTLOADER:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761};function nn(t){switch(t){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=t&&t<=28671)return"Internal error, please report"}function fe(t){var e=Object.keys(ee).find(function(o){return ee[o]===t})||"UNKNOWN_ERROR",r=nn(t)||e,n=t.toString(16),i="Ledger device: ".concat(r," (0x").concat(n,")");if(t===ee.LOCKED_DEVICE)throw new Bi(i);this.name="TransportStatusError",this.message=i,this.stack=new Error().stack,this.statusCode=t,this.statusText=e}fe.prototype=new Error;Je("TransportStatusError",function(t){return new fe(t.statusCode)});var Oe=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(f){try{a(n.next(f))}catch(g){s(g)}}function d(f){try{a(n.throw(f))}catch(g){s(g)}}function a(f){f.done?o(f.value):i(f.value).then(c,d)}a((n=n.apply(t,e||[])).next())})},Le=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(f){return d([a,f])}}function d(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(f){a=[6,f],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},on=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qi=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Ui=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};var Fi=function(){function t(){var e=this;this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new nr,this.send=function(r,n,i,o,s,c){return s===void 0&&(s=h.Buffer.alloc(0)),c===void 0&&(c=[ee.OK]),Oe(e,void 0,void 0,function(){var d,a;return Le(this,function(f){switch(f.label){case 0:if(s.length>=256)throw new q("data.length exceed 256 bytes limit. Got: "+s.length,"DataLengthTooBig");return[4,this.exchange(h.Buffer.concat([h.Buffer.from([r,n,i,o]),h.Buffer.from([s.length]),s]))];case 1:if(d=f.sent(),a=d.readUInt16BE(d.length-2),!c.some(function(g){return g===a}))throw new fe(a);return[2,d]}})})},this.exchangeAtomicImpl=function(r){return Oe(e,void 0,void 0,function(){var n,i,o,s,c,d=this;return Le(this,function(a){switch(a.label){case 0:if(this.exchangeBusyPromise)throw new tn("An action was already pending on the Ledger device. Please deny or reconnect.");i=new Promise(function(f){n=f}),this.exchangeBusyPromise=i,o=!1,s=setTimeout(function(){o=!0,d.emit("unresponsive")},this.unresponsiveTimeout),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,r()];case 2:return c=a.sent(),o&&this.emit("responsive"),[2,c];case 3:return clearTimeout(s),n&&n(),this.exchangeBusyPromise=null,[7];case 4:return[2]}})})},this._appAPIlock=null}return t.prototype.exchange=function(e){throw new Error("exchange not implemented")},t.prototype.exchangeBulk=function(e,r){var n=this,i=!1,o=function(){i=!0},s=function(){return Oe(n,void 0,void 0,function(){var c,d,a,f,g,I,v,M;return Le(this,function(U){switch(U.label){case 0:if(i)return[2];U.label=1;case 1:U.trys.push([1,6,7,8]),c=on(e),d=c.next(),U.label=2;case 2:return d.done?[3,5]:(a=d.value,[4,this.exchange(a)]);case 3:if(f=U.sent(),i)return[2];if(g=f.readUInt16BE(f.length-2),g!==ee.OK)throw new fe(g);r.next(f),U.label=4;case 4:return d=c.next(),[3,2];case 5:return[3,8];case 6:return I=U.sent(),v={error:I},[3,8];case 7:try{d&&!d.done&&(M=c.return)&&M.call(c)}finally{if(v)throw v.error}return[7];case 8:return[2]}})})};return s().then(function(){return!i&&r.complete()},function(c){return!i&&r.error(c)}),{unsubscribe:o}},t.prototype.setScrambleKey=function(e){},t.prototype.close=function(){return Promise.resolve()},t.prototype.on=function(e,r){this._events.on(e,r)},t.prototype.off=function(e,r){this._events.removeListener(e,r)},t.prototype.emit=function(e){for(var r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];(r=this._events).emit.apply(r,Ui([e],qi(n),!1))},t.prototype.setDebugMode=function(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")},t.prototype.setExchangeTimeout=function(e){this.exchangeTimeout=e},t.prototype.setExchangeUnresponsiveTimeout=function(e){this.unresponsiveTimeout=e},t.create=function(e,r){var n=this;return e===void 0&&(e=3e3),new Promise(function(i,o){var s=!1,c=n.listen({next:function(a){s=!0,c&&c.unsubscribe(),d&&clearTimeout(d),n.open(a.descriptor,e).then(i,o)},error:function(a){d&&clearTimeout(d),o(a)},complete:function(){d&&clearTimeout(d),s||o(new q(n.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),d=r?setTimeout(function(){c.unsubscribe(),o(new q(n.ErrorMessage_ListenTimeout,"ListenTimeout"))},r):null})},t.prototype.decorateAppAPIMethods=function(e,r,n){var i,o;try{for(var s=on(r),c=s.next();!c.done;c=s.next()){var d=c.value;e[d]=this.decorateAppAPIMethod(d,e[d],e,n)}}catch(a){i={error:a}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}},t.prototype.decorateAppAPIMethod=function(e,r,n,i){var o=this;return function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return Oe(o,void 0,void 0,function(){var d;return Le(this,function(a){switch(a.label){case 0:if(d=this._appAPIlock,d)return[2,Promise.reject(new q("Ledger Device is busy (lock "+d+")","TransportLocked"))];a.label=1;case 1:return a.trys.push([1,,3,4]),this._appAPIlock=e,this.setScrambleKey(i),[4,r.apply(n,s)];case 2:return[2,a.sent()];case 3:return this._appAPIlock=null,[7];case 4:return[2]}})})}},t.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",t.ErrorMessage_NoDeviceFound="No Ledger device found",t}(),sn=Fi;l();u();var an=5;function ki(t){var e=h.Buffer.alloc(2);return e.writeUInt16BE(t,0),e}var Mi={data:h.Buffer.alloc(0),dataLength:0,sequence:0},Gi=function(t,e){return{makeBlocks:function(r){var n=h.Buffer.concat([ki(r.length),r]),i=e-5,o=Math.ceil(n.length/i);n=h.Buffer.concat([n,h.Buffer.alloc(o*i-n.length+1).fill(0)]);for(var s=[],c=0;c<o;c++){var d=h.Buffer.alloc(5);d.writeUInt16BE(t,0),d.writeUInt8(an,2),d.writeUInt16BE(c,3);var a=n.slice(c*i,(c+1)*i);s.push(h.Buffer.concat([d,a]))}return s},reduceResponse:function(r,n){var i=r||Mi,o=i.data,s=i.dataLength,c=i.sequence;if(n.readUInt16BE(0)!==t)throw new q("Invalid channel","InvalidChannel");if(n.readUInt8(2)!==an)throw new q("Invalid tag","InvalidTag");if(n.readUInt16BE(3)!==c)throw new q("Invalid sequence","InvalidSequence");r||(s=n.readUInt16BE(5)),c++;var d=n.slice(r?5:7);return o=h.Buffer.concat([o,d]),o.length>s&&(o=o.slice(0,s)),{data:o,dataLength:s,sequence:c}},getReducedResult:function(r){if(r&&r.dataLength===r.data.length)return r.data}}},cn=Gi;l();u();var ji=0,j=[],er=function(t,e,r){var n={type:t,id:String(++ji),date:new Date};e&&(n.message=e),r&&(n.data=r),Hi(n)},Xi=function(t){return j.push(t),function(){var e=j.indexOf(t);e!==-1&&(j[e]=j[j.length-1],j.pop())}};function Hi(t){for(var e=0;e<j.length;e++)try{j[e](t)}catch(r){console.error(r)}}typeof window<"u"&&(window.__ledgerLogsListen=Xi);var Vi=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function c(f){try{a(n.next(f))}catch(g){s(g)}}function d(f){try{a(n.throw(f))}catch(g){s(g)}}function a(f){f.done?o(f.value):i(f.value).then(c,d)}a((n=n.apply(t,e||[])).next())})},k=function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(f){return d([a,f])}}function d(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(f){a=[6,f],i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},zi=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){s={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o},Wi=[{vendorId:Q}],Ki=function(){return Promise.resolve(!!(window.navigator&&window.navigator.hid))},Ce=function(){var t=navigator.hid;if(!t)throw new q("navigator.hid is not supported","HIDNotSupported");return t};function ln(){return F(this,void 0,void 0,function(){var t;return k(this,function(e){switch(e.label){case 0:return[4,Ce().requestDevice({filters:Wi})];case 1:return t=e.sent(),Array.isArray(t)?[2,t]:[2,[t]]}})})}function rr(){return F(this,void 0,void 0,function(){var t;return k(this,function(e){switch(e.label){case 0:return[4,Ce().getDevices()];case 1:return t=e.sent(),[2,t.filter(function(r){return r.vendorId===Q})]}})})}function Yi(){return F(this,void 0,void 0,function(){var t,e;return k(this,function(r){switch(r.label){case 0:return[4,rr()];case 1:return t=r.sent(),t.length>0?[2,t[0]]:[4,ln()];case 2:return e=r.sent(),[2,e[0]]}})})}var Zi=function(t){Vi(e,t);function e(r){var n=t.call(this)||this;return n.channel=Math.floor(Math.random()*65535),n.packetSize=64,n.inputs=[],n.read=function(){return n.inputs.length?Promise.resolve(n.inputs.shift()):new Promise(function(i){n.inputCallback=i})},n.onInputReport=function(i){var o=h.Buffer.from(i.data.buffer);n.inputCallback?(n.inputCallback(o),n.inputCallback=null):n.inputs.push(o)},n._disconnectEmitted=!1,n._emitDisconnect=function(i){n._disconnectEmitted||(n._disconnectEmitted=!0,n.emit("disconnect",i))},n.exchange=function(i){return F(n,void 0,void 0,function(){var o,s=this;return k(this,function(c){switch(c.label){case 0:return[4,this.exchangeAtomicImpl(function(){return F(s,void 0,void 0,function(){var d,a,f,g,I,v,M,U,tr;return k(this,function(re){switch(re.label){case 0:d=this,a=d.channel,f=d.packetSize,er("apdu","=> "+i.toString("hex")),g=cn(a,f),I=g.makeBlocks(i),v=0,re.label=1;case 1:return v<I.length?[4,this.device.sendReport(0,I[v])]:[3,4];case 2:re.sent(),re.label=3;case 3:return v++,[3,1];case 4:return(M=g.getReducedResult(U))?[3,6]:[4,this.read()];case 5:return tr=re.sent(),U=g.reduceResponse(U,tr),[3,4];case 6:return er("apdu","<= "+M.toString("hex")),[2,M]}})})}).catch(function(d){throw d&&d.message&&d.message.includes("write")?(s._emitDisconnect(d),new rn(d.message)):d})];case 1:return o=c.sent(),[2,o]}})})},n.device=r,n.deviceModel=typeof r.productId=="number"?Ze(r.productId):void 0,r.addEventListener("inputreport",n.onInputReport),n}return e.request=function(){return F(this,void 0,void 0,function(){var r,n;return k(this,function(i){switch(i.label){case 0:return[4,ln()];case 1:return r=zi.apply(void 0,[i.sent(),1]),n=r[0],[2,e.open(n)]}})})},e.openConnected=function(){return F(this,void 0,void 0,function(){var r;return k(this,function(n){switch(n.label){case 0:return[4,rr()];case 1:return r=n.sent(),r.length===0?[2,null]:[2,e.open(r[0])]}})})},e.open=function(r){return F(this,void 0,void 0,function(){var n,i;return k(this,function(o){switch(o.label){case 0:return[4,r.open()];case 1:return o.sent(),n=new e(r),i=function(s){r===s.device&&(Ce().removeEventListener("disconnect",i),n._emitDisconnect(new en))},Ce().addEventListener("disconnect",i),[2,n]}})})},e.prototype.close=function(){return F(this,void 0,void 0,function(){return k(this,function(r){switch(r.label){case 0:return[4,this.exchangeBusyPromise];case 1:return r.sent(),this.device.removeEventListener("inputreport",this.onInputReport),[4,this.device.close()];case 2:return r.sent(),[2]}})})},e.prototype.setScrambleKey=function(){},e.isSupported=Ki,e.list=rr,e.listen=function(r){var n=!1;Yi().then(function(o){if(!o)r.error(new Qe("Access denied to use Ledger device"));else if(!n){var s=typeof o.productId=="number"?Ze(o.productId):void 0;r.next({type:"add",descriptor:o,deviceModel:s}),r.complete()}},function(o){r.error(new Qe(o.message))});function i(){n=!0}return{unsubscribe:i}},e}(sn),un=Zi;var $e={[T.rejected]:"denied by the user",[T.ledgerBusy]:"Ledger Device is busy",[T.disConnected]:Pe,[T.lockedDevice]:"LockedDeviceError"},Ji=t=>!!(T.wrongApp===t.message||t.name.match("TransportStatusError")||t.name.match("InvalidStateError")||t.name.match("Error")&&!t.message),Qi=async()=>{let{hid:t}=window.navigator;return t.getDevices?(await t.getDevices()).filter(r=>r.vendorId===Q)[0]:null},he=class{constructor(){this.ledgerTransPorter=null}static async hasConnectedLedger(){return!!await Qi()}static async requestLedgerDevice(){let{hid:e}=window.navigator,r=[];try{r=await e.requestDevice({filters:[{vendorId:Q}]})}catch{r=[]}return r}async initLedgerTransPorter(){return this.ledgerTransPorter||(this.ledgerTransPorter=await un.create()),this.ledgerTransPorter}throwTimeoutError(){return new Promise((e,r)=>{setTimeout(()=>{r(new Error("Timeout"))},ar)})}async checkLedgerConnection(){if(await he.hasConnectedLedger())await this.makeApp();else throw new Error(Pe)}handleErrors(e,r){throw e.message.match($e[T.rejected])?X.openModal(T.rejected):e.message.match($e[T.ledgerBusy])?X.openModal(T.ledgerBusy):e.message.match($e[T.disConnected])?X.openModal(T.disConnected):e.name===$e[T.lockedDevice]?X.openModal(T.lockedDevice):Ji(e)?X.openModal(T.wrongApp):e.name==="EthAppPleaseEnableContractData"||e.message.match("blind")?X.openModal(T.blindEnable,{network:Ee[r]}):ir.error({title:e.message}),new Error(sr)}makeApp(){throw new Error("you have to override this method")}getAddress(){throw new Error("you have to override this method")}signTransaction(){throw new Error("you have to override this method")}signPersonalMessage(){throw new Error("you have to override this method")}signMessage(){throw new Error("you have to override this method")}},Ed=he;export{er as a,ml as b,T as c,X as d,Qi as e,Ed as f};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-ITV6J4J2.js.map
