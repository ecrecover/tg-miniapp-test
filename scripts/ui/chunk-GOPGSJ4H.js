import{s as I}from"./chunk-S6N4IJX7.js";import{d as b}from"./chunk-6FR2UIE7.js";import{d as B,w as h,x as C}from"./chunk-7KCWBFQ2.js";import{d as P}from"./chunk-6FOZGMAL.js";import{d as w,f as R}from"./chunk-MAIAJ7GD.js";import{Ab as y,Kb as v,db as m,hb as k,ib as d,z as S,za as W}from"./chunk-X7YMANPZ.js";import{a as M}from"./chunk-6DDC4Y2S.js";import{f as L,m as x,o as F}from"./chunk-EQYVU4XP.js";x();F();var s=L(M());R();k();W();v();async function _({coinId:t,address:o,transaction:n}){let e={type:"simulate",base:{sequenceNumber:"",chainId:0,maxGasAmount:"",gasUnitPrice:"",expirationTimestampSecs:""},data:{abi:"[]",data:JSON.stringify(n)}},a=n.function.split("::")[0],r={coinId:t||m,address:o},i={fromAddr:o,toAddr:a},{info:u}=await B(r,i);e.base=u;let c=n.function.split("::")[1],p=await C({address:a,name:c});return e.data.abi=JSON.stringify(p),await w().signTransaction(e,o,S)}async function Y({address:t,transaction:o}){let n={coinId:m,address:t},e={fromAddr:t},a=await _({address:t,transaction:o}),{fee:r}=await h(n,e,a);return r}var Z=({coinId:t,address:o,requestId:n,gasUnitPrice:e,maxGasAmount:a}={})=>{let[r,i]=(0,s.useState)({}),[u,c]=(0,s.useState)(!0),[p,f]=(0,s.useState)(!1),l=P(t),N=()=>{c(!0),f(!1),i({})};function O(){i({gasUnitPrice:e,maxGasAmount:a,fee:d(e,a)}),f(!1),c(!1)}async function E(){try{let A={coinId:t,address:o},J={fromAddr:o},g="";n&&(g=await I(n));let T=await h(A,J,g);T&&l.current===t&&(i(T),f(!1))}catch{l.current===t&&f(!0)}finally{l.current===t&&c(!1)}}return(0,s.useEffect)(()=>{(async()=>{if(e&&a){O();return}!t||!o||await E()})()},[t,o,n,e,a]),{loading:u,aptosFee:r,estimateFailed:p,resetState:N}},$=()=>{let t=b();return(0,s.useMemo)(()=>{let n=t.find(e=>e.coinId==m)?.coinAmountInt||0;return y(n)},[m])};export{Y as a,Z as b,$ as c};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-GOPGSJ4H.js.map
