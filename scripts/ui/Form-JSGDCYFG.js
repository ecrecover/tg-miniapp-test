import{a as xe}from"./chunk-NEUC73MY.js";import{a as S}from"./chunk-UMBG4UN5.js";import{p as ye}from"./chunk-7G3IOU2S.js";import"./chunk-FSSAJWUE.js";import{a as Ie}from"./chunk-EYUJFPID.js";import"./chunk-QXSGLFJ4.js";import"./chunk-RQ4URFJV.js";import"./chunk-A7QDOMG2.js";import"./chunk-PCN4TJH3.js";import"./chunk-UV4CBWDM.js";import"./chunk-JZYFGUUR.js";import{a as ve}from"./chunk-55MBPFME.js";import"./chunk-ITV6J4J2.js";import"./chunk-E4R5GU2A.js";import{b as ke,c as G,d as R,e as Ee,f as Ne,g as Te,h as Ce,i as Se,j as Ue,k as De,l as A,m as H,n as K,o as Pe,p as Ae,q as z,r as Z,s as Be,t as Le,u as Re,v as $e,x as We,y as ze}from"./chunk-B3BQDXMX.js";import{a as be,d as W}from"./chunk-W5VVGPTJ.js";import"./chunk-IY5XPXLD.js";import"./chunk-N6T7YZKN.js";import"./chunk-CE2I3GSK.js";import"./chunk-SPMBQ3GG.js";import"./chunk-WWF4GAYE.js";import"./chunk-YITM3H6Z.js";import"./chunk-IQFXZKFW.js";import"./chunk-7BFUGHAL.js";import"./chunk-VSX7BSN7.js";import{a as ge}from"./chunk-V4V6C6NY.js";import{b as te}from"./chunk-ZQ5A3KPQ.js";import{a as we}from"./chunk-BGUY7SH3.js";import"./chunk-MJYAUOKI.js";import"./chunk-LI3NFLG3.js";import{e as _e}from"./chunk-FCCCJLF6.js";import{S as he,a as ue}from"./chunk-4Z4GXCHB.js";import{y as P}from"./chunk-FK3ETA6I.js";import"./chunk-QZDHFNHK.js";import"./chunk-6KPQELH2.js";import{a as de}from"./chunk-EJQOS3F4.js";import"./chunk-LHHZ5TAA.js";import"./chunk-PI6QLVMS.js";import"./chunk-QY4HIIR3.js";import"./chunk-XFWUEPSK.js";import"./chunk-MNNY2ODL.js";import"./chunk-VCAWL4NW.js";import{b as O}from"./chunk-T2OWRX3Y.js";import{j as fe}from"./chunk-C3FJ2D4V.js";import"./chunk-C5ZJZEPI.js";import"./chunk-LGHM3MOC.js";import"./chunk-2FULUWWG.js";import"./chunk-SLEUZTBQ.js";import"./chunk-4X6ZAX3L.js";import"./chunk-4QSQKIBZ.js";import{b as ce,c as rr}from"./chunk-OXVQDEZW.js";import{g as le,i as me,m as pe}from"./chunk-X3G52GGX.js";import"./chunk-WUKT6J7S.js";import"./chunk-FTJCOLFJ.js";import"./chunk-QG673PNL.js";import"./chunk-ZUFARSFM.js";import{A as oe,c as re,p as f}from"./chunk-6MTHEPGF.js";import{I as D,w as e}from"./chunk-ZQQ7HNWV.js";import"./chunk-Y62GSKHT.js";import"./chunk-2BXFMFMK.js";import{M as ae,S as N,Y as $,c as er}from"./chunk-ZOQTSYT4.js";import{a as U}from"./chunk-ADZWCU3Q.js";import"./chunk-FDI7TLXH.js";import"./chunk-L4HTIIR6.js";import"./chunk-733NI6T7.js";import"./chunk-EYWGNJVY.js";import"./chunk-TBVIGR5T.js";import"./chunk-FHQVMQUK.js";import"./chunk-XNS2NFYY.js";import{f as h,m as c,n as x,o as d}from"./chunk-REC7XVZY.js";c();d();var p=h(U()),Ve=h(P()),Qe=h(de());var Je=h(er());D();c();d();var F=h(U()),V=h(P());D();var Ze=(0,F.memo)(s=>{let{disabled:n}=s,i=(0,V.useDispatch)(),t=({target:{value:a}})=>{i(Se(a))},{name:o,nameErr:_}=(0,V.useSelector)(ke),v=()=>{i(Ue(e(o?"":"developer_mode_network_errortip_cannotspace")))},r=e("extension_wallet_addnetwork_placeholder_network");return F.default.createElement("div",{className:"net-form__wrap-input"},F.default.createElement(f,{value:o,onBlur:v,disabled:n,size:f.SIZE.xl,errorType:f.TIP_TYPE.always,error:_,onChange:t,placeholder:r,label:e("wallet_transaction_history_subtitle_network_name")}))});c();d();var B=h(U()),Y=h(P()),Ye=h(We());D();c();d();c();d();pe();async function Fe(s,n,i=[]){let t=s,o={"Content-Type":"application/json"},{origin:_,pathname:v,username:r,password:a,search:y}=new URL(s);if(r&&a){let m=x.Buffer.from(`${r}:${a}`).toString("base64");o.Authorization=`Basic ${m}`,t=`${_}${v}${y}`}let{data:w}=await me(t,{id:Date.now().toString(),jsonrpc:"2.0",method:n,params:i},{timeout:3e4,cache:"default",headers:o});if(!w||Array.isArray(w)||typeof w!="object")throw new Error(`RPC endpoint ${s} returned non-object response.`);let{error:g,result:I}=w;if(g)throw new Error(g?.message||g);return I}var Q=s=>{try{let n=new URL(s);return n.protocol==="http:"||n.protocol==="https:"}catch{return!1}},J=((s={})=>n=>new Promise((i,t)=>s[n]?i(s[n]):Fe(n,"eth_chainId").then(o=>{s[n]=o,i(o)}).catch(o=>{t(o)})))();var je=B.default.memo(s=>{let{disabled:n,modify:i}=s,t=(0,Y.useDispatch)(),[o,_]=(0,B.useState)(!1),v=({target:{value:m}})=>{t(De(m.trim()))},{rpcUrl:r,rpcUrlErr:a}=(0,Y.useSelector)(G),{rpcNetworks:y}=S(),{chainId:w}=(0,Y.useSelector)(R),g=()=>{if(!r)return t(A(e("developer_mode_network_errortip_cannotspace")));if(!Q(r))return t(A(e("developer_mode_infor_errortip_https")));if(!Ye.default.isWebUri(r))return t(A(e("developer_mode_infor_errortip_rpcurl")));let b=y.find(u=>u.rpcUrl===r);return b&&!i?t(A(e("developer_mode_infor_errortip_used_network",{network:b.name}))):(_(!0),J(r).then(u=>{try{u=parseInt(u,16).toString(10),i?u!==w&&t(K({err:e("developer_mode_infor_errortip_chainid",{chainID:u}),validChainId:w})):t(H(u))}catch{}_(!1),t(A(""))}).catch(()=>{t(A(e("developer_mode_infor_errortip_rpcurl"))),_(!1)}))},I=e("extension_wallet_addnetwork_placeholder_prcurl");return B.default.createElement("div",{className:"net-form__wrap-input"},B.default.createElement(f,{value:r,onBlur:g,disabled:n,size:f.SIZE.xl,errorType:f.TIP_TYPE.always,error:a,onChange:v,placeholder:I,label:e("developer_mode_network_title_rpcurl"),suffix:o&&B.default.createElement(N.Circle,{size:N.SIZE.sm})}))});c();d();var L=h(U()),j=h(P());D();rr();pe();var Me=L.default.memo(s=>{let{disabled:n}=s,i=(0,j.useDispatch)(),t=({target:{value:m}})=>{i(Ae(m.trim()))},{symbol:o,symbolErr:_,symbolTip:v,fieldUpdated:r}=(0,j.useSelector)(Ee),[a,y]=(0,L.useState)(!1),{chainId:w}=(0,j.useSelector)(R),g=()=>{let m="",b="";if(!w){i(z(m)),i(Z(b));return}if(!o){m=e("developer_mode_network_errortip_cannotspace"),i(z(m)),i(Z(b));return}y(!0),le(ce.getRpcNetworkByChainId,{chainIds:[w]}).then(({data:u})=>{if(y(!1),Array.isArray(u)){let l=u.find(E=>E.chainId.toString()===w);l?l?.nativeCurrency?.symbol!==o&&(b=e("developer_mode_infor_errortip_network_correct",{number:w,symbol:l.nativeCurrency?.symbol})):b=e("developer_mode_infor_errortip_errorname_rpcurl")}i(z(m)),i(Z(b))}).catch(u=>{console.log(u),b=e("developer_mode_infor_errortip_errorname_rpcurl"),y(!1),i(z(m)),i(Z(b))})},I=e("extension_wallet_addnetwork_placeholder_symbol");return L.default.createElement("div",{className:"net-form__wrap-input"},L.default.createElement(f,{value:o,disabled:n,onBlur:g,size:f.SIZE.xl,errorType:f.TIP_TYPE.always,error:_,tips:v,onChange:t,suffix:a&&r&&L.default.createElement(N.Circle,{size:N.SIZE.sm}),placeholder:I,label:e("developer_mode_network_title_tokenname")}))});c();d();var k=h(U()),M=h(P());D();var qe=k.default.memo(s=>{let{disabled:n,modify:i}=s,t=(0,M.useDispatch)(),o=({target:{value:l}})=>{t(H(l.trim()))},[_,v]=(0,k.useState)(!1),{chainId:r,chainIdErr:a,chainIdTip:y,fieldUpdated:w}=(0,M.useSelector)(R),{rpcUrl:g}=(0,M.useSelector)(G),{rpcNetworks:I}=S(),m=(l,E,T=r)=>{t(K({err:l,validChainId:T})),t(Pe({tip:E,validChainId:T}))},b=()=>{let l="",E="";if(!r)return l=e("developer_mode_network_errortip_cannotspace"),m(l,E);let T=r,ne=10;if(!T.startsWith("0x"))try{T=`0x${O(T)}`}catch{l=e("developer_mode_infor_errortip_errorchainid")}let[se]=I.filter(C=>C.chainId===T&&C.rpcUrl!==g);if(se?E=e("developer_mode_infor_errortip_network",{network:se.name}):r.startsWith("0x")?(ne=16,/^0x[0-9a-f]+$/iu.test(r)||(l=e("developer_mode_infor_errortip_errornum"))):/^[0-9]+$/u.test(r)?r.startsWith("0")?l=e("developer_mode_infor_errortip_errornum"):ze(parseInt(r,ne))||(l=e("developer_mode_infor_errortip_errorchainid")):l=e("developer_mode_infor_errortip_errornum"),!g||_||l)return m(l,E);v(!0),J(g).then(C=>{if(T!==C){if(!r.startsWith("0x"))try{C=parseInt(C,16).toString(10)}catch(Xe){console.log(Xe)}l=e("developer_mode_infor_errortip_chainid",{chainID:C})}m(l,E,r),v(!1)}).catch(()=>{E=e("developer_mode_infor_errortip_rpcurl_confirm"),v(!1),m(l,E,r)})},u=e("extension_wallet_addnetwork_placeholder_chainid");return k.default.createElement("div",{className:"net-form__wrap-input"},k.default.createElement(f,{value:r,disabled:n||!!i,size:f.SIZE.xl,errorType:f.TIP_TYPE.always,error:a,onBlur:b,tips:y,onChange:o,suffix:_&&w&&k.default.createElement(N.Circle,{size:N.SIZE.sm}),placeholder:u,label:k.default.createElement(k.default.Fragment,null,e("developer_mode_network_title_chainid"),k.default.createElement(oe,{title:e("developer_mode_network_tooltip_display_decimal"),placement:oe.DIRECTION.topRight},k.default.createElement(ae,{className:"okx-wallet-plugin-information-circle"})))}))});c();d();var q=h(U()),ie=h(P()),Oe=h(de());D();var Ge=s=>{let{modify:n,uniqueId:i}=s,t=(0,Oe.useHistory)(),o=(0,ie.useSelector)(Ce),_=ye(),{rpcNetworks:v,updateRpcNetwork:r,addRpcNetwork:a}=S(),{extensionConfig:y,setExtensionConfig:w}=Ie("rpc_info"),g=(0,ie.useSelector)(Te),I=v.find(u=>W(u,{uniqueId:i}))||{},m=(0,q.useRef)(!1),b=async()=>{if(!m.current){if(m.current=!0,n){let u=await r({...I,...g});W(u,y)&&await w(u);let l={...g,chainId:`0x${O(g.chainId)}`};_(l)}else await a(g);t.replace(`${he}?tab=2`),m.current=!1}};return q.default.createElement(we.FooterActions,null,q.default.createElement($,{disabled:o,category:$.CATEGORY.fill,type:$.TYPE.highlight,size:$.SIZE.lg,onClick:b},e("developer_mode_bot_btn_save")))};c();d();var X=h(U()),ee=h(P()),He=h(We());D();var Ke=X.default.memo(s=>{let{disabled:n}=s,i=(0,ee.useDispatch)(),t=({target:{value:a}})=>{i(Be(a.trim()))},{explorerUrl:o,explorerUrlErr:_}=(0,ee.useSelector)(Ne),v=()=>{let a="";o&&(He.default.isWebUri(o)||(Q(o)?a=e("developer_mode_infor_errortip_invalidurl"):a=e("developer_mode_infor_errortip_https1"))),i(Le(a))},r=e("extension_wallet_addnetwork_placeholder_blockchain");return X.default.createElement("div",{className:"net-form__wrap-input"},X.default.createElement(f,{value:o,onBlur:v,disabled:n,size:f.SIZE.xl,errorType:f.TIP_TYPE.always,error:_,onChange:t,placeholder:r,label:e("developer_mode_network_title_blockchain_explorer")}))});c();d();var Lo=()=>{let s=(0,Ve.useDispatch)(),n=(0,Qe.useHistory)(),i=ve(),t=i.get("modify"),o=t===be.CANT,_=decodeURIComponent(i.get("id")),{rpcNetworks:v}=S(),r=v.find(I=>W(I,{uniqueId:_}))||{};(0,p.useEffect)(()=>{let I={...r};I.chainId&&(I.chainId=`${Number.parseInt(I.chainId,16)}`),s(Re(I))},[r]),_e(()=>{s($e())});let a=(0,p.useCallback)(()=>{n.action==="POP"?n.replace(ue):n.goBack()},[n]),y=xe(),w=(0,p.useCallback)(()=>{y({editRpcInfo:r,onDeleted:a})},[y,a,r]),g=(0,p.useMemo)(()=>r.name?p.default.createElement("div",{className:"net-form__title"},p.default.createElement(te,{size:te.SIZE.md,src:r.icon,text:r.name,className:"net-form__title-icon",defaultIcon:fe}),p.default.createElement("div",{className:"net-form__title-text"},r.name)):e("wallet_extension_settings_header_custom_network"),[r]);return p.default.createElement("div",{className:(0,Je.default)("net-form",{disabled:o})},p.default.createElement(ge,{title:g,onBack:a,onClose:t&&!o?w:null,closeable:t&&!o?{icon:"okx-wallet-plugin-trash",style:{color:"var(--okd-color-semantic-negative)"}}:!1}),o||t?null:p.default.createElement(re,{className:"net-form__warn",desc:e("developer_mode_network_errortip_trust_network"),type:re.TYPE.warn,closable:!1}),p.default.createElement("div",{className:"net-form__wrap"},p.default.createElement(Ze,{disabled:o}),p.default.createElement(je,{disabled:o,modify:t}),p.default.createElement(qe,{disabled:o,modify:t}),p.default.createElement(Me,{disabled:o}),p.default.createElement(Ke,{disabled:o}),o?null:p.default.createElement(Ge,{modify:t,uniqueId:_})))};export{Lo as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=Form-JSGDCYFG.js.map
