import{a as He}from"./chunk-ZCMXJKLF.js";import{a as Re}from"./chunk-S5QLDYTK.js";import{a as Ke}from"./chunk-227RJHDX.js";import"./chunk-NKYZAXUF.js";import"./chunk-5TOXY4SK.js";import"./chunk-6XQF234D.js";import{a as We}from"./chunk-YIRM4FXI.js";import{b as Je}from"./chunk-LXF4L5CX.js";import{a as Me,b as V}from"./chunk-OCYNCTHD.js";import{a as Ue}from"./chunk-NOTB7SV5.js";import{a as Fe}from"./chunk-3DHD7TXN.js";import{a as te}from"./chunk-XZRYRRSY.js";import{a as Ve}from"./chunk-ZZGZKS3R.js";import{a as Oe}from"./chunk-H3UB6HJY.js";import{a as ee}from"./chunk-2PABOPC7.js";import{a as Pe}from"./chunk-L5SUUM6Z.js";import"./chunk-LI6XM372.js";import"./chunk-6X5S5KKW.js";import"./chunk-RC5IAFKK.js";import"./chunk-IHPHPUUG.js";import"./chunk-ZEWK7OGU.js";import"./chunk-QVA4WXOQ.js";import"./chunk-EX22SDGB.js";import"./chunk-VTLNAOHG.js";import"./chunk-Y7YPG2EJ.js";import"./chunk-7R67VE77.js";import"./chunk-NHGZUGLZ.js";import"./chunk-G5LEAVCY.js";import"./chunk-ACHWU2H6.js";import"./chunk-ZPFBKNRM.js";import"./chunk-7DP5LYUM.js";import"./chunk-BVXKJJ4A.js";import"./chunk-TBBE7OKY.js";import"./chunk-7HJDVUH5.js";import"./chunk-BLQO46DT.js";import"./chunk-LEADLFDQ.js";import"./chunk-TK6JYPIW.js";import"./chunk-OS6E6KVM.js";import"./chunk-WY46TT4P.js";import"./chunk-MTMUCMTY.js";import"./chunk-ZD4EJWX6.js";import"./chunk-IINHHLHP.js";import"./chunk-DY2YURLY.js";import"./chunk-KXZSXP3G.js";import"./chunk-6HXVFU7V.js";import"./chunk-D5FMQLJG.js";import"./chunk-3I7UBQEQ.js";import"./chunk-DXRBY5MU.js";import"./chunk-6FR2UIE7.js";import{h as J,i as X}from"./chunk-5GMHHIH5.js";import{O as $e}from"./chunk-7KCWBFQ2.js";import"./chunk-QLUP7GYN.js";import"./chunk-7Y44NCE5.js";import"./chunk-BKPOG6ZD.js";import"./chunk-OZMVWMFO.js";import"./chunk-KTO7CPX7.js";import"./chunk-P3XTPXPO.js";import"./chunk-4IY6P5HR.js";import"./chunk-FQWGOLDH.js";import"./chunk-QEPBNPHF.js";import"./chunk-3JLS3TGD.js";import"./chunk-KDP5Z4RF.js";import"./chunk-W234FNSM.js";import{b as W}from"./chunk-MO7YHFES.js";import"./chunk-CLWWTOKP.js";import{a as F}from"./chunk-KZ2PCELG.js";import"./chunk-C7ZG4INB.js";import"./chunk-J5ANWCEO.js";import{r as be,s as ze}from"./chunk-VMO2INN3.js";import"./chunk-J4TF3RT7.js";import{a as Be,c as Y}from"./chunk-6FOZGMAL.js";import{X as Q,f as O,la as U,w as H}from"./chunk-2MV3WEYP.js";import{n as Ne,ob as De,qb as Le,t as Z,u as j,w as Te,y as Ie}from"./chunk-HPXM6RSK.js";import"./chunk-IUIJ46C3.js";import"./chunk-KZ3ZU675.js";import{a as ue}from"./chunk-NJ5CWPUY.js";import"./chunk-UMJMJOW4.js";import"./chunk-YTJBYVBO.js";import"./chunk-QO3243S4.js";import"./chunk-O5JCC6KG.js";import"./chunk-MAIAJ7GD.js";import{f as xe}from"./chunk-4PGNX6E2.js";import{l as ke}from"./chunk-RT4Y2U5N.js";import"./chunk-2VHH444P.js";import{f as q,l as ge}from"./chunk-MGLVPWSV.js";import"./chunk-TXKWPME2.js";import"./chunk-4D3M2I6W.js";import"./chunk-AMVK42SC.js";import"./chunk-D6RIE45O.js";import"./chunk-XCAARJ7Q.js";import{c as Ae}from"./chunk-JXCCIV3J.js";import"./chunk-AOA7NX2Y.js";import"./chunk-HXZH2DHB.js";import"./chunk-MZG4RHXJ.js";import"./chunk-VTST2UXT.js";import{Ac as we,Kb as ct,ba as Ce,pb as fe,q as ve,t as pe,ua as Se,uc as Ee,za as _e}from"./chunk-X7YMANPZ.js";import"./chunk-IRITFTWC.js";import{A as de,D as G,n as R,x as K}from"./chunk-SOHTSUTI.js";import{I as P,w as a}from"./chunk-RPZQDAIQ.js";import"./chunk-LDRI4AYU.js";import"./chunk-E24EBHFY.js";import{M as he,Y as ye,c as at}from"./chunk-V4F2JFTP.js";import{a as $}from"./chunk-6DDC4Y2S.js";import"./chunk-TEY24VZN.js";import"./chunk-RKHQOOTU.js";import"./chunk-KJOC4LFM.js";import"./chunk-6FDO4Y56.js";import"./chunk-NNZ5SU5W.js";import"./chunk-F4JTGWJH.js";import"./chunk-YUXYCITH.js";import"./chunk-RMV3AS5X.js";import"./chunk-TEKDZ77C.js";import"./chunk-NC54RUAI.js";import"./chunk-YR74Q3QD.js";import{f as A,m as i,o as r}from"./chunk-EQYVU4XP.js";i();r();var nt=A($());i();r();var h=A($()),Ye=A(ue());P();_e();ct();i();r();function dt(){let o=Re(),m=Ke(),n=Pe(),t=Fe();return async c=>{let d=await o(c),p=await m({coinId:c.coinId}),y=await n({coinId:c.coinId});return!d||!p||!y?Promise.reject():(await t(c),Promise.resolve())}}var oe=dt;i();r();var s=A($()),qe=A(at());P();i();r();var Ge=A(ue());var pt=(o,m)=>{let n=(0,Ge.useHistory)();return t=>{let c=W({from:o[t.addressType]}),d=W({coinId:t.coinId,addressType:t.addressType}),p=m==="send"?`${O}/${t.coinId}${U}${c}`:`${H}${d}`;n.push(p)}},ie=pt;i();r();P();var Ze=A(Ie()),_t=o=>{let m=(0,Ze.useSelector)(Le);return n=>{let t=we[n.addressType],c=Ne(o[t]),d=a(Ee[t]),p=ze(n.coinAmount),y=be(n.currencyAmount,{useApproximate:!1,symbol:m.symbol});return{addressDisplay:c,addressTypeDisplay:d,amountDisplay:p,currencyAmountDisplay:y}}},re=_t;i();r();var u={container:"_container_zvzhn_1","setting-nav":"_setting-nav_zvzhn_6",settingNav:"_setting-nav_zvzhn_6",body:"_body_zvzhn_9",item:"_item_zvzhn_12","item-left":"_item-left_zvzhn_21",itemLeft:"_item-left_zvzhn_21","item-right":"_item-right_zvzhn_24",itemRight:"_item-right_zvzhn_24","item-right-top":"_item-right-top_zvzhn_27",itemRightTop:"_item-right-top_zvzhn_27","item-right-bottom":"_item-right-bottom_zvzhn_32",itemRightBottom:"_item-right-bottom_zvzhn_32","item-icon":"_item-icon_zvzhn_37",itemIcon:"_item-icon_zvzhn_37","item-address":"_item-address_zvzhn_41",itemAddress:"_item-address_zvzhn_41","item-address-type":"_item-address-type_zvzhn_48",itemAddressType:"_item-address-type_zvzhn_48","item-currency-amount":"_item-currency-amount_zvzhn_60",itemCurrencyAmount:"_item-currency-amount_zvzhn_60","item-amount":"_item-amount_zvzhn_71",itemAmount:"_item-amount_zvzhn_71",infoIcon:"_infoIcon_zvzhn_82",title:"_title_zvzhn_85",tip:"_tip_zvzhn_93",subTitle:"_subTitle_zvzhn_94"};var je="SelectBTCAddress_has_opened_tip_on_dlg",ft=({visible:o,onClose:m,coin:n,type:t})=>{let c=localStorage.getItem(je),d=J(n?.localType),[p,y]=(0,s.useState)(!c),N=Oe(n),v=t==="send"?N.filter(_=>_.coinAmount>0):N,S=re(d),E=ie(d,t),w=()=>{y(!1),localStorage.setItem(je,!0)},l=()=>t==="send"?a("extension_defi_top_tooltips_only_usage_utxo_value_icu",{chainName:n?.chainName}):a("extension_defi_top_tooltips_only_usage_utxo_icu",{chainName:n?.chainName});return s.default.createElement("div",null,s.default.createElement(R.Action,{onClose:m,visible:o,width:"lg",noTopRadius:!0,animateDisable:!0,mask:!1,hideCloseBtn:!0,alignBottom:!0,noContentPadding:!0,windowStyle:{height:"100vh",maxHeight:"100%",overflow:"hidden",width:"100%"}},s.default.createElement("div",{className:u.container},s.default.createElement(F,{className:"setting-nav",title:a("extension_defi_top_header_title_select_address_type"),onBack:()=>{m()},closeable:!1},s.default.createElement(de,{width:310,placement:de.DIRECTION.bottomRight,title:l()},s.default.createElement(he,{"data-testid":"top-header-info-icon",className:(0,qe.default)("okds-information-circle",u.infoIcon)}))),s.default.createElement("div",{className:u.body},s.default.createElement("div",{className:u.list},v.map(_=>{let{addressDisplay:D,addressTypeDisplay:L,amountDisplay:e,currencyAmountDisplay:I}=S(_);return s.default.createElement("div",{"data-testid":"select-btc-address-item",className:u.item,onClick:()=>{E(_)}},s.default.createElement("div",{className:u.itemLeft},s.default.createElement(G,{width:32,height:32,alt:L,src:_.image,errorImg:q,className:u.itemIcon})),s.default.createElement("div",{className:u.itemRight},s.default.createElement("div",{className:u.itemRightBottom},s.default.createElement("div",{className:u.itemAddressType},L),s.default.createElement("div",{className:u.itemAmount},e)),s.default.createElement("div",{className:u.itemRightTop},s.default.createElement("div",{className:u.itemAddress},D),s.default.createElement("div",{className:u.itemCurrencyAmount},I))))}))))),s.default.createElement(R.Confirmation,{visible:o&&p,confirmText:a("wallet_extension_btn_general_gotit"),onConfirm:w,onClose:w,confirmBtnProps:{size:ye.SIZE.lg}},s.default.createElement("div",{className:u.container},s.default.createElement("div",{className:u.title},a("extension_defi_popup_title_btc_address_type_icu",{chainName:n?.chainName})),s.default.createElement("div",{className:u.tip},a("extension_defi_popup_desc_btc_address_type_icu",{chainName:n?.chainName})))))},ne=ft;i();r();var M=A($());P();function ut({list:o,pageType:m,isVirtualList:n,onSearch:t,renderEmpty:c,getItemProps:d,loading:p,loadingMore:y,...N},v){let{currentNetworkUniqueId:S}=te(),E=(0,M.useMemo)(()=>{let l=o.map(D=>({...D,symbolName:D.symbol}));return ke(l,S,m==="send")},[S,o]),w=l=>{let _,{baseCoinId:D,childrenCoin:L,tokenType:e,aggregation:I}=l;if(m==="send"){let x=(L||[]).filter(C=>C.currencyAmount>0);I&&x.length>1?_=a("wallet_manage_crypto_labels_crypto_multichain"):_=D===0?"":e}else _=I?a("wallet_manage_crypto_labels_crypto_multichain"):e;let B=d?d(l):{};return{name:l.name,tag:_,...B}};return M.default.createElement(Me,{headerProps:{closeable:!1,title:a("wallet_transfer_send_select_coin_maintitle_select_coin")},...N,searchPlaceholder:a("wallet_transfer_send_select_coin_placeholder_input_name"),list:E,onSearch:t,getItemProps:w,renderEmpty:c,isVirtualList:n,loadingMore:y,loading:p,ref:v})}var se=(0,M.forwardRef)(ut);i();r();var g=A($());P();i();r();var T={container:"_container_10hvf_1",body:"_body_10hvf_6",item:"_item_10hvf_9","item-left":"_item-left_10hvf_18",itemLeft:"_item-left_10hvf_18","item-right":"_item-right_10hvf_21",itemRight:"_item-right_10hvf_21","item-right-top":"_item-right-top_10hvf_24",itemRightTop:"_item-right-top_10hvf_24","item-right-bottom":"_item-right-bottom_10hvf_29",itemRightBottom:"_item-right-bottom_10hvf_29","item-icon":"_item-icon_10hvf_34",itemIcon:"_item-icon_10hvf_34","item-address":"_item-address_10hvf_38",itemAddress:"_item-address_10hvf_38","item-address-type":"_item-address-type_10hvf_45",itemAddressType:"_item-address-type_10hvf_45","item-currency-amount":"_item-currency-amount_10hvf_57",itemCurrencyAmount:"_item-currency-amount_10hvf_57","item-amount":"_item-amount_10hvf_68",itemAmount:"_item-amount_10hvf_68"};var gt=({visible:o,onClose:m,coin:n,type:t})=>{let c=X(),d=He(n),p=t==="send"?d.filter(v=>v.coinAmount>0):d,y=re(c),N=ie(c,t);return g.default.createElement("div",null,g.default.createElement(R.Action,{noTopRadius:!0,alignBottom:!0,hideCloseBtn:!0,animateDisable:!0,noContentPadding:!0,onClose:m,visible:o,windowStyle:{width:"100%",height:"100%",maxHeight:"100%",overflow:"hidden"}},g.default.createElement("div",{className:T.container},g.default.createElement(F,{className:"setting-nav",title:a("extension_defi_top_header_title_select_address_type"),onBack:m,closeable:!1}),g.default.createElement("div",{className:T.body},g.default.createElement("div",{className:T.list},p.map(v=>{let{addressDisplay:S,addressTypeDisplay:E,amountDisplay:w,currencyAmountDisplay:l}=y(v);return g.default.createElement("div",{className:T.item,onClick:()=>{N(v)}},g.default.createElement("div",{className:T.itemLeft},g.default.createElement(G,{width:32,height:32,alt:E,src:v.image,errorImg:q,className:T.itemIcon})),g.default.createElement("div",{className:T.itemRight},g.default.createElement("div",{className:T.itemRightBottom},g.default.createElement("div",{className:T.itemAddressType},E),g.default.createElement("div",{className:T.itemAmount},w)),g.default.createElement("div",{className:T.itemRightTop},g.default.createElement("div",{className:T.itemAddress},S),g.default.createElement("div",{className:T.itemCurrencyAmount},l))))}))))))},me=gt;i();r();var le={empty:"_empty_68vmq_1",emptyResult:"_emptyResult_68vmq_5"};function ht(){let o=(0,Ye.useHistory)(),m=V(),n=ee(),t=(0,h.useMemo)(()=>(n||[]).filter(e=>fe(e.coinAmount,0)),[n]),c=oe(),[d,p]=(0,h.useState)(!1),[y,N]=(0,h.useState)(!1),[v,S]=(0,h.useState)(null),E=J(),w=J(pe),l=X(),_=(e,I)=>{let B=e.childrenCoin.filter(x=>x.coinId===e.coinId&&fe(x.coinAmount,0));if(B.length===1){let x=I[B[0].addressType];o.push({pathname:`${O}/${e.coinId}${U}`,search:`?from=${x}`})}return null},D=async e=>{if(Z(e)){e.localType===pe?_(e,w):_(e,E),S(e),p(!0);return}if(j(e)){_(e,l),S(e),N(!0);return}await c(e);let I,B,C=(e.childrenCoin||[]).filter(k=>k.currencyAmount>0);C.length>1&&e.aggregation?(I=Q,B=`coinKey=${encodeURIComponent(e.key)}&aggregationSymbol=${e.symbol}&type=${m}`):C.length===1&&e.aggregation?I=`${O}/${C[0].coinId}${U}`:I=`${O}/${e.coinId}${U}`,o.push({pathname:I,search:B})};return t.length===0?h.default.createElement(Ae.Container,null,h.default.createElement(F,{closeable:!1,title:a("wallet_transfer_send_select_coin_maintitle_select_coin")}),h.default.createElement(K.State,{className:le.empty,title:a("wallet_transfer_maintitle_not_any_token")})):h.default.createElement(h.default.Fragment,null,h.default.createElement(se,{list:t,renderEmpty:e=>h.default.createElement(K.State,{className:le.emptyResult,title:a("wallet_extension_send_toast_unfoundcrypto",{crypto:h.default.createElement("span",{className:le.emptyText},e)})}),onClick:D,pageType:"send"}),h.default.createElement(ne,{visible:d,onClose:()=>{p(!1)},coin:v,type:"send"}),h.default.createElement(me,{visible:y,onClose:()=>{N(!1)},coin:v,type:"send"}))}var Qe=ht;i();r();var z=A($()),ot=A(Ie()),it=A(ue());P();i();r();var Xe=A($());_e();function et(){let o=ee(),m=Y(()=>Array.from(new Set(We(o).map(l=>l.coinId))),[o]),n=Ue(),[t,c]=(0,Xe.useState)(""),d=Be(l=>{c(l)}),p=Ve(),{data:y,loading:N,loadingMore:v,listRef:S}=Je({aggregation:!0,symbolLike:t,chainIds:p!==""?[Number(p)]:void 0,excludeCoinIds:m},{reloadDeps:[t],enable:!n}),E=Y(()=>new Set(o.map(l=>l.aggregation?l.symbol:l.coinId)),[o]);return{list:Y(()=>{let l=y?.list??[];return[...t?o.filter(L=>L.symbol?.toLowerCase().includes(t.toLowerCase())):o,...l].filter(({coinId:L,baseCoinId:e})=>!Se(L,e))},[o,E,y?.list]),listRef:S,search:t,onSearch:d,loading:N,loadingMore:v,isSearching:N&&!!t}}_e();i();r();var tt={empty:"_empty_1umri_1"};function yt(){let o=(0,it.useHistory)(),{keyringIdentityType:m}=(0,ot.useSelector)(De),{currentNetworkUniqueId:n}=te(),t=V(),c=oe(),{list:d,listRef:p,onSearch:y,loading:N,loadingMore:v,isSearching:S}=et(),[E,w]=(0,z.useState)(!1),[l,_]=(0,z.useState)(!1),[D,L]=(0,z.useState)(null),e=C=>{if(C?.childrenCoin?.length===1){let{addressType:k}=C.childrenCoin[0]||{},f=W({coinId:C.coinId,addressType:k});o.push(`${H}${f}`)}},I=async C=>{let k=Te(C),f;if(k){if(f=await $e(C),n!==""&&f?.aggregation&&(f=f.childrenCoin?.find(lt=>lt.chainId===Number(n))??null),!f)return}else f=C;if(Z(f)){L(f),w(!0);return}if(j(f)){e(f),L(f),_(!0);return}await c(f);let ae,ce,st=f.aggregation,mt=f.childrenCoin??[];st&&mt.length>0?(ae=Q,ce=`coinKey=${encodeURIComponent(f.key)}&aggregationSymbol=${f.symbol}&type=${t}`):(ae=H,ce=`coinId=${f.coinId}`),o.push({pathname:ae,search:ce})},B=(0,z.useCallback)(C=>{let k={};return C.localType===ve&&C.coinId===Ce&&xe(m)&&(k.tag=a("extension_wallet_footer_alert_asset_notsupported")),k},[m]);return z.default.createElement(z.default.Fragment,null,z.default.createElement(se,{list:S?[]:d,onClick:I,getItemProps:B,isVirtualList:!1,onSearch:y,ref:p,renderEmpty:()=>z.default.createElement(K.State,{className:tt.empty,title:a("commonall_emptystate_text_no_results")}),loadingMore:v||N&&!S,loading:S}),z.default.createElement(ne,{visible:E,onClose:()=>{w(!1)},coin:D,type:"receive"}),z.default.createElement(me,{visible:l,onClose:()=>{_(!1)},coin:D,type:"receive"}))}var rt=yt;var vt={[ge.SEND]:Qe,[ge.RECEIVE]:rt};function Ct(){let o=V(),m=vt[o];return m?nt.default.createElement(m,null):null}var Ri=Ct;export{Ri as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=select-coin-6TSIPJ4B.js.map
