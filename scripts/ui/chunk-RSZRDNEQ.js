import{b as c}from"./chunk-LWWOGE47.js";import{d as S}from"./chunk-PNKC4I7V.js";import{Ra as _,Wa as E}from"./chunk-FK3ETA6I.js";import{f as w,g as i,o as K}from"./chunk-LHHZ5TAA.js";import{a as P,b as p,g,l as B}from"./chunk-PI6QLVMS.js";import{X as b,p as x,q as A,r as v}from"./chunk-QY4HIIR3.js";import{a as k}from"./chunk-XFWUEPSK.js";import{c as T,d as f,f as O}from"./chunk-MNNY2ODL.js";import{f as h,m as l,o as m}from"./chunk-REC7XVZY.js";l();m();var X={gasReturn:"freeGasPlugin"},j={availableTimesLimit:"wallet_extension_freegas_notif_daily_gas",exceedGasLimit:"wallet_extension_freegas_notif_exceeds_limit",exceedTodayGasLimit:"wallet_extension_freegas_notif_limit_reached",walletAssetNotEnough:"walletAssetNotEnough"},U={saveTxCommon:170001,notStart:170003,exceededTheLimit:170004,exceedingTheSubsidyLimit:170006,walletAssetNotEnough:170007},R=Object.values(U),q={transfer:1,dex:2,dapp:3,nft:4,approval:5};l();m();function C(e){return R.indexOf(e)!==-1}l();m();var u=h(k());O();K();B();b();function H(e){return{type:A,message:e.message}}function s(e){return(n,r)=>{let t=r(),{unapprovedTxs:a,unapprovedMsgs:o,unapprovedPersonalMsgs:d,unapprovedTypedMessages:y,network:G}=t.metamask,{chainId:L}=E(t),I=_(a,o,d,y,G,L).filter(N=>N.id!==e);n({type:x,value:{id:e,unconfirmedActionsCount:I.length}})}}function F(e,n){return{type:v,id:e,value:n}}function le(e,n){return async r=>{e.walletId=n;try{await r(S({txData:e,walletId:n}))}catch(t){throw r(g()),t}return new Promise((t,a)=>{T().updateAndApproveTransaction(e,(o,d)=>{if(o)try{let y=o.data.originalError;if(C(y.code)){a(o);return}}catch{}if(r(F(e.id,e.txParams)),r(p()),o){r(H(o)),r(P()),u.default.error(o.message),a(o);return}e.hash=d.hash,e.serverTxId=d.serverTxId,t(e)})}).then(()=>w()).then(t=>r(i(t))).then(()=>(r(p()),r(s(e.id)),r(g()),r(c()),e)).catch(t=>{throw r(g()),t})}}function me(e){return async n=>{let r;try{r=await f().cancelMessage(e.id)}catch(t){u.default.error(t)}return n(i(r)),n(s(e.id)),n(c()),e}}function fe(e){return async n=>{let r;try{r=await f().cancelPersonalMessage(e.id)}catch(t){u.default.error(t)}return n(i(r)),n(s(e.id)),n(c()),e}}function de(e){return async n=>{let r;try{r=await f().cancelDecryptMessage(e.id)}catch(t){u.default.error(t)}return n(i(r)),n(s(e.id)),n(c()),e}}function ye(e){return async n=>{let r;try{r=await f().cancelEncryptionPublicKey(e.id)}catch(t){u.default.error(t)}return n(i(r)),n(s(e.id)),n(c()),e}}function pe(e){return async n=>{let r;try{r=await f().cancelTypedMessage(e.id)}catch(t){u.default.error(t)}return n(i(r)),n(s(e.id)),n(c()),e}}function ge(e,n=!0){return r=>new Promise((t,a)=>{T().cancelTransaction(e.id,o=>{if(o){a(o);return}t()})}).then(()=>w()).then(t=>r(i(t))).then(()=>(r(p()),r(s(e.id)),n&&r(c()),e)).catch(t=>{throw t})}export{X as a,j as b,U as c,q as d,C as e,s as f,le as g,me as h,fe as i,de as j,ye as k,pe as l,ge as m};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-RSZRDNEQ.js.map
