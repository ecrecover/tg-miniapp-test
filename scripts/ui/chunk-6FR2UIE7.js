import{a as y}from"./chunk-5GMHHIH5.js";import{g as w,k as A,m as F}from"./chunk-7Y44NCE5.js";import{c as W,l as M}from"./chunk-6FOZGMAL.js";import{ta as T,y as G}from"./chunk-HPXM6RSK.js";import{d as g,f as k}from"./chunk-MAIAJ7GD.js";import{m as b}from"./chunk-X7YMANPZ.js";import{a as O}from"./chunk-6DDC4Y2S.js";import{f as C,m as B,o as m}from"./chunk-EQYVU4XP.js";B();m();var s=C(O()),f=C(G());var R=C(b());B();m();k();async function P(e,n){return(await g().getWalletsBalance({walletIds:e,chainId:n})).map(a=>({walletId:a?.walletId,balanceData:a?.balanceData,coinsMap:a?.coins.reduce((t,c)=>(t[c.coinId]=c,t),{})}))}async function x(e){return(await P([e])).find(r=>r.walletId===e)}async function j({walletIds:e,chainId:n,coinId:r,flatten:a=!1}){let t=await g().getWalletsCoinBalance({walletIds:e,chainId:n,coinId:r}),c={};return t.forEach(u=>{let l=u.coins.reduce((o,i)=>(o[i.coinId]=i,o),{}),D=u.balanceCoins,d=[],E=["walletId","default"];D.forEach(o=>{if(o.childrenCoin){let i=o.childrenCoin.map(p=>({...p,...l[p.coinId]}));a?(i.forEach(p=>{E.forEach(h=>{p[h]=o[h]})}),d.push(...i)):d.push({...o,...l[o.coinId],childrenCoin:i})}else d.push({...o,...l[o.coinId]})}),c[u.walletId]=d}),c}function S(e,n,r){let a=y(),{data:t,run:c}=M(x,{manual:!0,cacheKey:n});return(0,s.useEffect)(()=>{n&&n!==a&&c(n)},[n,a]),(0,s.useMemo)(()=>l=>n&&n!==a?t?e(l,n,t):r:e(l,a),[e,n,a,t,r])}var q=e=>{let n=(0,s.useRef)({}),r=S(A,e,n.current),a=(0,f.useSelector)(r);return W(()=>a[e],[a,e])},X=e=>{let n=q(e),a=((0,f.useSelector)(T)[e]??[]).map(t=>w(t));return(0,R.uniqBy)([...n?.coins??[],...a],t=>`${t.coinId}_${"addressType"in t?t.addressType:0}`)},K=()=>{let e=y();return q(e)},Y=()=>K()?.coins??[];function Z(e){let n=(0,s.useRef)([]),r=S(F,e,n.current);return(0,f.useSelector)(r)}export{j as a,q as b,X as c,Y as d,Z as e};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "prepub";

//# sourceMappingURL=chunk-6FR2UIE7.js.map
